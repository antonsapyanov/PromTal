{% extends "admin/layout.html" %}

{% block title %}Structure{% endblock %}
{% block content %}
<div class="container-fluid">
    <h2>Company structure</h2>
    <ul class="metisFolder">
    {%- for dep in departments recursive %}
        <li>
          <a href="#">
            {%- if dep.dep_list -%}
                <span class="fa fa-plus-square-o"></span>
            {%- else %}
                <span class="fa fa-square-o"></span>
            {%- endif %}
            {{ dep.name }}
            <div class="glyphicon glyphicon-user" onClick="window.location.href = '{{ url_for('admin.department_info', dep_id=dep.id) }}';"></div>
            <div class="glyphicon glyphicon-pencil" onClick="window.location.href = '{{ url_for('admin.edit_structure', dep_id=dep.id) }}';"></div>
            <div class="glyphicon glyphicon-plus" onClick="window.location.href = '{{ url_for('admin.add_structure', dep_id=dep.id) }}';"></div>
            <div class="glyphicon glyphicon-minus" onClick="window.location.href = '{{ url_for('admin.delete_structure', dep_id=dep.id) }}';"></div>
          </a>
                
        {%- if dep.dep_list -%}
            <ul><p>{{ loop(dep.dep_list) }}</p></ul>
        {%- endif %}</li>
    {%- endfor %}
    </ul>
</div>
<script>
$(document).ready(function() {
  $('.metisFolder').metisMenu({
    toggle: false
  });
});
</script>
{% endblock %}