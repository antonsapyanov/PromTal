function markup(e){function t(e){function t(t,n){var a=(""+Math.random()).replace("0.","");return s[a]=n,"["+e+":"+a+"]"}return t}function n(e){function t(t,n,a){return e.format(s[n]).trim()}return t}var a,s={};return a=e.replace("<","&lt;").replace(">","&gt;"),a=a.replace("...","&hellip;"),a=a.replace(/(^|\s)+--(\s|$)+/gi,"$1&mdash;$2"),a=a.replace(/\[raw](.*?)\[\/raw]/gi,t("raw")),a=a.replace(/\[code](.*?)\[\/code]/gi,t("code")),a=a.replace(/\/\/\/(.+?)\/\/\//gi,"<i>$1</i>"),a=a.replace(/\+\+\+(.+?)\+\+\+/gi,"<b>$1</b>"),a=a.replace(/---(.+?)---/gi,"<del>$1</del>"),a=a.replace(/___(.+?)___/gi,"<ins>$1</ins>"),a=a.replace(/(^|\s)(.+):\/\/(.+?)($|\s)/gi,'$1<a href="$2://$3">$2://$3</a>$4'),a=a.replace(/\[raw:(.*?)]/gi,n("{0}")),a=a.replace(/\[code:(.*?)]/gi,n("<code>{0}</code>")),a=addSmiles(a)}function addSmiles(e){for(var t in smiles)for(var n in smiles[t])e=e.replace(smiles[t][n],'<img src="'+t+'" class="smile" alt=""/>');return e}function locationReload(){window.location.reload()}function tinymceInit(){tinymce.init({selector:"textarea.editor",language:"ru",height:300,convert_urls:!1,menu:{format:{title:"Format",items:"bold italic underline strikethrough| formats | removeformat"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"link image media | pagebreak charmap hr"},view:{title:"View",items:"visualblocks visualaid | preview print"},table:{title:"Table",items:"inserttable tableprops deletetable | cell row column"}},plugins:["pagebreak autoresize textpattern","advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern imagetools"],textpattern_patterns:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"h1",format:"h1"},{start:"h2",format:"h2"},{start:"h3",format:"h3"},{start:"h4",format:"h4"},{start:"h5",format:"h5"},{start:"h6",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],toolbar1:"undo redo | bold italic | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",statusbar:!1,pagebreak_separator:"<!-- page break -->",file_picker_callback:function(e,t,n){if("image"==n.filetype){var a=$('<form id="file_upload_form" action="/file/upload/image" style="display: none" method="post" enctype="multipart/form-data"></form>'),s=$('<input type="file" name="file" />');a.append(s),$("body").append(a),s.on("change",function(){a.submit()}),a.submit(function(t){t.preventDefault();var n=new FormData($("#file_upload_form")[0]);return $.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:n,cache:!1,contentType:!1,processData:!1,success:function(t){a.remove(),e(t.file.url)},error:function(){alert("error in ajax form submission")}}),!1}),s.trigger("click")}},setup:function(e){e.on("init",function(){this.getDoc().body.style.fontSize="12px"}),e.on("change",function(){tinymce.triggerSave()})}})}function dateDiffInDays(e,t){var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/_MS_PER_DAY)}function niceDateFormat(e,t){var n=new Date;return e?(t=t||!0,e=new Date(e),0==dateDiffInDays(n,e)?e.format("Сегодня"+(t?" в HH:MM":"")):-1==dateDiffInDays(n,e)?e.format("Вчера"+(t?" в HH:MM":"")):1==dateDiffInDays(n,e)?e.format("Завтра"+(t?" в HH:MM":"")):e.format("dd.mm.yy"+(t?" в HH:MM":""))):""}function mediaFill(e){var t=$(e),n=$(e).closest(".media"),a="contain",s=n[0].offsetHeight,r=n[0].offsetWidth,i=t[0].naturalHeight,o=t[0].naturalWidth;i>=s&&o>=r&&(a="cover"),n.removeClass("contain").removeClass("cover").addClass(a)}function LazyPaginator(e){this.url=e.url||null,this.targetElem=$(e.targetElem)||null,this.buttonMore=$(e.buttonMore)||null,this.render=e.render||function(){},this.posts=[],this.nextPage=1,this.pagesAmount=0,this.init=function(){if(this.targetElem&&this.buttonMore){var e=this;this.buttonMore.on("click",function(){e.get()})}},this.get=function(){var e=this;$.ajax({url:e.url,method:"GET",data:"page="+e.nextPage,dataType:"json"}).done(function(t){e.nextPage=t.paginator.page+1,e.pagesAmount=t.paginator.pages,e.append(t.objects),e.nextPage>e.pagesAmount?e.buttonMore.hide():e.buttonMore.show()})},this.append=function(e){e=e instanceof Array?e:[],this.posts=this.posts.concat(e);for(var t=0,n=e.length;n>t;t++)this.targetElem.append(this.render(e[t]))}}function deleteCommunity(e){Popup.show({title:"Удалить группу",content:"Вы уверены,что хотите удалить группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.ajax({url:"/community/"+e,type:"DELETE",success:function(e){window.location.reload()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}function deleteCommunityPost(e){return Popup.show({title:"Удалить новость",content:"Вы уверены,что хотите удалить новость?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.ajax({url:"/community/post/"+e,type:"DELETE",success:function(e){window.location.href="/community/"+e.community.id}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]}),!1}function HighlightedDate(e,t,n){"use strict";this.date=e,this.desc=t,this.style=n}!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.React=e()}}(function(){return function e(t,n,a){function s(i,o){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!o&&c)return c(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return s(n?n:e)},l,l.exports,e,t,n,a)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)s(a[i]);return s}({1:[function(e,t,n){"use strict";var a=e(25),s=e(31),r=e(42),i=e(34),o=e(69),c=e(98),u=e(100),l=e(127),m=e(122),p=e(170);s.addons={CSSTransitionGroup:i,LinkedStateMixin:a,PureRenderMixin:r,TransitionGroup:c,batchedUpdates:u.batchedUpdates,classSet:l,cloneWithProps:m,createFragment:o.create,update:p},s.addons.Perf=e(61),s.addons.TestUtils=e(95),t.exports=s},{100:100,122:122,127:127,170:170,25:25,31:31,34:34,42:42,61:61,69:69,95:95,98:98}],2:[function(e,t,n){"use strict";var a=e(134),s={componentDidMount:function(){this.props.autoFocus&&a(this.getDOMNode())}};t.exports=s},{134:134}],3:[function(e,t,n){"use strict";function a(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function s(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function r(e){switch(e){case k.topCompositionStart:return D.compositionStart;case k.topCompositionEnd:return D.compositionEnd;case k.topCompositionUpdate:return D.compositionUpdate}}function i(e,t){return e===k.topKeyDown&&t.keyCode===R}function o(e,t){switch(e){case k.topKeyUp:return-1!==E.indexOf(t.keyCode);case k.topKeyDown:return t.keyCode!==R;case k.topKeyPress:case k.topMouseDown:case k.topBlur:return!0;default:return!1}}function c(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,a){var s,u;if(C?s=r(e):I?o(e,a)&&(s=D.compositionEnd):i(e,a)&&(s=D.compositionStart),!s)return null;N&&(I||s!==D.compositionStart?s===D.compositionEnd&&I&&(u=I.getData()):I=g.getPooled(t));var l=v.getPooled(s,n,a);if(u)l.data=u;else{var m=c(a);null!==m&&(l.data=m)}return h.accumulateTwoPhaseDispatches(l),l}function l(e,t){switch(e){case k.topCompositionEnd:return c(t);case k.topKeyPress:var n=t.which;return n!==w?null:(M=!0,x);case k.topTextInput:var a=t.data;return a===x&&M?null:a;default:return null}}function m(e,t){if(I){if(e===k.topCompositionEnd||o(e,t)){var n=I.getData();return g.release(I),I=null,n}return null}switch(e){case k.topPaste:return null;case k.topKeyPress:return t.which&&!s(t)?String.fromCharCode(t.which):null;case k.topCompositionEnd:return N?null:t.data;default:return null}}function p(e,t,n,a){var s;if(s=_?l(e,a):m(e,a),!s)return null;var r=b.getPooled(D.beforeInput,n,a);return r.data=s,h.accumulateTwoPhaseDispatches(r),r}var d=e(16),h=e(21),f=e(22),g=e(23),v=e(106),b=e(110),y=e(157),E=[9,13,27,32],R=229,C=f.canUseDOM&&"CompositionEvent"in window,S=null;f.canUseDOM&&"documentMode"in document&&(S=document.documentMode);var _=f.canUseDOM&&"TextEvent"in window&&!S&&!a(),N=f.canUseDOM&&(!C||S&&S>8&&11>=S),w=32,x=String.fromCharCode(w),k=d.topLevelTypes,D={beforeInput:{phasedRegistrationNames:{bubbled:y({onBeforeInput:null}),captured:y({onBeforeInputCapture:null})},dependencies:[k.topCompositionEnd,k.topKeyPress,k.topTextInput,k.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:y({onCompositionEnd:null}),captured:y({onCompositionEndCapture:null})},dependencies:[k.topBlur,k.topCompositionEnd,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:y({onCompositionStart:null}),captured:y({onCompositionStartCapture:null})},dependencies:[k.topBlur,k.topCompositionStart,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:y({onCompositionUpdate:null}),captured:y({onCompositionUpdateCapture:null})},dependencies:[k.topBlur,k.topCompositionUpdate,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]}},M=!1,I=null,T={eventTypes:D,extractEvents:function(e,t,n,a){return[u(e,t,n,a),p(e,t,n,a)]}};t.exports=T},{106:106,110:110,157:157,16:16,21:21,22:22,23:23}],4:[function(e,t,n){var a=e(150),s={addClass:function(e,t){return a(!/\s/.test(t),'CSSCore.addClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.add(t):s.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return a(!/\s/.test(t),'CSSCore.removeClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.remove(t):s.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?s.addClass:s.removeClass)(e,t)},hasClass:function(e,t){return a(!/\s/.test(t),"CSS.hasClass takes only a single class name."),e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}};t.exports=s},{150:150}],5:[function(e,t,n){"use strict";function a(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var s={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},r=["Webkit","ms","Moz","O"];Object.keys(s).forEach(function(e){r.forEach(function(t){s[a(t,e)]=s[e]})});var i={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},o={isUnitlessNumber:s,shorthandPropertyExpansions:i};t.exports=o},{}],6:[function(e,t,n){"use strict";var a=e(5),s=e(22),r=e(121),i=e(128),o=e(148),c=e(159),u=e(171),l=c(function(e){return o(e)}),m="cssFloat";s.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(m="styleFloat");var p=/^(?:webkit|moz|o)[A-Z]/,d=/;\s*$/,h={},f={},g=function(e){h.hasOwnProperty(e)&&h[e]||(h[e]=!0,u(!1,"Unsupported style property %s. Did you mean %s?",e,r(e)))},v=function(e){h.hasOwnProperty(e)&&h[e]||(h[e]=!0,u(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)))},b=function(e,t){f.hasOwnProperty(t)&&f[t]||(f[t]=!0,u(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',e,t.replace(d,"")))},y=function(e,t){e.indexOf("-")>-1?g(e):p.test(e)?v(e):d.test(t)&&b(e,t)},E={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];y(n,a),null!=a&&(t+=l(n)+":",t+=i(n,a)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var s in t)if(t.hasOwnProperty(s)){y(s,t[s]);var r=i(s,t[s]);if("float"===s&&(s=m),r)n[s]=r;else{var o=a.shorthandPropertyExpansions[s];if(o)for(var c in o)n[c]="";else n[s]=""}}}};t.exports=E},{121:121,128:128,148:148,159:159,171:171,22:22,5:5}],7:[function(e,t,n){"use strict";function a(){this._callbacks=null,this._contexts=null}var s=e(30),r=e(29),i=e(150);r(a.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){i(e.length===t.length,"Mismatched list of contexts in callback queue"),this._callbacks=null,this._contexts=null;for(var n=0,a=e.length;a>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),s.addPoolingTo(a),t.exports=a},{150:150,29:29,30:30}],8:[function(e,t,n){"use strict";function a(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function s(e){var t=S.getPooled(k.change,M,e);E.accumulateTwoPhaseDispatches(t),C.batchedUpdates(r,t)}function r(e){y.enqueueEvents(e),y.processEventQueue()}function i(e,t){D=e,M=t,D.attachEvent("onchange",s)}function o(){D&&(D.detachEvent("onchange",s),D=null,M=null)}function c(e,t,n){return e===x.topChange?n:void 0}function u(e,t,n){e===x.topFocus?(o(),i(t,n)):e===x.topBlur&&o()}function l(e,t){D=e,M=t,I=e.value,T=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(D,"value",A),D.attachEvent("onpropertychange",p)}function m(){D&&(delete D.value,D.detachEvent("onpropertychange",p),D=null,M=null,I=null,T=null)}function p(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==I&&(I=t,s(e))}}function d(e,t,n){return e===x.topInput?n:void 0}function h(e,t,n){e===x.topFocus?(m(),l(t,n)):e===x.topBlur&&m()}function f(e,t,n){return e!==x.topSelectionChange&&e!==x.topKeyUp&&e!==x.topKeyDown||!D||D.value===I?void 0:(I=D.value,M)}function g(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function v(e,t,n){return e===x.topClick?n:void 0}var b=e(16),y=e(18),E=e(21),R=e(22),C=e(100),S=e(108),_=e(151),N=e(153),w=e(157),x=b.topLevelTypes,k={change:{phasedRegistrationNames:{bubbled:w({onChange:null}),captured:w({onChangeCapture:null})},dependencies:[x.topBlur,x.topChange,x.topClick,x.topFocus,x.topInput,x.topKeyDown,x.topKeyUp,x.topSelectionChange]}},D=null,M=null,I=null,T=null,P=!1;R.canUseDOM&&(P=_("change")&&(!("documentMode"in document)||document.documentMode>8));var O=!1;R.canUseDOM&&(O=_("input")&&(!("documentMode"in document)||document.documentMode>9));var A={get:function(){return T.get.call(this)},set:function(e){I=""+e,T.set.call(this,e)}},F={eventTypes:k,extractEvents:function(e,t,n,s){var r,i;if(a(t)?P?r=c:i=u:N(t)?O?r=d:(r=f,i=h):g(t)&&(r=v),r){var o=r(e,t,n);if(o){var l=S.getPooled(k.change,o,s);return E.accumulateTwoPhaseDispatches(l),l}}i&&i(e,t,n)}};t.exports=F},{100:100,108:108,151:151,153:153,157:157,16:16,18:18,21:21,22:22}],9:[function(e,t,n){"use strict";var a=0,s={createReactRootIndex:function(){return a++}};t.exports=s},{}],10:[function(e,t,n){"use strict";function a(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var s=e(13),r=e(79),i=e(165),o=e(150),c={dangerouslyReplaceNodeWithMarkup:s.dangerouslyReplaceNodeWithMarkup,updateTextContent:i,processUpdates:function(e,t){for(var n,c=null,u=null,l=0;l<e.length;l++)if(n=e[l],n.type===r.MOVE_EXISTING||n.type===r.REMOVE_NODE){var m=n.fromIndex,p=n.parentNode.childNodes[m],d=n.parentID;o(p,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",m,d),c=c||{},c[d]=c[d]||[],c[d][m]=p,u=u||[],u.push(p)}var h=s.dangerouslyRenderMarkup(t);if(u)for(var f=0;f<u.length;f++)u[f].parentNode.removeChild(u[f]);for(var g=0;g<e.length;g++)switch(n=e[g],n.type){case r.INSERT_MARKUP:a(n.parentNode,h[n.markupIndex],n.toIndex);break;case r.MOVE_EXISTING:a(n.parentNode,c[n.parentID][n.fromIndex],n.toIndex);break;case r.TEXT_CONTENT:i(n.parentNode,n.textContent);break;case r.REMOVE_NODE:}}};t.exports=c},{13:13,150:150,165:165,79:79}],11:[function(e,t,n){"use strict";function a(e,t){return(e&t)===t}var s=e(150),r={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},i=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&o._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var u in t){s(!o.isStandardName.hasOwnProperty(u),"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",u),o.isStandardName[u]=!0;var l=u.toLowerCase();if(o.getPossibleStandardName[l]=u,n.hasOwnProperty(u)){var m=n[u];o.getPossibleStandardName[m]=u,o.getAttributeName[u]=m}else o.getAttributeName[u]=l;o.getPropertyName[u]=i.hasOwnProperty(u)?i[u]:u,c.hasOwnProperty(u)?o.getMutationMethod[u]=c[u]:o.getMutationMethod[u]=null;var p=t[u];o.mustUseAttribute[u]=a(p,r.MUST_USE_ATTRIBUTE),o.mustUseProperty[u]=a(p,r.MUST_USE_PROPERTY),o.hasSideEffects[u]=a(p,r.HAS_SIDE_EFFECTS),o.hasBooleanValue[u]=a(p,r.HAS_BOOLEAN_VALUE),o.hasNumericValue[u]=a(p,r.HAS_NUMERIC_VALUE),o.hasPositiveNumericValue[u]=a(p,r.HAS_POSITIVE_NUMERIC_VALUE),o.hasOverloadedBooleanValue[u]=a(p,r.HAS_OVERLOADED_BOOLEAN_VALUE),s(!o.mustUseAttribute[u]||!o.mustUseProperty[u],"DOMProperty: Cannot require using both attribute and property: %s",u),s(o.mustUseProperty[u]||!o.hasSideEffects[u],"DOMProperty: Properties that have side effects must use property: %s",u),s(!!o.hasBooleanValue[u]+!!o.hasNumericValue[u]+!!o.hasOverloadedBooleanValue[u]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",u)}}},i={},o={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<o._isCustomAttributeFunctions.length;t++){var n=o._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,a=i[e];return a||(i[e]=a={}),t in a||(n=document.createElement(e),a[t]=n[t]),a[t]},injection:r};t.exports=o},{150:150}],12:[function(e,t,n){"use strict";function a(e,t){return null==t||s.hasBooleanValue[e]&&!t||s.hasNumericValue[e]&&isNaN(t)||s.hasPositiveNumericValue[e]&&1>t||s.hasOverloadedBooleanValue[e]&&t===!1}var s=e(11),r=e(163),i=e(171),o={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},c={},u=function(e){if(!(o.hasOwnProperty(e)&&o[e]||c.hasOwnProperty(e)&&c[e])){c[e]=!0;var t=e.toLowerCase(),n=s.isCustomAttribute(t)?t:s.getPossibleStandardName.hasOwnProperty(t)?s.getPossibleStandardName[t]:null;i(null==n,"Unknown DOM property %s. Did you mean %s?",e,n)}},l={createMarkupForID:function(e){return s.ID_ATTRIBUTE_NAME+"="+r(e)},createMarkupForProperty:function(e,t){if(s.isStandardName.hasOwnProperty(e)&&s.isStandardName[e]){if(a(e,t))return"";var n=s.getAttributeName[e];return s.hasBooleanValue[e]||s.hasOverloadedBooleanValue[e]&&t===!0?n:n+"="+r(t)}return s.isCustomAttribute(e)?null==t?"":e+"="+r(t):(u(e),null)},setValueForProperty:function(e,t,n){if(s.isStandardName.hasOwnProperty(t)&&s.isStandardName[t]){var r=s.getMutationMethod[t];if(r)r(e,n);else if(a(t,n))this.deleteValueForProperty(e,t);else if(s.mustUseAttribute[t])e.setAttribute(s.getAttributeName[t],""+n);else{var i=s.getPropertyName[t];s.hasSideEffects[t]&&""+e[i]==""+n||(e[i]=n)}}else s.isCustomAttribute(t)?null==n?e.removeAttribute(t):e.setAttribute(t,""+n):u(t)},deleteValueForProperty:function(e,t){if(s.isStandardName.hasOwnProperty(t)&&s.isStandardName[t]){var n=s.getMutationMethod[t];if(n)n(e,void 0);else if(s.mustUseAttribute[t])e.removeAttribute(s.getAttributeName[t]);else{var a=s.getPropertyName[t],r=s.getDefaultValueForProperty(e.nodeName,a);s.hasSideEffects[t]&&""+e[a]===r||(e[a]=r)}}else s.isCustomAttribute(t)?e.removeAttribute(t):u(t)}};t.exports=l},{11:11,163:163,171:171}],13:[function(e,t,n){"use strict";function a(e){return e.substring(1,e.indexOf(" "))}var s=e(22),r=e(126),i=e(129),o=e(142),c=e(150),u=/^(<[^ \/>]+)/,l="data-danger-index",m={dangerouslyRenderMarkup:function(e){c(s.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering.");for(var t,n={},m=0;m<e.length;m++)c(e[m],"dangerouslyRenderMarkup(...): Missing markup."),t=a(e[m]),t=o(t)?t:"*",n[t]=n[t]||[],n[t][m]=e[m];var p=[],d=0;for(t in n)if(n.hasOwnProperty(t)){var h,f=n[t];for(h in f)if(f.hasOwnProperty(h)){var g=f[h];f[h]=g.replace(u,"$1 "+l+'="'+h+'" ')}for(var v=r(f.join(""),i),b=0;b<v.length;++b){var y=v[b];y.hasAttribute&&y.hasAttribute(l)?(h=+y.getAttribute(l),y.removeAttribute(l),c(!p.hasOwnProperty(h),"Danger: Assigning to an already-occupied result index."),p[h]=y,d+=1):console.error("Danger: Discarding unexpected node:",y)}}return c(d===p.length,"Danger: Did not assign to every index of resultList."),c(p.length===e.length,"Danger: Expected markup to render %s nodes, but rendered %s.",e.length,p.length),p},dangerouslyReplaceNodeWithMarkup:function(e,t){c(s.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering."),c(t,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),c("html"!==e.tagName.toLowerCase(),"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See React.renderToString().");var n=r(t,i)[0];e.parentNode.replaceChild(n,e)}};t.exports=m},{126:126,129:129,142:142,150:150,22:22}],14:[function(e,t,n){"use strict";var a=e(157),s=[a({ResponderEventPlugin:null}),a({SimpleEventPlugin:null}),a({TapEventPlugin:null}),a({EnterLeaveEventPlugin:null}),a({ChangeEventPlugin:null}),a({SelectEventPlugin:null}),a({BeforeInputEventPlugin:null}),a({AnalyticsEventPlugin:null}),a({MobileSafariClickEventPlugin:null})];t.exports=s},{157:157}],15:[function(e,t,n){"use strict";var a=e(16),s=e(21),r=e(112),i=e(77),o=e(157),c=a.topLevelTypes,u=i.getFirstReactDOM,l={mouseEnter:{registrationName:o({onMouseEnter:null}),dependencies:[c.topMouseOut,c.topMouseOver]},mouseLeave:{registrationName:o({onMouseLeave:null}),dependencies:[c.topMouseOut,c.topMouseOver]}},m=[null,null],p={eventTypes:l,extractEvents:function(e,t,n,a){if(e===c.topMouseOver&&(a.relatedTarget||a.fromElement))return null;if(e!==c.topMouseOut&&e!==c.topMouseOver)return null;var o;if(t.window===t)o=t;else{var p=t.ownerDocument;o=p?p.defaultView||p.parentWindow:window}var d,h;if(e===c.topMouseOut?(d=t,h=u(a.relatedTarget||a.toElement)||o):(d=o,h=t),d===h)return null;var f=d?i.getID(d):"",g=h?i.getID(h):"",v=r.getPooled(l.mouseLeave,f,a);v.type="mouseleave",v.target=d,v.relatedTarget=h;var b=r.getPooled(l.mouseEnter,g,a);return b.type="mouseenter",b.target=h,b.relatedTarget=d,s.accumulateEnterLeaveDispatches(v,b,f,g),m[0]=v,m[1]=b,m}};t.exports=p},{112:112,157:157,16:16,21:21,77:77}],16:[function(e,t,n){"use strict";var a=e(156),s=a({bubbled:null,captured:null}),r=a({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),i={topLevelTypes:r,PropagationPhases:s};t.exports=i},{156:156}],17:[function(e,t,n){var a=e(129),s={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):(console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:a})},registerDefault:function(){}};t.exports=s},{129:129}],18:[function(e,t,n){"use strict";function a(){var e=p&&p.traverseTwoPhase&&p.traverseEnterLeave;c(e,"InstanceHandle not injected before use!")}var s=e(19),r=e(20),i=e(118),o=e(135),c=e(150),u={},l=null,m=function(e){if(e){var t=r.executeDispatch,n=s.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),r.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},p=null,d={injection:{injectMount:r.injection.injectMount,injectInstanceHandle:function(e){p=e,a()},getInstanceHandle:function(){return a(),p},injectEventPluginOrder:s.injectEventPluginOrder,injectEventPluginsByName:s.injectEventPluginsByName},eventNameDispatchConfigs:s.eventNameDispatchConfigs,registrationNameModules:s.registrationNameModules,putListener:function(e,t,n){c(!n||"function"==typeof n,"Expected %s listener to be a function, instead got type %s",t,typeof n);var a=u[t]||(u[t]={});a[e]=n},getListener:function(e,t){var n=u[t];return n&&n[e]},deleteListener:function(e,t){var n=u[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in u)delete u[t][e]},extractEvents:function(e,t,n,a){for(var r,o=s.plugins,c=0,u=o.length;u>c;c++){var l=o[c];if(l){var m=l.extractEvents(e,t,n,a);m&&(r=i(r,m))}}return r},enqueueEvents:function(e){e&&(l=i(l,e))},processEventQueue:function(){var e=l;l=null,o(e,m),c(!l,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.")},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=d},{118:118,135:135,150:150,19:19,20:20}],19:[function(e,t,n){"use strict";function a(){if(o)for(var e in c){var t=c[e],n=o.indexOf(e);if(i(n>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e),!u.plugins[n]){i(t.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e),u.plugins[n]=t;var a=t.eventTypes;for(var r in a)i(s(a[r],t,r),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",r,e)}}}function s(e,t,n){i(!u.eventNameDispatchConfigs.hasOwnProperty(n),"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",n),u.eventNameDispatchConfigs[n]=e;var a=e.phasedRegistrationNames;if(a){for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];r(o,t,n)}return!0}return e.registrationName?(r(e.registrationName,t,n),!0):!1}function r(e,t,n){i(!u.registrationNameModules[e],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e),u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var i=e(150),o=null,c={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){i(!o,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."),o=Array.prototype.slice.call(e),a()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var s=e[n];c.hasOwnProperty(n)&&c[n]===s||(i(!c[n],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",n),c[n]=s,t=!0)}t&&a()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var a=u.registrationNameModules[t.phasedRegistrationNames[n]];if(a)return a}return null},_resetEventPlugins:function(){o=null;for(var e in c)c.hasOwnProperty(e)&&delete c[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var a=u.registrationNameModules;for(var s in a)a.hasOwnProperty(s)&&delete a[s]}};t.exports=u},{150:150}],20:[function(e,t,n){"use strict";function a(e){return e===v.topMouseUp||e===v.topTouchEnd||e===v.topTouchCancel}function s(e){return e===v.topMouseMove||e===v.topTouchMove}function r(e){return e===v.topMouseDown||e===v.topTouchStart}function i(e,t){var n=e._dispatchListeners,a=e._dispatchIDs;if(d(e),Array.isArray(n))for(var s=0;s<n.length&&!e.isPropagationStopped();s++)t(e,n[s],a[s]);else n&&t(e,n,a)}function o(e,t,n){e.currentTarget=g.Mount.getNode(n);var a=t(e,n);return e.currentTarget=null,a}function c(e,t){i(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function u(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(d(e),Array.isArray(t)){for(var a=0;a<t.length&&!e.isPropagationStopped();a++)if(t[a](e,n[a]))return n[a]}else if(t&&t(e,n))return n;return null}function l(e){var t=u(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function m(e){d(e);var t=e._dispatchListeners,n=e._dispatchIDs;f(!Array.isArray(t),"executeDirectDispatch(...): Invalid `event`.");var a=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,a}function p(e){return!!e._dispatchListeners}var d,h=e(16),f=e(150),g={Mount:null,injectMount:function(e){g.Mount=e,f(e&&e.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode.")}},v=h.topLevelTypes;d=function(e){var t=e._dispatchListeners,n=e._dispatchIDs,a=Array.isArray(t),s=Array.isArray(n),r=s?n.length:n?1:0,i=a?t.length:t?1:0;f(s===a&&r===i,"EventPluginUtils: Invalid `event`.")};var b={isEndish:a,isMoveish:s,isStartish:r,executeDirectDispatch:m,executeDispatch:o,executeDispatchesInOrder:c,executeDispatchesInOrderStopAtTrue:l,hasDispatches:p,injection:g,useTouchEvents:!1};t.exports=b},{150:150,16:16}],21:[function(e,t,n){"use strict";function a(e,t,n){
var a=t.dispatchConfig.phasedRegistrationNames[n];return g(e,a)}function s(e,t,n){if(!e)throw new Error("Dispatching id must not be null");var s=t?f.bubbled:f.captured,r=a(e,n,s);r&&(n._dispatchListeners=d(n._dispatchListeners,r),n._dispatchIDs=d(n._dispatchIDs,e))}function r(e){e&&e.dispatchConfig.phasedRegistrationNames&&p.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,s,e)}function i(e,t,n){if(n&&n.dispatchConfig.registrationName){var a=n.dispatchConfig.registrationName,s=g(e,a);s&&(n._dispatchListeners=d(n._dispatchListeners,s),n._dispatchIDs=d(n._dispatchIDs,e))}}function o(e){e&&e.dispatchConfig.registrationName&&i(e.dispatchMarker,null,e)}function c(e){h(e,r)}function u(e,t,n,a){p.injection.getInstanceHandle().traverseEnterLeave(n,a,i,e,t)}function l(e){h(e,o)}var m=e(16),p=e(18),d=e(118),h=e(135),f=m.PropagationPhases,g=p.getListener,v={accumulateTwoPhaseDispatches:c,accumulateDirectDispatches:l,accumulateEnterLeaveDispatches:u};t.exports=v},{118:118,135:135,16:16,18:18}],22:[function(e,t,n){"use strict";var a=!("undefined"==typeof window||!window.document||!window.document.createElement),s={canUseDOM:a,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:a&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:a&&!!window.screen,isInWorker:!a};t.exports=s},{}],23:[function(e,t,n){"use strict";function a(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var s=e(30),r=e(29),i=e(145);r(a.prototype,{getText:function(){return"value"in this._root?this._root.value:this._root[i()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,a=n.length,s=this.getText(),r=s.length;for(e=0;a>e&&n[e]===s[e];e++);var i=a-e;for(t=1;i>=t&&n[a-t]===s[r-t];t++);var o=t>1?1-t:void 0;return this._fallbackText=s.slice(e,o),this._fallbackText}}),s.addPoolingTo(a),t.exports=a},{145:145,29:29,30:30}],24:[function(e,t,n){"use strict";var a,s=e(11),r=e(22),i=s.injection.MUST_USE_ATTRIBUTE,o=s.injection.MUST_USE_PROPERTY,c=s.injection.HAS_BOOLEAN_VALUE,u=s.injection.HAS_SIDE_EFFECTS,l=s.injection.HAS_NUMERIC_VALUE,m=s.injection.HAS_POSITIVE_NUMERIC_VALUE,p=s.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(r.canUseDOM){var d=document.implementation;a=d&&d.hasFeature&&d.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var h={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:i|c,allowTransparency:i,alt:null,async:c,autoComplete:null,autoPlay:c,cellPadding:null,cellSpacing:null,charSet:i,checked:o|c,classID:i,className:a?i:o,cols:i|m,colSpan:null,content:null,contentEditable:null,contextMenu:i,controls:o|c,coords:null,crossOrigin:null,data:null,dateTime:i,defer:c,dir:null,disabled:i|c,download:p,draggable:null,encType:null,form:i,formAction:i,formEncType:i,formMethod:i,formNoValidate:c,formTarget:i,frameBorder:i,headers:null,height:i,hidden:i|c,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:o,label:null,lang:null,list:i,loop:o|c,low:null,manifest:i,marginHeight:null,marginWidth:null,max:null,maxLength:i,media:i,mediaGroup:null,method:null,min:null,multiple:o|c,muted:o|c,name:null,noValidate:c,open:c,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:o|c,rel:null,required:c,role:i,rows:i|m,rowSpan:null,sandbox:null,scope:null,scoped:c,scrolling:null,seamless:i|c,selected:o|c,shape:null,size:i|m,sizes:i,span:m,spellCheck:null,src:null,srcDoc:o,srcSet:i,start:l,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:o|u,width:i,wmode:i,autoCapitalize:null,autoCorrect:null,itemProp:i,itemScope:i|c,itemType:i,itemID:i,itemRef:i,property:null,unselectable:i},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=h},{11:11,22:22}],25:[function(e,t,n){"use strict";var a=e(75),s=e(94),r={linkState:function(e){return new a(this.state[e],s.createStateKeySetter(this,e))}};t.exports=r},{75:75,94:94}],26:[function(e,t,n){"use strict";function a(e){u(null==e.props.checkedLink||null==e.props.valueLink,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa.")}function s(e){a(e),u(null==e.props.value&&null==e.props.onChange,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink.")}function r(e){a(e),u(null==e.props.checked&&null==e.props.onChange,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink")}function i(e){this.props.valueLink.requestChange(e.target.value)}function o(e){this.props.checkedLink.requestChange(e.target.checked)}var c=e(86),u=e(150),l={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},m={Mixin:{propTypes:{value:function(e,t,n){return!e[t]||l[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:c.func}},getValue:function(e){return e.props.valueLink?(s(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(r(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(s(e),i):e.props.checkedLink?(r(e),o):e.props.onChange}};t.exports=m},{150:150,86:86}],27:[function(e,t,n){"use strict";function a(e){e.remove()}var s=e(33),r=e(118),i=e(135),o=e(150),c={trapBubbledEvent:function(e,t){o(this.isMounted(),"Must be mounted to trap events");var n=this.getDOMNode();o(n,"LocalEventTrapMixin.trapBubbledEvent(...): Requires node to be rendered.");var a=s.trapBubbledEvent(e,t,n);this._localEventListeners=r(this._localEventListeners,a)},componentWillUnmount:function(){this._localEventListeners&&i(this._localEventListeners,a)}};t.exports=c},{118:118,135:135,150:150,33:33}],28:[function(e,t,n){"use strict";var a=e(16),s=e(129),r=a.topLevelTypes,i={eventTypes:null,extractEvents:function(e,t,n,a){if(e===r.topTouchStart){var i=a.target;i&&!i.onclick&&(i.onclick=s)}}};t.exports=i},{129:129,16:16}],29:[function(e,t,n){"use strict";function a(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),a=Object.prototype.hasOwnProperty,s=1;s<arguments.length;s++){var r=arguments[s];if(null!=r){var i=Object(r);for(var o in i)a.call(i,o)&&(n[o]=i[o])}}return n}t.exports=a},{}],30:[function(e,t,n){"use strict";var a=e(150),s=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},r=function(e,t){var n=this;if(n.instancePool.length){var a=n.instancePool.pop();return n.call(a,e,t),a}return new n(e,t)},i=function(e,t,n){var a=this;if(a.instancePool.length){var s=a.instancePool.pop();return a.call(s,e,t,n),s}return new a(e,t,n)},o=function(e,t,n,a,s){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n,a,s),i}return new r(e,t,n,a,s)},c=function(e){var t=this;a(e instanceof t,"Trying to release an instance into a pool of a different type."),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},u=10,l=s,m=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=u),n.release=c,n},p={addPoolingTo:m,oneArgumentPooler:s,twoArgumentPooler:r,threeArgumentPooler:i,fiveArgumentPooler:o};t.exports=p},{150:150}],31:[function(e,t,n){"use strict";var a=e(20),s=e(37),r=e(39),i=e(38),o=e(44),c=e(45),u=e(63),l=e(64),m=e(46),p=e(57),d=e(60),h=e(72),f=e(77),g=e(82),v=e(86),b=e(89),y=e(92),E=e(29),R=e(132),C=e(160);d.inject();var S=u.createElement,_=u.createFactory,N=u.cloneElement;S=l.createElement,_=l.createFactory,N=l.cloneElement;var w=g.measure("React","render",f.render),x={Children:{map:s.map,forEach:s.forEach,count:s.count,only:C},Component:r,DOM:m,PropTypes:v,initializeTouchEvents:function(e){a.useTouchEvents=e},createClass:i.createClass,createElement:S,cloneElement:N,createFactory:_,createMixin:function(e){return e},constructAndRenderComponent:f.constructAndRenderComponent,constructAndRenderComponentByID:f.constructAndRenderComponentByID,findDOMNode:R,render:w,renderToString:y.renderToString,renderToStaticMarkup:y.renderToStaticMarkup,unmountComponentAtNode:f.unmountComponentAtNode,isValidElement:u.isValidElement,withContext:o.withContext,__spread:E};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:c,InstanceHandles:h,Mount:f,Reconciler:b,TextComponent:p});var k=e(22);if(k.canUseDOM&&window.top===window.self){navigator.userAgent.indexOf("Chrome")>-1&&"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&console.debug("Download the React DevTools for a better development experience: https://fb.me/react-devtools");for(var D=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze],M=0;M<D.length;M++)if(!D[M]){console.error("One or more ES5 shim/shams expected by React are not available: https://fb.me/react-warning-polyfills");break}}x.version="0.13.3",t.exports=x},{132:132,160:160,20:20,22:22,29:29,37:37,38:38,39:39,44:44,45:45,46:46,57:57,60:60,63:63,64:64,72:72,77:77,82:82,86:86,89:89,92:92}],32:[function(e,t,n){"use strict";var a=e(132),s={getDOMNode:function(){return a(this)}};t.exports=s},{132:132}],33:[function(e,t,n){"use strict";function a(e){return Object.prototype.hasOwnProperty.call(e,f)||(e[f]=d++,m[e[f]]={}),m[e[f]]}var s=e(16),r=e(18),i=e(19),o=e(67),c=e(117),u=e(29),l=e(151),m={},p=!1,d=0,h={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},f="_reactListenersID"+String(Math.random()).slice(2),g=u({},o,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,r=a(n),o=i.registrationNameDependencies[e],c=s.topLevelTypes,u=0,m=o.length;m>u;u++){var p=o[u];r.hasOwnProperty(p)&&r[p]||(p===c.topWheel?l("wheel")?g.ReactEventListener.trapBubbledEvent(c.topWheel,"wheel",n):l("mousewheel")?g.ReactEventListener.trapBubbledEvent(c.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(c.topWheel,"DOMMouseScroll",n):p===c.topScroll?l("scroll",!0)?g.ReactEventListener.trapCapturedEvent(c.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(c.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):p===c.topFocus||p===c.topBlur?(l("focus",!0)?(g.ReactEventListener.trapCapturedEvent(c.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(c.topBlur,"blur",n)):l("focusin")&&(g.ReactEventListener.trapBubbledEvent(c.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(c.topBlur,"focusout",n)),r[c.topBlur]=!0,r[c.topFocus]=!0):h.hasOwnProperty(p)&&g.ReactEventListener.trapBubbledEvent(p,h[p],n),r[p]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!p){var e=c.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),p=!0}},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:r.putListener,getListener:r.getListener,deleteListener:r.deleteListener,deleteAllListeners:r.deleteAllListeners});t.exports=g},{117:117,151:151,16:16,18:18,19:19,29:29,67:67}],34:[function(e,t,n){"use strict";var a=e(31),s=e(29),r=a.createFactory(e(98)),i=a.createFactory(e(35)),o=a.createClass({displayName:"ReactCSSTransitionGroup",propTypes:{transitionName:a.PropTypes.string.isRequired,transitionAppear:a.PropTypes.bool,transitionEnter:a.PropTypes.bool,transitionLeave:a.PropTypes.bool},getDefaultProps:function(){return{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(e){return i({name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave},e)},render:function(){return r(s({},this.props,{childFactory:this._wrapChild}))}});t.exports=o},{29:29,31:31,35:35,98:98}],35:[function(e,t,n){"use strict";var a=e(31),s=e(4),r=e(97),i=e(160),o=e(171),c=17,u=5e3,l=null;l=function(){o(!1,"transition(): tried to perform an animation without an animationend or transitionend event after timeout (%sms). You should either disable this transition in JS or add a CSS animation/transition.",u)};var m=a.createClass({displayName:"ReactCSSTransitionGroupChild",transition:function(e,t){var n=this.getDOMNode(),a=this.props.name+"-"+e,i=a+"-active",o=null,c=function(e){e&&e.target!==n||(clearTimeout(o),s.removeClass(n,a),s.removeClass(n,i),r.removeEndEventListener(n,c),t&&t())};r.addEndEventListener(n,c),s.addClass(n,a),this.queueClass(i),o=setTimeout(l,u)},queueClass:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,c))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(s.addClass.bind(s,this.getDOMNode())),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},componentWillAppear:function(e){this.props.appear?this.transition("appear",e):e()},componentWillEnter:function(e){this.props.enter?this.transition("enter",e):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e):e()},render:function(){return i(this.props.children)}});t.exports=m},{160:160,171:171,31:31,4:4,97:97}],36:[function(e,t,n){"use strict";var a=e(89),s=e(133),r=e(149),i=e(167),o={instantiateChildren:function(e,t,n){var a=s(e);for(var i in a)if(a.hasOwnProperty(i)){var o=a[i],c=r(o,null);a[i]=c}return a},updateChildren:function(e,t,n,o){var c=s(t);if(!c&&!e)return null;var u;for(u in c)if(c.hasOwnProperty(u)){var l=e&&e[u],m=l&&l._currentElement,p=c[u];if(i(m,p))a.receiveComponent(l,p,n,o),c[u]=l;else{l&&a.unmountComponent(l,u);var d=r(p,null);c[u]=d}}for(u in e)!e.hasOwnProperty(u)||c&&c.hasOwnProperty(u)||a.unmountComponent(e[u]);return c},unmountChildren:function(e){for(var t in e){var n=e[t];a.unmountComponent(n)}}};t.exports=o},{133:133,149:149,167:167,89:89}],37:[function(e,t,n){"use strict";function a(e,t){this.forEachFunction=e,this.forEachContext=t}function s(e,t,n,a){var s=e;s.forEachFunction.call(s.forEachContext,t,a)}function r(e,t,n){if(null==e)return e;var r=a.getPooled(t,n);d(e,s,r),a.release(r)}function i(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function o(e,t,n,a){var s=e,r=s.mapResult,i=!r.hasOwnProperty(n);if(h(i,"ReactChildren.map(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),i){var o=s.mapFunction.call(s.mapContext,t,a);r[n]=o}}function c(e,t,n){if(null==e)return e;var a={},s=i.getPooled(a,t,n);return d(e,o,s),i.release(s),p.create(a)}function u(e,t,n,a){return null}function l(e,t){return d(e,u,null)}var m=e(30),p=e(69),d=e(169),h=e(171),f=m.twoArgumentPooler,g=m.threeArgumentPooler;m.addPoolingTo(a,f),m.addPoolingTo(i,g);var v={forEach:r,map:c,count:l};t.exports=v},{169:169,171:171,30:30,69:69}],38:[function(e,t,n){"use strict";function a(e,t,n){for(var a in t)t.hasOwnProperty(a)&&N("function"==typeof t[a],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactClass",y[n],a)}function s(e,t){var n=D.hasOwnProperty(t)?D[t]:null;T.hasOwnProperty(t)&&C(n===x.OVERRIDE_BASE,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e.hasOwnProperty(t)&&C(n===x.DEFINE_MANY||n===x.DEFINE_MANY_MERGED,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function r(e,t){if(t){C("function"!=typeof t,"ReactClass: You're attempting to use a component class as a mixin. Instead, just use a regular object."),C(!h.isValidElement(t),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype;t.hasOwnProperty(w)&&M.mixins(e,t.mixins);for(var a in t)if(t.hasOwnProperty(a)&&a!==w){var r=t[a];if(s(n,a),M.hasOwnProperty(a))M[a](e,r);else{var i=D.hasOwnProperty(a),o=n.hasOwnProperty(a),l=r&&r.__reactDontBind,m="function"==typeof r,p=m&&!i&&!o&&!l;if(p)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[a]=r,n[a]=r;else if(o){var d=D[a];C(i&&(d===x.DEFINE_MANY_MERGED||d===x.DEFINE_MANY),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",d,a),d===x.DEFINE_MANY_MERGED?n[a]=c(n[a],r):d===x.DEFINE_MANY&&(n[a]=u(n[a],r))}else n[a]=r,"function"==typeof r&&t.displayName&&(n[a].displayName=t.displayName+"_"+a)}}}}function i(e,t){if(t)for(var n in t){var a=t[n];if(t.hasOwnProperty(n)){var s=n in M;C(!s,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var r=n in e;C(!r,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=a}}}function o(e,t){C(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(C(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function c(e,t){return function(){var n=e.apply(this,arguments),a=t.apply(this,arguments);if(null==n)return a;if(null==a)return n;var s={};return o(s,n),o(s,a),s}}function u(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function l(e,t){var n=t.bind(e);n.__reactBoundContext=e,n.__reactBoundMethod=t,n.__reactBoundArguments=null;var a=e.constructor.displayName,s=n.bind;return n.bind=function(r){for(var i=[],o=1,c=arguments.length;c>o;o++)i.push(arguments[o]);if(r!==e&&null!==r)N(!1,"bind(): React component methods may only be bound to the component instance. See %s",a);else if(!i.length)return N(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",a),n;var u=s.apply(n,arguments);return u.__reactBoundContext=e,u.__reactBoundMethod=t,u.__reactBoundArguments=i,u},n}function m(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=l(e,f.guard(n,e.constructor.displayName+"."+t))}}var p=e(39),d=e(45),h=e(63),f=e(66),g=e(73),v=e(74),b=e(85),y=e(84),E=e(99),R=e(29),C=e(150),S=e(156),_=e(157),N=e(171),w=_({mixins:null}),x=S({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),k=[],D={mixins:x.DEFINE_MANY,statics:x.DEFINE_MANY,propTypes:x.DEFINE_MANY,contextTypes:x.DEFINE_MANY,childContextTypes:x.DEFINE_MANY,getDefaultProps:x.DEFINE_MANY_MERGED,getInitialState:x.DEFINE_MANY_MERGED,getChildContext:x.DEFINE_MANY_MERGED,render:x.DEFINE_ONCE,componentWillMount:x.DEFINE_MANY,componentDidMount:x.DEFINE_MANY,componentWillReceiveProps:x.DEFINE_MANY,shouldComponentUpdate:x.DEFINE_ONCE,componentWillUpdate:x.DEFINE_MANY,componentDidUpdate:x.DEFINE_MANY,componentWillUnmount:x.DEFINE_MANY,updateComponent:x.OVERRIDE_BASE},M={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)r(e,t[n])},childContextTypes:function(e,t){a(e,t,b.childContext),e.childContextTypes=R({},e.childContextTypes,t)},contextTypes:function(e,t){a(e,t,b.context),e.contextTypes=R({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=c(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){a(e,t,b.prop),e.propTypes=R({},e.propTypes,t)},statics:function(e,t){i(e,t)}},I={enumerable:!1,get:function(){var e=this.displayName||this.name||"Component";return N(!1,"%s.type is deprecated. Use %s directly to access the class.",e,e),Object.defineProperty(this,"type",{value:this}),this}},T={replaceState:function(e,t){E.enqueueReplaceState(this,e),t&&E.enqueueCallback(this,t)},isMounted:function(){var e=d.current;null!==e&&(N(e._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",e.getName()||"A component"),e._warnedAboutRefsInRender=!0);var t=g.get(this);return t&&t!==v.currentlyMountingInstance},setProps:function(e,t){E.enqueueSetProps(this,e),t&&E.enqueueCallback(this,t)},replaceProps:function(e,t){E.enqueueReplaceProps(this,e),t&&E.enqueueCallback(this,t)}},P=function(){};R(P.prototype,p.prototype,T);var O={createClass:function(e){var t=function(e,n){N(this instanceof t,"Something is calling a React component directly. Use a factory or JSX instead. See: https://fb.me/react-legacyfactory"),this.__reactAutoBindMap&&m(this),this.props=e,this.context=n,this.state=null;var a=this.getInitialState?this.getInitialState():null;"undefined"==typeof a&&this.getInitialState._isMockFunction&&(a=null),C("object"==typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=a};t.prototype=new P,t.prototype.constructor=t,k.forEach(r.bind(null,t)),r(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.getDefaultProps&&(t.getDefaultProps.isReactClassApproved={}),t.prototype.getInitialState&&(t.prototype.getInitialState.isReactClassApproved={}),C(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),N(!t.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",e.displayName||"A component");for(var n in D)t.prototype[n]||(t.prototype[n]=null);t.type=t;try{Object.defineProperty(t,"type",I)}catch(a){}return t},injection:{injectMixin:function(e){k.push(e)}}};t.exports=O},{150:150,156:156,157:157,171:171,29:29,39:39,45:45,63:63,66:66,73:73,74:74,84:84,85:85,99:99}],39:[function(e,t,n){"use strict";function a(e,t){this.props=e,this.context=t}var s=e(99),r=e(150),i=e(171);a.prototype.setState=function(e,t){r("object"==typeof e||"function"==typeof e||null==e,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."),i(null!=e,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."),s.enqueueSetState(this,e),t&&s.enqueueCallback(this,t)},a.prototype.forceUpdate=function(e){s.enqueueForceUpdate(this),e&&s.enqueueCallback(this,e)};var o={getDOMNode:["getDOMNode","Use React.findDOMNode(component) instead."],isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceProps:["replaceProps","Instead call React.render again at the top level."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."],setProps:["setProps","Instead call React.render again at the top level."]},c=function(e,t){try{Object.defineProperty(a.prototype,e,{get:function(){return void i(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})}catch(n){}};for(var u in o)o.hasOwnProperty(u)&&c(u,o[u]);t.exports=a},{150:150,171:171,99:99}],40:[function(e,t,n){"use strict";var a=e(50),s=e(77),r={processChildrenUpdates:a.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:a.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){s.purgeID(e)}};t.exports=r},{50:50,77:77}],41:[function(e,t,n){"use strict";var a=e(150),s=!1,r={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){a(!s,"ReactCompositeComponent: injectEnvironment() can only be called once."),r.unmountIDFromEnvironment=e.unmountIDFromEnvironment,r.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,r.processChildrenUpdates=e.processChildrenUpdates,s=!0}}};t.exports=r},{150:150}],42:[function(e,t,n){"use strict";var a=e(166),s={shouldComponentUpdate:function(e,t){return!a(this.props,e)||!a(this.state,t)}};t.exports=s},{166:166}],43:[function(e,t,n){"use strict";function a(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}var s=e(41),r=e(44),i=e(45),o=e(63),c=e(64),u=e(73),l=e(74),m=e(80),p=e(82),d=e(85),h=e(84),f=e(89),g=e(100),v=e(29),b=e(130),y=e(150),E=e(167),R=e(171),C=1,S={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._isTopLevel=!1,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=C++,this._rootNodeID=e;var a=this._processProps(this._currentElement.props),s=this._processContext(this._currentElement._context),r=m.getComponentClassForElement(this._currentElement),i=new r(a,s);R(null!=i.render,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render` in your component or you may have accidentally tried to render an element whose type is a function that isn't a React component.",r.displayName||r.name||"Component"),i.props=a,i.context=s,i.refs=b,this._instance=i,u.set(i,this),this._warnIfContextsDiffer(this._currentElement._context,n),R(!i.getInitialState||i.getInitialState.isReactClassApproved,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"),R(!i.getDefaultProps||i.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"),R(!i.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"),R(!i.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"),R("function"!=typeof i.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component");var o=i.state;void 0===o&&(i.state=o=null),y("object"==typeof o&&!Array.isArray(o),"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var c,p,d=l.currentlyMountingInstance;l.currentlyMountingInstance=this;try{i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),c=this._getValidatedChildContext(n),p=this._renderValidatedComponent(c)}finally{l.currentlyMountingInstance=d}this._renderedComponent=this._instantiateReactComponent(p,this._currentElement.type);var h=f.mountComponent(this._renderedComponent,e,t,this._mergeChildContext(n,c));return i.componentDidMount&&t.getReactMountReady().enqueue(i.componentDidMount,i),h},unmountComponent:function(){var e=this._instance;if(e.componentWillUnmount){var t=l.currentlyUnmountingInstance;l.currentlyUnmountingInstance=this;try{e.componentWillUnmount()}finally{l.currentlyUnmountingInstance=t}}f.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,u.remove(e)},_setPropsInternal:function(e,t){var n=this._pendingElement||this._currentElement;this._pendingElement=o.cloneAndReplaceProps(n,v({},n.props,e)),g.enqueueUpdate(this,t)},_maskContext:function(e){var t=null;if("string"==typeof this._currentElement.type)return b;var n=this._currentElement.type.contextTypes;if(!n)return b;t={};for(var a in n)t[a]=e[a];return t},_processContext:function(e){var t=this._maskContext(e),n=m.getComponentClassForElement(this._currentElement);return n.contextTypes&&this._checkPropTypes(n.contextTypes,t,d.context),t},_getValidatedChildContext:function(e){var t=this._instance,n=t.getChildContext&&t.getChildContext();if(n){y("object"==typeof t.constructor.childContextTypes,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"),this._checkPropTypes(t.constructor.childContextTypes,n,d.childContext);for(var a in n)y(a in t.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",a);return n}return null},_mergeChildContext:function(e,t){return t?v({},e,t):e},_processProps:function(e){var t=m.getComponentClassForElement(this._currentElement);return t.propTypes&&this._checkPropTypes(t.propTypes,e,d.prop),e},_checkPropTypes:function(e,t,n){var s=this.getName();for(var r in e)if(e.hasOwnProperty(r)){var i;try{y("function"==typeof e[r],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",s||"React class",h[n],r),
i=e[r](t,r,s,n)}catch(o){i=o}if(i instanceof Error){var c=a(this);n===d.prop?R(!1,"Failed Composite propType: %s%s",i.message,c):R(!1,"Failed Context Types: %s%s",i.message,c)}}},receiveComponent:function(e,t,n){var a=this._currentElement,s=this._context;this._pendingElement=null,this.updateComponent(t,a,e,s,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&f.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&(c.checkAndWarnForMutatedProps(this._currentElement),this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context))},_warnIfContextsDiffer:function(e,t){e=this._maskContext(e),t=this._maskContext(t);for(var n=Object.keys(t).sort(),a=this.getName()||"ReactCompositeComponent",s=0;s<n.length;s++){var r=n[s];R(e[r]===t[r],"owner-based and parent-based contexts differ (values: `%s` vs `%s`) for key (%s) while mounting %s (see: http://fb.me/react-context-by-parent)",e[r],t[r],r,a)}},updateComponent:function(e,t,n,a,s){var r=this._instance,i=r.context,o=r.props;t!==n&&(i=this._processContext(n._context),o=this._processProps(n.props),null!=s&&this._warnIfContextsDiffer(n._context,s),r.componentWillReceiveProps&&r.componentWillReceiveProps(o,i));var c=this._processPendingState(o,i),u=this._pendingForceUpdate||!r.shouldComponentUpdate||r.shouldComponentUpdate(o,c,i);R("undefined"!=typeof u,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"),u?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,o,c,i,e,s)):(this._currentElement=n,this._context=s,r.props=o,r.state=c,r.context=i)},_processPendingState:function(e,t){var n=this._instance,a=this._pendingStateQueue,s=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!a)return n.state;if(s&&1===a.length)return a[0];for(var r=v({},s?a[0]:n.state),i=s?1:0;i<a.length;i++){var o=a[i];v(r,"function"==typeof o?o.call(n,r,e,t):o)}return r},_performComponentUpdate:function(e,t,n,a,s,r){var i=this._instance,o=i.props,c=i.state,u=i.context;i.componentWillUpdate&&i.componentWillUpdate(t,n,a),this._currentElement=e,this._context=r,i.props=t,i.state=n,i.context=a,this._updateRenderedComponent(s,r),i.componentDidUpdate&&s.getReactMountReady().enqueue(i.componentDidUpdate.bind(i,o,c,u),i)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,a=n._currentElement,s=this._getValidatedChildContext(),r=this._renderValidatedComponent(s);if(E(a,r))f.receiveComponent(n,r,e,this._mergeChildContext(t,s));else{var i=this._rootNodeID,o=n._rootNodeID;f.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(r,this._currentElement.type);var c=f.mountComponent(this._renderedComponent,i,e,this._mergeChildContext(t,s));this._replaceNodeWithMarkupByID(o,c)}},_replaceNodeWithMarkupByID:function(e,t){s.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return"undefined"==typeof t&&e.render._isMockFunction&&(t=null),t},_renderValidatedComponent:function(e){var t,n=r.current;r.current=this._mergeChildContext(this._currentElement._context,e),i.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{r.current=n,i.current=null}return y(null===t||t===!1||o.isValidElement(t),"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"),t},attachRef:function(e,t){var n=this.getPublicInstance(),a=n.refs===b?n.refs={}:n.refs;a[e]=t.getPublicInstance()},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};p.measureMethods(S,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var _={Mixin:S};t.exports=_},{100:100,130:130,150:150,167:167,171:171,29:29,41:41,44:44,45:45,63:63,64:64,73:73,74:74,80:80,82:82,84:84,85:85,89:89}],44:[function(e,t,n){"use strict";var a=e(29),s=e(130),r=e(171),i=!1,o={current:s,withContext:function(e,t){r(i,"withContext is deprecated and will be removed in a future version. Use a wrapper component with getChildContext instead."),i=!0;var n,s=o.current;o.current=a({},s,e);try{n=t()}finally{o.current=s}return n}};t.exports=o},{130:130,171:171,29:29}],45:[function(e,t,n){"use strict";var a={current:null};t.exports=a},{}],46:[function(e,t,n){"use strict";function a(e){return s.createFactory(e)}var s=(e(63),e(64)),r=e(158),i=r({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},a);t.exports=i},{158:158,63:63,64:64}],47:[function(e,t,n){"use strict";var a=e(2),s=e(32),r=e(38),i=e(63),o=e(156),c=i.createFactory("button"),u=o({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),l=r.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[a,s],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&u[t]||(e[t]=this.props[t]);return c(e,this.props.children)}});t.exports=l},{156:156,2:2,32:32,38:38,63:63}],48:[function(e,t,n){"use strict";function a(e){e&&(null!=e.dangerouslySetInnerHTML&&(v(null==e.children,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),v("object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information.")),E(null==e.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),E(!e.contentEditable||null==e.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),v(null==e.style||"object"==typeof e.style,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX."))}function s(e,t,n,a){E("onScroll"!==t||b("scroll",!0),"This browser doesn't support the `onScroll` event");var s=p.findReactContainerForID(e);if(s){var r=s.nodeType===w?s.ownerDocument:s;C(t,r)}a.getPutListenerQueue().enqueuePutListener(e,t,n)}function r(e){I.call(M,e)||(v(D.test(e),"Invalid tag: %s",e),M[e]=!0)}function i(e){r(e),this._tag=e,this._renderedChildren=null,this._previousStyleCopy=null,this._rootNodeID=null}var o=e(6),c=e(11),u=e(12),l=e(33),m=e(40),p=e(77),d=e(78),h=e(82),f=e(29),g=e(131),v=e(150),b=e(151),y=e(157),E=e(171),R=l.deleteListener,C=l.listenTo,S=l.registrationNameModules,_={string:!0,number:!0},N=y({style:null}),w=1,x=null,k={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},D=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,M={},I={}.hasOwnProperty;i.displayName="ReactDOMComponent",i.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,n){this._rootNodeID=e,a(this._currentElement.props);var s=k[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t,n)+s},_createOpenTagMarkupAndPutListeners:function(e){var t=this._currentElement.props,n="<"+this._tag;for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];if(null!=r)if(S.hasOwnProperty(a))s(this._rootNodeID,a,r,e);else{a===N&&(r&&(r=this._previousStyleCopy=f({},t.style)),r=o.createMarkupForStyles(r));var i=u.createMarkupForProperty(a,r);i&&(n+=" "+i)}}if(e.renderToStaticMarkup)return n+">";var c=u.createMarkupForID(this._rootNodeID);return n+" "+c+">"},_createContentMarkup:function(e,t){var n="";("listing"===this._tag||"pre"===this._tag||"textarea"===this._tag)&&(n="\n");var a=this._currentElement.props,s=a.dangerouslySetInnerHTML;if(null!=s){if(null!=s.__html)return n+s.__html}else{var r=_[typeof a.children]?a.children:null,i=null!=r?null:a.children;if(null!=r)return n+g(r);if(null!=i){var o=this.mountChildren(i,e,t);return n+o.join("")}}return n},receiveComponent:function(e,t,n){var a=this._currentElement;this._currentElement=e,this.updateComponent(t,a,e,n)},updateComponent:function(e,t,n,s){a(this._currentElement.props),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e,s)},_updateDOMProperties:function(e,t){var n,a,r,i=this._currentElement.props;for(n in e)if(!i.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===N){var o=this._previousStyleCopy;for(a in o)o.hasOwnProperty(a)&&(r=r||{},r[a]="");this._previousStyleCopy=null}else S.hasOwnProperty(n)?R(this._rootNodeID,n):(c.isStandardName[n]||c.isCustomAttribute(n))&&x.deletePropertyByID(this._rootNodeID,n);for(n in i){var u=i[n],l=n===N?this._previousStyleCopy:e[n];if(i.hasOwnProperty(n)&&u!==l)if(n===N)if(u?u=this._previousStyleCopy=f({},u):this._previousStyleCopy=null,l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r=r||{},r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r=r||{},r[a]=u[a])}else r=u;else S.hasOwnProperty(n)?s(this._rootNodeID,n,u,t):(c.isStandardName[n]||c.isCustomAttribute(n))&&x.updatePropertyByID(this._rootNodeID,n,u)}r&&x.updateStylesByID(this._rootNodeID,r)},_updateDOMChildren:function(e,t,n){var a=this._currentElement.props,s=_[typeof e.children]?e.children:null,r=_[typeof a.children]?a.children:null,i=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,o=a.dangerouslySetInnerHTML&&a.dangerouslySetInnerHTML.__html,c=null!=s?null:e.children,u=null!=r?null:a.children,l=null!=s||null!=i,m=null!=r||null!=o;null!=c&&null==u?this.updateChildren(null,t,n):l&&!m&&this.updateTextContent(""),null!=r?s!==r&&this.updateTextContent(""+r):null!=o?i!==o&&x.updateInnerHTMLByID(this._rootNodeID,o):null!=u&&this.updateChildren(u,t,n)},unmountComponent:function(){this.unmountChildren(),l.deleteAllListeners(this._rootNodeID),m.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null}},h.measureMethods(i,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),f(i.prototype,i.Mixin,d.Mixin),i.injection={injectIDOperations:function(e){i.BackendIDOperations=x=e}},t.exports=i},{11:11,12:12,131:131,150:150,151:151,157:157,171:171,29:29,33:33,40:40,6:6,77:77,78:78,82:82}],49:[function(e,t,n){"use strict";var a=e(16),s=e(27),r=e(32),i=e(38),o=e(63),c=o.createFactory("form"),u=i.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[r,s],render:function(){return c(this.props)},componentDidMount:function(){this.trapBubbledEvent(a.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(a.topLevelTypes.topSubmit,"submit")}});t.exports=u},{16:16,27:27,32:32,38:38,63:63}],50:[function(e,t,n){"use strict";var a=e(6),s=e(10),r=e(12),i=e(77),o=e(82),c=e(150),u=e(164),l={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},m={updatePropertyByID:function(e,t,n){var a=i.getNode(e);c(!l.hasOwnProperty(t),"updatePropertyByID(...): %s",l[t]),null!=n?r.setValueForProperty(a,t,n):r.deleteValueForProperty(a,t)},deletePropertyByID:function(e,t,n){var a=i.getNode(e);c(!l.hasOwnProperty(t),"updatePropertyByID(...): %s",l[t]),r.deleteValueForProperty(a,t,n)},updateStylesByID:function(e,t){var n=i.getNode(e);a.setValueForStyles(n,t)},updateInnerHTMLByID:function(e,t){var n=i.getNode(e);u(n,t)},updateTextContentByID:function(e,t){var n=i.getNode(e);s.updateTextContent(n,t)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=i.getNode(e);s.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=i.getNode(e[n].parentID);s.processUpdates(e,t)}};o.measureMethods(m,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=m},{10:10,12:12,150:150,164:164,6:6,77:77,82:82}],51:[function(e,t,n){"use strict";var a=e(16),s=e(27),r=e(32),i=e(38),o=e(63),c=o.createFactory("iframe"),u=i.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[r,s],render:function(){return c(this.props)},componentDidMount:function(){this.trapBubbledEvent(a.topLevelTypes.topLoad,"load")}});t.exports=u},{16:16,27:27,32:32,38:38,63:63}],52:[function(e,t,n){"use strict";var a=e(16),s=e(27),r=e(32),i=e(38),o=e(63),c=o.createFactory("img"),u=i.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[r,s],render:function(){return c(this.props)},componentDidMount:function(){this.trapBubbledEvent(a.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(a.topLevelTypes.topError,"error")}});t.exports=u},{16:16,27:27,32:32,38:38,63:63}],53:[function(e,t,n){"use strict";function a(){this.isMounted()&&this.forceUpdate()}var s=e(2),r=e(12),i=e(26),o=e(32),c=e(38),u=e(63),l=e(77),m=e(100),p=e(29),d=e(150),h=u.createFactory("input"),f={},g=c.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[s,i.Mixin,o],getInitialState:function(){var e=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=e?e:null}},render:function(){var e=p({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=i.getValue(this);e.value=null!=t?t:this.state.initialValue;var n=i.getChecked(this);return e.checked=null!=n?n:this.state.initialChecked,e.onChange=this._handleChange,h(e,this.props.children)},componentDidMount:function(){var e=l.getID(this.getDOMNode());f[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=l.getID(e);delete f[t]},componentDidUpdate:function(e,t,n){var a=this.getDOMNode();null!=this.props.checked&&r.setValueForProperty(a,"checked",this.props.checked||!1);var s=i.getValue(this);null!=s&&r.setValueForProperty(a,"value",""+s)},_handleChange:function(e){var t,n=i.getOnChange(this);n&&(t=n.call(this,e)),m.asap(a,this);var s=this.props.name;if("radio"===this.props.type&&null!=s){for(var r=this.getDOMNode(),o=r;o.parentNode;)o=o.parentNode;for(var c=o.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),u=0,p=c.length;p>u;u++){var h=c[u];if(h!==r&&h.form===r.form){var g=l.getID(h);d(g,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");var v=f[g];d(v,"ReactDOMInput: Unknown radio button ID %s.",g),m.asap(a,v)}}}return t}});t.exports=g},{100:100,12:12,150:150,2:2,26:26,29:29,32:32,38:38,63:63,77:77}],54:[function(e,t,n){"use strict";var a=e(32),s=e(38),r=e(63),i=e(171),o=r.createFactory("option"),c=s.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[a],componentWillMount:function(){i(null==this.props.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.")},render:function(){return o(this.props,this.props.children)}});t.exports=c},{171:171,32:32,38:38,63:63}],55:[function(e,t,n){"use strict";function a(){if(this._pendingUpdate){this._pendingUpdate=!1;var e=o.getValue(this);null!=e&&this.isMounted()&&r(this,e)}}function s(e,t,n){if(null==e[t])return null;if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function r(e,t){var n,a,s,r=e.getDOMNode().options;if(e.props.multiple){for(n={},a=0,s=t.length;s>a;a++)n[""+t[a]]=!0;for(a=0,s=r.length;s>a;a++){var i=n.hasOwnProperty(r[a].value);r[a].selected!==i&&(r[a].selected=i)}}else{for(n=""+t,a=0,s=r.length;s>a;a++)if(r[a].value===n)return void(r[a].selected=!0);r.length&&(r[0].selected=!0)}}var i=e(2),o=e(26),c=e(32),u=e(38),l=e(63),m=e(100),p=e(29),d=l.createFactory("select"),h=u.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[i,o.Mixin,c],propTypes:{defaultValue:s,value:s},render:function(){var e=p({},this.props);return e.onChange=this._handleChange,e.value=null,d(e,this.props.children)},componentWillMount:function(){this._pendingUpdate=!1},componentDidMount:function(){var e=o.getValue(this);null!=e?r(this,e):null!=this.props.defaultValue&&r(this,this.props.defaultValue)},componentDidUpdate:function(e){var t=o.getValue(this);null!=t?(this._pendingUpdate=!1,r(this,t)):!e.multiple!=!this.props.multiple&&(null!=this.props.defaultValue?r(this,this.props.defaultValue):r(this,this.props.multiple?[]:""))},_handleChange:function(e){var t,n=o.getOnChange(this);return n&&(t=n.call(this,e)),this._pendingUpdate=!0,m.asap(a,this),t}});t.exports=h},{100:100,2:2,26:26,29:29,32:32,38:38,63:63}],56:[function(e,t,n){"use strict";function a(e,t,n,a){return e===n&&t===a}function s(e){var t=document.selection,n=t.createRange(),a=n.text.length,s=n.duplicate();s.moveToElementText(e),s.setEndPoint("EndToStart",n);var r=s.text.length,i=r+a;return{start:r,end:i}}function r(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,s=t.anchorOffset,r=t.focusNode,i=t.focusOffset,o=t.getRangeAt(0),c=a(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),u=c?0:o.toString().length,l=o.cloneRange();l.selectNodeContents(e),l.setEnd(o.startContainer,o.startOffset);var m=a(l.startContainer,l.startOffset,l.endContainer,l.endOffset),p=m?0:l.toString().length,d=p+u,h=document.createRange();h.setStart(n,s),h.setEnd(r,i);var f=h.collapsed;return{start:f?d:p,end:f?p:d}}function i(e,t){var n,a,s=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,a=n):t.start>t.end?(n=t.end,a=t.start):(n=t.start,a=t.end),s.moveToElementText(e),s.moveStart("character",n),s.setEndPoint("EndToStart",s),s.moveEnd("character",a-n),s.select()}function o(e,t){if(window.getSelection){var n=window.getSelection(),a=e[l()].length,s=Math.min(t.start,a),r="undefined"==typeof t.end?s:Math.min(t.end,a);if(!n.extend&&s>r){var i=r;r=s,s=i}var o=u(e,s),c=u(e,r);if(o&&c){var m=document.createRange();m.setStart(o.node,o.offset),n.removeAllRanges(),s>r?(n.addRange(m),n.extend(c.node,c.offset)):(m.setEnd(c.node,c.offset),n.addRange(m))}}}var c=e(22),u=e(143),l=e(145),m=c.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:m?s:r,setOffsets:m?i:o};t.exports=p},{143:143,145:145,22:22}],57:[function(e,t,n){"use strict";var a=e(12),s=e(40),r=e(48),i=e(29),o=e(131),c=function(e){};i(c.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){this._rootNodeID=e;var s=o(this._stringText);return t.renderToStaticMarkup?s:"<span "+a.createMarkupForID(e)+">"+s+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;n!==this._stringText&&(this._stringText=n,r.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}},unmountComponent:function(){s.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=c},{12:12,131:131,29:29,40:40,48:48}],58:[function(e,t,n){"use strict";function a(){this.isMounted()&&this.forceUpdate()}var s=e(2),r=e(12),i=e(26),o=e(32),c=e(38),u=e(63),l=e(100),m=e(29),p=e(150),d=e(171),h=u.createFactory("textarea"),f=c.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[s,i.Mixin,o],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&(d(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),p(null==e,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(t)&&(p(t.length<=1,"<textarea> can only have at most one child."),t=t[0]),e=""+t),null==e&&(e="");var n=i.getValue(this);return{initialValue:""+(null!=n?n:e)}},render:function(){var e=m({},this.props);return p(null==e.dangerouslySetInnerHTML,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,h(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var a=i.getValue(this);if(null!=a){var s=this.getDOMNode();r.setValueForProperty(s,"value",""+a)}},_handleChange:function(e){var t,n=i.getOnChange(this);return n&&(t=n.call(this,e)),l.asap(a,this),t}});t.exports=f},{100:100,12:12,150:150,171:171,2:2,26:26,29:29,32:32,38:38,63:63}],59:[function(e,t,n){"use strict";function a(){this.reinitializeTransaction()}var s=e(100),r=e(116),i=e(29),o=e(129),c={initialize:o,close:function(){p.isBatchingUpdates=!1}},u={initialize:o,close:s.flushBatchedUpdates.bind(s)},l=[u,c];i(a.prototype,r.Mixin,{getTransactionWrappers:function(){return l}});var m=new a,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,a,s){var r=p.isBatchingUpdates;p.isBatchingUpdates=!0,r?e(t,n,a,s):m.perform(e,null,t,n,a,s)}};t.exports=p},{100:100,116:116,129:129,29:29}],60:[function(e,t,n){"use strict";function a(e){return h.createClass({tagName:e.toUpperCase(),render:function(){return new k(e,null,null,null,null,this.props)}})}function s(){M.EventEmitter.injectReactEventListener(D),M.EventPluginHub.injectEventPluginOrder(c),M.EventPluginHub.injectInstanceHandle(I),M.EventPluginHub.injectMount(T),M.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:F,EnterLeaveEventPlugin:u,ChangeEventPlugin:i,MobileSafariClickEventPlugin:p,SelectEventPlugin:O,BeforeInputEventPlugin:r}),M.NativeComponent.injectGenericComponentClass(v),M.NativeComponent.injectTextComponentClass(x),M.NativeComponent.injectAutoWrapper(a),M.Class.injectMixin(d),M.NativeComponent.injectComponentClasses({button:b,form:y,iframe:C,img:E,input:S,option:_,select:N,textarea:w,html:U("html"),head:U("head"),body:U("body")}),M.DOMProperty.injectDOMPropertyConfig(m),M.DOMProperty.injectDOMPropertyConfig(L),M.EmptyComponent.injectEmptyComponent("noscript"),M.Updates.injectReconcileTransaction(P),M.Updates.injectBatchingStrategy(g),M.RootIndex.injectCreateReactRootIndex(l.canUseDOM?o.createReactRootIndex:A.createReactRootIndex),M.Component.injectEnvironment(f),M.DOMComponent.injectIDOperations(R);var t=l.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(t)){var n=e(61);n.start()}}var r=e(3),i=e(8),o=e(9),c=e(14),u=e(15),l=e(22),m=e(24),p=e(28),d=e(32),h=e(38),f=e(40),g=e(59),v=e(48),b=e(47),y=e(49),E=e(52),R=e(50),C=e(51),S=e(53),_=e(54),N=e(55),w=e(58),x=e(57),k=e(63),D=e(68),M=e(70),I=e(72),T=e(77),P=e(88),O=e(102),A=e(103),F=e(104),L=e(101),U=e(125);t.exports={inject:s}},{101:101,102:102,103:103,104:104,125:125,14:14,15:15,22:22,24:24,28:28,3:3,32:32,38:38,40:40,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,57:57,58:58,59:59,61:61,63:63,68:68,70:70,72:72,77:77,8:8,88:88,9:9}],61:[function(e,t,n){"use strict";function a(e){return Math.floor(100*e)/100}function s(e,t,n){e[t]=(e[t]||0)+n}var r=e(11),i=e(62),o=e(77),c=e(82),u=e(162),l={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){l._injected||c.injection.injectMeasure(l.measure),l._allMeasurements.length=0,c.enableMeasure=!0},stop:function(){c.enableMeasure=!1},getLastMeasurements:function(){return l._allMeasurements},printExclusive:function(e){e=e||l._allMeasurements;var t=i.getExclusiveSummary(e);console.table(t.map(function(e){return{"Component class name":e.componentName,"Total inclusive time (ms)":a(e.inclusive),"Exclusive mount time (ms)":a(e.exclusive),"Exclusive render time (ms)":a(e.render),"Mount time per instance (ms)":a(e.exclusive/e.count),"Render time per instance (ms)":a(e.render/e.count),Instances:e.count}}))},printInclusive:function(e){e=e||l._allMeasurements;var t=i.getInclusiveSummary(e);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Inclusive time (ms)":a(e.time),Instances:e.count}})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(e){var t=i.getInclusiveSummary(e,!0);return t.map(function(e){return{"Owner > component":e.componentName,"Wasted time (ms)":e.time,Instances:e.count}})},printWasted:function(e){e=e||l._allMeasurements,console.table(l.getMeasurementsSummaryMap(e)),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},printDOM:function(e){e=e||l._allMeasurements;var t=i.getDOMSummary(e);console.table(t.map(function(e){var t={};return t[r.ID_ATTRIBUTE_NAME]=e.id,t.type=e.type,t.args=JSON.stringify(e.args),t})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},_recordWrite:function(e,t,n,a){var s=l._allMeasurements[l._allMeasurements.length-1].writes;s[e]=s[e]||[],s[e].push({type:t,time:n,args:a})},measure:function(e,t,n){return function(){for(var a=[],r=0,i=arguments.length;i>r;r++)a.push(arguments[r]);var c,m,p;if("_renderNewRootComponent"===t||"flushBatchedUpdates"===t)return l._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0}),p=u(),m=n.apply(this,a),l._allMeasurements[l._allMeasurements.length-1].totalTime=u()-p,m;if("_mountImageIntoNode"===t||"ReactDOMIDOperations"===e){if(p=u(),m=n.apply(this,a),c=u()-p,"_mountImageIntoNode"===t){var d=o.getID(a[1]);l._recordWrite(d,t,c,a[0])}else"dangerouslyProcessChildrenUpdates"===t?a[0].forEach(function(e){var t={};null!==e.fromIndex&&(t.fromIndex=e.fromIndex),null!==e.toIndex&&(t.toIndex=e.toIndex),null!==e.textContent&&(t.textContent=e.textContent),null!==e.markupIndex&&(t.markup=a[1][e.markupIndex]),l._recordWrite(e.parentID,e.type,c,t)}):l._recordWrite(a[0],t,c,Array.prototype.slice.call(a,1));return m}if("ReactCompositeComponent"!==e||"mountComponent"!==t&&"updateComponent"!==t&&"_renderValidatedComponent"!==t)return n.apply(this,a);if("string"==typeof this._currentElement.type)return n.apply(this,a);var h="mountComponent"===t?a[0]:this._rootNodeID,f="_renderValidatedComponent"===t,g="mountComponent"===t,v=l._mountStack,b=l._allMeasurements[l._allMeasurements.length-1];if(f?s(b.counts,h,1):g&&v.push(0),p=u(),m=n.apply(this,a),c=u()-p,f)s(b.render,h,c);else if(g){var y=v.pop();v[v.length-1]+=c,s(b.exclusive,h,c-y),s(b.inclusive,h,c)}else s(b.inclusive,h,c);return b.displayNames[h]={current:this.getName(),owner:this._currentElement._owner?this._currentElement._owner.getName():"<root>"},m}}};t.exports=l},{11:11,162:162,62:62,77:77,82:82}],62:[function(e,t,n){function a(e){for(var t=0,n=0;n<e.length;n++){var a=e[n];t+=a.totalTime}return t}function s(e){for(var t=[],n=0;n<e.length;n++){var a,s=e[n];for(a in s.writes)s.writes[a].forEach(function(e){t.push({id:a,type:l[e.type]||e.type,args:e.args})})}return t}function r(e){for(var t,n={},a=0;a<e.length;a++){var s=e[a],r=c({},s.exclusive,s.inclusive);for(var i in r)t=s.displayNames[i].current,n[t]=n[t]||{componentName:t,inclusive:0,exclusive:0,render:0,count:0},s.render[i]&&(n[t].render+=s.render[i]),s.exclusive[i]&&(n[t].exclusive+=s.exclusive[i]),s.inclusive[i]&&(n[t].inclusive+=s.inclusive[i]),s.counts[i]&&(n[t].count+=s.counts[i])}var o=[];for(t in n)n[t].exclusive>=u&&o.push(n[t]);return o.sort(function(e,t){return t.exclusive-e.exclusive}),o}function i(e,t){for(var n,a={},s=0;s<e.length;s++){var r,i=e[s],l=c({},i.exclusive,i.inclusive);t&&(r=o(i));for(var m in l)if(!t||r[m]){var p=i.displayNames[m];n=p.owner+" > "+p.current,a[n]=a[n]||{componentName:n,time:0,count:0},i.inclusive[m]&&(a[n].time+=i.inclusive[m]),i.counts[m]&&(a[n].count+=i.counts[m])}}var d=[];for(n in a)a[n].time>=u&&d.push(a[n]);return d.sort(function(e,t){return t.time-e.time}),d}function o(e){var t={},n=Object.keys(e.writes),a=c({},e.exclusive,e.inclusive);for(var s in a){for(var r=!1,i=0;i<n.length;i++)if(0===n[i].indexOf(s)){r=!0;break}!r&&e.counts[s]>0&&(t[s]=!0)}return t}var c=e(29),u=1.2,l={_mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},m={getExclusiveSummary:r,getInclusiveSummary:i,getDOMSummary:s,getTotalTime:a};t.exports=m},{29:29}],63:[function(e,t,n){"use strict";function a(e,t){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[t]:null},set:function(e){c(!1,"Don't set the %s property of the React element. Instead, specify the correct value when initially creating the element.",t),this._store[t]=e}})}function s(e){try{var t={props:!0};for(var n in t)a(e,n);l=!0}catch(s){}}var r=e(44),i=e(45),o=e(29),c=e(171),u={key:!0,ref:!0},l=!1,m=function(e,t,n,a,s,r){this.type=e,this.key=t,this.ref=n,this._owner=a,this._context=s,this._store={props:r,originalProps:o({},r)};try{Object.defineProperty(this._store,"validated",{configurable:!1,enumerable:!1,writable:!0})}catch(i){}return this._store.validated=!1,l?void Object.freeze(this):void(this.props=r)};m.prototype={_isReactElement:!0},s(m.prototype),m.createElement=function(e,t,n){var a,s={},o=null,c=null;if(null!=t){c=void 0===t.ref?null:t.ref,o=void 0===t.key?null:""+t.key;for(a in t)t.hasOwnProperty(a)&&!u.hasOwnProperty(a)&&(s[a]=t[a])}var l=arguments.length-2;if(1===l)s.children=n;else if(l>1){for(var p=Array(l),d=0;l>d;d++)p[d]=arguments[d+2];s.children=p}if(e&&e.defaultProps){var h=e.defaultProps;for(a in h)"undefined"==typeof s[a]&&(s[a]=h[a])}return new m(e,o,c,i.current,r.current,s)},m.createFactory=function(e){var t=m.createElement.bind(null,e);return t.type=e,t},m.cloneAndReplaceProps=function(e,t){var n=new m(e.type,e.key,e.ref,e._owner,e._context,t);return n._store.validated=e._store.validated,n},m.cloneElement=function(e,t,n){var a,s=o({},e.props),r=e.key,c=e.ref,l=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,l=i.current),void 0!==t.key&&(r=""+t.key);for(a in t)t.hasOwnProperty(a)&&!u.hasOwnProperty(a)&&(s[a]=t[a]);
}var p=arguments.length-2;if(1===p)s.children=n;else if(p>1){for(var d=Array(p),h=0;p>h;h++)d[h]=arguments[h+2];s.children=d}return new m(e.type,r,c,l,e._context,s)},m.isValidElement=function(e){var t=!(!e||!e._isReactElement);return t},t.exports=m},{171:171,29:29,44:44,45:45}],64:[function(e,t,n){"use strict";function a(){if(y.current){var e=y.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function s(e){var t=e&&e.getPublicInstance();if(!t)return void 0;var n=t.constructor;return n?n.displayName||n.name||void 0:void 0}function r(){var e=y.current;return e&&s(e)||void 0}function i(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,c('Each child in an array or iterator should have a unique "key" prop.',e,t))}function o(e,t,n){w.test(e)&&c("Child objects should have non-numeric keys so ordering is preserved.",t,n)}function c(e,t,n){var a=r(),i="string"==typeof n?n:n.displayName||n.name,o=a||i,c=_[e]||(_[e]={});if(!c.hasOwnProperty(o)){c[o]=!0;var u=a?" Check the render method of "+a+".":i?" Check the React.render call using <"+i+">.":"",l="";if(t&&t._owner&&t._owner!==y.current){var m=s(t._owner);l=" It was passed a child from "+m+"."}S(!1,e+"%s%s See https://fb.me/react-warning-keys for more information.",u,l)}}function u(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var a=e[n];f.isValidElement(a)&&i(a,t)}else if(f.isValidElement(e))e._store.validated=!0;else if(e){var s=R(e);if(s){if(s!==e.entries)for(var r,c=s.call(e);!(r=c.next()).done;)f.isValidElement(r.value)&&i(r.value,t)}else if("object"==typeof e){var u=g.extractIfFragment(e);for(var l in u)u.hasOwnProperty(l)&&o(l,u[l],t)}}}function l(e,t,n,s){for(var r in t)if(t.hasOwnProperty(r)){var i;try{C("function"==typeof t[r],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e||"React class",b[s],r),i=t[r](n,r,e,s)}catch(o){i=o}if(i instanceof Error&&!(i.message in N)){N[i.message]=!0;var c=a(this);S(!1,"Failed propType: %s%s",i.message,c)}}}function m(e,t){var n=t.type,a="string"==typeof n?n:n.displayName,s=t._owner?t._owner.getPublicInstance().constructor.displayName:null,r=e+"|"+a+"|"+s;if(!x.hasOwnProperty(r)){x[r]=!0;var i="";a&&(i=" <"+a+" />");var o="";s&&(o=" The element was created by "+s+"."),S(!1,"Don't set .props.%s of the React component%s. Instead, specify the correct value when initially creating the element or use React.cloneElement to make a new element with updated props.%s",e,i,o)}}function p(e,t){return e!==e?t!==t:0===e&&0===t?1/e===1/t:e===t}function d(e){if(e._store){var t=e._store.originalProps,n=e.props;for(var a in n)n.hasOwnProperty(a)&&(t.hasOwnProperty(a)&&p(t[a],n[a])||(m(a,e),t[a]=n[a]))}}function h(e){if(null!=e.type){var t=E.getComponentClassForElement(e),n=t.displayName||t.name;t.propTypes&&l(n,t.propTypes,e.props,v.prop),"function"==typeof t.getDefaultProps&&S(t.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var f=e(63),g=e(69),v=e(85),b=e(84),y=e(45),E=e(80),R=e(141),C=e(150),S=e(171),_={},N={},w=/^\d+$/,x={},k={checkAndWarnForMutatedProps:d,createElement:function(e,t,n){S(null!=e,"React.createElement: type should not be null or undefined. It should be a string (for DOM elements) or a ReactClass (for composite components).");var a=f.createElement.apply(this,arguments);if(null==a)return a;for(var s=2;s<arguments.length;s++)u(arguments[s],e);return h(a),a},createFactory:function(e){var t=k.createElement.bind(null,e);t.type=e;try{Object.defineProperty(t,"type",{enumerable:!1,get:function(){return S(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}})}catch(n){}return t},cloneElement:function(e,t,n){for(var a=f.cloneElement.apply(this,arguments),s=2;s<arguments.length;s++)u(arguments[s],a.type);return h(a),a}};t.exports=k},{141:141,150:150,171:171,45:45,63:63,69:69,80:80,84:84,85:85}],65:[function(e,t,n){"use strict";function a(e){l[e]=!0}function s(e){delete l[e]}function r(e){return!!l[e]}var i,o=e(63),c=e(73),u=e(150),l={},m={injectEmptyComponent:function(e){i=o.createFactory(e)}},p=function(){};p.prototype.componentDidMount=function(){var e=c.get(this);e&&a(e._rootNodeID)},p.prototype.componentWillUnmount=function(){var e=c.get(this);e&&s(e._rootNodeID)},p.prototype.render=function(){return u(i,"Trying to return null from a render, but no null placeholder component was injected."),i()};var d=o.createElement(p),h={emptyElement:d,injection:m,isNullComponentID:r};t.exports=h},{150:150,63:63,73:73}],66:[function(e,t,n){"use strict";var a={guard:function(e,t){return e}};t.exports=a},{}],67:[function(e,t,n){"use strict";function a(e){s.enqueueEvents(e),s.processEventQueue()}var s=e(18),r={handleTopLevel:function(e,t,n,r){var i=s.extractEvents(e,t,n,r);a(i)}};t.exports=r},{18:18}],68:[function(e,t,n){"use strict";function a(e){var t=m.getID(e),n=l.getReactRootIDFromNodeID(t),a=m.findReactContainerForID(n),s=m.getFirstReactDOM(a);return s}function s(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function r(e){for(var t=m.getFirstReactDOM(h(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=a(n);for(var s=0,r=e.ancestors.length;r>s;s++){t=e.ancestors[s];var i=m.getID(t)||"";g._handleTopLevel(e.topLevelType,t,i,e.nativeEvent)}}function i(e){var t=f(window);e(t)}var o=e(17),c=e(22),u=e(30),l=e(72),m=e(77),p=e(100),d=e(29),h=e(140),f=e(146);d(s.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),u.addPoolingTo(s,u.twoArgumentPooler);var g={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:c.canUseDOM?window:null,setHandleTopLevel:function(e){g._handleTopLevel=e},setEnabled:function(e){g._enabled=!!e},isEnabled:function(){return g._enabled},trapBubbledEvent:function(e,t,n){var a=n;return a?o.listen(a,t,g.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var a=n;return a?o.capture(a,t,g.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=i.bind(null,e);o.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(g._enabled){var n=s.getPooled(e,t);try{p.batchedUpdates(r,n)}finally{s.release(n)}}}};t.exports=g},{100:100,140:140,146:146,17:17,22:22,29:29,30:30,72:72,77:77}],69:[function(e,t,n){"use strict";var a=e(63),s=e(171),r="_reactFragment",i="_reactDidWarn",o=!1;try{var c=function(){return 1};Object.defineProperty({},r,{enumerable:!1,value:!0}),Object.defineProperty({},"key",{enumerable:!0,get:c}),o=!0}catch(u){}var l=function(e,t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return s(this[i],"A ReactFragment is an opaque type. Accessing any of its properties is deprecated. Pass it to one of the React.Children helpers."),this[i]=!0,this[r][t]},set:function(e){s(this[i],"A ReactFragment is an immutable opaque type. Mutating its properties is deprecated."),this[i]=!0,this[r][t]=e}})},m={},p=function(e){var t="";for(var n in e)t+=n+":"+typeof e[n]+",";var a=!!m[t];return m[t]=!0,a},d={create:function(e){if("object"!=typeof e||!e||Array.isArray(e))return s(!1,"React.addons.createFragment only accepts a single object.",e),e;if(a.isValidElement(e))return s(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),e;if(o){var t={};Object.defineProperty(t,r,{enumerable:!1,value:e}),Object.defineProperty(t,i,{writable:!0,enumerable:!1,value:!1});for(var n in e)l(t,n);return Object.preventExtensions(t),t}return e},extract:function(e){return o?e[r]?e[r]:(s(p(e),"Any use of a keyed object should be wrapped in React.addons.createFragment(object) before being passed as a child."),e):e},extractIfFragment:function(e){if(o){if(e[r])return e[r];for(var t in e)if(e.hasOwnProperty(t)&&a.isValidElement(e[t]))return d.extract(e)}return e}};t.exports=d},{171:171,63:63}],70:[function(e,t,n){"use strict";var a=e(11),s=e(18),r=e(41),i=e(38),o=e(65),c=e(33),u=e(80),l=e(48),m=e(82),p=e(91),d=e(100),h={Component:r.injection,Class:i.injection,DOMComponent:l.injection,DOMProperty:a.injection,EmptyComponent:o.injection,EventPluginHub:s.injection,EventEmitter:c.injection,NativeComponent:u.injection,Perf:m.injection,RootIndex:p.injection,Updates:d.injection};t.exports=h},{100:100,11:11,18:18,33:33,38:38,41:41,48:48,65:65,80:80,82:82,91:91}],71:[function(e,t,n){"use strict";function a(e){return r(document.documentElement,e)}var s=e(56),r=e(123),i=e(134),o=e(136),c={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=o();return{focusedElem:e,selectionRange:c.hasSelectionCapabilities(e)?c.getSelection(e):null}},restoreSelection:function(e){var t=o(),n=e.focusedElem,s=e.selectionRange;t!==n&&a(n)&&(c.hasSelectionCapabilities(n)&&c.setSelection(n,s),i(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=s.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,a=t.end;if("undefined"==typeof a&&(a=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(a,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",n),r.moveEnd("character",a-n),r.select()}else s.setOffsets(e,t)}};t.exports=c},{123:123,134:134,136:136,56:56}],72:[function(e,t,n){"use strict";function a(e){return d+e.toString(36)}function s(e,t){return e.charAt(t)===d||t===e.length}function r(e){return""===e||e.charAt(0)===d&&e.charAt(e.length-1)!==d}function i(e,t){return 0===t.indexOf(e)&&s(t,e.length)}function o(e){return e?e.substr(0,e.lastIndexOf(d)):""}function c(e,t){if(p(r(e)&&r(t),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",e,t),p(i(e,t),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",e,t),e===t)return e;var n,a=e.length+h;for(n=a;n<t.length&&!s(t,n);n++);return t.substr(0,n)}function u(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var a=0,i=0;n>=i;i++)if(s(e,i)&&s(t,i))a=i;else if(e.charAt(i)!==t.charAt(i))break;var o=e.substr(0,a);return p(r(o),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",e,t,o),o}function l(e,t,n,a,s,r){e=e||"",t=t||"",p(e!==t,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",e);var u=i(t,e);p(u||i(e,t),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",e,t);for(var l=0,m=u?o:c,d=e;;d=m(d,t)){var h;if(s&&d===e||r&&d===t||(h=n(d,u,a)),h===!1||d===t)break;p(l++<f,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",e,t)}}var m=e(91),p=e(150),d=".",h=d.length,f=100,g={createReactRootID:function(){return a(m.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===d&&e.length>1){var t=e.indexOf(d,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,a,s){var r=u(e,t);r!==e&&l(e,r,n,a,!1,!0),r!==t&&l(r,t,n,s,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(l("",e,t,n,!0,!1),l(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){l("",e,t,n,!0,!1)},_getFirstCommonAncestorID:u,_getNextDescendantID:c,isAncestorIDOf:i,SEPARATOR:d};t.exports=g},{150:150,91:91}],73:[function(e,t,n){"use strict";var a={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=a},{}],74:[function(e,t,n){"use strict";var a={currentlyMountingInstance:null,currentlyUnmountingInstance:null};t.exports=a},{}],75:[function(e,t,n){"use strict";function a(e,t){this.value=e,this.requestChange=t}function s(e){var t={value:"undefined"==typeof e?r.PropTypes.any.isRequired:e.isRequired,requestChange:r.PropTypes.func.isRequired};return r.PropTypes.shape(t)}var r=e(31);a.PropTypes={link:s},t.exports=a},{31:31}],76:[function(e,t,n){"use strict";var a=e(119),s={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=a(e);return e.replace(">"," "+s.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(s.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var r=a(e);return r===n}};t.exports=s},{119:119}],77:[function(e,t,n){"use strict";function a(e,t){for(var n=Math.min(e.length,t.length),a=0;n>a;a++)if(e.charAt(a)!==t.charAt(a))return a;return e.length===t.length?-1:n}function s(e){var t=I(e);return t&&K.getID(t)}function r(e){var t=i(e);if(t)if($.hasOwnProperty(t)){var n=$[t];n!==e&&(P(!l(n,t),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",U,t),$[t]=e)}else $[t]=e;return t}function i(e){return e&&e.getAttribute&&e.getAttribute(U)||""}function o(e,t){var n=i(e);n!==t&&delete $[n],e.setAttribute(U,t),$[t]=e}function c(e){return $.hasOwnProperty(e)&&l($[e],e)||($[e]=K.findReactNodeByID(e)),$[e]}function u(e){var t=S.get(e)._rootNodeID;return R.isNullComponentID(t)?null:($.hasOwnProperty(t)&&l($[t],t)||($[t]=K.findReactNodeByID(t)),$[t])}function l(e,t){if(e){P(i(e)===t,"ReactMount: Unexpected modification of `%s`",U);var n=K.findReactContainerForID(t);if(n&&M(n,e))return!0}return!1}function m(e){delete $[e]}function p(e){var t=$[e];return t&&l(t,e)?void(J=t):!1}function d(e){J=null,C.traverseAncestors(e,p);var t=J;return J=null,t}function h(e,t,n,a,s){var r=w.mountComponent(e,t,a,D);e._isTopLevel=!0,K._mountImageIntoNode(r,n,s)}function f(e,t,n,a){var s=k.ReactReconcileTransaction.getPooled();s.perform(h,null,e,t,n,s,a),k.ReactReconcileTransaction.release(s)}var g=e(11),v=e(33),b=e(45),y=e(63),E=e(64),R=e(65),C=e(72),S=e(73),_=e(76),N=e(82),w=e(89),x=e(99),k=e(100),D=e(130),M=e(123),I=e(144),T=e(149),P=e(150),O=e(164),A=e(167),F=e(171),L=C.SEPARATOR,U=g.ID_ATTRIBUTE_NAME,$={},q=1,j=9,B={},W={},H={},z=[],J=null,K={_instancesByReactRootID:B,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,a){return E.checkAndWarnForMutatedProps(t),K.scrollMonitor(n,function(){x.enqueueElementInternal(e,t),a&&x.enqueueCallbackInternal(e,a)}),H[s(n)]=I(n),e},_registerComponent:function(e,t){P(t&&(t.nodeType===q||t.nodeType===j),"_registerComponent(...): Target container is not a DOM element."),v.ensureScrollValueMonitoring();var n=K.registerContainer(t);return B[n]=e,n},_renderNewRootComponent:function(e,t,n){F(null==b.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var a=T(e,null),s=K._registerComponent(a,t);return k.batchedUpdates(f,a,s,t,n),H[s]=I(t),a},render:function(e,t,n){P(y.isValidElement(e),"React.render(): Invalid component element.%s","string"==typeof e?" Instead of passing an element string, make sure to instantiate it by passing it to React.createElement.":"function"==typeof e?" Instead of passing a component class, make sure to instantiate it by passing it to React.createElement.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a=B[s(t)];if(a){var r=a._currentElement;if(A(r,e))return K._updateRootComponent(a,e,t,n).getPublicInstance();K.unmountComponentAtNode(t)}var i=I(t),o=i&&K.isRenderedByReact(i);if(!o||i.nextSibling)for(var c=i;c;){if(K.isRenderedByReact(c)){F(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.");break}c=c.nextSibling}var u=o&&!a,l=K._renderNewRootComponent(e,t,u).getPublicInstance();return n&&n.call(l),l},constructAndRenderComponent:function(e,t,n){var a=y.createElement(e,t);return K.render(a,n)},constructAndRenderComponentByID:function(e,t,n){var a=document.getElementById(n);return P(a,'Tried to get element with id of "%s" but it is not present on the page.',n),K.constructAndRenderComponent(e,t,a)},registerContainer:function(e){var t=s(e);return t&&(t=C.getReactRootIDFromNodeID(t)),t||(t=C.createReactRootID()),W[t]=e,t},unmountComponentAtNode:function(e){F(null==b.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."),P(e&&(e.nodeType===q||e.nodeType===j),"unmountComponentAtNode(...): Target container is not a DOM element.");var t=s(e),n=B[t];return n?(K.unmountComponentFromNode(n,e),delete B[t],delete W[t],delete H[t],!0):!1},unmountComponentFromNode:function(e,t){for(w.unmountComponent(e),t.nodeType===j&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=C.getReactRootIDFromNodeID(e),n=W[t],a=H[t];if(a&&a.parentNode!==n){P(i(a)===t,"ReactMount: Root element ID differed from reactRootID.");var s=n.firstChild;s&&t===i(s)?H[t]=s:F(!1,"ReactMount: Root element has been removed from its original container. New container:",a.parentNode)}return n},findReactNodeByID:function(e){var t=K.findReactContainerForID(e);return K.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=K.getID(e);return t?t.charAt(0)===L:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(K.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=z,a=0,s=d(t)||e;for(n[0]=s.firstChild,n.length=1;a<n.length;){for(var r,i=n[a++];i;){var o=K.getID(i);o?t===o?r=i:C.isAncestorIDOf(o,t)&&(n.length=a=0,n.push(i.firstChild)):n.push(i.firstChild),i=i.nextSibling}if(r)return n.length=0,r}n.length=0,P(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",t,K.getID(e))},_mountImageIntoNode:function(e,t,n){if(P(t&&(t.nodeType===q||t.nodeType===j),"mountComponentIntoNode(...): Target container is not valid."),n){var s=I(t);if(_.canReuseMarkup(e,s))return;var r=s.getAttribute(_.CHECKSUM_ATTR_NAME);s.removeAttribute(_.CHECKSUM_ATTR_NAME);var i=s.outerHTML;s.setAttribute(_.CHECKSUM_ATTR_NAME,r);var o=a(e,i),c=" (client) "+e.substring(o-20,o+20)+"\n (server) "+i.substring(o-20,o+20);P(t.nodeType!==j,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",c),F(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",c)}P(t.nodeType!==j,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See React.renderToString() for server rendering."),O(t,e)},getReactRootID:s,getID:r,setID:o,getNode:c,getNodeFromInstance:u,purgeID:m};N.measureMethods(K,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=K},{100:100,11:11,123:123,130:130,144:144,149:149,150:150,164:164,167:167,171:171,33:33,45:45,63:63,64:64,65:65,72:72,73:73,76:76,82:82,89:89,99:99}],78:[function(e,t,n){"use strict";function a(e,t,n){h.push({parentID:e,parentNode:null,type:l.INSERT_MARKUP,markupIndex:f.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function s(e,t,n){h.push({parentID:e,parentNode:null,type:l.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function r(e,t){h.push({parentID:e,parentNode:null,type:l.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function i(e,t){h.push({parentID:e,parentNode:null,type:l.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function o(){h.length&&(u.processChildrenUpdates(h,f),c())}function c(){h.length=0,f.length=0}var u=e(41),l=e(79),m=e(89),p=e(36),d=0,h=[],f=[],g={Mixin:{mountChildren:function(e,t,n){var a=p.instantiateChildren(e,t,n);this._renderedChildren=a;var s=[],r=0;for(var i in a)if(a.hasOwnProperty(i)){var o=a[i],c=this._rootNodeID+i,u=m.mountComponent(o,c,t,n);o._mountIndex=r,s.push(u),r++}return s},updateTextContent:function(e){d++;var t=!0;try{var n=this._renderedChildren;p.unmountChildren(n);for(var a in n)n.hasOwnProperty(a)&&this._unmountChildByName(n[a],a);this.setTextContent(e),t=!1}finally{d--,d||(t?c():o())}},updateChildren:function(e,t,n){d++;var a=!0;try{this._updateChildren(e,t,n),a=!1}finally{d--,d||(a?c():o())}},_updateChildren:function(e,t,n){var a=this._renderedChildren,s=p.updateChildren(a,e,t,n);if(this._renderedChildren=s,s||a){var r,i=0,o=0;for(r in s)if(s.hasOwnProperty(r)){var c=a&&a[r],u=s[r];c===u?(this.moveChild(c,o,i),i=Math.max(c._mountIndex,i),c._mountIndex=o):(c&&(i=Math.max(c._mountIndex,i),this._unmountChildByName(c,r)),this._mountChildByNameAtIndex(u,r,o,t,n)),o++}for(r in a)!a.hasOwnProperty(r)||s&&s.hasOwnProperty(r)||this._unmountChildByName(a[r],r)}},unmountChildren:function(){var e=this._renderedChildren;p.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&s(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){a(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){r(this._rootNodeID,e._mountIndex)},setTextContent:function(e){i(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,a,s){var r=this._rootNodeID+t,i=m.mountComponent(e,r,a,s);e._mountIndex=n,this.createChild(e,i)},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null}}};t.exports=g},{36:36,41:41,79:79,89:89}],79:[function(e,t,n){"use strict";var a=e(156),s=a({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=s},{156:156}],80:[function(e,t,n){"use strict";function a(e){if("function"==typeof e.type)return e.type;var t=e.type,n=m[t];return null==n&&(m[t]=n=u(t)),n}function s(e){return c(l,"There is no registered component for the tag %s",e.type),new l(e.type,e.props)}function r(e){return new p(e)}function i(e){return e instanceof p}var o=e(29),c=e(150),u=null,l=null,m={},p=null,d={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){p=e},injectComponentClasses:function(e){o(m,e)},injectAutoWrapper:function(e){u=e}},h={getComponentClassForElement:a,createInternalComponent:s,createInstanceForText:r,isTextComponent:i,injection:d};t.exports=h},{150:150,29:29}],81:[function(e,t,n){"use strict";var a=e(150),s={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){a(s.isValidOwner(n),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){a(s.isValidOwner(n),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.getPublicInstance().refs[t]===e.getPublicInstance()&&n.detachRef(t)}};t.exports=s},{150:150}],82:[function(e,t,n){"use strict";function a(e,t,n){return n}var s={enableMeasure:!1,storedMeasure:a,measureMethods:function(e,t,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=s.measure(t,n[a],e[a]))},measure:function(e,t,n){var a=null,r=function(){return s.enableMeasure?(a||(a=s.storedMeasure(e,t,n)),a.apply(this,arguments)):n.apply(this,arguments)};return r.displayName=e+"_"+t,r},injection:{injectMeasure:function(e){s.storedMeasure=e}}};t.exports=s},{}],83:[function(e,t,n){"use strict";function a(e){return function(t,n,a){t.hasOwnProperty(n)?t[n]=e(t[n],a):t[n]=a}}function s(e,t){for(var n in t)if(t.hasOwnProperty(n)){var a=u[n];a&&u.hasOwnProperty(n)?a(e,n,t[n]):e.hasOwnProperty(n)||(e[n]=t[n])}return e}var r=e(29),i=e(129),o=e(155),c=a(function(e,t){return r({},t,e)}),u={children:i,className:a(o),style:c},l={mergeProps:function(e,t){return s(r({},e),t)}};t.exports=l},{129:129,155:155,29:29}],84:[function(e,t,n){"use strict";var a={};a={prop:"prop",context:"context",childContext:"child context"},t.exports=a},{}],85:[function(e,t,n){"use strict";var a=e(156),s=a({prop:null,context:null,childContext:null});t.exports=s},{156:156}],86:[function(e,t,n){"use strict";function a(e){function t(t,n,a,s,r){if(s=s||R,null==n[a]){var i=y[r];return t?new Error("Required "+i+" `"+a+"` was not specified in "+("`"+s+"`.")):null}return e(n,a,s,r)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function s(e){function t(t,n,a,s){var r=t[n],i=f(r);if(i!==e){var o=y[s],c=g(r);return new Error("Invalid "+o+" `"+n+"` of type `"+c+"` "+("supplied to `"+a+"`, expected `"+e+"`."))}return null}return a(t)}function r(){return a(E.thatReturns(null))}function i(e){function t(t,n,a,s){var r=t[n];if(!Array.isArray(r)){var i=y[s],o=f(r);return new Error("Invalid "+i+" `"+n+"` of type "+("`"+o+"` supplied to `"+a+"`, expected an array."))}for(var c=0;c<r.length;c++){var u=e(r,c,a,s);if(u instanceof Error)return u}return null}return a(t)}function o(){function e(e,t,n,a){if(!v.isValidElement(e[t])){var s=y[a];return new Error("Invalid "+s+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}return null}return a(e)}function c(e){function t(t,n,a,s){if(!(t[n]instanceof e)){var r=y[s],i=e.name||R;return new Error("Invalid "+r+" `"+n+"` supplied to "+("`"+a+"`, expected instance of `"+i+"`."))}return null}return a(t)}function u(e){function t(t,n,a,s){for(var r=t[n],i=0;i<e.length;i++)if(r===e[i])return null;var o=y[s],c=JSON.stringify(e);return new Error("Invalid "+o+" `"+n+"` of value `"+r+"` "+("supplied to `"+a+"`, expected one of "+c+"."))}return a(t)}function l(e){function t(t,n,a,s){var r=t[n],i=f(r);if("object"!==i){var o=y[s];return new Error("Invalid "+o+" `"+n+"` of type "+("`"+i+"` supplied to `"+a+"`, expected an object."))}for(var c in r)if(r.hasOwnProperty(c)){var u=e(r,c,a,s);if(u instanceof Error)return u}return null}return a(t)}function m(e){function t(t,n,a,s){for(var r=0;r<e.length;r++){var i=e[r];if(null==i(t,n,a,s))return null}var o=y[s];return new Error("Invalid "+o+" `"+n+"` supplied to "+("`"+a+"`."))}return a(t)}function p(){function e(e,t,n,a){if(!h(e[t])){var s=y[a];return new Error("Invalid "+s+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return a(e)}function d(e){function t(t,n,a,s){var r=t[n],i=f(r);if("object"!==i){var o=y[s];return new Error("Invalid "+o+" `"+n+"` of type `"+i+"` "+("supplied to `"+a+"`, expected `object`."))}for(var c in e){var u=e[c];if(u){var l=u(r,c,a,s);if(l)return l}}return null}return a(t)}function h(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(h);if(null===e||v.isValidElement(e))return!0;e=b.extractIfFragment(e);for(var t in e)if(!h(e[t]))return!1;return!0;default:return!1}}function f(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function g(e){var t=f(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var v=e(63),b=e(69),y=e(84),E=e(129),R="<<anonymous>>",C=o(),S=p(),_={array:s("array"),bool:s("boolean"),func:s("function"),number:s("number"),object:s("object"),string:s("string"),any:r(),arrayOf:i,element:C,instanceOf:c,node:S,objectOf:l,oneOf:u,oneOfType:m,shape:d};t.exports=_},{129:129,63:63,69:69,84:84}],87:[function(e,t,n){"use strict";function a(){this.listenersToPut=[]}var s=e(30),r=e(33),i=e(29);i(a.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];r.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),s.addPoolingTo(a),t.exports=a},{29:29,30:30,33:33}],88:[function(e,t,n){"use strict";function a(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=s.getPooled(null),this.putListenerQueue=c.getPooled()}var s=e(7),r=e(30),i=e(33),o=e(71),c=e(87),u=e(116),l=e(29),m={initialize:o.getSelectionInformation,close:o.restoreSelection},p={initialize:function(){var e=i.isEnabled();return i.setEnabled(!1),e},close:function(e){i.setEnabled(e)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},f=[h,m,p,d],g={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){s.release(this.reactMountReady),this.reactMountReady=null,c.release(this.putListenerQueue),this.putListenerQueue=null}};l(a.prototype,u.Mixin,g),r.addPoolingTo(a),t.exports=a},{116:116,29:29,30:30,33:33,7:7,71:71,87:87}],89:[function(e,t,n){"use strict";function a(){s.attachRefs(this,this._currentElement)}var s=e(90),r=e(64),i={mountComponent:function(e,t,n,s){var i=e.mountComponent(t,n,s);return r.checkAndWarnForMutatedProps(e._currentElement),n.getReactMountReady().enqueue(a,e),i},unmountComponent:function(e){s.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,i){var o=e._currentElement;if(t!==o||null==t._owner){r.checkAndWarnForMutatedProps(t);var c=s.shouldUpdateRefs(o,t);c&&s.detachRefs(e,o),e.receiveComponent(t,n,i),c&&n.getReactMountReady().enqueue(a,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};t.exports=i},{64:64,90:90}],90:[function(e,t,n){"use strict";function a(e,t,n){"function"==typeof e?e(t.getPublicInstance()):r.addComponentAsRefTo(t,e,n)}function s(e,t,n){"function"==typeof e?e(null):r.removeComponentAsRefFrom(t,e,n)}var r=e(81),i={};i.attachRefs=function(e,t){var n=t.ref;null!=n&&a(n,e,t._owner)},i.shouldUpdateRefs=function(e,t){return t._owner!==e._owner||t.ref!==e.ref},i.detachRefs=function(e,t){var n=t.ref;null!=n&&s(n,e,t._owner)},t.exports=i},{81:81}],91:[function(e,t,n){"use strict";var a={injectCreateReactRootIndex:function(e){s.createReactRootIndex=e}},s={createReactRootIndex:null,injection:a};t.exports=s},{}],92:[function(e,t,n){"use strict";function a(e){m(r.isValidElement(e),"renderToString(): You must pass a valid ReactElement.");var t;try{var n=i.createReactRootID();return t=c.getPooled(!1),
t.perform(function(){var a=l(e,null),s=a.mountComponent(n,t,u);return o.addChecksumToMarkup(s)},null)}finally{c.release(t)}}function s(e){m(r.isValidElement(e),"renderToStaticMarkup(): You must pass a valid ReactElement.");var t;try{var n=i.createReactRootID();return t=c.getPooled(!0),t.perform(function(){var a=l(e,null);return a.mountComponent(n,t,u)},null)}finally{c.release(t)}}var r=e(63),i=e(72),o=e(76),c=e(93),u=e(130),l=e(149),m=e(150);t.exports={renderToString:a,renderToStaticMarkup:s}},{130:130,149:149,150:150,63:63,72:72,76:76,93:93}],93:[function(e,t,n){"use strict";function a(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=r.getPooled(null),this.putListenerQueue=i.getPooled()}var s=e(30),r=e(7),i=e(87),o=e(116),c=e(29),u=e(129),l={initialize:function(){this.reactMountReady.reset()},close:u},m={initialize:function(){this.putListenerQueue.reset()},close:u},p=[m,l],d={getTransactionWrappers:function(){return p},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,i.release(this.putListenerQueue),this.putListenerQueue=null}};c(a.prototype,o.Mixin,d),s.addPoolingTo(a),t.exports=a},{116:116,129:129,29:29,30:30,7:7,87:87}],94:[function(e,t,n){"use strict";function a(e,t){var n={};return function(a){n[t]=a,e.setState(n)}}var s={createStateSetter:function(e,t){return function(n,a,s,r,i,o){var c=t.call(e,n,a,s,r,i,o);c&&e.setState(c)}},createStateKeySetter:function(e,t){var n=e.__keySetters||(e.__keySetters={});return n[t]||(n[t]=a(e,t))}};s.Mixin={createStateSetter:function(e){return s.createStateSetter(this,e)},createStateKeySetter:function(e){return s.createStateKeySetter(this,e)}},t.exports=s},{}],95:[function(e,t,n){"use strict";function a(e){}function s(e){return function(t,n){var s;S.isDOMComponent(t)?s=t.getDOMNode():t.tagName&&(s=t);var r=new a;r.target=s;var i=new y(d.eventNameDispatchConfigs[e],v.getID(s),r);E(i,n),u.accumulateTwoPhaseDispatches(i),b.batchedUpdates(function(){c.enqueueEvents(i),c.processEventQueue()})}}function r(){S.Simulate={};var e;for(e in d.eventNameDispatchConfigs)S.Simulate[e]=s(e)}function i(e){return function(t,n){var s=new a(e);E(s,n),S.isDOMComponent(t)?S.simulateNativeEventOnDOMComponent(e,t,s):t.tagName&&S.simulateNativeEventOnNode(e,t,s)}}var o=e(16),c=e(18),u=e(21),l=e(31),m=e(63),p=e(65),d=e(33),h=e(43),f=e(72),g=e(73),v=e(77),b=e(100),y=e(108),E=e(29),R=e(130),C=o.topLevelTypes,S={renderIntoDocument:function(e){var t=document.createElement("div");return l.render(e,t)},isElement:function(e){return m.isValidElement(e)},isElementOfType:function(e,t){return m.isValidElement(e)&&e.type===t},isDOMComponent:function(e){return!!(e&&e.tagName&&e.getDOMNode)},isDOMComponentElement:function(e){return!!(e&&m.isValidElement(e)&&e.tagName)},isCompositeComponent:function(e){return"function"==typeof e.render&&"function"==typeof e.setState},isCompositeComponentWithType:function(e,t){return!(!S.isCompositeComponent(e)||e.constructor!==t)},isCompositeComponentElement:function(e){if(!m.isValidElement(e))return!1;var t=e.type.prototype;return"function"==typeof t.render&&"function"==typeof t.setState},isCompositeComponentElementWithType:function(e,t){return!(!S.isCompositeComponentElement(e)||e.constructor!==t)},getRenderedChildOfCompositeComponent:function(e){if(!S.isCompositeComponent(e))return null;var t=g.get(e);return t._renderedComponent.getPublicInstance()},findAllInRenderedTree:function(e,t){if(!e)return[];var n=t(e)?[e]:[];if(S.isDOMComponent(e)){var a,s=g.get(e),r=s._renderedComponent._renderedChildren;for(a in r)r.hasOwnProperty(a)&&r[a].getPublicInstance&&(n=n.concat(S.findAllInRenderedTree(r[a].getPublicInstance(),t)))}else S.isCompositeComponent(e)&&(n=n.concat(S.findAllInRenderedTree(S.getRenderedChildOfCompositeComponent(e),t)));return n},scryRenderedDOMComponentsWithClass:function(e,t){return S.findAllInRenderedTree(e,function(e){var n=e.props.className;return S.isDOMComponent(e)&&n&&-1!==(" "+n+" ").indexOf(" "+t+" ")})},findRenderedDOMComponentWithClass:function(e,t){var n=S.scryRenderedDOMComponentsWithClass(e,t);if(1!==n.length)throw new Error("Did not find exactly one match (found: "+n.length+") for class:"+t);return n[0]},scryRenderedDOMComponentsWithTag:function(e,t){return S.findAllInRenderedTree(e,function(e){return S.isDOMComponent(e)&&e.tagName===t.toUpperCase()})},findRenderedDOMComponentWithTag:function(e,t){var n=S.scryRenderedDOMComponentsWithTag(e,t);if(1!==n.length)throw new Error("Did not find exactly one match for tag:"+t);return n[0]},scryRenderedComponentsWithType:function(e,t){return S.findAllInRenderedTree(e,function(e){return S.isCompositeComponentWithType(e,t)})},findRenderedComponentWithType:function(e,t){var n=S.scryRenderedComponentsWithType(e,t);if(1!==n.length)throw new Error("Did not find exactly one match for componentType:"+t);return n[0]},mockComponent:function(e,t){return t=t||e.mockTagName||"div",e.prototype.render.mockImplementation(function(){return l.createElement(t,null,this.props.children)}),this},simulateNativeEventOnNode:function(e,t,n){n.target=t,d.ReactEventListener.dispatchEvent(e,n)},simulateNativeEventOnDOMComponent:function(e,t,n){S.simulateNativeEventOnNode(e,t.getDOMNode(),n)},nativeTouchData:function(e,t){return{touches:[{pageX:e,pageY:t}]}},createRenderer:function(){return new _},Simulate:null,SimulateNative:{}},_=function(){this._instance=null};_.prototype.getRenderOutput=function(){return this._instance&&this._instance._renderedComponent&&this._instance._renderedComponent._renderedOutput||null};var N=function(e){this._renderedOutput=e,this._currentElement=null===e||e===!1?p.emptyElement:e};N.prototype={mountComponent:function(){},receiveComponent:function(e){this._renderedOutput=e,this._currentElement=null===e||e===!1?p.emptyElement:e},unmountComponent:function(){}};var w=function(){};E(w.prototype,h.Mixin,{_instantiateReactComponent:function(e){return new N(e)},_replaceNodeWithMarkupByID:function(){},_renderValidatedComponent:h.Mixin._renderValidatedComponentWithoutOwnerOrContext}),_.prototype.render=function(e,t){t||(t=R);var n=b.ReactReconcileTransaction.getPooled();this._render(e,n,t),b.ReactReconcileTransaction.release(n)},_.prototype.unmount=function(){this._instance&&this._instance.unmountComponent()},_.prototype._render=function(e,t,n){if(this._instance)this._instance.receiveComponent(e,t,n);else{var a=f.createReactRootID(),s=new w(e.type);s.construct(e),s.mountComponent(a,t,n),this._instance=s}};var x=c.injection.injectEventPluginOrder;c.injection.injectEventPluginOrder=function(){x.apply(this,arguments),r()};var k=c.injection.injectEventPluginsByName;c.injection.injectEventPluginsByName=function(){k.apply(this,arguments),r()},r();var D;for(D in C){var M=0===D.indexOf("top")?D.charAt(3).toLowerCase()+D.substr(4):D;S.SimulateNative[M]=i(D)}t.exports=S},{100:100,108:108,130:130,16:16,18:18,21:21,29:29,31:31,33:33,43:43,63:63,65:65,72:72,73:73,77:77}],96:[function(e,t,n){"use strict";var a=e(37),s=e(69),r={getChildMapping:function(e){return e?s.extract(a.map(e,function(e){return e})):e},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var a={},s=[];for(var r in e)t.hasOwnProperty(r)?s.length&&(a[r]=s,s=[]):s.push(r);var i,o={};for(var c in t){if(a.hasOwnProperty(c))for(i=0;i<a[c].length;i++){var u=a[c][i];o[a[c][i]]=n(u)}o[c]=n(c)}for(i=0;i<s.length;i++)o[s[i]]=n(s[i]);return o}};t.exports=r},{37:37,69:69}],97:[function(e,t,n){"use strict";function a(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete o.animationend.animation,"TransitionEvent"in window||delete o.transitionend.transition;for(var n in o){var a=o[n];for(var s in a)if(s in t){c.push(a[s]);break}}}function s(e,t,n){e.addEventListener(t,n,!1)}function r(e,t,n){e.removeEventListener(t,n,!1)}var i=e(22),o={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},c=[];i.canUseDOM&&a();var u={addEndEventListener:function(e,t){return 0===c.length?void window.setTimeout(t,0):void c.forEach(function(n){s(e,n,t)})},removeEndEventListener:function(e,t){0!==c.length&&c.forEach(function(n){r(e,n,t)})}};t.exports=u},{22:22}],98:[function(e,t,n){"use strict";var a=e(31),s=e(96),r=e(29),i=e(122),o=e(129),c=a.createClass({displayName:"ReactTransitionGroup",propTypes:{component:a.PropTypes.any,childFactory:a.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:o.thatReturnsArgument}},getInitialState:function(){return{children:s.getChildMapping(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidMount:function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},componentWillReceiveProps:function(e){var t=s.getChildMapping(e.children),n=this.state.children;this.setState({children:s.mergeChildMappings(n,t)});var a;for(a in t){var r=n&&n.hasOwnProperty(a);!t[a]||r||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(a in n){var i=t&&t.hasOwnProperty(a);!n[a]||i||this.currentlyTransitioningKeys[a]||this.keysToLeave.push(a)}},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performAppear:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)},_handleDoneAppearing:function(e){var t=this.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e];var n=s.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performEnter:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)},_handleDoneEntering:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var n=s.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performLeave:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)},_handleDoneLeaving:function(e){var t=this.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n=s.getChildMapping(this.props.children);if(n&&n.hasOwnProperty(e))this.performEnter(e);else{var a=r({},this.state.children);delete a[e],this.setState({children:a})}},render:function(){var e=[];for(var t in this.state.children){var n=this.state.children[t];n&&e.push(i(this.props.childFactory(n),{ref:t,key:t}))}return a.createElement(this.props.component,this.props,e)}});t.exports=c},{122:122,129:129,29:29,31:31,96:96}],99:[function(e,t,n){"use strict";function a(e){e!==r.currentlyMountingInstance&&u.enqueueUpdate(e)}function s(e,t){m(null==i.current,"%s(...): Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state.",t);var n=c.get(e);return n?n===r.currentlyUnmountingInstance?null:n:(p(!t,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op.",t,t),null)}var r=e(74),i=e(45),o=e(63),c=e(73),u=e(100),l=e(29),m=e(150),p=e(171),d={enqueueCallback:function(e,t){m("function"==typeof t,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable.");var n=s(e);return n&&n!==r.currentlyMountingInstance?(n._pendingCallbacks?n._pendingCallbacks.push(t):n._pendingCallbacks=[t],void a(n)):null},enqueueCallbackInternal:function(e,t){m("function"==typeof t,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."),e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],a(e)},enqueueForceUpdate:function(e){var t=s(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,a(t))},enqueueReplaceState:function(e,t){var n=s(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,a(n))},enqueueSetState:function(e,t){var n=s(e,"setState");if(n){var r=n._pendingStateQueue||(n._pendingStateQueue=[]);r.push(t),a(n)}},enqueueSetProps:function(e,t){var n=s(e,"setProps");if(n){m(n._isTopLevel,"setProps(...): You called `setProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created.");var r=n._pendingElement||n._currentElement,i=l({},r.props,t);n._pendingElement=o.cloneAndReplaceProps(r,i),a(n)}},enqueueReplaceProps:function(e,t){var n=s(e,"replaceProps");if(n){m(n._isTopLevel,"replaceProps(...): You called `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created.");var r=n._pendingElement||n._currentElement;n._pendingElement=o.cloneAndReplaceProps(r,t),a(n)}},enqueueElementInternal:function(e,t){e._pendingElement=t,a(e)}};t.exports=d},{100:100,150:150,171:171,29:29,45:45,63:63,73:73,74:74}],100:[function(e,t,n){"use strict";function a(){v(k.ReactReconcileTransaction&&C,"ReactUpdates: must inject a reconcile transaction class and batching strategy")}function s(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=l.getPooled(),this.reconcileTransaction=k.ReactReconcileTransaction.getPooled()}function r(e,t,n,s,r){a(),C.batchedUpdates(e,t,n,s,r)}function i(e,t){return e._mountOrder-t._mountOrder}function o(e){var t=e.dirtyComponentsLength;v(t===y.length,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",t,y.length),y.sort(i);for(var n=0;t>n;n++){var a=y[n],s=a._pendingCallbacks;if(a._pendingCallbacks=null,h.performUpdateIfNecessary(a,e.reconcileTransaction),s)for(var r=0;r<s.length;r++)e.callbackQueue.enqueue(s[r],a.getPublicInstance())}}function c(e){return a(),b(null==p.current,"enqueueUpdate(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."),C.isBatchingUpdates?void y.push(e):void C.batchedUpdates(c,e)}function u(e,t){v(C.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),E.enqueue(e,t),R=!0}var l=e(7),m=e(30),p=e(45),d=e(82),h=e(89),f=e(116),g=e(29),v=e(150),b=e(171),y=[],E=l.getPooled(),R=!1,C=null,S={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),w()):y.length=0}},_={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},N=[S,_];g(s.prototype,f.Mixin,{getTransactionWrappers:function(){return N},destructor:function(){this.dirtyComponentsLength=null,l.release(this.callbackQueue),this.callbackQueue=null,k.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return f.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),m.addPoolingTo(s);var w=function(){for(;y.length||R;){if(y.length){var e=s.getPooled();e.perform(o,null,e),s.release(e)}if(R){R=!1;var t=E;E=l.getPooled(),t.notifyAll(),l.release(t)}}};w=d.measure("ReactUpdates","flushBatchedUpdates",w);var x={injectReconcileTransaction:function(e){v(e,"ReactUpdates: must provide a reconcile transaction class"),k.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){v(e,"ReactUpdates: must provide a batching strategy"),v("function"==typeof e.batchedUpdates,"ReactUpdates: must provide a batchedUpdates() function"),v("boolean"==typeof e.isBatchingUpdates,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"),C=e}},k={ReactReconcileTransaction:null,batchedUpdates:r,enqueueUpdate:c,flushBatchedUpdates:w,injection:x,asap:u};t.exports=k},{116:116,150:150,171:171,29:29,30:30,45:45,7:7,82:82,89:89}],101:[function(e,t,n){"use strict";var a=e(11),s=a.injection.MUST_USE_ATTRIBUTE,r={Properties:{clipPath:s,cx:s,cy:s,d:s,dx:s,dy:s,fill:s,fillOpacity:s,fontFamily:s,fontSize:s,fx:s,fy:s,gradientTransform:s,gradientUnits:s,markerEnd:s,markerMid:s,markerStart:s,offset:s,opacity:s,patternContentUnits:s,patternUnits:s,points:s,preserveAspectRatio:s,r:s,rx:s,ry:s,spreadMethod:s,stopColor:s,stopOpacity:s,stroke:s,strokeDasharray:s,strokeLinecap:s,strokeOpacity:s,strokeWidth:s,textAnchor:s,transform:s,version:s,viewBox:s,x1:s,x2:s,x:s,y1:s,y2:s,y:s},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=r},{11:11}],102:[function(e,t,n){"use strict";function a(e){if("selectionStart"in e&&o.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function s(e){if(b||null==f||f!==u())return null;var t=a(f);if(!v||!p(v,t)){v=t;var n=c.getPooled(h.select,g,e);return n.type="select",n.target=f,i.accumulateTwoPhaseDispatches(n),n}}var r=e(16),i=e(21),o=e(71),c=e(108),u=e(136),l=e(153),m=e(157),p=e(166),d=r.topLevelTypes,h={select:{phasedRegistrationNames:{bubbled:m({onSelect:null}),captured:m({onSelectCapture:null})},dependencies:[d.topBlur,d.topContextMenu,d.topFocus,d.topKeyDown,d.topMouseDown,d.topMouseUp,d.topSelectionChange]}},f=null,g=null,v=null,b=!1,y={eventTypes:h,extractEvents:function(e,t,n,a){switch(e){case d.topFocus:(l(t)||"true"===t.contentEditable)&&(f=t,g=n,v=null);break;case d.topBlur:f=null,g=null,v=null;break;case d.topMouseDown:b=!0;break;case d.topContextMenu:case d.topMouseUp:return b=!1,s(a);case d.topSelectionChange:case d.topKeyDown:case d.topKeyUp:return s(a)}}};t.exports=y},{108:108,136:136,153:153,157:157,16:16,166:166,21:21,71:71}],103:[function(e,t,n){"use strict";var a=Math.pow(2,53),s={createReactRootIndex:function(){return Math.ceil(Math.random()*a)}};t.exports=s},{}],104:[function(e,t,n){"use strict";var a=e(16),s=e(20),r=e(21),i=e(105),o=e(108),c=e(109),u=e(111),l=e(112),m=e(107),p=e(113),d=e(114),h=e(115),f=e(137),g=e(150),v=e(157),b=e(171),y=a.topLevelTypes,E={blur:{phasedRegistrationNames:{bubbled:v({onBlur:!0}),captured:v({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:v({onClick:!0}),captured:v({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:v({onContextMenu:!0}),captured:v({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:v({onCopy:!0}),captured:v({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:v({onCut:!0}),captured:v({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:v({onDoubleClick:!0}),captured:v({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:v({onDrag:!0}),captured:v({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:v({onDragEnd:!0}),captured:v({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:v({onDragEnter:!0}),captured:v({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:v({onDragExit:!0}),captured:v({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:v({onDragLeave:!0}),captured:v({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:v({onDragOver:!0}),captured:v({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:v({onDragStart:!0}),captured:v({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:v({onDrop:!0}),captured:v({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:v({onFocus:!0}),captured:v({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:v({onInput:!0}),captured:v({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:v({onKeyDown:!0}),captured:v({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:v({onKeyPress:!0}),captured:v({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:v({onKeyUp:!0}),captured:v({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:v({onLoad:!0}),captured:v({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:v({onError:!0}),captured:v({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:v({onMouseDown:!0}),captured:v({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:v({onMouseMove:!0}),captured:v({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:v({onMouseOut:!0}),captured:v({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:v({onMouseOver:!0}),captured:v({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:v({onMouseUp:!0}),captured:v({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:v({onPaste:!0}),captured:v({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:v({onReset:!0}),captured:v({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:v({onScroll:!0}),captured:v({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:v({onSubmit:!0}),captured:v({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:v({onTouchCancel:!0}),captured:v({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:v({onTouchEnd:!0}),captured:v({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:v({onTouchMove:!0}),captured:v({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:v({onTouchStart:!0}),captured:v({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:v({onWheel:!0}),captured:v({onWheelCapture:!0})}}},R={topBlur:E.blur,topClick:E.click,topContextMenu:E.contextMenu,topCopy:E.copy,topCut:E.cut,topDoubleClick:E.doubleClick,topDrag:E.drag,topDragEnd:E.dragEnd,topDragEnter:E.dragEnter,topDragExit:E.dragExit,topDragLeave:E.dragLeave,topDragOver:E.dragOver,topDragStart:E.dragStart,topDrop:E.drop,topError:E.error,topFocus:E.focus,topInput:E.input,topKeyDown:E.keyDown,topKeyPress:E.keyPress,topKeyUp:E.keyUp,topLoad:E.load,topMouseDown:E.mouseDown,topMouseMove:E.mouseMove,topMouseOut:E.mouseOut,topMouseOver:E.mouseOver,topMouseUp:E.mouseUp,topPaste:E.paste,topReset:E.reset,topScroll:E.scroll,topSubmit:E.submit,topTouchCancel:E.touchCancel,topTouchEnd:E.touchEnd,topTouchMove:E.touchMove,topTouchStart:E.touchStart,topWheel:E.wheel};for(var C in R)R[C].dependencies=[C];var S={eventTypes:E,executeDispatch:function(e,t,n){var a=s.executeDispatch(e,t,n);b("boolean"!=typeof a,"Returning `false` from an event handler is deprecated and will be ignored in a future release. Instead, manually call e.stopPropagation() or e.preventDefault(), as appropriate."),a===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,a){var s=R[e];if(!s)return null;var v;switch(e){case y.topInput:case y.topLoad:case y.topError:case y.topReset:case y.topSubmit:v=o;break;case y.topKeyPress:if(0===f(a))return null;case y.topKeyDown:case y.topKeyUp:v=u;break;case y.topBlur:case y.topFocus:v=c;break;case y.topClick:if(2===a.button)return null;case y.topContextMenu:case y.topDoubleClick:case y.topMouseDown:case y.topMouseMove:case y.topMouseOut:case y.topMouseOver:case y.topMouseUp:v=l;break;case y.topDrag:case y.topDragEnd:case y.topDragEnter:case y.topDragExit:case y.topDragLeave:case y.topDragOver:case y.topDragStart:case y.topDrop:v=m;break;case y.topTouchCancel:case y.topTouchEnd:case y.topTouchMove:case y.topTouchStart:v=p;break;case y.topScroll:v=d;break;case y.topWheel:v=h;break;case y.topCopy:case y.topCut:case y.topPaste:v=i}g(v,"SimpleEventPlugin: Unhandled event type, `%s`.",e);var b=v.getPooled(s,n,a);return r.accumulateTwoPhaseDispatches(b),b}};t.exports=S},{105:105,107:107,108:108,109:109,111:111,112:112,113:113,114:114,115:115,137:137,150:150,157:157,16:16,171:171,20:20,21:21}],105:[function(e,t,n){"use strict";function a(e,t,n){s.call(this,e,t,n)}var s=e(108),r={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};s.augmentClass(a,r),t.exports=a},{108:108}],106:[function(e,t,n){"use strict";function a(e,t,n){s.call(this,e,t,n)}var s=e(108),r={data:null};s.augmentClass(a,r),t.exports=a},{108:108}],107:[function(e,t,n){"use strict";function a(e,t,n){s.call(this,e,t,n)}var s=e(112),r={dataTransfer:null};s.augmentClass(a,r),t.exports=a},{112:112}],108:[function(e,t,n){"use strict";function a(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var a=this.constructor.Interface;for(var s in a)if(a.hasOwnProperty(s)){var r=a[s];r?this[s]=r(n):this[s]=n[s]}var o=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;o?this.isDefaultPrevented=i.thatReturnsTrue:this.isDefaultPrevented=i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse}var s=e(30),r=e(29),i=e(129),o=e(140),c={type:null,target:o,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};r(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=i.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=i.thatReturnsTrue},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),a.Interface=c,a.augmentClass=function(e,t){var n=this,a=Object.create(n.prototype);r(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=r({},n.Interface,t),e.augmentClass=n.augmentClass,s.addPoolingTo(e,s.threeArgumentPooler)},s.addPoolingTo(a,s.threeArgumentPooler),t.exports=a},{129:129,140:140,29:29,30:30}],109:[function(e,t,n){"use strict";function a(e,t,n){s.call(this,e,t,n)}var s=e(114),r={relatedTarget:null};s.augmentClass(a,r),t.exports=a},{114:114}],110:[function(e,t,n){"use strict";function a(e,t,n){s.call(this,e,t,n)}var s=e(108),r={data:null};s.augmentClass(a,r),t.exports=a},{108:108}],111:[function(e,t,n){"use strict";function a(e,t,n){s.call(this,e,t,n)}var s=e(114),r=e(137),i=e(138),o=e(139),c={key:i,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:o,charCode:function(e){return"keypress"===e.type?r(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?r(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};s.augmentClass(a,c),t.exports=a},{114:114,137:137,138:138,139:139}],112:[function(e,t,n){"use strict";function a(e,t,n){s.call(this,e,t,n)}var s=e(114),r=e(117),i=e(139),o={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:i,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+r.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+r.currentScrollTop}};s.augmentClass(a,o),t.exports=a},{114:114,117:117,139:139}],113:[function(e,t,n){"use strict";function a(e,t,n){s.call(this,e,t,n)}var s=e(114),r=e(139),i={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:r};s.augmentClass(a,i),t.exports=a},{114:114,139:139}],114:[function(e,t,n){"use strict";function a(e,t,n){s.call(this,e,t,n)}var s=e(108),r=e(140),i={view:function(e){if(e.view)return e.view;var t=r(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};s.augmentClass(a,i),t.exports=a},{108:108,140:140}],115:[function(e,t,n){"use strict";function a(e,t,n){s.call(this,e,t,n)}var s=e(112),r={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};s.augmentClass(a,r),t.exports=a},{112:112}],116:[function(e,t,n){"use strict";var a=e(150),s={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,s,r,i,o,c){a(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction.");var u,l;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),l=e.call(t,n,s,r,i,o,c),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(m){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var a=t[n];try{this.wrapperInitData[n]=r.OBSERVED_ERROR,this.wrapperInitData[n]=a.initialize?a.initialize.call(this):null}finally{if(this.wrapperInitData[n]===r.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(s){}}}},closeAll:function(e){a(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open.");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var s,i=t[n],o=this.wrapperInitData[n];try{s=!0,o!==r.OBSERVED_ERROR&&i.close&&i.close.call(this,o),s=!1}finally{if(s)try{this.closeAll(n+1)}catch(c){}}}this.wrapperInitData.length=0}},r={Mixin:s,OBSERVED_ERROR:{}};t.exports=r},{150:150}],117:[function(e,t,n){"use strict";var a={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){a.currentScrollLeft=e.x,a.currentScrollTop=e.y}};t.exports=a},{}],118:[function(e,t,n){"use strict";function a(e,t){if(s(null!=t,"accumulateInto(...): Accumulated items must not be null or undefined."),null==e)return t;var n=Array.isArray(e),a=Array.isArray(t);return n&&a?(e.push.apply(e,t),e):n?(e.push(t),e):a?[e].concat(t):[e,t]}var s=e(150);t.exports=a},{150:150}],119:[function(e,t,n){"use strict";function a(e){for(var t=1,n=0,a=0;a<e.length;a++)t=(t+e.charCodeAt(a))%s,n=(n+t)%s;return t|n<<16}var s=65521;t.exports=a},{}],120:[function(e,t,n){function a(e){return e.replace(s,function(e,t){return t.toUpperCase();
})}var s=/-(.)/g;t.exports=a},{}],121:[function(e,t,n){"use strict";function a(e){return s(e.replace(r,"ms-"))}var s=e(120),r=/^-ms-/;t.exports=a},{120:120}],122:[function(e,t,n){"use strict";function a(e,t){o(!e.ref,"You are calling cloneWithProps() on a child with a ref. This is dangerous because you're creating a new child which will not be added as a ref to its parent.");var n=r.mergeProps(t,e.props);return!n.hasOwnProperty(c)&&e.props.hasOwnProperty(c)&&(n.children=e.props.children),s.createElement(e.type,n)}var s=e(63),r=e(83),i=e(157),o=e(171),c=i({children:null});t.exports=a},{157:157,171:171,63:63,83:83}],123:[function(e,t,n){function a(e,t){return e&&t?e===t?!0:s(e)?!1:s(t)?a(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var s=e(154);t.exports=a},{154:154}],124:[function(e,t,n){function a(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function s(e){return a(e)?Array.isArray(e)?e.slice():r(e):[e]}var r=e(168);t.exports=s},{168:168}],125:[function(e,t,n){"use strict";function a(e){var t=r.createFactory(e),n=s.createClass({tagName:e.toUpperCase(),displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){i(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName)},render:function(){return t(this.props)}});return n}var s=e(38),r=e(63),i=e(150);t.exports=a},{150:150,38:38,63:63}],126:[function(e,t,n){function a(e){var t=e.match(l);return t&&t[1].toLowerCase()}function s(e,t){var n=u;c(!!u,"createNodesFromMarkup dummy not initialized");var s=a(e),r=s&&o(s);if(r){n.innerHTML=r[1]+e+r[2];for(var l=r[0];l--;)n=n.lastChild}else n.innerHTML=e;var m=n.getElementsByTagName("script");m.length&&(c(t,"createNodesFromMarkup(...): Unexpected <script> element rendered."),i(m).forEach(t));for(var p=i(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var r=e(22),i=e(124),o=e(142),c=e(150),u=r.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;t.exports=s},{124:124,142:142,150:150,22:22}],127:[function(e,t,n){"use strict";function a(e){return s(r,"React.addons.classSet will be deprecated in a future version. See http://fb.me/react-addons-classset"),r=!0,"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}).join(" "):Array.prototype.join.call(arguments," ")}var s=e(171),r=!1;t.exports=a},{171:171}],128:[function(e,t,n){"use strict";function a(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var a=isNaN(t);return a||0===t||r.hasOwnProperty(e)&&r[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var s=e(5),r=s.isUnitlessNumber;t.exports=a},{5:5}],129:[function(e,t,n){function a(e){return function(){return e}}function s(){}s.thatReturns=a,s.thatReturnsFalse=a(!1),s.thatReturnsTrue=a(!0),s.thatReturnsNull=a(null),s.thatReturnsThis=function(){return this},s.thatReturnsArgument=function(e){return e},t.exports=s},{}],130:[function(e,t,n){"use strict";var a={};Object.freeze(a),t.exports=a},{}],131:[function(e,t,n){"use strict";function a(e){return r[e]}function s(e){return(""+e).replace(i,a)}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},i=/[&><"']/g;t.exports=s},{}],132:[function(e,t,n){"use strict";function a(e){var t=s.current;return null!==t&&(u(t._warnedAboutRefsInRender,"%s is accessing getDOMNode or findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",t.getName()||"A component"),t._warnedAboutRefsInRender=!0),null==e?null:c(e)?e:r.has(e)?i.getNodeFromInstance(e):(o(null==e.render||"function"!=typeof e.render,"Component (with keys: %s) contains `render` method but is not mounted in the DOM",Object.keys(e)),void o(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(e)))}var s=e(45),r=e(73),i=e(77),o=e(150),c=e(152),u=e(171);t.exports=a},{150:150,152:152,171:171,45:45,73:73,77:77}],133:[function(e,t,n){"use strict";function a(e,t,n){var a=e,s=!a.hasOwnProperty(n);i(s,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),s&&null!=t&&(a[n]=t)}function s(e){if(null==e)return e;var t={};return r(e,a,t),t}var r=e(169),i=e(171);t.exports=s},{169:169,171:171}],134:[function(e,t,n){"use strict";function a(e){try{e.focus()}catch(t){}}t.exports=a},{}],135:[function(e,t,n){"use strict";var a=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=a},{}],136:[function(e,t,n){function a(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=a},{}],137:[function(e,t,n){"use strict";function a(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=a},{}],138:[function(e,t,n){"use strict";function a(e){if(e.key){var t=r[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=s(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?i[e.keyCode]||"Unidentified":""}var s=e(137),r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=a},{137:137}],139:[function(e,t,n){"use strict";function a(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var a=r[e];return a?!!n[a]:!1}function s(e){return a}var r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=s},{}],140:[function(e,t,n){"use strict";function a(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}t.exports=a},{}],141:[function(e,t,n){"use strict";function a(e){var t=e&&(s&&e[s]||e[r]);return"function"==typeof t?t:void 0}var s="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";t.exports=a},{}],142:[function(e,t,n){function a(e){return r(!!i,"Markup wrapping node not initialized"),p.hasOwnProperty(e)||(e="*"),o.hasOwnProperty(e)||("*"===e?i.innerHTML="<link />":i.innerHTML="<"+e+"></"+e+">",o[e]=!i.firstChild),o[e]?p[e]:null}var s=e(22),r=e(150),i=s.canUseDOM?document.createElement("div"):null,o={circle:!0,clipPath:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},c=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],m=[1,"<svg>","</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:c,option:c,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:l,th:l,circle:m,clipPath:m,defs:m,ellipse:m,g:m,line:m,linearGradient:m,path:m,polygon:m,polyline:m,radialGradient:m,rect:m,stop:m,text:m};t.exports=a},{150:150,22:22}],143:[function(e,t,n){"use strict";function a(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function s(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function r(e,t){for(var n=a(e),r=0,i=0;n;){if(3===n.nodeType){if(i=r+n.textContent.length,t>=r&&i>=t)return{node:n,offset:t-r};r=i}n=a(s(n))}}t.exports=r},{}],144:[function(e,t,n){"use strict";function a(e){return e?e.nodeType===s?e.documentElement:e.firstChild:null}var s=9;t.exports=a},{}],145:[function(e,t,n){"use strict";function a(){return!r&&s.canUseDOM&&(r="textContent"in document.documentElement?"textContent":"innerText"),r}var s=e(22),r=null;t.exports=a},{22:22}],146:[function(e,t,n){"use strict";function a(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=a},{}],147:[function(e,t,n){function a(e){return e.replace(s,"-$1").toLowerCase()}var s=/([A-Z])/g;t.exports=a},{}],148:[function(e,t,n){"use strict";function a(e){return s(e).replace(r,"-ms-")}var s=e(147),r=/^ms-/;t.exports=a},{147:147}],149:[function(e,t,n){"use strict";function a(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function s(e,t){var n;if((null===e||e===!1)&&(e=i.emptyElement),"object"==typeof e){var s=e;l(s&&("function"==typeof s.type||"string"==typeof s.type),"Only functions or strings can be mounted as React components."),n=t===s.type&&"string"==typeof s.type?o.createInternalComponent(s):a(s.type)?new s.type(s):new m}else"string"==typeof e||"number"==typeof e?n=o.createInstanceForText(e):u(!1,"Encountered invalid React node of type %s",typeof e);return l("function"==typeof n.construct&&"function"==typeof n.mountComponent&&"function"==typeof n.receiveComponent&&"function"==typeof n.unmountComponent,"Only React Components can be mounted."),n.construct(e),n._mountIndex=0,n._mountImage=null,n._isOwnerNecessary=!1,n._warnedAboutRefsInRender=!1,Object.preventExtensions&&Object.preventExtensions(n),n}var r=e(43),i=e(65),o=e(80),c=e(29),u=e(150),l=e(171),m=function(){};c(m.prototype,r.Mixin,{_instantiateReactComponent:s}),t.exports=s},{150:150,171:171,29:29,43:43,65:65,80:80}],150:[function(e,t,n){"use strict";var a=function(e,t,n,a,s,r,i,o){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,a,s,r,i,o],l=0;c=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return u[l++]}))}throw c.framesToPop=1,c}};t.exports=a},{}],151:[function(e,t,n){"use strict";function a(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,a=n in document;if(!a){var i=document.createElement("div");i.setAttribute(n,"return;"),a="function"==typeof i[n]}return!a&&s&&"wheel"===e&&(a=document.implementation.hasFeature("Events.wheel","3.0")),a}var s,r=e(22);r.canUseDOM&&(s=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=a},{22:22}],152:[function(e,t,n){function a(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=a},{}],153:[function(e,t,n){"use strict";function a(e){return e&&("INPUT"===e.nodeName&&s[e.type]||"TEXTAREA"===e.nodeName)}var s={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=a},{}],154:[function(e,t,n){function a(e){return s(e)&&3==e.nodeType}var s=e(152);t.exports=a},{152:152}],155:[function(e,t,n){"use strict";function a(e){e||(e="");var t,n=arguments.length;if(n>1)for(var a=1;n>a;a++)t=arguments[a],t&&(e=(e?e+" ":"")+t);return e}t.exports=a},{}],156:[function(e,t,n){"use strict";var a=e(150),s=function(e){var t,n={};a(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};t.exports=s},{150:150}],157:[function(e,t,n){var a=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=a},{}],158:[function(e,t,n){"use strict";function a(e,t,n){if(!e)return null;var a={};for(var r in e)s.call(e,r)&&(a[r]=t.call(n,e[r],r,e));return a}var s=Object.prototype.hasOwnProperty;t.exports=a},{}],159:[function(e,t,n){"use strict";function a(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=a},{}],160:[function(e,t,n){"use strict";function a(e){return r(s.isValidElement(e),"onlyChild must be passed a children with exactly one child."),e}var s=e(63),r=e(150);t.exports=a},{150:150,63:63}],161:[function(e,t,n){"use strict";var a,s=e(22);s.canUseDOM&&(a=window.performance||window.msPerformance||window.webkitPerformance),t.exports=a||{}},{22:22}],162:[function(e,t,n){var a=e(161);a&&a.now||(a=Date);var s=a.now.bind(a);t.exports=s},{161:161}],163:[function(e,t,n){"use strict";function a(e){return'"'+s(e)+'"'}var s=e(131);t.exports=a},{131:131}],164:[function(e,t,n){"use strict";var a=e(22),s=/^[ \r\n\t\f]/,r=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,i=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(i=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),a.canUseDOM){var o=document.createElement("div");o.innerHTML=" ",""===o.innerHTML&&(i=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),s.test(t)||"<"===t[0]&&r.test(t)){e.innerHTML="\ufeff"+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=i},{22:22}],165:[function(e,t,n){"use strict";var a=e(22),s=e(131),r=e(164),i=function(e,t){e.textContent=t};a.canUseDOM&&("textContent"in document.documentElement||(i=function(e,t){r(e,s(t))})),t.exports=i},{131:131,164:164,22:22}],166:[function(e,t,n){"use strict";function a(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=a},{}],167:[function(e,t,n){"use strict";function a(e,t){if(null!=e&&null!=t){var n=typeof e,a=typeof t;if("string"===n||"number"===n)return"string"===a||"number"===a;if("object"===a&&e.type===t.type&&e.key===t.key){var r=e._owner===t._owner,i=null,o=null,c=null;return r||(null!=e._owner&&null!=e._owner.getPublicInstance()&&null!=e._owner.getPublicInstance().constructor&&(i=e._owner.getPublicInstance().constructor.displayName),null!=t._owner&&null!=t._owner.getPublicInstance()&&null!=t._owner.getPublicInstance().constructor&&(o=t._owner.getPublicInstance().constructor.displayName),null!=t.type&&null!=t.type.displayName&&(c=t.type.displayName),null!=t.type&&"string"==typeof t.type&&(c=t.type),("string"!=typeof t.type||"input"===t.type||"textarea"===t.type)&&(null!=e._owner&&e._owner._isOwnerNecessary===!1||null!=t._owner&&t._owner._isOwnerNecessary===!1)&&(null!=e._owner&&(e._owner._isOwnerNecessary=!0),null!=t._owner&&(t._owner._isOwnerNecessary=!0),s(!1,"<%s /> is being rendered by both %s and %s using the same key (%s) in the same place. Currently, this means that they don't preserve state. This behavior should be very rare so we're considering deprecating it. Please contact the React team and explain your use case so that we can take that into consideration.",c||"Unknown Component",i||"[Unknown]",o||"[Unknown]",e.key))),r}}return!1}var s=e(171);t.exports=a},{171:171}],168:[function(e,t,n){function a(e){var t=e.length;if(s(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e),"toArray: Array-like object expected"),s("number"==typeof t,"toArray: Object needs a length property"),s(0===t||t-1 in e,"toArray: Object should have keys for indices"),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var a=Array(t),r=0;t>r;r++)a[r]=e[r];return a}var s=e(150);t.exports=a},{150:150}],169:[function(e,t,n){"use strict";function a(e){return v[e]}function s(e,t){return e&&null!=e.key?i(e.key):t.toString(36)}function r(e){return(""+e).replace(b,a)}function i(e){return"$"+r(e)}function o(e,t,n,a,r){var c=typeof e;if(("undefined"===c||"boolean"===c)&&(e=null),null===e||"string"===c||"number"===c||u.isValidElement(e))return a(r,e,""===t?f+s(e,0):t,n),1;var m,v,b,E=0;if(Array.isArray(e))for(var R=0;R<e.length;R++)m=e[R],v=(""!==t?t+g:f)+s(m,R),b=n+E,E+=o(m,v,b,a,r);else{var C=p(e);if(C){var S,_=C.call(e);if(C!==e.entries)for(var N=0;!(S=_.next()).done;)m=S.value,v=(""!==t?t+g:f)+s(m,N++),b=n+E,E+=o(m,v,b,a,r);else for(h(y,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead."),y=!0;!(S=_.next()).done;){var w=S.value;w&&(m=w[1],v=(""!==t?t+g:f)+i(w[0])+g+s(m,0),b=n+E,E+=o(m,v,b,a,r))}}else if("object"===c){d(1!==e.nodeType,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components.");var x=l.extract(e);for(var k in x)x.hasOwnProperty(k)&&(m=x[k],v=(""!==t?t+g:f)+i(k)+g+s(m,0),b=n+E,E+=o(m,v,b,a,r))}}return E}function c(e,t,n){return null==e?0:o(e,"",0,t,n)}var u=e(63),l=e(69),m=e(72),p=e(141),d=e(150),h=e(171),f=m.SEPARATOR,g=":",v={"=":"=0",".":"=1",":":"=2"},b=/[=.:]/g,y=!1;t.exports=c},{141:141,150:150,171:171,63:63,69:69,72:72}],170:[function(e,t,n){"use strict";function a(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?i(new e.constructor,e):e}function s(e,t,n){c(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e);var a=t[n];c(Array.isArray(a),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",n,a)}function r(e,t){if(c("object"==typeof t,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",g.join(", "),d),u.call(t,d))return c(1===Object.keys(t).length,"Cannot have more than one key in an object with %s",d),t[d];var n=a(e);if(u.call(t,h)){var o=t[h];c(o&&"object"==typeof o,"update(): %s expects a spec of type 'object'; got %s",h,o),c(n&&"object"==typeof n,"update(): %s expects a target of type 'object'; got %s",h,n),i(n,t[h])}u.call(t,l)&&(s(e,t,l),t[l].forEach(function(e){n.push(e)})),u.call(t,m)&&(s(e,t,m),t[m].forEach(function(e){n.unshift(e)})),u.call(t,p)&&(c(Array.isArray(e),"Expected %s target to be an array; got %s",p,e),c(Array.isArray(t[p]),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",p,t[p]),t[p].forEach(function(e){c(Array.isArray(e),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",p,t[p]),n.splice.apply(n,e)})),u.call(t,f)&&(c("function"==typeof t[f],"update(): expected spec of %s to be a function; got %s.",f,t[f]),n=t[f](n));for(var b in t)v.hasOwnProperty(b)&&v[b]||(n[b]=r(e[b],t[b]));return n}var i=e(29),o=e(157),c=e(150),u={}.hasOwnProperty,l=o({$push:null}),m=o({$unshift:null}),p=o({$splice:null}),d=o({$set:null}),h=o({$merge:null}),f=o({$apply:null}),g=[l,m,p,d,h,f],v={};g.forEach(function(e){v[e]=!0}),t.exports=r},{150:150,157:157,29:29}],171:[function(e,t,n){"use strict";var a=e(129),s=a;s=function(e,t){for(var n=[],a=2,s=arguments.length;s>a;a++)n.push(arguments[a]);if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(0!==t.indexOf("Failed Composite propType: ")&&!e){var r=0,i="Warning: "+t.replace(/%s/g,function(){return n[r++]});console.warn(i);try{throw new Error(i)}catch(o){}}},t.exports=s},{129:129}]},{},[1])(1)}),function(e){function t(e){for(var t=[],n=0,a=e.length;a>n;n++)t.push(e[n]);return t}function n(e,t){if($e&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(We)){for(var n=[],s=t;s;s=s.source)s.stack&&n.unshift(s.stack);n.unshift(e.stack);var r=n.join("\n"+We+"\n");e.stack=a(r)}}function a(e){for(var t=e.split("\n"),n=[],a=0,i=t.length;i>a;a++){var o=t[a];s(o)||r(o)||!o||n.push(o)}return n.join("\n")}function s(e){var t=o(e);if(!t)return!1;var n=t[0],a=t[1];return n===je&&a>=Be&&Wa>=a}function r(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function i(){if($e)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],a=o(n);if(!a)return;return je=a[0],a[1]}}function o(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var a=/.*@(.+):(\d+)$/.exec(e);return a?[a[1],Number(a[2])]:void 0}function c(e){var t=[];if(!_t(e))return t;St.nonEnumArgs&&e.length&&Nt(e)&&(e=kt.call(e));var n=St.enumPrototypes&&"function"==typeof e,a=St.enumErrorProps&&(e===bt||e instanceof Error);for(var s in e)n&&"prototype"==s||a&&("message"==s||"name"==s)||t.push(s);if(St.nonEnumShadows&&e!==yt){var r=e.constructor,i=-1,o=st;if(e===(r&&r.prototype))var c=e===Et?ht:e===bt?ut:ft.call(e),u=Ct[c];for(;++i<o;)s=at[i],u&&u[s]||!gt.call(e,s)||t.push(s)}return t}function u(e,t,n){for(var a=-1,s=n(e),r=s.length;++a<r;){var i=s[a];if(t(e[i],i,e)===!1)break}return e}function l(e,t){return u(e,t,c)}function m(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function p(e,t,n,a){if(e===t)return 0!==e||1/e==1/t;var s=typeof e,r=typeof t;if(e===e&&(null==e||null==t||"function"!=s&&"object"!=s&&"function"!=r&&"object"!=r))return!1;var i=ft.call(e),o=ft.call(t);if(i==rt&&(i=pt),o==rt&&(o=pt),i!=o)return!1;switch(i){case ot:case ct:return+e==+t;case mt:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case dt:case ht:return e==String(t)}var c=i==it;if(!c){if(i!=pt||!St.nodeClass&&(m(e)||m(t)))return!1;var u=!St.argsObject&&Nt(e)?Object:e.constructor,d=!St.argsObject&&Nt(t)?Object:t.constructor;if(!(u==d||gt.call(e,"constructor")&&gt.call(t,"constructor")||Ue(u)&&u instanceof u&&Ue(d)&&d instanceof d||!("constructor"in e&&"constructor"in t)))return!1}n||(n=[]),a||(a=[]);for(var h=n.length;h--;)if(n[h]==e)return a[h]==t;var f=0,g=!0;if(n.push(e),a.push(t),c){if(h=e.length,f=t.length,g=f==h)for(;f--;){var v=t[f];if(!(g=p(e[f],v,n,a)))break}}else l(t,function(t,s,r){return gt.call(r,s)?(f++,g=gt.call(e,s)&&p(e[s],t,n,a)):void 0}),g&&l(e,function(e,t,n){return gt.call(n,t)?g=--f>-1:void 0});return n.pop(),a.pop(),g}function d(e,t){for(var n=new Array(e),a=0;e>a;a++)n[a]=t();return n}function h(){try{return wt.apply(this,arguments)}catch(e){return Tt.e=e,Tt}}function f(e){if(!Ue(e))throw new TypeError("fn must be a function");return wt=e,h}function g(e){throw e}function v(e,t){this.id=e,this.value=t}function b(e,t){this.scheduler=e,this.disposable=t,this.isDisposed=!1}function y(e,t){t.isDisposed||(t.isDisposed=!0,t.disposable.dispose())}function E(e){this._s=e}function R(e){this._s=e,this._l=e.length,this._i=0}function C(e){this._a=e}function S(e){this._a=e,this._l=x(e),this._i=0}function _(e){return"number"==typeof e&&ke.isFinite(e)}function N(t){var n,a=t[Qe];if(!a&&"string"==typeof t)return n=new E(t),n[Qe]();if(!a&&t.length!==e)return n=new C(t),n[Qe]();if(!a)throw new TypeError("Object is not iterable");return t[Qe]()}function w(e){var t=+e;return 0===t?t:isNaN(t)?t:0>t?-1:1}function x(e){var t=+e.length;return isNaN(t)?0:0!==t&&_(t)?(t=w(t)*Math.floor(Math.abs(t)),0>=t?0:t>Fn?Fn:t):t}function k(e,t){this.observer=e,this.parent=t}function D(e,t){return Vt(e)||(e=Zt),new Un(t,e)}function M(e,t){this.observer=e,this.parent=t}function I(e,t){this.observer=e,this.parent=t}function T(e,t){return new La(function(n){var a=new Bt,s=new Wt;return s.setDisposable(a),a.setDisposable(e.subscribe(function(e){n.onNext(e)},function(e){try{var a=t(e)}catch(r){return n.onError(r)}Fe(a)&&(a=Dn(a));var i=new Bt;s.setDisposable(i),i.setDisposable(a.subscribe(n))},function(e){n.onCompleted(e)})),s},e)}function P(){return!1}function O(e,t){var n=this;return new La(function(a){var s=0,r=e.length;return n.subscribe(function(n){if(r>s){var i=e[s++],o=f(t)(n,i);if(o===Tt)return a.onError(o.e);a.onNext(o)}else a.onCompleted()},function(e){a.onError(e)},function(){a.onCompleted()})},n)}function P(){return!1}function A(){return[]}function P(){return!1}function F(){return[]}function L(e,t,n){this.o=e,this.keyFn=t,this.comparer=n,this.hasCurrentKey=!1,this.currentKey=null,this.isStopped=!1}function U(e,t){this.o=e,this.accumulator=t.accumulator,this.hasSeed=t.hasSeed,this.seed=t.seed,this.hasAccumulation=!1,this.accumulation=null,this.hasValue=!1,this.isStopped=!1}function $(e,t,n){var a=nt(t,n,3);return e.map(function(t,n){var s=a(t,n,e);return Fe(s)&&(s=Dn(s)),(et(s)||Ze(s))&&(s=Ln(s)),s}).concatAll()}function q(e,t,n){for(var a=0,s=e.length;s>a;a++)if(n(e[a],t))return a;return-1}function j(e){this.comparer=e,this.set=[]}function B(e,t,n){return new La(function(a){var s=!1,r=null,i=[];return e.subscribe(function(e){var o,c;try{c=t(e)}catch(u){return void a.onError(u)}if(o=0,s)try{o=n(c,r)}catch(l){return void a.onError(l)}else s=!0,r=c;o>0&&(r=c,i=[]),o>=0&&i.push(e)},function(e){a.onError(e)},function(){a.onNext(i),a.onCompleted()})},e)}function W(e){if(0===e.length)throw new He;return e[0]}function H(t,n,a,s){var r=nt(n,a,3);return new La(function(n){var a=0;return t.subscribe(function(e){var i;try{i=r(e,a,t)}catch(o){return void n.onError(o)}i?(n.onNext(s?a:e),n.onCompleted()):a++},function(e){n.onError(e)},function(){n.onNext(s?-1:e),n.onCompleted()})},t)}function z(e,t){return Array.isArray(e)?J.call(t,e):Y(e)?va(e.call(t)):Q(e)?va(e):X(e)?K(e):Fe(e)?V(e):typeof e===fa?e:_t(e)||Array.isArray(e)?J.call(t,e):e}function J(e){var t=this;return function(n){function a(e,a){if(!s)try{if(e=z(e,t),typeof e!==fa)return o[a]=e,--i||n(null,o);e.call(t,function(e,t){if(!s){if(e)return s=!0,n(e);o[a]=t,--i||n(null,o)}})}catch(r){s=!0,n(r)}}var s,r=Object.keys(e),i=r.length,o=new e.constructor;if(!i)return void an.schedule(function(){n(null,o)});for(var c=0,u=r.length;u>c;c++)a(e[r[c]],r[c])}}function K(e){return function(t){var n,a=!1;e.subscribe(function(e){n=e,a=!0},t,function(){a&&t(null,n)})}}function V(e){return function(t){e.then(function(e){t(null,e)},t)}}function X(e){return e&&typeof e.subscribe===fa}function Y(e){return e&&e.constructor&&"GeneratorFunction"===e.constructor.name}function Q(e){return e&&typeof e.next===fa&&typeof e[ga]===fa}function G(e){e&&an.schedule(function(){throw e})}function Z(e,t,n,a){var s=new ja;return a.push(ee(s,t,n)),e.apply(t,a),s.asObservable()}function ee(e,t,n){return function(){for(var a=arguments.length,s=new Array(a),r=0;a>r;r++)s[r]=arguments[r];if(Ue(n)){if(s=f(n).apply(t,s),s===Tt)return e.onError(s.e);e.onNext(s)}else s.length<=1?e.onNext(s[0]):e.onNext(s);e.onCompleted()}}function te(e,t,n,a){var s=new ja;return a.push(ne(s,t,n)),e.apply(t,a),s.asObservable()}function ne(e,t,n){return function(){var a=arguments[0];if(a)return e.onError(a);for(var s=arguments.length,r=[],i=1;s>i;i++)r[i-1]=arguments[i];if(Ue(n)){var r=f(n).apply(t,r);if(r===Tt)return e.onError(r.e);e.onNext(r)}else r.length<=1?e.onNext(r[0]):e.onNext(r);e.onCompleted()}}function ae(e,t,n){this._e=e,this._n=t,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function se(e,t,n){var a=new At,s=Object.prototype.toString;if("[object NodeList]"===s.call(e)||"[object HTMLCollection]"===s.call(e))for(var r=0,i=e.length;i>r;r++)a.add(se(e.item(r),t,n));else e&&a.add(new ae(e,t,n));return a}function re(e,t,n){return new La(function(a){function s(e,t){if(u[t]=e,i[t]=!0,o||(o=i.every(Ie))){if(r)return a.onError(r);var s=f(n).apply(null,u);if(s===Tt)return a.onError(s.e);a.onNext(s)}c&&u[1]&&a.onCompleted()}var r,i=[!1,!1],o=!1,c=!1,u=new Array(2);return new At(e.subscribe(function(e){s(e,0)},function(e){u[1]?a.onError(e):r=e},function(){c=!0,u[1]&&a.onCompleted()}),t.subscribe(function(e){s(e,1)},function(e){a.onError(e)},function(){c=!0,s(!0,1)}))},e)}function ie(e,t){return e.groupJoin(this,t,Pn,function(e,t){return t})}function oe(e){var t=this;return new La(function(n){var a=new qa,s=new At,r=new Ht(s);return n.onNext(It(a,r)),s.add(t.subscribe(function(e){a.onNext(e)},function(e){a.onError(e),n.onError(e)},function(){a.onCompleted(),n.onCompleted()})),Fe(e)&&(e=Dn(e)),s.add(e.subscribe(function(e){a.onCompleted(),a=new qa,n.onNext(It(a,r))},function(e){a.onError(e),n.onError(e)},function(){a.onCompleted(),n.onCompleted()})),r},t)}function ce(e){var t=this;return new La(function(n){function a(){var t;try{t=e()}catch(r){return void n.onError(r)}Fe(t)&&(t=Dn(t));var c=new Bt;s.setDisposable(c),c.setDisposable(t.take(1).subscribe(Me,function(e){o.onError(e),n.onError(e)},function(){o.onCompleted(),o=new qa,n.onNext(It(o,i)),a()}))}var s=new Wt,r=new At(s),i=new Ht(r),o=new qa;return n.onNext(It(o,i)),r.add(t.subscribe(function(e){o.onNext(e)},function(e){o.onError(e),n.onError(e)},function(){o.onCompleted(),n.onCompleted()})),a(),i},t)}function ue(e,t){return new Ia(e,t)}function le(e){this.patterns=e}function me(e,t){this.expression=e,this.selector=t}function pe(e,t,n){var a=e.get(t);if(!a){var s=new Aa(t,n);return e.set(t,s),s}return a}function de(e,t,n){this.joinObserverArray=e,this.onNext=t,this.onCompleted=n,this.joinObservers=new Oa;for(var a=0,s=this.joinObserverArray.length;s>a;a++){var r=this.joinObserverArray[a];this.joinObservers.set(r,r)}}function he(e,t){return new La(function(n){return t.scheduleWithAbsolute(e,function(){n.onNext(0),n.onCompleted()})})}function fe(e,t,n){return new La(function(a){var s=e,r=Kt(t);return n.scheduleRecursiveWithAbsoluteAndState(0,s,function(e,t){if(r>0){var i=n.now();s+=r,i>=s&&(s=i+r)}a.onNext(e),t(e+1,s)})})}function ge(e,t){return new La(function(n){return t.scheduleWithRelative(Kt(e),function(){n.onNext(0),n.onCompleted()})})}function ve(e,t,n){return e===t?new La(function(e){return n.schedulePeriodicWithState(0,t,function(t){return e.onNext(t),t+1})}):In(function(){return fe(n.now()+e,t,n)})}function be(e,t,n){return new La(function(a){var s,r=!1,i=new Wt,o=null,c=[],u=!1;return s=e.materialize().timestamp(n).subscribe(function(e){var s,l;"E"===e.value.kind?(c=[],c.push(e),o=e.value.exception,l=!u):(c.push({value:e.value,timestamp:e.timestamp+t}),l=!r,r=!0),l&&(null!==o?a.onError(o):(s=new Bt,i.setDisposable(s),s.setDisposable(n.scheduleRecursiveWithRelative(t,function(e){var t,s,i,l;if(null===o){u=!0;do i=null,c.length>0&&c[0].timestamp-n.now()<=0&&(i=c.shift().value),null!==i&&i.accept(a);while(null!==i);l=!1,s=0,c.length>0?(l=!0,s=Math.max(0,c[0].timestamp-n.now())):r=!1,t=o,u=!1,null!==t?a.onError(t):l&&e(s)}}))))}),new At(s,i)},e)}function ye(e,t,n){return In(function(){return be(e,t-n.now(),n)})}function Ee(e,t){return new La(function(n){function a(){i&&(i=!1,n.onNext(s)),r&&n.onCompleted()}var s,r=!1,i=!1,o=new Bt;return o.setDisposable(e.subscribe(function(e){i=!0,s=e},function(e){n.onError(e)},function(){r=!0,o.dispose()})),new At(o,t.subscribe(a,function(e){n.onError(e)},a))},e)}var Re={"function":!0,object:!0},Ce=Re[typeof exports]&&exports&&!exports.nodeType&&exports,Se=Re[typeof self]&&self.Object&&self,_e=Re[typeof window]&&window&&window.Object&&window,Ne=Re[typeof module]&&module&&!module.nodeType&&module,we=Ne&&Ne.exports===Ce&&Ce,xe=Ce&&Ne&&"object"==typeof global&&global&&global.Object&&global,ke=ke=xe||_e!==(this&&this.window)&&_e||Se||this,De={internals:{},config:{Promise:ke.Promise},helpers:{}},Me=De.helpers.noop=function(){},Ie=(De.helpers.notDefined=function(e){return"undefined"==typeof e},De.helpers.identity=function(e){return e}),Te=(De.helpers.pluck=function(e){return function(t){return t[e]}},De.helpers.just=function(e){return function(){return e}},De.helpers.defaultNow=Date.now),Pe=De.helpers.defaultComparer=function(e,t){return xt(e,t)},Oe=De.helpers.defaultSubComparer=function(e,t){
return e>t?1:t>e?-1:0},Ae=(De.helpers.defaultKeySerializer=function(e){return e.toString()},De.helpers.defaultError=function(e){throw e}),Fe=De.helpers.isPromise=function(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then},Le=(De.helpers.asArray=function(){return Array.prototype.slice.call(arguments)},De.helpers.not=function(e){return!e}),Ue=De.helpers.isFunction=function(){var e=function(e){return"function"==typeof e||!1};return e(/x/)&&(e=function(e){return"function"==typeof e&&"[object Function]"==ft.call(e)}),e}();De.config.longStackSupport=!1;var $e=!1;try{throw new Error}catch(qe){$e=!!qe.stack}var je,Be=i(),We="From previous event:",He=De.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};He.prototype=Error.prototype;var ze=De.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};ze.prototype=Error.prototype;var Je=De.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};Je.prototype=Error.prototype;var Ke=De.NotSupportedError=function(e){this.message=e||"This operation is not supported",Error.call(this)};Ke.prototype=Error.prototype;var Ve=De.NotImplementedError=function(e){this.message=e||"This operation is not implemented",Error.call(this)};Ve.prototype=Error.prototype;var Xe=De.helpers.notImplemented=function(){throw new Ve},Ye=De.helpers.notSupported=function(){throw new Ke},Qe="function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_";ke.Set&&"function"==typeof(new ke.Set)["@@iterator"]&&(Qe="@@iterator");var Ge=De.doneEnumerator={done:!0,value:e},Ze=De.helpers.isIterable=function(t){return t[Qe]!==e},et=De.helpers.isArrayLike=function(t){return t&&t.length!==e};De.helpers.iterator=Qe;var tt,nt=De.internals.bindCallback=function(e,t,n){if("undefined"==typeof t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,s){return e.call(t,n,a,s)}}return function(){return e.apply(t,arguments)}},at=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],st=at.length,rt="[object Arguments]",it="[object Array]",ot="[object Boolean]",ct="[object Date]",ut="[object Error]",lt="[object Function]",mt="[object Number]",pt="[object Object]",dt="[object RegExp]",ht="[object String]",ft=Object.prototype.toString,gt=Object.prototype.hasOwnProperty,vt=ft.call(arguments)==rt,bt=Error.prototype,yt=Object.prototype,Et=String.prototype,Rt=yt.propertyIsEnumerable;try{tt=!(ft.call(document)==pt&&!({toString:0}+""))}catch(qe){tt=!0}var Ct={};Ct[it]=Ct[ct]=Ct[mt]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Ct[ot]=Ct[ht]={constructor:!0,toString:!0,valueOf:!0},Ct[ut]=Ct[lt]=Ct[dt]={constructor:!0,toString:!0},Ct[pt]={constructor:!0};var St={};!function(){var e=function(){this.x=1},t=[];e.prototype={valueOf:1,y:1};for(var n in new e)t.push(n);for(n in arguments);St.enumErrorProps=Rt.call(bt,"message")||Rt.call(bt,"name"),St.enumPrototypes=Rt.call(e,"prototype"),St.nonEnumArgs=0!=n,St.nonEnumShadows=!/valueOf/.test(t)}(1);var _t=De.internals.isObject=function(e){var t=typeof e;return e&&("function"==t||"object"==t)||!1},Nt=function(e){return e&&"object"==typeof e?ft.call(e)==rt:!1};vt||(Nt=function(e){return e&&"object"==typeof e?gt.call(e,"callee"):!1});var wt,xt=De.internals.isEqual=function(e,t){return p(e,t,[],[])},kt=({}.hasOwnProperty,Array.prototype.slice),Dt=this.inherits=De.internals.inherits=function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},Mt=De.internals.addProperties=function(e){for(var t=[],n=1,a=arguments.length;a>n;n++)t.push(arguments[n]);for(var s=0,r=t.length;r>s;s++){var i=t[s];for(var o in i)e[o]=i[o]}},It=De.internals.addRef=function(e,t){return new La(function(n){return new At(t.getDisposable(),e.subscribe(n))})},Tt={e:{}};v.prototype.compareTo=function(e){var t=this.value.compareTo(e.value);return 0===t&&(t=this.id-e.id),t};var Pt=De.internals.PriorityQueue=function(e){this.items=new Array(e),this.length=0},Ot=Pt.prototype;Ot.isHigherPriority=function(e,t){return this.items[e].compareTo(this.items[t])<0},Ot.percolate=function(e){if(!(e>=this.length||0>e)){var t=e-1>>1;if(!(0>t||t===e)&&this.isHigherPriority(e,t)){var n=this.items[e];this.items[e]=this.items[t],this.items[t]=n,this.percolate(t)}}},Ot.heapify=function(e){if(+e||(e=0),!(e>=this.length||0>e)){var t=2*e+1,n=2*e+2,a=e;if(t<this.length&&this.isHigherPriority(t,a)&&(a=t),n<this.length&&this.isHigherPriority(n,a)&&(a=n),a!==e){var s=this.items[e];this.items[e]=this.items[a],this.items[a]=s,this.heapify(a)}}},Ot.peek=function(){return this.items[0].value},Ot.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=e,this.heapify()},Ot.dequeue=function(){var e=this.peek();return this.removeAt(0),e},Ot.enqueue=function(e){var t=this.length++;this.items[t]=new v(Pt.count++,e),this.percolate(t)},Ot.remove=function(e){for(var t=0;t<this.length;t++)if(this.items[t].value===e)return this.removeAt(t),!0;return!1},Pt.count=0;var At=De.CompositeDisposable=function(){var e,t,n=[];if(Array.isArray(arguments[0]))n=arguments[0],t=n.length;else for(t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];for(e=0;t>e;e++)if(!qt(n[e]))throw new TypeError("Not a disposable");this.disposables=n,this.isDisposed=!1,this.length=n.length},Ft=At.prototype;Ft.add=function(e){this.isDisposed?e.dispose():(this.disposables.push(e),this.length++)},Ft.remove=function(e){var t=!1;if(!this.isDisposed){var n=this.disposables.indexOf(e);-1!==n&&(t=!0,this.disposables.splice(n,1),this.length--,e.dispose())}return t},Ft.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),n=0;e>n;n++)t[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;e>n;n++)t[n].dispose()}};var Lt=De.Disposable=function(e){this.isDisposed=!1,this.action=e||Me};Lt.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Ut=Lt.create=function(e){return new Lt(e)},$t=Lt.empty={dispose:Me},qt=Lt.isDisposable=function(e){return e&&Ue(e.dispose)},jt=Lt.checkDisposed=function(e){if(e.isDisposed)throw new ze},Bt=De.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};Bt.prototype.getDisposable=function(){return this.current},Bt.prototype.setDisposable=function(e){if(this.current)throw new Error("Disposable has already been assigned");var t=this.isDisposed;!t&&(this.current=e),t&&e&&e.dispose()},Bt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null}e&&e.dispose()};var Wt=De.SerialDisposable=function(){this.isDisposed=!1,this.current=null};Wt.prototype.getDisposable=function(){return this.current},Wt.prototype.setDisposable=function(e){var t=this.isDisposed;if(!t){var n=this.current;this.current=e}n&&n.dispose(),t&&e&&e.dispose()},Wt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null}e&&e.dispose()};var Ht=De.RefCountDisposable=function(){function e(e){this.disposable=e,this.disposable.count++,this.isInnerDisposed=!1}function t(e){this.underlyingDisposable=e,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return e.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},t.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},t.prototype.getDisposable=function(){return this.isDisposed?$t:new e(this)},t}();b.prototype.dispose=function(){this.scheduler.scheduleWithState(this,y)};var zt=De.internals.ScheduledItem=function(e,t,n,a,s){this.scheduler=e,this.state=t,this.action=n,this.dueTime=a,this.comparer=s||Oe,this.disposable=new Bt};zt.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},zt.prototype.compareTo=function(e){return this.comparer(this.dueTime,e.dueTime)},zt.prototype.isCancelled=function(){return this.disposable.isDisposed},zt.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var Jt=De.Scheduler=function(){function e(e,t,n,a){this.now=e,this._schedule=t,this._scheduleRelative=n,this._scheduleAbsolute=a}function t(e,t){return t(),$t}e.isScheduler=function(t){return t instanceof e};var n=e.prototype;return n.schedule=function(e){return this._schedule(e,t)},n.scheduleWithState=function(e,t){return this._schedule(e,t)},n.scheduleWithRelative=function(e,n){return this._scheduleRelative(n,e,t)},n.scheduleWithRelativeAndState=function(e,t,n){return this._scheduleRelative(e,t,n)},n.scheduleWithAbsolute=function(e,n){return this._scheduleAbsolute(n,e,t)},n.scheduleWithAbsoluteAndState=function(e,t,n){return this._scheduleAbsolute(e,t,n)},e.now=Te,e.normalize=function(e){return 0>e&&(e=0),e},e}(),Kt=Jt.normalize,Vt=Jt.isScheduler;!function(e){function t(e,t){function n(t){function a(e,t){return i?r.remove(c):o=!0,s(t,n),$t}var i=!1,o=!1,c=e.scheduleWithState(t,a);o||(r.add(c),i=!0)}var a=t[0],s=t[1],r=new At;return s(a,n),r}function n(e,t,n){function a(t,s){function o(e,t){return c?i.remove(l):u=!0,r(t,a),$t}var c=!1,u=!1,l=e[n](t,s,o);u||(i.add(l),c=!0)}var s=t[0],r=t[1],i=new At;return r(s,a),i}function a(e,t){return n(e,t,"scheduleWithRelativeAndState")}function s(e,t){return n(e,t,"scheduleWithAbsoluteAndState")}function r(e,t){e(function(n){t(e,n)})}e.scheduleRecursive=function(e){return this.scheduleRecursiveWithState(e,r)},e.scheduleRecursiveWithState=function(e,n){return this.scheduleWithState([e,n],t)},e.scheduleRecursiveWithRelative=function(e,t){return this.scheduleRecursiveWithRelativeAndState(t,e,r)},e.scheduleRecursiveWithRelativeAndState=function(e,t,n){return this._scheduleRelative([e,n],t,a)},e.scheduleRecursiveWithAbsolute=function(e,t){return this.scheduleRecursiveWithAbsoluteAndState(t,e,r)},e.scheduleRecursiveWithAbsoluteAndState=function(e,t,n){return this._scheduleAbsolute([e,n],t,s)}}(Jt.prototype),function(e){Jt.prototype.schedulePeriodic=function(e,t){return this.schedulePeriodicWithState(null,e,t)},Jt.prototype.schedulePeriodicWithState=function(e,t,n){if("undefined"==typeof ke.setInterval)throw new Ke;t=Kt(t);var a=e,s=ke.setInterval(function(){a=n(a)},t);return Ut(function(){ke.clearInterval(s)})}}(Jt.prototype),function(e){e.catchError=e["catch"]=function(e){return new sn(this,e)}}(Jt.prototype);var Xt,Yt,Qt=De.internals.SchedulePeriodicRecursive=function(){function e(e,t){t(0,this._period);try{this._state=this._action(this._state)}catch(n){throw this._cancel.dispose(),n}}function t(e,t,n,a){this._scheduler=e,this._state=t,this._period=n,this._action=a}return t.prototype.start=function(){var t=new Bt;return this._cancel=t,t.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,e.bind(this))),t},t}(),Gt=Jt.immediate=function(){function e(e,t){return t(this,e)}return new Jt(Te,e,Ye,Ye)}(),Zt=Jt.currentThread=function(){function e(){for(;n.length>0;){var e=n.shift();!e.isCancelled()&&e.invoke()}}function t(t,a){var s=new zt(this,t,a,this.now());if(n)n.push(s);else{n=[s];var r=f(e)();if(n=null,r===Tt)return g(r.e)}return s.disposable}var n,a=new Jt(Te,t,Ye,Ye);return a.scheduleRequired=function(){return!n},a}(),en=function(){var e,t=Me;if(ke.setTimeout)e=ke.setTimeout,t=ke.clearTimeout;else{if(!ke.WScript)throw new Ke;e=function(e,t){ke.WScript.Sleep(t),e()}}return{setTimeout:e,clearTimeout:t}}(),tn=en.setTimeout,nn=en.clearTimeout;!function(){function e(t){if(r)tn(function(){e(t)},0);else{var n=s[t];if(n){r=!0;var a=f(n)();if(Yt(t),r=!1,a===Tt)return g(a.e)}}}function t(){if(!ke.postMessage||ke.importScripts)return!1;var e=!1,t=ke.onmessage;return ke.onmessage=function(){e=!0},ke.postMessage("","*"),ke.onmessage=t,e}function n(t){"string"==typeof t.data&&t.data.substring(0,c.length)===c&&e(t.data.substring(c.length))}var a=1,s={},r=!1;Yt=function(e){delete s[e]};var i=RegExp("^"+String(ft).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),o="function"==typeof(o=xe&&we&&xe.setImmediate)&&!i.test(o)&&o;if(Ue(o))Xt=function(t){var n=a++;return s[n]=t,o(function(){e(n)}),n};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))Xt=function(t){var n=a++;return s[n]=t,process.nextTick(function(){e(n)}),n};else if(t()){var c="ms.rx.schedule"+Math.random();ke.addEventListener?ke.addEventListener("message",n,!1):ke.attachEvent?ke.attachEvent("onmessage",n):ke.onmessage=n,Xt=function(e){var t=a++;return s[t]=e,ke.postMessage(c+currentId,"*"),t}}else if(ke.MessageChannel){var u=new ke.MessageChannel;u.port1.onmessage=function(t){e(t.data)},Xt=function(e){var t=a++;return s[t]=e,u.port2.postMessage(t),t}}else Xt="document"in ke&&"onreadystatechange"in ke.document.createElement("script")?function(t){var n=ke.document.createElement("script"),r=a++;return s[r]=t,n.onreadystatechange=function(){e(r),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},ke.document.documentElement.appendChild(n),r}:function(t){var n=a++;return s[n]=t,tn(function(){e(n)},0),n}}();var an=Jt.timeout=Jt["default"]=function(){function e(e,t){var n=this,a=new Bt,s=Xt(function(){!a.isDisposed&&a.setDisposable(t(n,e))});return new At(a,Ut(function(){Yt(s)}))}function t(e,t,n){var a=this,s=Jt.normalize(t),r=new Bt;if(0===s)return a.scheduleWithState(e,n);var i=tn(function(){!r.isDisposed&&r.setDisposable(n(a,e))},s);return new At(r,Ut(function(){nn(i)}))}function n(e,t,n){return this.scheduleWithRelativeAndState(e,t-this.now(),n)}return new Jt(Te,e,t,n)}(),sn=function(e){function t(e,t){return this._scheduler.scheduleWithState(e,this._wrap(t))}function n(e,t,n){return this._scheduler.scheduleWithRelativeAndState(e,t,this._wrap(n))}function a(e,t,n){return this._scheduler.scheduleWithAbsoluteAndState(e,t,this._wrap(n))}function s(s,r){this._scheduler=s,this._handler=r,this._recursiveOriginal=null,this._recursiveWrapper=null,e.call(this,this._scheduler.now.bind(this._scheduler),t,n,a)}return Dt(s,e),s.prototype._clone=function(e){return new s(e,this._handler)},s.prototype._wrap=function(e){var t=this;return function(n,a){try{return e(t._getRecursiveWrapper(n),a)}catch(s){if(!t._handler(s))throw s;return $t}}},s.prototype._getRecursiveWrapper=function(e){if(this._recursiveOriginal!==e){this._recursiveOriginal=e;var t=this._clone(e);t._recursiveOriginal=e,t._recursiveWrapper=t,this._recursiveWrapper=t}return this._recursiveWrapper},s.prototype.schedulePeriodicWithState=function(e,t,n){var a=this,s=!1,r=new Bt;return r.setDisposable(this._scheduler.schedulePeriodicWithState(e,t,function(e){if(s)return null;try{return n(e)}catch(t){if(s=!0,!a._handler(t))throw t;return r.dispose(),null}})),r},s}(Jt),rn=De.Notification=function(){function e(e,t,n,a,s,r){this.kind=e,this.value=t,this.exception=n,this._accept=a,this._acceptObservable=s,this.toString=r}return e.prototype.accept=function(e,t,n){return e&&"object"==typeof e?this._acceptObservable(e):this._accept(e,t,n)},e.prototype.toObservable=function(e){var t=this;return Vt(e)||(e=Gt),new La(function(n){return e.scheduleWithState(t,function(e,t){t._acceptObservable(n),"N"===t.kind&&n.onCompleted()})})},e}(),on=rn.createOnNext=function(){function e(e){return e(this.value)}function t(e){return e.onNext(this.value)}function n(){return"OnNext("+this.value+")"}return function(a){return new rn("N",a,null,e,t,n)}}(),cn=rn.createOnError=function(){function e(e,t){return t(this.exception)}function t(e){return e.onError(this.exception)}function n(){return"OnError("+this.exception+")"}return function(a){return new rn("E",null,a,e,t,n)}}(),un=rn.createOnCompleted=function(){function e(e,t,n){return n()}function t(e){return e.onCompleted()}function n(){return"OnCompleted()"}return function(){return new rn("C",null,null,e,t,n)}}(),ln=De.Observer=function(){};ln.prototype.toNotifier=function(){var e=this;return function(t){return t.accept(e)}},ln.prototype.asObserver=function(){var e=this;return new hn(function(t){e.onNext(t)},function(t){e.onError(t)},function(){e.onCompleted()})},ln.prototype.checked=function(){return new fn(this)};var mn=ln.create=function(e,t,n){return e||(e=Me),t||(t=Ae),n||(n=Me),new hn(e,t,n)};ln.fromNotifier=function(e,t){var n=nt(e,t,1);return new hn(function(e){return n(on(e))},function(e){return n(cn(e))},function(){return n(un())})},ln.prototype.notifyOn=function(e){return new vn(e,this)},ln.prototype.makeSafe=function(e){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,e)};var pn,dn=De.internals.AbstractObserver=function(e){function t(){this.isStopped=!1,e.call(this)}return Dt(t,e),t.prototype.next=Xe,t.prototype.error=Xe,t.prototype.completed=Xe,t.prototype.onNext=function(e){this.isStopped||this.next(e)},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.error(e))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.error(e),!0)},t}(ln),hn=De.AnonymousObserver=function(e){function t(t,n,a){e.call(this),this._onNext=t,this._onError=n,this._onCompleted=a}return Dt(t,e),t.prototype.next=function(e){this._onNext(e)},t.prototype.error=function(e){this._onError(e)},t.prototype.completed=function(){this._onCompleted()},t}(dn),fn=function(e){function t(t){e.call(this),this._observer=t,this._state=0}Dt(t,e);var n=t.prototype;return n.onNext=function(e){this.checkAccess();var t=f(this._observer.onNext).call(this._observer,e);this._state=0,t===Tt&&g(t.e)},n.onError=function(e){this.checkAccess();var t=f(this._observer.onError).call(this._observer,e);this._state=2,t===Tt&&g(t.e)},n.onCompleted=function(){this.checkAccess();var e=f(this._observer.onCompleted).call(this._observer);this._state=2,e===Tt&&g(e.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},t}(ln),gn=De.internals.ScheduledObserver=function(e){function t(t,n){e.call(this),this.scheduler=t,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new Wt}return Dt(t,e),t.prototype.next=function(e){var t=this;this.queue.push(function(){t.observer.onNext(e)})},t.prototype.error=function(e){var t=this;this.queue.push(function(){t.observer.onError(e)})},t.prototype.completed=function(){var e=this;this.queue.push(function(){e.observer.onCompleted()})},t.prototype.ensureActive=function(){var e=!1;!this.hasFaulted&&this.queue.length>0&&(e=!this.isAcquired,this.isAcquired=!0),e&&this.disposable.setDisposable(this.scheduler.scheduleRecursiveWithState(this,function(e,t){var n;if(!(e.queue.length>0))return void(e.isAcquired=!1);n=e.queue.shift();var a=f(n)();return a===Tt?(e.queue=[],e.hasFaulted=!0,g(a.e)):void t(e)}))},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.disposable.dispose()},t}(dn),vn=function(e){function t(t,n,a){e.call(this,t,n),this._cancel=a}return Dt(t,e),t.prototype.next=function(t){e.prototype.next.call(this,t),this.ensureActive()},t.prototype.error=function(t){e.prototype.error.call(this,t),this.ensureActive()},t.prototype.completed=function(){e.prototype.completed.call(this),this.ensureActive()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},t}(gn),bn=De.Observable=function(){function e(e,t){return function(a){var s=a.onError;return a.onError=function(t){n(t,e),s.call(a,t)},t.call(e,a)}}function t(t){if(De.config.longStackSupport&&$e){var n=f(g)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=e(this,t)}else this._subscribe=t}return pn=t.prototype,pn.isObservable=function(e){return e&&Ue(e.subscribe)},pn.subscribe=pn.forEach=function(e,t,n){return this._subscribe("object"==typeof e?e:mn(e,t,n))},pn.subscribeOnNext=function(e,t){return this._subscribe(mn("undefined"!=typeof t?function(n){e.call(t,n)}:e))},pn.subscribeOnError=function(e,t){return this._subscribe(mn(null,"undefined"!=typeof t?function(n){e.call(t,n)}:e))},pn.subscribeOnCompleted=function(e,t){return this._subscribe(mn(null,null,"undefined"!=typeof t?function(){e.call(t)}:e))},t}(),yn=De.ObservableBase=function(e){function t(e){return e&&Ue(e.dispose)?e:Ue(e)?Ut(e):$t}function n(e,n){var a=n[0],s=n[1],r=f(s.subscribeCore).call(s,a);return r!==Tt||a.fail(Tt.e)?void a.setDisposable(t(r)):g(Tt.e)}function a(e){var t=new Ua(e),a=[t,this];return Zt.scheduleRequired()?Zt.scheduleWithState(a,n):n(null,a),t}function s(){e.call(this,a)}return Dt(s,e),s.prototype.subscribeCore=Xe,s}(bn),En=function(e){function t(t,n,a,s){this.resultSelector=De.helpers.isFunction(a)?a:null,this.selector=De.internals.bindCallback(De.helpers.isFunction(n)?n:function(){return n},s,3),this.source=t,e.call(this)}function n(e,t,n,a){this.i=0,this.selector=t,this.resultSelector=n,this.source=a,this.isStopped=!1,this.o=e}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this.selector,this.resultSelector,this))},n.prototype._wrapResult=function(e,t,n){return this.resultSelector?e.map(function(e,a){return this.resultSelector(t,e,n,a)},this):e},n.prototype.onNext=function(e){if(!this.isStopped){var t=this.i++,n=f(this.selector)(e,t,this.source);if(n===Tt)return this.o.onError(n.e);De.helpers.isPromise(n)&&(n=De.Observable.fromPromise(n)),(De.helpers.isArrayLike(n)||De.helpers.isIterable(n))&&(n=De.Observable.from(n)),this.o.onNext(this._wrapResult(n,e,t))}},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},t}(yn),Rn=De.internals.Enumerable=function(){},Cn=function(e){function t(t){this.sources=t,e.call(this)}function n(e,t,n){this.o=e,this.s=t,this.e=n,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){var t,a=new Wt,s=Gt.scheduleRecursiveWithState(this.sources[Qe](),function(s,r){if(!t){var i=f(s.next).call(s);if(i===Tt)return e.onError(i.e);if(i.done)return e.onCompleted();var o=i.value;Fe(o)&&(o=Dn(o));var c=new Bt;a.setDisposable(c),c.setDisposable(o.subscribe(new n(e,r,s)))}});return new At(a,s,Ut(function(){t=!0}))},n.prototype.onNext=function(e){this.isStopped||this.o.onNext(e)},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.s(this.e))},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(yn);Rn.prototype.concat=function(){return new Cn(this)};var Sn=function(e){function t(t){this.sources=t,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t,n=this.sources[Qe](),a=new Wt,s=Gt.scheduleRecursiveWithState(null,function(s,r){if(!t){var i=f(n.next).call(n);if(i===Tt)return e.onError(i.e);if(i.done)return null!==s?e.onError(s):e.onCompleted();var o=i.value;Fe(o)&&(o=Dn(o));var c=new Bt;a.setDisposable(c),c.setDisposable(o.subscribe(function(t){e.onNext(t)},r,function(){e.onCompleted()}))}});return new At(a,s,Ut(function(){t=!0}))},t}(yn);Rn.prototype.catchError=function(){return new Sn(this)},Rn.prototype.catchErrorWhen=function(e){var t=this;return new La(function(n){var a,s,r=new qa,i=new qa,o=e(r),c=o.subscribe(i),u=t[Qe](),l=new Wt,m=Gt.scheduleRecursive(function(e){if(!a){var t=f(u.next).call(u);if(t===Tt)return n.onError(t.e);if(t.done)return void(s?n.onError(s):n.onCompleted());var o=t.value;Fe(o)&&(o=Dn(o));var c=new Bt,m=new Bt;l.setDisposable(new At(m,c)),c.setDisposable(o.subscribe(function(e){n.onNext(e)},function(t){m.setDisposable(i.subscribe(e,function(e){n.onError(e)},function(){n.onCompleted()})),r.onNext(t)},function(){n.onCompleted()}))}});return new At(c,l,m,Ut(function(){a=!0}))})};var _n=function(e){function t(e,t){this.v=e,this.c=null==t?-1:t}function n(e){this.v=e.v,this.l=e.c}return Dt(t,e),t.prototype[Qe]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?Ge:(this.l>0&&this.l--,{done:!1,value:this.v})},t}(Rn),Nn=Rn.repeat=function(e,t){return new _n(e,t)},wn=function(e){function t(e,t,n){this.s=e,this.fn=t?nt(t,n,3):null}function n(e){this.i=-1,this.s=e.s,this.l=this.s.length,this.fn=e.fn}return Dt(t,e),t.prototype[Qe]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:Ge},t}(Rn),xn=Rn.of=function(e,t,n){return new wn(e,t,n)};pn.observeOn=function(e){var t=this;return new La(function(n){return t.subscribe(new vn(e,n))},t)},pn.subscribeOn=function(e){var t=this;return new La(function(n){var a=new Bt,s=new Wt;return s.setDisposable(a),a.setDisposable(e.schedule(function(){s.setDisposable(new b(e,t.subscribe(n)))})),s},t)};var kn=function(e){function t(t){this.p=t,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.p.then(function(t){e.onNext(t),e.onCompleted()},function(t){e.onError(t)}),$t},t}(yn),Dn=bn.fromPromise=function(e){return new kn(e)};pn.toPromise=function(e){if(e||(e=De.config.Promise),!e)throw new Ke("Promise type not provided nor in Rx.config.Promise");var t=this;return new e(function(e,n){var a,s=!1;t.subscribe(function(e){a=e,s=!0},n,function(){s&&e(a)})})};var Mn=function(e){function t(t){this.source=t,e.call(this)}function n(e){this.o=e,this.a=[],this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e))},n.prototype.onNext=function(e){this.isStopped||this.a.push(e)},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onNext(this.a),this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(yn);pn.toArray=function(){return new Mn(this)},bn.create=function(e,t){return new La(e,t)};var In=bn.defer=function(e){return new La(function(t){var n;try{n=e()}catch(a){return Vn(a).subscribe(t)}return Fe(n)&&(n=Dn(n)),n.subscribe(t)})},Tn=function(e){function t(t){this.scheduler=t,e.call(this)}function n(e,t){this.observer=e,this.parent=t}function a(e,t){t.onCompleted()}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new n(e,this);return t.run()},n.prototype.run=function(){return this.parent.scheduler.scheduleWithState(this.observer,a)},t}(yn),Pn=bn.empty=function(e){return Vt(e)||(e=Gt),new Tn(e)},On=function(e){function t(t,n,a){this.iterable=t,this.mapper=n,this.scheduler=a,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new An(e,this);return t.run()},t}(yn),An=function(){function e(e,t){this.o=e,this.parent=t}return e.prototype.run=function(){function e(e,t){var r=f(n.next).call(n);if(r===Tt)return a.onError(r.e);if(r.done)return a.onCompleted();var i=r.value;return Ue(s)&&(i=f(s)(i,e),i===Tt)?a.onError(i.e):(a.onNext(i),void t(e+1))}var t=Object(this.parent.iterable),n=N(t),a=this.o,s=this.parent.mapper;return this.parent.scheduler.scheduleRecursiveWithState(0,e)},e}(),Fn=Math.pow(2,53)-1;E.prototype[Qe]=function(){return new R(this._s)},R.prototype[Qe]=function(){return this},R.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:Ge},C.prototype[Qe]=function(){return new S(this._a)},S.prototype[Qe]=function(){return this},S.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:Ge};var Ln=bn.from=function(e,t,n,a){if(null==e)throw new Error("iterable cannot be null.");if(t&&!Ue(t))throw new Error("mapFn when provided must be a function");if(t)var s=nt(t,n,2);return Vt(a)||(a=Zt),new On(e,s,a)},Un=function(e){function t(t,n){this.args=t,this.scheduler=n,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new k(e,this);return t.run()},t}(yn);k.prototype.run=function(){function e(e,s){a>e?(t.onNext(n[e]),s(e+1)):t.onCompleted()}var t=this.observer,n=this.parent.args,a=n.length;return this.parent.scheduler.scheduleRecursiveWithState(0,e)};var $n=bn.fromArray=function(e,t){return Vt(t)||(t=Zt),new Un(e,t)};bn.generate=function(e,t,n,a,s){return Vt(s)||(s=Zt),new La(function(r){var i=!0;return s.scheduleRecursiveWithState(e,function(e,s){var o,c;try{i?i=!1:e=n(e),o=t(e),o&&(c=a(e))}catch(u){return r.onError(u)}o?(r.onNext(c),s(e)):r.onCompleted()})})},bn.of=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];return new Un(t,Zt)},bn.ofWithScheduler=function(e){for(var t=arguments.length,n=new Array(t-1),a=1;t>a;a++)n[a-1]=arguments[a];return new Un(n,e)},bn.ofArrayChanges=function(e){if(!Array.isArray(e))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new La(function(t){function n(e){for(var n=0,a=e.length;a>n;n++)t.onNext(e[n])}return Array.observe(e,n),function(){Array.unobserve(e,n)}})},bn.ofObjectChanges=function(e){if(null==e)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new La(function(t){function n(e){for(var n=0,a=e.length;a>n;n++)t.onNext(e[n])}return Object.observe(e,n),function(){Object.unobserve(e,n)}})};var qn=function(e){function t(){e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){return $t},t}(yn),jn=bn.never=function(){return new qn},Bn=function(e){function t(t,n){this.obj=t,this.keys=Object.keys(t),this.scheduler=n,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new M(e,this);return t.run()},t}(yn);M.prototype.run=function(){function e(e,r){if(s>e){var i=a[e];t.onNext([i,n[i]]),r(e+1)}else t.onCompleted()}var t=this.observer,n=this.parent.obj,a=this.parent.keys,s=a.length;return this.parent.scheduler.scheduleRecursiveWithState(0,e)},bn.pairs=function(e,t){return t||(t=Zt),new Bn(e,t)};var Wn=function(e){function t(t,n,a){this.start=t,this.rangeCount=n,this.scheduler=a,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new Hn(e,this);return t.run()},t}(yn),Hn=function(){function e(e,t){this.observer=e,this.parent=t}return e.prototype.run=function(){function e(e,s){n>e?(a.onNext(t+e),s(e+1)):a.onCompleted()}var t=this.parent.start,n=this.parent.rangeCount,a=this.observer;return this.parent.scheduler.scheduleRecursiveWithState(0,e)},e}();bn.range=function(e,t,n){return Vt(n)||(n=Zt),new Wn(e,t,n)};var zn=function(e){function t(t,n,a){this.value=t,this.repeatCount=null==n?-1:n,this.scheduler=a,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new I(e,this);return t.run()},t}(yn);I.prototype.run=function(){function e(e,a){return(-1===e||e>0)&&(t.onNext(n),e>0&&e--),0===e?t.onCompleted():void a(e)}var t=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursiveWithState(this.parent.repeatCount,e)},bn.repeat=function(e,t,n){return Vt(n)||(n=Zt),new zn(e,t,n)};var Jn=function(e){function t(t,n){this.value=t,this.scheduler=n,e.call(this)}function n(e,t){this.observer=e,this.parent=t}function a(e,t){var n=t[0],a=t[1];a.onNext(n),a.onCompleted()}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new n(e,this);return t.run()},n.prototype.run=function(){return this.parent.scheduler.scheduleWithState([this.parent.value,this.observer],a);
},t}(yn),Kn=(bn["return"]=bn.just=function(e,t){return Vt(t)||(t=Gt),new Jn(e,t)},function(e){function t(t,n){this.error=t,this.scheduler=n,e.call(this)}function n(e,t){this.o=e,this.p=t}function a(e,t){var n=t[0],a=t[1];a.onError(n)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new n(e,this);return t.run()},n.prototype.run=function(){return this.p.scheduler.scheduleWithState([this.p.error,this.o],a)},t}(yn)),Vn=bn["throw"]=bn.throwError=function(e,t){return Vt(t)||(t=Gt),new Kn(e,t)};bn.using=function(e,t){return new La(function(n){var a,s,r=$t;try{a=e(),a&&(r=a),s=t(a)}catch(i){return new At(Vn(i).subscribe(n),r)}return new At(s.subscribe(n),r)})},pn.amb=function(e){var t=this;return new La(function(n){function a(){r||(r=i,u.dispose())}function s(){r||(r=o,c.dispose())}var r,i="L",o="R",c=new Bt,u=new Bt;return Fe(e)&&(e=Dn(e)),c.setDisposable(t.subscribe(function(e){a(),r===i&&n.onNext(e)},function(e){a(),r===i&&n.onError(e)},function(){a(),r===i&&n.onCompleted()})),u.setDisposable(e.subscribe(function(e){s(),r===o&&n.onNext(e)},function(e){s(),r===o&&n.onError(e)},function(){s(),r===o&&n.onCompleted()})),new At(c,u)})},bn.amb=function(){function e(e,t){return e.amb(t)}var t=jn(),n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(var a=0,s=arguments.length;s>a;a++)n.push(arguments[a]);for(var a=0,s=n.length;s>a;a++)t=e(t,n[a]);return t},pn["catch"]=pn.catchError=function(e){return"function"==typeof e?T(this,e):Xn([this,e])};var Xn=bn.catchError=bn["catch"]=function(){var e=[];if(Array.isArray(arguments[0]))e=arguments[0];else for(var t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);return xn(e).catchError()};pn.combineLatest=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];return Array.isArray(t[0])?t[0].unshift(this):t.unshift(this),Yn.apply(this,t)};var Yn=bn.combineLatest=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];var a=t.pop();return Array.isArray(t[0])&&(t=t[0]),new La(function(e){function n(t){if(o[t]=!0,c||(c=o.every(Ie))){try{var n=a.apply(null,l)}catch(s){return e.onError(s)}e.onNext(n)}else u.filter(function(e,n){return n!==t}).every(Ie)&&e.onCompleted()}function s(t){u[t]=!0,u.every(Ie)&&e.onCompleted()}for(var r=t.length,i=function(){return!1},o=d(r,i),c=!1,u=d(r,i),l=new Array(r),m=new Array(r),p=0;r>p;p++)!function(a){var r=t[a],i=new Bt;Fe(r)&&(r=Dn(r)),i.setDisposable(r.subscribe(function(e){l[a]=e,n(a)},function(t){e.onError(t)},function(){s(a)})),m[a]=i}(p);return new At(m)},this)};pn.concat=function(){for(var e=[],t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);return e.unshift(this),Gn.apply(null,e)};var Qn=function(e){function t(t){this.sources=t,e.call(this)}function n(e,t){this.sources=e,this.o=t}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new n(this.sources,e);return t.run()},n.prototype.run=function(){var e,t=new Wt,n=this.sources,a=n.length,s=this.o,r=Gt.scheduleRecursiveWithState(0,function(r,i){if(!e){if(r===a)return s.onCompleted();var o=n[r];Fe(o)&&(o=Dn(o));var c=new Bt;t.setDisposable(c),c.setDisposable(o.subscribe(function(e){s.onNext(e)},function(e){s.onError(e)},function(){i(r+1)}))}});return new At(t,r,Ut(function(){e=!0}))},t}(yn),Gn=bn.concat=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{e=new Array(arguments.length);for(var t=0,n=arguments.length;n>t;t++)e[t]=arguments[t]}return new Qn(e)};pn.concatAll=pn.concatObservable=function(){return this.merge(1)};var Zn=function(e){function t(t,n){this.source=t,this.maxConcurrent=n,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new At;return t.add(this.source.subscribe(new ea(e,this.maxConcurrent,t))),t},t}(yn),ea=function(){function e(e,t,n){this.o=e,this.max=t,this.g=n,this.done=!1,this.q=[],this.activeCount=0,this.isStopped=!1}function t(e,t){this.parent=e,this.sad=t,this.isStopped=!1}return e.prototype.handleSubscribe=function(e){var n=new Bt;this.g.add(n),Fe(e)&&(e=Dn(e)),n.setDisposable(e.subscribe(new t(this,n)))},e.prototype.onNext=function(e){this.isStopped||(this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(e)):this.q.push(e))},e.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,0===this.activeCount&&this.o.onCompleted())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t.prototype.onNext=function(e){this.isStopped||this.parent.o.onNext(e)},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.parent.o.onError(e))},t.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var e=this.parent;e.g.remove(this.sad),e.q.length>0?e.handleSubscribe(e.q.shift()):(e.activeCount--,e.done&&0===e.activeCount&&e.o.onCompleted())}},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(e),!0)},e}();pn.merge=function(e){return"number"!=typeof e?ta(this,e):new Zn(this,e)};var ta=bn.merge=function(){var e,t,n=[],a=arguments.length;if(arguments[0])if(Vt(arguments[0]))for(e=arguments[0],t=1;a>t;t++)n.push(arguments[t]);else for(e=Gt,t=0;a>t;t++)n.push(arguments[t]);else for(e=Gt,t=1;a>t;t++)n.push(arguments[t]);return Array.isArray(n[0])&&(n=n[0]),D(e,n).mergeAll()},na=function(e){function t(t){this.source=t,e.call(this)}function n(e,t){this.o=e,this.g=t,this.isStopped=!1,this.done=!1}function a(e,t){this.parent=e,this.sad=t,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new At,a=new Bt;return t.add(a),a.setDisposable(this.source.subscribe(new n(e,t))),t},n.prototype.onNext=function(e){if(!this.isStopped){var t=new Bt;this.g.add(t),Fe(e)&&(e=Dn(e)),t.setDisposable(e.subscribe(new a(this,t)))}},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,1===this.g.length&&this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},a.prototype.onNext=function(e){this.isStopped||this.parent.o.onNext(e)},a.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.parent.o.onError(e))},a.prototype.onCompleted=function(){if(!this.isStopped){var e=this.parent;this.isStopped=!0,e.g.remove(this.sad),e.done&&1===e.g.length&&e.o.onCompleted()}},a.prototype.dispose=function(){this.isStopped=!0},a.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(e),!0)},t}(yn);pn.mergeAll=pn.mergeObservable=function(){return new na(this)};var aa=De.CompositeError=function(e){this.name="NotImplementedError",this.innerErrors=e,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};aa.prototype=Error.prototype,bn.mergeDelayError=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{var t=arguments.length;e=new Array(t);for(var n=0;t>n;n++)e[n]=arguments[n]}var a=D(null,e);return new La(function(e){function t(){0===i.length?e.onCompleted():1===i.length?e.onError(i[0]):e.onError(new aa(i))}var n=new At,s=new Bt,r=!1,i=[];return n.add(s),s.setDisposable(a.subscribe(function(a){var s=new Bt;n.add(s),Fe(a)&&(a=Dn(a)),s.setDisposable(a.subscribe(function(t){e.onNext(t)},function(e){i.push(e),n.remove(s),r&&1===n.length&&t()},function(){n.remove(s),r&&1===n.length&&t()}))},function(e){i.push(e),r=!0,1===n.length&&t()},function(){r=!0,1===n.length&&t()})),n})},pn.onErrorResumeNext=function(e){if(!e)throw new Error("Second observable is required");return sa([this,e])};var sa=bn.onErrorResumeNext=function(){var e=[];if(Array.isArray(arguments[0]))e=arguments[0];else for(var t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);return new La(function(t){var n=0,a=new Wt,s=Gt.scheduleRecursive(function(s){var r,i;n<e.length?(r=e[n++],Fe(r)&&(r=Dn(r)),i=new Bt,a.setDisposable(i),i.setDisposable(r.subscribe(t.onNext.bind(t),s,s))):t.onCompleted()});return new At(a,s)})};pn.skipUntil=function(e){var t=this;return new La(function(n){var a=!1,s=new At(t.subscribe(function(e){a&&n.onNext(e)},function(e){n.onError(e)},function(){a&&n.onCompleted()}));Fe(e)&&(e=Dn(e));var r=new Bt;return s.add(r),r.setDisposable(e.subscribe(function(){a=!0,r.dispose()},function(e){n.onError(e)},function(){r.dispose()})),s},t)};var ra=function(e){function t(t){this.source=t,e.call(this)}function n(e,t){this.o=e,this.inner=t,this.stopped=!1,this.latest=0,this.hasLatest=!1,this.isStopped=!1}function a(e,t){this.parent=e,this.id=t,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new Wt,a=this.source.subscribe(new n(e,t));return new At(a,t)},n.prototype.onNext=function(e){if(!this.isStopped){var t=new Bt,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(t),Fe(e)&&(e=Dn(e)),t.setDisposable(e.subscribe(new a(this,n)))}},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.stopped=!0,!this.hasLatest&&this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},a.prototype.onNext=function(e){this.isStopped||this.parent.latest===this.id&&this.parent.o.onNext(e)},a.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.parent.latest===this.id&&this.parent.o.onError(e))},a.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.isStopped&&this.parent.o.onCompleted()))},a.prototype.dispose=function(){this.isStopped=!0},a.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(e),!0)},t}(yn);pn["switch"]=pn.switchLatest=function(){return new ra(this)};var ia=function(e){function t(t,n){this.source=t,this.other=Fe(n)?Dn(n):n,e.call(this)}function n(e){this.o=e,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return new At(this.source.subscribe(e),this.other.subscribe(new n(e)))},n.prototype.onNext=function(e){this.isStopped||this.o.onCompleted()},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){!this.isStopped&&(this.isStopped=!0)},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(yn);pn.takeUntil=function(e){return new ia(this,e)},pn.withLatestFrom=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];var a=t.pop(),s=this;return Array.isArray(t[0])&&(t=t[0]),new La(function(e){for(var n=t.length,r=d(n,P),i=!1,o=new Array(n),c=new Array(n+1),u=0;n>u;u++)!function(n){var a=t[n],s=new Bt;Fe(a)&&(a=Dn(a)),s.setDisposable(a.subscribe(function(e){o[n]=e,r[n]=!0,i=r.every(Ie)},function(t){e.onError(t)},Me)),c[n]=s}(u);var l=new Bt;return l.setDisposable(s.subscribe(function(t){var n=[t].concat(o);if(i){var s=f(a).apply(null,n);return s===Tt?e.onError(s.e):void e.onNext(s)}},function(t){e.onError(t)},function(){e.onCompleted()})),c[n]=l,new At(c)},this)},pn.zip=function(){if(Array.isArray(arguments[0]))return O.apply(this,arguments);for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];var a=this,s=t.pop();return t.unshift(a),new La(function(e){for(var n=t.length,r=d(n,A),i=d(n,P),o=new Array(n),c=0;n>c;c++)!function(n){var c=t[n],u=new Bt;Fe(c)&&(c=Dn(c)),u.setDisposable(c.subscribe(function(t){if(r[n].push(t),r.every(function(e){return e.length>0})){var o=r.map(function(e){return e.shift()}),c=f(s).apply(a,o);if(c===Tt)return e.onError(c.e);e.onNext(c)}else i.filter(function(e,t){return t!==n}).every(Ie)&&e.onCompleted()},function(t){e.onError(t)},function(){i[n]=!0,i.every(Ie)&&e.onCompleted()})),o[n]=u}(c);return new At(o)},a)},bn.zip=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];var a=t.shift();return a.zip.apply(a,t)},bn.zipArray=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{var t=arguments.length;e=new Array(t);for(var n=0;t>n;n++)e[n]=arguments[n]}return new La(function(t){for(var n=e.length,a=d(n,F),s=d(n,P),r=new Array(n),i=0;n>i;i++)!function(n){r[n]=new Bt,r[n].setDisposable(e[n].subscribe(function(e){if(a[n].push(e),a.every(function(e){return e.length>0})){var r=a.map(function(e){return e.shift()});t.onNext(r)}else if(s.filter(function(e,t){return t!==n}).every(Ie))return t.onCompleted()},function(e){t.onError(e)},function(){s[n]=!0,s.every(Ie)&&t.onCompleted()}))}(i);return new At(r)})},pn.asObservable=function(){var e=this;return new La(function(t){return e.subscribe(t)},e)},pn.bufferWithCount=function(e,t){return"number"!=typeof t&&(t=e),this.windowWithCount(e,t).selectMany(function(e){return e.toArray()}).where(function(e){return e.length>0})},pn.dematerialize=function(){var e=this;return new La(function(t){return e.subscribe(function(e){return e.accept(t)},function(e){t.onError(e)},function(){t.onCompleted()})},this)};var oa=function(e){function t(t,n,a){this.source=t,this.keyFn=n,this.comparer=a,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new L(e,this.keyFn,this.comparer))},t}(yn);L.prototype.onNext=function(e){if(!this.isStopped){var t=e;return Ue(this.keyFn)&&(t=f(this.keyFn)(e),t===Tt)?this.o.onError(t.e):this.hasCurrentKey&&(comparerEquals=f(this.comparer)(this.currentKey,t),comparerEquals===Tt)?this.o.onError(comparerEquals.e):void(this.hasCurrentKey&&comparerEquals||(this.hasCurrentKey=!0,this.currentKey=t,this.o.onNext(e)))}},L.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},L.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},L.prototype.dispose=function(){this.isStopped=!0},L.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},pn.distinctUntilChanged=function(e,t){return t||(t=Pe),new oa(this,e,t)};var ca=function(e){function t(t,n,a,s){this.source=t,this._oN=n,this._oE=a,this._oC=s,e.call(this)}function n(e,t){this.o=e,this.t=!t._oN||Ue(t._oN)?mn(t._oN||Me,t._oE||Me,t._oC||Me):t._oN,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this))},n.prototype.onNext=function(e){if(!this.isStopped){var t=f(this.t.onNext).call(this.t,e);t===Tt&&this.o.onError(t.e),this.o.onNext(e)}},n.prototype.onError=function(e){if(!this.isStopped){this.isStopped=!0;var t=f(this.t.onError).call(this.t,e);if(t===Tt)return this.o.onError(t.e);this.o.onError(e)}},n.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var e=f(this.t.onCompleted).call(this.t);if(e===Tt)return this.o.onError(e.e);this.o.onCompleted()}},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(yn);pn["do"]=pn.tap=pn.doAction=function(e,t,n){return new ca(this,e,t,n)},pn.doOnNext=pn.tapOnNext=function(e,t){return this.tap("undefined"!=typeof t?function(n){e.call(t,n)}:e)},pn.doOnError=pn.tapOnError=function(e,t){return this.tap(Me,"undefined"!=typeof t?function(n){e.call(t,n)}:e)},pn.doOnCompleted=pn.tapOnCompleted=function(e,t){return this.tap(Me,null,"undefined"!=typeof t?function(){e.call(t)}:e)},pn["finally"]=pn.ensure=function(e){var t=this;return new La(function(n){var a=f(t.subscribe).call(t,n);return a===Tt?(e(),g(a.e)):Ut(function(){var t=f(a.dispose).call(a);e(),t===Tt&&g(t.e)})},this)};var ua=function(e){function t(t){this.source=t,e.call(this)}function n(e){this.o=e,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e))},n.prototype.onNext=Me,n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(e),!0)},t}(yn);pn.ignoreElements=function(){return new ua(this)},pn.materialize=function(){var e=this;return new La(function(t){return e.subscribe(function(e){t.onNext(on(e))},function(e){t.onNext(cn(e)),t.onCompleted()},function(){t.onNext(un()),t.onCompleted()})},e)},pn.repeat=function(e){return Nn(this,e).concat()},pn.retry=function(e){return Nn(this,e).catchError()},pn.retryWhen=function(e){return Nn(this).catchErrorWhen(e)};var la=function(e){function t(t,n,a,s){this.source=t,this.accumulator=n,this.hasSeed=a,this.seed=s,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new U(e,this))},t}(yn);U.prototype={onNext:function(e){return this.isStopped?void 0:(!this.hasValue&&(this.hasValue=!0),this.hasAccumulation?this.accumulation=f(this.accumulator)(this.accumulation,e):(this.accumulation=this.hasSeed?f(this.accumulator)(this.seed,e):e,this.hasAccumulation=!0),this.accumulation===Tt?this.o.onError(this.accumulation.e):void this.o.onNext(this.accumulation))},onError:function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},onCompleted:function(){this.isStopped||(this.isStopped=!0,!this.hasValue&&this.hasSeed&&this.o.onNext(this.seed),this.o.onCompleted())},dispose:function(){this.isStopped=!0},fail:function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)}},pn.scan=function(){var e,t=!1,n=arguments[0];return 2===arguments.length&&(t=!0,e=arguments[1]),new la(this,n,t,e)},pn.skipLast=function(e){if(0>e)throw new Je;var t=this;return new La(function(n){var a=[];return t.subscribe(function(t){a.push(t),a.length>e&&n.onNext(a.shift())},function(e){n.onError(e)},function(){n.onCompleted()})},t)},pn.startWith=function(){var e,t=0;arguments.length&&Vt(arguments[0])?(e=arguments[0],t=1):e=Gt;for(var n=[],a=t,s=arguments.length;s>a;a++)n.push(arguments[a]);return xn([$n(n,e),this]).concat()},pn.takeLast=function(e){if(0>e)throw new Je;var t=this;return new La(function(n){var a=[];return t.subscribe(function(t){a.push(t),a.length>e&&a.shift()},function(e){n.onError(e)},function(){for(;a.length>0;)n.onNext(a.shift());n.onCompleted()})},t)},pn.takeLastBuffer=function(e){var t=this;return new La(function(n){var a=[];return t.subscribe(function(t){a.push(t),a.length>e&&a.shift()},function(e){n.onError(e)},function(){n.onNext(a),n.onCompleted()})},t)},pn.windowWithCount=function(e,t){var n=this;if(+e||(e=0),Math.abs(e)===1/0&&(e=0),0>=e)throw new Je;if(null==t&&(t=e),+t||(t=0),Math.abs(t)===1/0&&(t=0),0>=t)throw new Je;return new La(function(a){function s(){var e=new qa;c.push(e),a.onNext(It(e,i))}var r=new Bt,i=new Ht(r),o=0,c=[];return s(),r.setDisposable(n.subscribe(function(n){for(var a=0,r=c.length;r>a;a++)c[a].onNext(n);var i=o-e+1;i>=0&&i%t===0&&c.shift().onCompleted(),++o%t===0&&s()},function(e){for(;c.length>0;)c.shift().onError(e);a.onError(e)},function(){for(;c.length>0;)c.shift().onCompleted();a.onCompleted()})),i},n)},pn.selectConcat=pn.concatMap=function(e,t,n){return Ue(e)&&Ue(t)?this.concatMap(function(n,a){var s=e(n,a);return Fe(s)&&(s=Dn(s)),(et(s)||Ze(s))&&(s=Ln(s)),s.map(function(e,s){return t(n,e,a,s)})}):Ue(e)?$(this,e,n):$(this,function(){return e})},pn.concatMapObserver=pn.selectConcatObserver=function(e,t,n,a){var s=this,r=nt(e,a,2),i=nt(t,a,1),o=nt(n,a,0);return new La(function(e){var t=0;return s.subscribe(function(n){var a;try{a=r(n,t++)}catch(s){return void e.onError(s)}Fe(a)&&(a=Dn(a)),e.onNext(a)},function(t){var n;try{n=i(t)}catch(a){return void e.onError(a)}Fe(n)&&(n=Dn(n)),e.onNext(n),e.onCompleted()},function(){var t;try{t=o()}catch(n){return void e.onError(n)}Fe(t)&&(t=Dn(t)),e.onNext(t),e.onCompleted()})},this).concatAll()},pn.defaultIfEmpty=function(t){var n=this;return t===e&&(t=null),new La(function(e){var a=!1;return n.subscribe(function(t){a=!0,e.onNext(t)},function(t){e.onError(t)},function(){!a&&e.onNext(t),e.onCompleted()})},n)},j.prototype.push=function(e){var t=-1===q(this.set,e,this.comparer);return t&&this.set.push(e),t},pn.distinct=function(e,t){var n=this;return t||(t=Pe),new La(function(a){var s=new j(t);return n.subscribe(function(t){var n=t;if(e)try{n=e(t)}catch(r){return void a.onError(r)}s.push(n)&&a.onNext(t)},function(e){a.onError(e)},function(){a.onCompleted()})},this)},pn.groupBy=function(e,t,n){return this.groupByUntil(e,t,jn,n)},pn.groupByUntil=function(e,t,n,a){var s=this;return t||(t=Ie),a||(a=Pe),new La(function(r){function i(e){return function(t){t.onError(e)}}var o=new Ma(0,a),c=new At,u=new Ht(c);return c.add(s.subscribe(function(a){var s;try{s=e(a)}catch(l){return o.getValues().forEach(i(l)),void r.onError(l)}var m=!1,p=o.tryGetValue(s);if(p||(p=new qa,o.set(s,p),m=!0),m){var d=new $a(s,p,u),h=new $a(s,p);try{duration=n(h)}catch(l){return o.getValues().forEach(i(l)),void r.onError(l)}r.onNext(d);var f=new Bt;c.add(f);var g=function(){o.remove(s)&&p.onCompleted(),c.remove(f)};f.setDisposable(duration.take(1).subscribe(Me,function(e){o.getValues().forEach(i(e)),r.onError(e)},g))}var v;try{v=t(a)}catch(l){return o.getValues().forEach(i(l)),void r.onError(l)}p.onNext(v)},function(e){o.getValues().forEach(i(e)),r.onError(e)},function(){o.getValues().forEach(function(e){e.onCompleted()}),r.onCompleted()})),u},s)};var ma=function(e){function t(t,n,a){this.source=t,this.selector=nt(n,a,3),e.call(this)}function n(e,t){return function(n,a,s){return e.call(this,t.selector(n,a,s),a,s)}}function a(e,t,n){this.o=e,this.selector=t,this.source=n,this.i=0,this.isStopped=!1}return Dt(t,e),t.prototype.internalMap=function(e,a){return new t(this.source,n(e,this),a)},t.prototype.subscribeCore=function(e){return this.source.subscribe(new a(e,this.selector,this))},a.prototype.onNext=function(e){if(!this.isStopped){var t=f(this.selector)(e,this.i++,this.source);return t===Tt?this.o.onError(t.e):void this.o.onNext(t)}},a.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},a.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},a.prototype.dispose=function(){this.isStopped=!0},a.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(yn);pn.map=pn.select=function(e,t){var n="function"==typeof e?e:function(){return e};return this instanceof ma?this.internalMap(n,t):new ma(this,n,t)},pn.pluck=function(){var t=arguments,n=arguments.length;if(0===n)throw new Error("List of properties cannot be empty.");return this.map(function(a){for(var s=a,r=0;n>r;r++){var i=s[t[r]];if("undefined"==typeof i)return e;s=i}return s})},pn.flatMap=pn.selectMany=function(e,t,n){return new En(this,e,t,n).mergeAll()},pn.flatMapObserver=pn.selectManyObserver=function(e,t,n,a){var s=this;return new La(function(r){var i=0;return s.subscribe(function(t){var n;try{n=e.call(a,t,i++)}catch(s){return void r.onError(s)}Fe(n)&&(n=Dn(n)),r.onNext(n)},function(e){var n;try{n=t.call(a,e)}catch(s){return void r.onError(s)}Fe(n)&&(n=Dn(n)),r.onNext(n),r.onCompleted()},function(){var e;try{e=n.call(a)}catch(t){return void r.onError(t)}Fe(e)&&(e=Dn(e)),r.onNext(e),r.onCompleted()})},s).mergeAll()},De.Observable.prototype.flatMapLatest=function(e,t,n){return new En(this,e,t,n).switchLatest()};var pa=function(e){function t(t,n){this.source=t,this.skipCount=n,e.call(this)}function n(e,t){this.c=t,this.r=t,this.o=e,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this.skipCount))},n.prototype.onNext=function(e){this.isStopped||(this.r<=0?this.o.onNext(e):this.r--)},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(yn);pn.skip=function(e){if(0>e)throw new Je;return new pa(this,e)},pn.skipWhile=function(e,t){var n=this,a=nt(e,t,3);return new La(function(e){var t=0,s=!1;return n.subscribe(function(r){if(!s)try{s=!a(r,t++,n)}catch(i){return void e.onError(i)}s&&e.onNext(r)},function(t){e.onError(t)},function(){e.onCompleted()})},n)},pn.take=function(e,t){if(0>e)throw new Je;if(0===e)return Pn(t);var n=this;return new La(function(t){var a=e;return n.subscribe(function(e){a-->0&&(t.onNext(e),0>=a&&t.onCompleted())},function(e){t.onError(e)},function(){t.onCompleted()})},n)},pn.takeWhile=function(e,t){var n=this,a=nt(e,t,3);return new La(function(e){var t=0,s=!0;return n.subscribe(function(r){if(s){try{s=a(r,t++,n)}catch(i){return void e.onError(i)}s?e.onNext(r):e.onCompleted()}},function(t){e.onError(t)},function(){e.onCompleted()})},n)};var da=function(e){function t(t,n,a){this.source=t,this.predicate=nt(n,a,3),e.call(this)}function n(e,t){return function(n,a,s){return t.predicate(n,a,s)&&e.call(this,n,a,s)}}function a(e,t,n){this.o=e,this.predicate=t,this.source=n,this.i=0,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new a(e,this.predicate,this))},t.prototype.internalFilter=function(e,a){return new t(this.source,n(e,this),a)},a.prototype.onNext=function(e){if(!this.isStopped){var t=f(this.predicate)(e,this.i++,this.source);return t===Tt?this.o.onError(t.e):void(t&&this.o.onNext(e))}},a.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},a.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},a.prototype.dispose=function(){this.isStopped=!0},a.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(yn);pn.filter=pn.where=function(e,t){return this instanceof da?this.internalFilter(e,t):new da(this,e,t)};var ha=function(e){function t(t,n,a,s){this.source=t,this.acc=n,this.hasSeed=a,this.seed=s,e.call(this)}function n(e,t){this.o=e,this.acc=t.acc,this.hasSeed=t.hasSeed,this.seed=t.seed,this.hasAccumulation=!1,this.result=null,this.hasValue=!1,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this))},n.prototype.onNext=function(e){this.isStopped||(!this.hasValue&&(this.hasValue=!0),this.hasAccumulation?this.result=f(this.acc)(this.result,e):(this.result=this.hasSeed?f(this.acc)(this.seed,e):e,this.hasAccumulation=!0),this.result===Tt&&this.o.onError(this.result.e))},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.hasValue&&this.o.onNext(this.result),!this.hasValue&&this.hasSeed&&this.o.onNext(this.seed),!this.hasValue&&!this.hasSeed&&this.o.onError(new He),this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(yn);pn.reduce=function(e){var t=!1;if(2===arguments.length){t=!0;var n=arguments[1]}return new ha(this,e,t,n)},pn.some=function(e,t){var n=this;return e?n.filter(e,t).some():new La(function(e){return n.subscribe(function(){e.onNext(!0),e.onCompleted()},function(t){e.onError(t)},function(){e.onNext(!1),e.onCompleted()})},n)},pn.any=function(){return this.some.apply(this,arguments)},pn.isEmpty=function(){return this.any().map(Le)},pn.every=function(e,t){return this.filter(function(t){return!e(t)},t).some().map(Le)},pn.all=function(){return this.every.apply(this,arguments)},pn.includes=function(e,t){function n(e,t){return 0===e&&0===t||e===t||isNaN(e)&&isNaN(t)}var a=this;return new La(function(s){var r=0,i=+t||0;return Math.abs(i)===1/0&&(i=0),0>i?(s.onNext(!1),s.onCompleted(),$t):a.subscribe(function(t){r++>=i&&n(t,e)&&(s.onNext(!0),s.onCompleted())},function(e){s.onError(e)},function(){s.onNext(!1),s.onCompleted()})},this)},pn.contains=function(e,t){pn.includes(e,t)},pn.count=function(e,t){return e?this.filter(e,t).count():this.reduce(function(e){return e+1},0)},pn.indexOf=function(e,t){var n=this;return new La(function(a){var s=0,r=+t||0;return Math.abs(r)===1/0&&(r=0),0>r?(a.onNext(-1),a.onCompleted(),$t):n.subscribe(function(t){s>=r&&t===e&&(a.onNext(s),a.onCompleted()),s++},function(e){a.onError(e)},function(){a.onNext(-1),a.onCompleted()})},n)},pn.sum=function(e,t){return e&&Ue(e)?this.map(e,t).sum():this.reduce(function(e,t){return e+t},0)},pn.minBy=function(e,t){return t||(t=Oe),B(this,e,function(e,n){return-1*t(e,n)})},pn.min=function(e){return this.minBy(Ie,e).map(function(e){return W(e)})},pn.maxBy=function(e,t){return t||(t=Oe),B(this,e,t)},pn.max=function(e){return this.maxBy(Ie,e).map(function(e){return W(e)})},pn.average=function(e,t){return e&&Ue(e)?this.map(e,t).average():this.reduce(function(e,t){return{sum:e.sum+t,count:e.count+1}},{sum:0,count:0}).map(function(e){if(0===e.count)throw new He;return e.sum/e.count})},pn.sequenceEqual=function(e,t){var n=this;return t||(t=Pe),new La(function(a){var s=!1,r=!1,i=[],o=[],c=n.subscribe(function(e){var n,s;if(o.length>0){s=o.shift();try{n=t(s,e)}catch(c){return void a.onError(c)}n||(a.onNext(!1),a.onCompleted())}else r?(a.onNext(!1),a.onCompleted()):i.push(e)},function(e){a.onError(e)},function(){s=!0,0===i.length&&(o.length>0?(a.onNext(!1),a.onCompleted()):r&&(a.onNext(!0),a.onCompleted()))});(et(e)||Ze(e))&&(e=Ln(e)),Fe(e)&&(e=Dn(e));var u=e.subscribe(function(e){var n;if(i.length>0){var r=i.shift();try{n=t(r,e)}catch(c){return void a.onError(c)}n||(a.onNext(!1),a.onCompleted())}else s?(a.onNext(!1),a.onCompleted()):o.push(e)},function(e){a.onError(e)},function(){r=!0,0===o.length&&(i.length>0?(a.onNext(!1),a.onCompleted()):s&&(a.onNext(!0),a.onCompleted()))});return new At(c,u)},n)},pn.elementAt=function(t,n){if(0>t)throw new Je;var a=this;return new La(function(s){var r=t;return a.subscribe(function(e){0===r--&&(s.onNext(e),s.onCompleted())},function(e){s.onError(e)},function(){n===e?s.onError(new Je):(s.onNext(n),s.onCompleted())})},a)},pn.single=function(e,t){if(Ue(e))return this.filter(e,t).single();var n=this;return new La(function(e){var t,a=!1;return n.subscribe(function(n){a?e.onError(new Error("Sequence contains more than one element")):(t=n,a=!0)},function(t){e.onError(t)},function(){e.onNext(t),e.onCompleted()})},n)},pn.first=function(){var t={},n=this;if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Ue(t.predicate)){var a=t.predicate;t.predicate=nt(a,t.thisArg,3)}return new La(function(a){var s=0;return n.subscribe(function(e){if(t.predicate){var r=f(t.predicate)(e,s++,n);if(r===Tt)return a.onError(r.e);r&&(a.onNext(e),a.onCompleted())}else t.predicate||(a.onNext(e),a.onCompleted())},function(e){a.onError(e)},function(){t.defaultValue===e?a.onError(new He):(a.onNext(t.defaultValue),a.onCompleted())})},n)},pn.last=function(){var t={},n=this;if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Ue(t.predicate)){var a=t.predicate;t.predicate=nt(a,t.thisArg,3)}return new La(function(a){var s,r=!1,i=0;return n.subscribe(function(e){if(t.predicate){var o=f(t.predicate)(e,i++,n);if(o===Tt)return a.onError(o.e);o&&(r=!0,s=e)}else t.predicate||(r=!0,s=e)},function(e){a.onError(e)},function(){r?(a.onNext(s),a.onCompleted()):t.defaultValue===e?a.onError(new He):(a.onNext(t.defaultValue),a.onCompleted())})},n)},pn.find=function(e,t){return H(this,e,t,!1)},pn.findIndex=function(e,t){return H(this,e,t,!0)},pn.toSet=function(){if("undefined"==typeof ke.Set)throw new TypeError;var e=this;return new La(function(t){var n=new ke.Set;return e.subscribe(function(e){n.add(e)},function(e){t.onError(e)},function(){t.onNext(n),
t.onCompleted()})},e)},pn.toMap=function(e,t){if("undefined"==typeof ke.Map)throw new TypeError;var n=this;return new La(function(a){var s=new ke.Map;return n.subscribe(function(n){var r;try{r=e(n)}catch(i){return void a.onError(i)}var o=n;if(t)try{o=t(n)}catch(i){return void a.onError(i)}s.set(r,o)},function(e){a.onError(e)},function(){a.onNext(s),a.onCompleted()})},n)};var fa="function",ga="throw",_t=De.internals.isObject,va=De.spawn=function(e){var t=Y(e);return function(n){function a(e,t){an.schedule(n.bind(r,e,t))}function s(e,t){var n;if(arguments.length>2)for(var t=[],o=1,c=arguments.length;c>o;o++)t.push(arguments[o]);if(e)try{n=i[ga](e)}catch(u){return a(u)}if(!e)try{n=i.next(t)}catch(u){return a(u)}if(n.done)return a(null,n.value);if(n.value=z(n.value,r),typeof n.value!==fa)s(new TypeError("Rx.spawn only supports a function, Promise, Observable, Object or Array."));else{var l=!1;try{n.value.call(r,function(){l||(l=!0,s.apply(r,arguments))})}catch(u){an.schedule(function(){l||(l=!0,s.call(r,u))})}}}var r=this,i=e;if(t){for(var o=[],c=0,u=arguments.length;u>c;c++)o.push(arguments[c]);var u=o.length,l=u&&typeof o[u-1]===fa;n=l?o.pop():G,i=e.apply(this,o)}else n=n||G;s()}};bn.start=function(e,t,n){return ba(e,t,n)()};var ba=bn.toAsync=function(e,t,n){return Vt(n)||(n=an),function(){var a=arguments,s=new ja;return n.schedule(function(){var n;try{n=e.apply(t,a)}catch(r){return void s.onError(r)}s.onNext(n),s.onCompleted()}),s.asObservable()}};bn.fromCallback=function(e,t,n){return function(){for(var a=arguments.length,s=new Array(a),r=0;a>r;r++)s[r]=arguments[r];return Z(e,t,n,s)}},bn.fromNodeCallback=function(e,t,n){return function(){for(var a=arguments.length,s=new Array(a),r=0;a>r;r++)s[r]=arguments[r];return te(e,t,n,s)}},ae.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},De.config.useNativeEvents=!1,bn.fromEvent=function(e,t,n){function a(e){return function(){var t=arguments[0];return Ue(n)&&(t=f(n).apply(null,arguments),t===Tt)?e.onError(t.e):void e.onNext(t)}}return e.addListener?ya(function(n){e.addListener(t,n)},function(n){e.removeListener(t,n)},n):De.config.useNativeEvents||"function"!=typeof e.on||"function"!=typeof e.off?new La(function(n){return se(e,t,a(n))}).publish().refCount():ya(function(n){e.on(t,n)},function(n){e.off(t,n)},n)};var ya=bn.fromEventPattern=function(e,t,n){return new La(function(a){function s(){var e=arguments[0];return Ue(n)&&(e=f(n).apply(null,arguments),e===Tt)?a.onError(e.e):void a.onNext(e)}var r=e(s);return Ut(function(){Ue(t)&&t(s,r)})}).publish().refCount()};bn.startAsync=function(e){var t;try{t=e()}catch(n){return Vn(n)}return Dn(t)};var Ea=function(e){function t(e){var t=this.source.publish(),n=t.subscribe(e),a=$t,s=this.pauser.distinctUntilChanged().subscribe(function(e){e?a=t.connect():(a.dispose(),a=$t)});return new At(n,a,s)}function n(n,a){this.source=n,this.controller=new qa,a&&a.subscribe?this.pauser=this.controller.merge(a):this.pauser=this.controller,e.call(this,t,n)}return Dt(n,e),n.prototype.pause=function(){this.controller.onNext(!1)},n.prototype.resume=function(){this.controller.onNext(!0)},n}(bn);pn.pausable=function(e){return new Ea(this,e)};var Ra=function(t){function n(t){function n(){for(;s.length>0;)t.onNext(s.shift())}var a,s=[],r=re(this.source,this.pauser.startWith(!1).distinctUntilChanged(),function(e,t){return{data:e,shouldFire:t}}).subscribe(function(r){a!==e&&r.shouldFire!=a?(a=r.shouldFire,r.shouldFire&&n()):(a=r.shouldFire,r.shouldFire?t.onNext(r.data):s.push(r.data))},function(e){n(),t.onError(e)},function(){n(),t.onCompleted()});return r}function a(e,a){this.source=e,this.controller=new qa,a&&a.subscribe?this.pauser=this.controller.merge(a):this.pauser=this.controller,t.call(this,n,e)}return Dt(a,t),a.prototype.pause=function(){this.controller.onNext(!1)},a.prototype.resume=function(){this.controller.onNext(!0)},a}(bn);pn.pausableBuffered=function(e){return new Ra(this,e)};var Ca=function(e){function t(e){return this.source.subscribe(e)}function n(n,a,s){e.call(this,t,n),this.subject=new Sa(a,s),this.source=n.multicast(this.subject).refCount()}return Dt(n,e),n.prototype.request=function(e){return this.subject.request(null==e?-1:e)},n}(bn),Sa=function(e){function t(e){return this.subject.subscribe(e)}function n(n,a){null==n&&(n=!0),e.call(this,t),this.subject=new qa,this.enableQueue=n,this.queue=n?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=a||Zt}return Dt(n,e),Mt(n.prototype,ln,{onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(rn.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(e){this.hasFailed=!0,this.error=e,this.enableQueue&&0!==this.queue.length?this.queue.push(rn.createOnError(e)):(this.subject.onError(e),this.disposeCurrentRequest())},onNext:function(e){this.requestedCount<=0?this.enableQueue&&this.queue.push(rn.createOnNext(e)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(e))},_processRequest:function(e){if(this.enableQueue)for(;this.queue.length>0&&(e>0||"N"!==this.queue[0].kind);){var t=this.queue.shift();t.accept(this.subject),"N"===t.kind?e--:(this.disposeCurrentRequest(),this.queue=[])}return e},request:function(e){this.disposeCurrentRequest();var t=this;return this.requestedDisposable=this.scheduler.scheduleWithState(e,function(e,n){var a=t._processRequest(n),s=t.hasCompleted||t.hasFailed;return!s&&a>0?(t.requestedCount=a,Ut(function(){t.requestedCount=0})):void 0}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),n}(bn);pn.controlled=function(e,t){return e&&Vt(e)&&(t=e,e=!0),null==e&&(e=!0),new Ca(this,e,t)};var _a=function(e){function t(e){this.subscription=this.source.subscribe(new a(e,this,this.subscription));var t=this;return an.schedule(function(){t.source.request(1)}),this.subscription}function n(n){e.call(this,t,n),this.source=n}Dt(n,e);var a=function(e){function t(t,n,a){e.call(this),this.observer=t,this.observable=n,this.cancel=a}Dt(t,e);var n=t.prototype;return n.completed=function(){this.observer.onCompleted(),this.dispose()},n.error=function(e){this.observer.onError(e),this.dispose()},n.next=function(e){this.observer.onNext(e);var t=this;an.schedule(function(){t.observable.source.request(1)})},n.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),e.prototype.dispose.call(this)},t}(dn);return n}(bn);Ca.prototype.stopAndWait=function(){return new _a(this)};var Na=function(e){function t(e){this.subscription=this.source.subscribe(new a(e,this,this.subscription));var t=this;return an.schedule(function(){t.source.request(t.windowSize)}),this.subscription}function n(n,a){e.call(this,t,n),this.source=n,this.windowSize=a}Dt(n,e);var a=function(e){function t(e,t,n){this.observer=e,this.observable=t,this.cancel=n,this.received=0}Dt(t,e);var n=t.prototype;return n.completed=function(){this.observer.onCompleted(),this.dispose()},n.error=function(e){this.observer.onError(e),this.dispose()},n.next=function(e){if(this.observer.onNext(e),this.received=++this.received%this.observable.windowSize,0===this.received){var t=this;an.schedule(function(){t.observable.source.request(t.observable.windowSize)})}},n.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),e.prototype.dispose.call(this)},t}(dn);return n}(bn);Ca.prototype.windowed=function(e){return new Na(this,e)},pn.pipe=function(e){function t(){n.resume()}var n=this.pausableBuffered();return e.addListener("drain",t),n.subscribe(function(t){!e.write(String(t))&&n.pause()},function(t){e.emit("error",t)},function(){!e._isStdio&&e.end(),e.removeListener("drain",t)}),n.resume(),e},pn.multicast=function(e,t){var n=this;return"function"==typeof e?new La(function(a){var s=n.multicast(e());return new At(t(s).subscribe(a),s.connect())},n):new Da(n,e)},pn.publish=function(e){return e&&Ue(e)?this.multicast(function(){return new qa},e):this.multicast(new qa)},pn.share=function(){return this.publish().refCount()},pn.publishLast=function(e){return e&&Ue(e)?this.multicast(function(){return new ja},e):this.multicast(new ja)},pn.publishValue=function(e,t){return 2===arguments.length?this.multicast(function(){return new xa(t)},e):this.multicast(new xa(e))},pn.shareValue=function(e){return this.publishValue(e).refCount()},pn.replay=function(e,t,n,a){return e&&Ue(e)?this.multicast(function(){return new ka(t,n,a)},e):this.multicast(new ka(t,n,a))},pn.shareReplay=function(e,t,n){return this.replay(null,e,t,n).refCount()};var wa=function(e,t){this.subject=e,this.observer=t};wa.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var e=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(e,1),this.observer=null}};var xa=De.BehaviorSubject=function(e){function n(e){return jt(this),this.isStopped?(this.hasError?e.onError(this.error):e.onCompleted(),$t):(this.observers.push(e),e.onNext(this.value),new wa(this,e))}function a(t){e.call(this,n),this.value=t,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return Dt(a,e),Mt(a.prototype,ln,{getValue:function(){if(jt(this),this.hasError)throw this.error;return this.value},hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(jt(this),!this.isStopped){this.isStopped=!0;for(var e=0,n=t(this.observers),a=n.length;a>e;e++)n[e].onCompleted();this.observers.length=0}},onError:function(e){if(jt(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=e;for(var n=0,a=t(this.observers),s=a.length;s>n;n++)a[n].onError(e);this.observers.length=0}},onNext:function(e){if(jt(this),!this.isStopped){this.value=e;for(var n=0,a=t(this.observers),s=a.length;s>n;n++)a[n].onNext(e)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.exception=null}}),a}(bn),ka=De.ReplaySubject=function(e){function n(e,t){return Ut(function(){t.dispose(),!e.isDisposed&&e.observers.splice(e.observers.indexOf(t),1)})}function a(e){var t=new gn(this.scheduler,e),a=n(this,t);jt(this),this._trim(this.scheduler.now()),this.observers.push(t);for(var s=0,r=this.q.length;r>s;s++)t.onNext(this.q[s].value);return this.hasError?t.onError(this.error):this.isStopped&&t.onCompleted(),t.ensureActive(),a}function s(t,n,s){this.bufferSize=null==t?r:t,this.windowSize=null==n?r:n,this.scheduler=s||Zt,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,e.call(this,a)}var r=Math.pow(2,53)-1;return Dt(s,e),Mt(s.prototype,ln.prototype,{hasObservers:function(){return this.observers.length>0},_trim:function(e){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&e-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(e){if(jt(this),!this.isStopped){var n=this.scheduler.now();this.q.push({interval:n,value:e}),this._trim(n);for(var a=0,s=t(this.observers),r=s.length;r>a;a++){var i=s[a];i.onNext(e),i.ensureActive()}}},onError:function(e){if(jt(this),!this.isStopped){this.isStopped=!0,this.error=e,this.hasError=!0;var n=this.scheduler.now();this._trim(n);for(var a=0,s=t(this.observers),r=s.length;r>a;a++){var i=s[a];i.onError(e),i.ensureActive()}this.observers.length=0}},onCompleted:function(){if(jt(this),!this.isStopped){this.isStopped=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,a=t(this.observers),s=a.length;s>n;n++){var r=a[n];r.onCompleted(),r.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),s}(bn),Da=De.ConnectableObservable=function(e){function t(t,n){var a,s=!1,r=t.asObservable();this.connect=function(){return s||(s=!0,a=new At(r.subscribe(n),Ut(function(){s=!1}))),a},e.call(this,function(e){return n.subscribe(e)})}return Dt(t,e),t.prototype.refCount=function(){var e,t=0,n=this;return new La(function(a){var s=1===++t,r=n.subscribe(a);return s&&(e=n.connect()),function(){r.dispose(),0===--t&&e.dispose()}})},t}(bn);pn.singleInstance=function(){function e(){return a||(a=!0,t=n["finally"](function(){a=!1}).publish().refCount()),t}var t,n=this,a=!1;return new La(function(t){return e().subscribe(t)})};var Ma=function(){function t(e){if(0===(1&e))return 2===e;for(var t=Math.sqrt(e),n=3;t>=n;){if(e%n===0)return!1;n+=2}return!0}function n(e){var n,a,s;for(n=0;n<o.length;++n)if(a=o[n],a>=e)return a;for(s=1|e;s<o[o.length-1];){if(t(s))return s;s+=2}return e}function a(e){var t=757602046;if(!e.length)return t;for(var n=0,a=e.length;a>n;n++){var s=e.charCodeAt(n);t=(t<<5)-t+s,t&=t}return t}function s(e){var t=668265261;return e=61^e^e>>>16,e+=e<<3,e^=e>>>4,e*=t,e^=e>>>15}function r(){return{key:null,value:null,next:0,hashCode:0}}function i(e,t){if(0>e)throw new Je;e>0&&this._initialize(e),this.comparer=t||Pe,this.freeCount=0,this.size=0,this.freeList=-1}var o=[1,3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143,4194301,8388593,16777213,33554393,67108859,134217689,268435399,536870909,1073741789,2147483647],c="no such key",u="duplicate key",l=function(){var e=0;return function(t){if(null==t)throw new Error(c);if("string"==typeof t)return a(t);if("number"==typeof t)return s(t);if("boolean"==typeof t)return t===!0?1:0;if(t instanceof Date)return s(t.valueOf());if(t instanceof RegExp)return a(t.toString());if("function"==typeof t.valueOf){var n=t.valueOf();if("number"==typeof n)return s(n);if("string"==typeof n)return a(n)}if(t.hashCode)return t.hashCode();var r=17*e++;return t.hashCode=function(){return r},r}}(),m=i.prototype;return m._initialize=function(e){var t,a=n(e);for(this.buckets=new Array(a),this.entries=new Array(a),t=0;a>t;t++)this.buckets[t]=-1,this.entries[t]=r();this.freeList=-1},m.add=function(e,t){this._insert(e,t,!0)},m._insert=function(e,t,n){this.buckets||this._initialize(0);for(var a,s=2147483647&l(e),r=s%this.buckets.length,i=this.buckets[r];i>=0;i=this.entries[i].next)if(this.entries[i].hashCode===s&&this.comparer(this.entries[i].key,e)){if(n)throw new Error(u);return void(this.entries[i].value=t)}this.freeCount>0?(a=this.freeList,this.freeList=this.entries[a].next,--this.freeCount):(this.size===this.entries.length&&(this._resize(),r=s%this.buckets.length),a=this.size,++this.size),this.entries[a].hashCode=s,this.entries[a].next=this.buckets[r],this.entries[a].key=e,this.entries[a].value=t,this.buckets[r]=a},m._resize=function(){var e=n(2*this.size),t=new Array(e);for(s=0;s<t.length;++s)t[s]=-1;var a=new Array(e);for(s=0;s<this.size;++s)a[s]=this.entries[s];for(var s=this.size;e>s;++s)a[s]=r();for(var i=0;i<this.size;++i){var o=a[i].hashCode%e;a[i].next=t[o],t[o]=i}this.buckets=t,this.entries=a},m.remove=function(e){if(this.buckets)for(var t=2147483647&l(e),n=t%this.buckets.length,a=-1,s=this.buckets[n];s>=0;s=this.entries[s].next){if(this.entries[s].hashCode===t&&this.comparer(this.entries[s].key,e))return 0>a?this.buckets[n]=this.entries[s].next:this.entries[a].next=this.entries[s].next,this.entries[s].hashCode=-1,this.entries[s].next=this.freeList,this.entries[s].key=null,this.entries[s].value=null,this.freeList=s,++this.freeCount,!0;a=s}return!1},m.clear=function(){var e,t;if(!(this.size<=0)){for(e=0,t=this.buckets.length;t>e;++e)this.buckets[e]=-1;for(e=0;e<this.size;++e)this.entries[e]=r();this.freeList=-1,this.size=0}},m._findEntry=function(e){if(this.buckets)for(var t=2147483647&l(e),n=this.buckets[t%this.buckets.length];n>=0;n=this.entries[n].next)if(this.entries[n].hashCode===t&&this.comparer(this.entries[n].key,e))return n;return-1},m.count=function(){return this.size-this.freeCount},m.tryGetValue=function(t){var n=this._findEntry(t);return n>=0?this.entries[n].value:e},m.getValues=function(){var e=0,t=[];if(this.entries)for(var n=0;n<this.size;n++)this.entries[n].hashCode>=0&&(t[e++]=this.entries[n].value);return t},m.get=function(e){var t=this._findEntry(e);if(t>=0)return this.entries[t].value;throw new Error(c)},m.set=function(e,t){this._insert(e,t,!1)},m.containskey=function(e){return this._findEntry(e)>=0},i}();pn.join=function(e,t,n,a){var s=this;return new La(function(r){var i=new At,o=!1,c=!1,u=0,l=0,m=new Ma,p=new Ma;return i.add(s.subscribe(function(e){var n=u++,s=new Bt;m.add(n,e),i.add(s);var c,l=function(){m.remove(n)&&0===m.count()&&o&&r.onCompleted(),i.remove(s)};try{c=t(e)}catch(d){return void r.onError(d)}s.setDisposable(c.take(1).subscribe(Me,r.onError.bind(r),l)),p.getValues().forEach(function(t){var n;try{n=a(e,t)}catch(s){return void r.onError(s)}r.onNext(n)})},r.onError.bind(r),function(){o=!0,(c||0===m.count())&&r.onCompleted()})),i.add(e.subscribe(function(e){var t=l++,s=new Bt;p.add(t,e),i.add(s);var o,u=function(){p.remove(t)&&0===p.count()&&c&&r.onCompleted(),i.remove(s)};try{o=n(e)}catch(d){return void r.onError(d)}s.setDisposable(o.take(1).subscribe(Me,r.onError.bind(r),u)),m.getValues().forEach(function(t){var n;try{n=a(t,e)}catch(s){return void r.onError(s)}r.onNext(n)})},r.onError.bind(r),function(){c=!0,(o||0===p.count())&&r.onCompleted()})),i},s)},pn.groupJoin=function(e,t,n,a){var s=this;return new La(function(r){function i(e){return function(t){t.onError(e)}}var o=new At,c=new Ht(o),u=new Ma,l=new Ma,m=0,p=0;return o.add(s.subscribe(function(e){var n=new qa,s=m++;u.add(s,n);var p;try{p=a(e,It(n,c))}catch(d){return u.getValues().forEach(i(d)),void r.onError(d)}r.onNext(p),l.getValues().forEach(function(e){n.onNext(e)});var h=new Bt;o.add(h);var f,g=function(){u.remove(s)&&n.onCompleted(),o.remove(h)};try{f=t(e)}catch(d){return u.getValues().forEach(i(d)),void r.onError(d)}h.setDisposable(f.take(1).subscribe(Me,function(e){u.getValues().forEach(i(e)),r.onError(e)},g))},function(e){u.getValues().forEach(i(e)),r.onError(e)},r.onCompleted.bind(r))),o.add(e.subscribe(function(e){var t=p++;l.add(t,e);var a=new Bt;o.add(a);var s,c=function(){l.remove(t),o.remove(a)};try{s=n(e)}catch(m){return u.getValues().forEach(i(m)),void r.onError(m)}a.setDisposable(s.take(1).subscribe(Me,function(e){u.getValues().forEach(i(e)),r.onError(e)},c)),u.getValues().forEach(function(t){t.onNext(e)})},function(e){u.getValues().forEach(i(e)),r.onError(e)})),c},s)},pn.buffer=function(e,t){return this.window.apply(this,arguments).selectMany(function(e){return e.toArray()})},pn.window=function(e,t){return 1===arguments.length&&"function"!=typeof arguments[0]?oe.call(this,e):"function"==typeof e?ce.call(this,e):ie.call(this,e,t)},pn.pairwise=function(){var e=this;return new La(function(t){var n,a=!1;return e.subscribe(function(e){a?t.onNext([n,e]):a=!0,n=e},t.onError.bind(t),t.onCompleted.bind(t))},e)},pn.partition=function(e,t){return[this.filter(e,t),this.filter(function(n,a,s){return!e.call(t,n,a,s)})]};var Ia=function(e){function t(e,t){this.c=e,this.s=t}return Dt(t,e),t.prototype[Qe]=function(){var e=this;return{next:function(){return e.c()?{done:!1,value:e.s}:{done:!0,value:void 0}}}},t}(Rn);pn.letBind=pn.let=function(e){return e(this)},bn["if"]=bn.ifThen=function(e,t,n){return In(function(){return n||(n=Pn()),Fe(t)&&(t=Dn(t)),Fe(n)&&(n=Dn(n)),"function"==typeof n.now&&(n=Pn(n)),e()?t:n})},bn["for"]=bn.forIn=function(e,t,n){return xn(e,t,n).concat()};var Ta=bn["while"]=bn.whileDo=function(e,t){return Fe(t)&&(t=Dn(t)),ue(e,t).concat()};pn.doWhile=function(e){return Gn([this,Ta(e,this)])},bn["case"]=bn.switchCase=function(e,t,n){return In(function(){Fe(n)&&(n=Dn(n)),n||(n=Pn()),"function"==typeof n.now&&(n=Pn(n));var a=t[e()];return Fe(a)&&(a=Dn(a)),a||n})},pn.expand=function(e,t){Vt(t)||(t=Gt);var n=this;return new La(function(a){var s=[],r=new Wt,i=new At(r),o=0,c=!1,u=function(){var n=!1;s.length>0&&(n=!c,c=!0),n&&r.setDisposable(t.scheduleRecursive(function(t){var n;if(!(s.length>0))return void(c=!1);n=s.shift();var r=new Bt;i.add(r),r.setDisposable(n.subscribe(function(t){a.onNext(t);var n=null;try{n=e(t)}catch(r){a.onError(r)}s.push(n),o++,u()},a.onError.bind(a),function(){i.remove(r),o--,0===o&&a.onCompleted()})),t()}))};return s.push(n),o++,u(),i},this)},bn.forkJoin=function(){var e=[];if(Array.isArray(arguments[0]))e=arguments[0];else for(var t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);return new La(function(t){var n=e.length;if(0===n)return t.onCompleted(),$t;for(var a=new At,s=!1,r=new Array(n),i=new Array(n),o=new Array(n),c=0;n>c;c++)!function(c){var u=e[c];Fe(u)&&(u=Dn(u)),a.add(u.subscribe(function(e){s||(r[c]=!0,o[c]=e)},function(e){s=!0,t.onError(e),a.dispose()},function(){if(!s){if(!r[c])return void t.onCompleted();i[c]=!0;for(var e=0;n>e;e++)if(!i[e])return;s=!0,t.onNext(o),t.onCompleted()}}))}(c);return a})},pn.forkJoin=function(e,t){var n=this;return new La(function(a){var s,r,i=!1,o=!1,c=!1,u=!1,l=new Bt,m=new Bt;return Fe(e)&&(e=Dn(e)),l.setDisposable(n.subscribe(function(e){c=!0,s=e},function(e){m.dispose(),a.onError(e)},function(){if(i=!0,o)if(c)if(u){var e;try{e=t(s,r)}catch(n){return void a.onError(n)}a.onNext(e),a.onCompleted()}else a.onCompleted();else a.onCompleted()})),m.setDisposable(e.subscribe(function(e){u=!0,r=e},function(e){l.dispose(),a.onError(e)},function(){if(o=!0,i)if(c)if(u){var e;try{e=t(s,r)}catch(n){return void a.onError(n)}a.onNext(e),a.onCompleted()}else a.onCompleted();else a.onCompleted()})),new At(l,m)},n)},pn.manySelect=pn.extend=function(e,t){Vt(t)||(t=Gt);var n=this;return In(function(){var a;return n.map(function(e){var t=new Pa(e);return a&&a.onNext(e),a=t,t}).tap(Me,function(e){a&&a.onError(e)},function(){a&&a.onCompleted()}).observeOn(t).map(e)},n)};var Pa=function(e){function t(e){var t=this,n=new At;return n.add(Zt.schedule(function(){e.onNext(t.head),n.add(t.tail.mergeAll().subscribe(e))})),n}function n(n){e.call(this,t),this.head=n,this.tail=new ja}return Dt(n,e),Mt(n.prototype,ln,{onCompleted:function(){this.onNext(bn.empty())},onError:function(e){this.onNext(bn.throwError(e))},onNext:function(e){this.tail.onNext(e),this.tail.onCompleted()}}),n}(bn),Oa=ke.Map||function(){function t(){this._keys=[],this._values=[]}return t.prototype.get=function(t){var n=this._keys.indexOf(t);return-1!==n?this._values[n]:e},t.prototype.set=function(e,t){var n=this._keys.indexOf(e);-1!==n&&(this._values[n]=t),this._values[this._keys.push(e)-1]=t},t.prototype.forEach=function(e,t){for(var n=0,a=this._keys.length;a>n;n++)e.call(t,this._values[n],this._keys[n])},t}();le.prototype.and=function(e){return new le(this.patterns.concat(e))},le.prototype.thenDo=function(e){return new me(this,e)},me.prototype.activate=function(e,t,n){for(var a=this,s=[],r=0,i=this.expression.patterns.length;i>r;r++)s.push(pe(e,this.expression.patterns[r],t.onError.bind(t)));var o=new de(s,function(){var e;try{e=a.selector.apply(a,arguments)}catch(n){return void t.onError(n)}t.onNext(e)},function(){for(var e=0,t=s.length;t>e;e++)s[e].removeActivePlan(o);n(o)});for(r=0,i=s.length;i>r;r++)s[r].addActivePlan(o);return o},de.prototype.dequeue=function(){this.joinObservers.forEach(function(e){e.queue.shift()})},de.prototype.match=function(){var e,t,n=!0;for(e=0,t=this.joinObserverArray.length;t>e;e++)if(0===this.joinObserverArray[e].queue.length){n=!1;break}if(n){var a=[],s=!1;for(e=0,t=this.joinObserverArray.length;t>e;e++)a.push(this.joinObserverArray[e].queue[0]),"C"===this.joinObserverArray[e].queue[0].kind&&(s=!0);if(s)this.onCompleted();else{this.dequeue();var r=[];for(e=0,t=a.length;e<a.length;e++)r.push(a[e].value);this.onNext.apply(this,r)}}};var Aa=function(e){function t(t,n){e.call(this),this.source=t,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new Bt,this.isDisposed=!1}Dt(t,e);var n=t.prototype;return n.next=function(e){if(!this.isDisposed){if("E"===e.kind)return this.onError(e.exception);this.queue.push(e);for(var t=this.activePlans.slice(0),n=0,a=t.length;a>n;n++)t[n].match()}},n.error=Me,n.completed=Me,n.addActivePlan=function(e){this.activePlans.push(e)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(e){this.activePlans.splice(this.activePlans.indexOf(e),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){e.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},t}(dn);pn.and=function(e){return new le([this,e])},pn.thenDo=function(e){return new le([this]).thenDo(e)},bn.when=function(){var e,t=arguments.length;if(Array.isArray(arguments[0]))e=arguments[0];else{e=new Array(t);for(var n=0;t>n;n++)e[n]=arguments[n]}return new La(function(t){var n=[],a=new Oa,s=mn(function(e){t.onNext(e)},function(e){a.forEach(function(t){t.onError(e)}),t.onError(e)},function(e){t.onCompleted()});try{for(var r=0,i=e.length;i>r;r++)n.push(e[r].activate(a,s,function(e){var a=n.indexOf(e);n.splice(a,1),0===n.length&&t.onCompleted()}))}catch(o){Vn(o).subscribe(t)}var c=new At;return a.forEach(function(e){e.subscribe(),c.add(e)}),c})};var Fa=bn.interval=function(e,t){return ve(e,e,Vt(t)?t:an)};bn.timer=function(t,n,a){var s;return Vt(a)||(a=an),n!==e&&"number"==typeof n?s=n:Vt(n)&&(a=n),t instanceof Date&&s===e?he(t.getTime(),a):t instanceof Date&&s!==e?(s=n,fe(t.getTime(),s,a)):s===e?ge(t,a):ve(t,s,a)};pn.delay=function(e,t){return Vt(t)||(t=an),e instanceof Date?ye(this,e.getTime(),t):be(this,e,t)},pn.debounce=pn.throttleWithTimeout=function(e,t){Vt(t)||(t=an);var n=this;return new La(function(a){var s,r=new Wt,i=!1,o=0,c=n.subscribe(function(n){i=!0,s=n,o++;var c=o,u=new Bt;r.setDisposable(u),u.setDisposable(t.scheduleWithRelative(e,function(){i&&o===c&&a.onNext(s),i=!1}))},function(e){r.dispose(),a.onError(e),i=!1,o++},function(){r.dispose(),i&&a.onNext(s),a.onCompleted(),i=!1,o++});return new At(c,r)},this)},pn.throttle=function(e,t){return this.debounce(e,t)},pn.windowWithTime=function(e,t,n){var a,s=this;return null==t&&(a=e),Vt(n)||(n=an),"number"==typeof t?a=t:Vt(t)&&(a=e,n=t),new La(function(t){function r(){var e=new Bt,s=!1,i=!1;m.setDisposable(e),u===c?(s=!0,i=!0):c>u?s=!0:i=!0;var d=s?u:c,h=d-p;p=d,s&&(u+=a),i&&(c+=a),e.setDisposable(n.scheduleWithRelative(h,function(){if(i){var e=new qa;l.push(e),t.onNext(It(e,o))}s&&l.shift().onCompleted(),r()}))}var i,o,c=a,u=e,l=[],m=new Wt,p=0;return i=new At(m),o=new Ht(i),l.push(new qa),t.onNext(It(l[0],o)),r(),i.add(s.subscribe(function(e){for(var t=0,n=l.length;n>t;t++)l[t].onNext(e)},function(e){for(var n=0,a=l.length;a>n;n++)l[n].onError(e);t.onError(e)},function(){for(var e=0,n=l.length;n>e;e++)l[e].onCompleted();t.onCompleted()})),o},s)},pn.windowWithTimeOrCount=function(e,t,n){var a=this;return Vt(n)||(n=an),new La(function(s){function r(t){var a=new Bt;i.setDisposable(a),a.setDisposable(n.scheduleWithRelative(e,function(){if(t===l){u=0;var e=++l;m.onCompleted(),m=new qa,s.onNext(It(m,c)),r(e)}}))}var i=new Wt,o=new At(i),c=new Ht(o),u=0,l=0,m=new qa;return s.onNext(It(m,c)),r(0),o.add(a.subscribe(function(e){var n=0,a=!1;m.onNext(e),++u===t&&(a=!0,u=0,n=++l,m.onCompleted(),m=new qa,s.onNext(It(m,c))),a&&r(n)},function(e){m.onError(e),s.onError(e)},function(){m.onCompleted(),s.onCompleted()})),c},a)},pn.bufferWithTime=function(e,t,n){return this.windowWithTime.apply(this,arguments).selectMany(function(e){return e.toArray()})},pn.bufferWithTimeOrCount=function(e,t,n){return this.windowWithTimeOrCount(e,t,n).selectMany(function(e){return e.toArray()})},pn.timeInterval=function(e){var t=this;return Vt(e)||(e=an),In(function(){var n=e.now();return t.map(function(t){var a=e.now(),s=a-n;return n=a,{value:t,interval:s}})})},pn.timestamp=function(e){return Vt(e)||(e=an),this.map(function(t){return{value:t,timestamp:e.now()}})},pn.sample=pn.throttleLatest=function(e,t){return Vt(t)||(t=an),"number"==typeof e?Ee(this,Fa(e,t)):Ee(this,e)},pn.timeout=function(e,t,n){(null==t||"string"==typeof t)&&(t=Vn(new Error(t||"Timeout"))),Vt(n)||(n=an);var a=this,s=e instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new La(function(r){function i(){var a=o;m.setDisposable(n[s](e,function(){o===a&&(Fe(t)&&(t=Dn(t)),u.setDisposable(t.subscribe(r)))}))}var o=0,c=new Bt,u=new Wt,l=!1,m=new Wt;return u.setDisposable(c),i(),c.setDisposable(a.subscribe(function(e){l||(o++,r.onNext(e),i())},function(e){l||(o++,r.onError(e))},function(){l||(o++,r.onCompleted())})),new At(u,m)},a)},bn.generateWithAbsoluteTime=function(e,t,n,a,s,r){return Vt(r)||(r=an),new La(function(i){var o=!0,c=!1;return r.scheduleRecursiveWithAbsoluteAndState(e,r.now(),function(e,r){c&&i.onNext(e);try{if(o?o=!1:e=n(e),c=t(e))var u=a(e),l=s(e)}catch(m){return void i.onError(m)}c?r(u,l):i.onCompleted()})})},bn.generateWithRelativeTime=function(e,t,n,a,s,r){return Vt(r)||(r=an),new La(function(i){var o=!0,c=!1;return r.scheduleRecursiveWithRelativeAndState(e,0,function(e,r){c&&i.onNext(e);try{if(o?o=!1:e=n(e),c=t(e))var u=a(e),l=s(e)}catch(m){return void i.onError(m)}c?r(u,l):i.onCompleted()})})},pn.delaySubscription=function(e,t){var n=e instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative",a=this;return Vt(t)||(t=an),new La(function(s){var r=new Wt;return r.setDisposable(t[n](e,function(){r.setDisposable(a.subscribe(s))})),r},this)},pn.delayWithSelector=function(e,t){var n,a,s=this;return Ue(e)?a=e:(n=e,a=t),new La(function(e){function t(){c.setDisposable(s.subscribe(function(t){var n=f(a)(t);if(n===Tt)return e.onError(n.e);var s=new Bt;i.add(s),s.setDisposable(n.subscribe(function(){e.onNext(t),i.remove(s),r()},function(t){e.onError(t)},function(){e.onNext(t),i.remove(s),r()}))},function(t){e.onError(t)},function(){o=!0,c.dispose(),r()}))}function r(){o&&0===i.length&&e.onCompleted()}var i=new At,o=!1,c=new Wt;return n?c.setDisposable(n.subscribe(t,function(t){e.onError(t)},t)):t(),new At(c,i)},this)},pn.timeoutWithSelector=function(e,t,n){1===arguments.length&&(t=e,e=jn()),n||(n=Vn(new Error("Timeout")));var a=this;return new La(function(s){function r(e){function t(){return l===a}var a=l,r=new Bt;c.setDisposable(r),r.setDisposable(e.subscribe(function(){t()&&o.setDisposable(n.subscribe(s)),r.dispose()},function(e){t()&&s.onError(e)},function(){t()&&o.setDisposable(n.subscribe(s))}))}function i(){var e=!m;return e&&l++,e}var o=new Wt,c=new Wt,u=new Bt;o.setDisposable(u);var l=0,m=!1;return r(e),u.setDisposable(a.subscribe(function(e){if(i()){s.onNext(e);var n;try{n=t(e)}catch(a){return void s.onError(a)}r(Fe(n)?Dn(n):n)}},function(e){i()&&s.onError(e)},function(){i()&&s.onCompleted()})),new At(o,c)},a)},pn.debounceWithSelector=function(e){var t=this;return new La(function(n){var a,s=!1,r=new Wt,i=0,o=t.subscribe(function(t){var o;try{o=e(t)}catch(c){return void n.onError(c)}Fe(o)&&(o=Dn(o)),s=!0,a=t,i++;var u=i,l=new Bt;r.setDisposable(l),l.setDisposable(o.subscribe(function(){s&&i===u&&n.onNext(a),s=!1,l.dispose()},n.onError.bind(n),function(){s&&i===u&&n.onNext(a),s=!1,l.dispose()}))},function(e){r.dispose(),n.onError(e),s=!1,i++},function(){r.dispose(),s&&n.onNext(a),n.onCompleted(),s=!1,i++});return new At(o,r)},t)},pn.throttleWithSelector=function(e){return this.debounceWithSelector(e)},pn.skipLastWithTime=function(e,t){Vt(t)||(t=an);var n=this;return new La(function(a){var s=[];return n.subscribe(function(n){var r=t.now();for(s.push({interval:r,value:n});s.length>0&&r-s[0].interval>=e;)a.onNext(s.shift().value)},function(e){a.onError(e)},function(){for(var n=t.now();s.length>0&&n-s[0].interval>=e;)a.onNext(s.shift().value);a.onCompleted()})},n)},pn.takeLastWithTime=function(e,t){var n=this;return Vt(t)||(t=an),new La(function(a){var s=[];return n.subscribe(function(n){var a=t.now();for(s.push({interval:a,value:n});s.length>0&&a-s[0].interval>=e;)s.shift()},function(e){a.onError(e)},function(){for(var n=t.now();s.length>0;){var r=s.shift();n-r.interval<=e&&a.onNext(r.value)}a.onCompleted()})},n)},pn.takeLastBufferWithTime=function(e,t){var n=this;return Vt(t)||(t=an),new La(function(a){var s=[];return n.subscribe(function(n){var a=t.now();for(s.push({interval:a,value:n});s.length>0&&a-s[0].interval>=e;)s.shift();
},function(e){a.onError(e)},function(){for(var n=t.now(),r=[];s.length>0;){var i=s.shift();n-i.interval<=e&&r.push(i.value)}a.onNext(r),a.onCompleted()})},n)},pn.takeWithTime=function(e,t){var n=this;return Vt(t)||(t=an),new La(function(a){return new At(t.scheduleWithRelative(e,function(){a.onCompleted()}),n.subscribe(a))},n)},pn.skipWithTime=function(e,t){var n=this;return Vt(t)||(t=an),new La(function(a){var s=!1;return new At(t.scheduleWithRelative(e,function(){s=!0}),n.subscribe(function(e){s&&a.onNext(e)},a.onError.bind(a),a.onCompleted.bind(a)))},n)},pn.skipUntilWithTime=function(e,t){Vt(t)||(t=an);var n=this,a=e instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new La(function(s){var r=!1;return new At(t[a](e,function(){r=!0}),n.subscribe(function(e){r&&s.onNext(e)},function(e){s.onError(e)},function(){s.onCompleted()}))},n)},pn.takeUntilWithTime=function(e,t){Vt(t)||(t=an);var n=this,a=e instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new La(function(s){return new At(t[a](e,function(){s.onCompleted()}),n.subscribe(s))},n)},pn.throttleFirst=function(e,t){Vt(t)||(t=an);var n=+e||0;if(0>=n)throw new RangeError("windowDuration cannot be less or equal zero.");var a=this;return new La(function(e){var s=0;return a.subscribe(function(a){var r=t.now();(0===s||r-s>=n)&&(s=r,e.onNext(a))},function(t){e.onError(t)},function(){e.onCompleted()})},a)},pn.transduce=function(e){function t(e){return{"@@transducer/init":function(){return e},"@@transducer/step":function(e,t){return e.onNext(t)},"@@transducer/result":function(e){return e.onCompleted()}}}var n=this;return new La(function(a){var s=e(t(a));return n.subscribe(function(e){var t=f(s["@@transducer/step"]).call(s,a,e);t===Tt&&a.onError(t.e)},function(e){a.onError(e)},function(){s["@@transducer/result"](a)})},n)},pn.switchFirst=function(){var e=this;return new La(function(t){var n=!1,a=!1,s=new Bt,r=new At;return r.add(s),s.setDisposable(e.subscribe(function(e){if(!n){n=!0,Fe(e)&&(e=Dn(e));var s=new Bt;r.add(s),s.setDisposable(e.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){r.remove(s),n=!1,a&&1===r.length&&t.onCompleted()}))}},function(e){t.onError(e)},function(){a=!0,!n&&1===r.length&&t.onCompleted()})),r},this)},pn.flatMapFirst=pn.selectManyFirst=function(e,t,n){return new En(this,e,t,n).switchFirst()},De.Observable.prototype.flatMapWithMaxConcurrent=function(e,t,n,a){return new En(this,t,n,a).merge(e)};De.VirtualTimeScheduler=function(e){function t(){return this.toDateTimeOffset(this.clock)}function n(e,t){return this.scheduleAbsoluteWithState(e,this.clock,t)}function a(e,t,n){return this.scheduleRelativeWithState(e,this.toRelative(t),n)}function s(e,t,n){return this.scheduleRelativeWithState(e,this.toRelative(t-this.now()),n)}function r(e,t){return t(),$t}function i(r,i){this.clock=r,this.comparer=i,this.isEnabled=!1,this.queue=new Pt(1024),e.call(this,t,n,a,s)}Dt(i,e);var o=i.prototype;return o.add=Xe,o.toDateTimeOffset=Xe,o.toRelative=Xe,o.schedulePeriodicWithState=function(e,t,n){var a=new Qt(this,e,t,n);return a.start()},o.scheduleRelativeWithState=function(e,t,n){var a=this.add(this.clock,t);return this.scheduleAbsoluteWithState(e,a,n)},o.scheduleRelative=function(e,t){return this.scheduleRelativeWithState(t,e,r)},o.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var e=this.getNext();null!==e?(this.comparer(e.dueTime,this.clock)>0&&(this.clock=e.dueTime),e.invoke()):this.isEnabled=!1}while(this.isEnabled)}},o.stop=function(){this.isEnabled=!1},o.advanceTo=function(e){var t=this.comparer(this.clock,e);if(this.comparer(this.clock,e)>0)throw new Je;if(0!==t&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,e)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=e}},o.advanceBy=function(e){var t=this.add(this.clock,e),n=this.comparer(this.clock,t);if(n>0)throw new Je;0!==n&&this.advanceTo(t)},o.sleep=function(e){var t=this.add(this.clock,e);if(this.comparer(this.clock,t)>=0)throw new Je;this.clock=t},o.getNext=function(){for(;this.queue.length>0;){var e=this.queue.peek();if(!e.isCancelled())return e;this.queue.dequeue()}return null},o.scheduleAbsolute=function(e,t){return this.scheduleAbsoluteWithState(t,e,r)},o.scheduleAbsoluteWithState=function(e,t,n){function a(e,t){return s.queue.remove(r),n(e,t)}var s=this,r=new zt(this,e,a,t,this.comparer);return this.queue.enqueue(r),r.disposable},i}(Jt);De.HistoricalScheduler=function(e){function t(t,n){var a=null==t?0:t,s=n||Oe;e.call(this,a,s)}Dt(t,e);var n=t.prototype;return n.add=function(e,t){return e+t},n.toDateTimeOffset=function(e){return new Date(e).getTime()},n.toRelative=function(e){return e},t}(De.VirtualTimeScheduler);var La=De.AnonymousObservable=function(e){function t(e){return e&&Ue(e.dispose)?e:Ue(e)?Ut(e):$t}function n(e,n){var a=n[0],s=n[1],r=f(s)(a);return r!==Tt||a.fail(Tt.e)?void a.setDisposable(t(r)):g(Tt.e)}function a(t,a){function s(e){var a=new Ua(e),s=[a,t];return Zt.scheduleRequired()?Zt.scheduleWithState(s,n):n(null,s),a}this.source=a,e.call(this,s)}return Dt(a,e),a}(bn),Ua=function(e){function t(t){e.call(this),this.observer=t,this.m=new Bt}Dt(t,e);var n=t.prototype;return n.next=function(e){var t=f(this.observer.onNext).call(this.observer,e);t===Tt&&(this.dispose(),g(t.e))},n.error=function(e){var t=f(this.observer.onError).call(this.observer,e);this.dispose(),t===Tt&&g(t.e)},n.completed=function(){var e=f(this.observer.onCompleted).call(this.observer);this.dispose(),e===Tt&&g(e.e)},n.setDisposable=function(e){this.m.setDisposable(e)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){e.prototype.dispose.call(this),this.m.dispose()},t}(dn),$a=function(e){function t(e){return this.underlyingObservable.subscribe(e)}function n(n,a,s){e.call(this,t),this.key=n,this.underlyingObservable=s?new La(function(e){return new At(s.getDisposable(),a.subscribe(e))}):a}return Dt(n,e),n}(bn),qa=De.Subject=function(e){function n(e){return jt(this),this.isStopped?this.hasError?(e.onError(this.error),$t):(e.onCompleted(),$t):(this.observers.push(e),new wa(this,e))}function a(){e.call(this,n),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Dt(a,e),Mt(a.prototype,ln.prototype,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(jt(this),!this.isStopped){this.isStopped=!0;for(var e=0,n=t(this.observers),a=n.length;a>e;e++)n[e].onCompleted();this.observers.length=0}},onError:function(e){if(jt(this),!this.isStopped){this.isStopped=!0,this.error=e,this.hasError=!0;for(var n=0,a=t(this.observers),s=a.length;s>n;n++)a[n].onError(e);this.observers.length=0}},onNext:function(e){if(jt(this),!this.isStopped)for(var n=0,a=t(this.observers),s=a.length;s>n;n++)a[n].onNext(e)},dispose:function(){this.isDisposed=!0,this.observers=null}}),a.create=function(e,t){return new Ba(e,t)},a}(bn),ja=De.AsyncSubject=function(e){function n(e){return jt(this),this.isStopped?(this.hasError?e.onError(this.error):this.hasValue?(e.onNext(this.value),e.onCompleted()):e.onCompleted(),$t):(this.observers.push(e),new wa(this,e))}function a(){e.call(this,n),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Dt(a,e),Mt(a.prototype,ln,{hasObservers:function(){return jt(this),this.observers.length>0},onCompleted:function(){var e,n;if(jt(this),!this.isStopped){this.isStopped=!0;var a=t(this.observers),n=a.length;if(this.hasValue)for(e=0;n>e;e++){var s=a[e];s.onNext(this.value),s.onCompleted()}else for(e=0;n>e;e++)a[e].onCompleted();this.observers.length=0}},onError:function(e){if(jt(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=e;for(var n=0,a=t(this.observers),s=a.length;s>n;n++)a[n].onError(e);this.observers.length=0}},onNext:function(e){jt(this),this.isStopped||(this.value=e,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.exception=null,this.value=null}}),a}(bn),Ba=De.AnonymousSubject=function(e){function t(e){return this.observable.subscribe(e)}function n(n,a){this.observer=n,this.observable=a,e.call(this,t)}return Dt(n,e),Mt(n.prototype,ln.prototype,{onCompleted:function(){this.observer.onCompleted()},onError:function(e){this.observer.onError(e)},onNext:function(e){this.observer.onNext(e)}}),n}(bn);De.Pauser=function(e){function t(){e.call(this)}return Dt(t,e),t.prototype.pause=function(){this.onNext(!1)},t.prototype.resume=function(){this.onNext(!0)},t}(qa),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ke.Rx=De,define(function(){return De})):Ce&&Ne?we?(Ne.exports=De).Rx=De:Ce.Rx=De:ke.Rx=De;var Wa=i()}.call(this);var user={};user["delete"]=function(e){Popup.show({title:"Удаление пользователя",content:"Вы уверены, что хотите удалить пользователя?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.ajax({url:"/api/v1/users/"+e+"/",type:"DELETE",success:function(){window.location.href="/admin/s_users"}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})};var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,
entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),
e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s];
}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{
ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),
this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({
text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");
React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user
}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject");
},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id;
}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed
})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){
return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],a={};for(var s in t.data){var r=t.data[s].quote_for_id;r?(a[r]=a[r]||[],a[r].unshift(t.data[s])):n.push(t.data[s]),e.state.all_comments[t.data[s].id]=t.data[s]}e.setState({comments:n,quotes:a})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,a=t.new_comment,s=a.quote_for_id;n.id?(s?e.state.quotes[s]&&(e.state.quotes[s][e.state.quotes[s].indexOf(n)]=a):e.state.comments[e.state.comments.indexOf(n)]=a,e.state.all_comments[n.id]=a):(e.state.all_comments[a.id]=a,s?(e.state.quotes[s]=e.state.quotes[s]||[],e.state.quotes[s].push(a)):e.state.comments.unshift(a)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(s[e.id].length||"deleted"!=e.status||(delete i[e.id],s[e.quote_for_id].splice(s[e.quote_for_id].indexOf(e),1),e.quote_for_id||r.splice(r.indexOf(e),1),n(i[e.quote_for_id])))}var a=t.comment,s=e.state.quotes,r=e.state.comments,i=e.state.all_comments,o=a.quote_for_id,c=o?s[o]:r,u=c.indexOf(a);c.splice(u,1),delete i[a.id],n(i[a.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,a=null,s=null,r=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?a=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(s=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),r=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var m=niceDateFormat(t.datetime),p=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id
},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+p.toLowerCase():m),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),s,r,a),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),a="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:a}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),a=$(this).attr("data-member-name"),s=$(this).attr("data-member-photo"),r=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:a,member_photo:s,member_status:r,member_description:i}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=200&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}})},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1
}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=200&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}})},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{
id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){
return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{
className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,
className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",
success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{
type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({
displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({
content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{
className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",
getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){
this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),
t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1,closeTimeout:0}},componentDidMount:function(){closeTimeout&&setTimeout(this.onClose.bind(this),closeTimeout)},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count
})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1,closeTimeout:0}},componentDidMount:function(){closeTimeout&&setTimeout(this.onClose.bind(this),this.state.closeTimeout)},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1,closeTimeout:0}},componentDidMount:function(){closeTimeout&&setTimeout(this.onClose.bind(this),this.state.closeTimeout)},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})});
},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1,closeTimeout:0}},componentDidMount:function(){closeTimeout&&setTimeout(this.onClose.bind(this),this.state.closeTimeout)},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",
success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1,closeTimeout:0}},componentDidMount:function(){this.props.closeTimeout&&setTimeout(this.onClose.bind(this),this.props.closeTimeout)},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview);
},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1,closeTimeout:0}},componentDidMount:function(){this.props.closeTimeout&&setTimeout(this.onClose.bind(this),this.props.closeTimeout)},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){t.setState({value:e.target.result})},a.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(a.fields[e]=a.fields[e]||{},a.fields[e][t]=n)}var a=this;return a.fields=a.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var a=this.fields[t]&&this.fields[t][n];a&&a.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,a={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var s=t.props.name;a[s]=a[s]||0;var r=a[s]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(s,r)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),a=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),s=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?s=this.state.src?s:"":"deleted"==this.state.status&&(s=""),"canceled"==this.state.status)return null;var r=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,a,n,s);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},r):React.createElement("span",{className:"media "+this.state.status},r)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1,closeTimeout:0}},componentDidMount:function(){this.props.closeTimeout&&setTimeout(this.onClose,this.props.closeTimeout)},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var a="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:a},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,a=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:a}),$(this)[0])})});var smiles={"/static/images/smiles/tango/smile.png":[":-)",":)"],"/static/images/smiles/tango/laugh.png":[":-D",":d",":D",":-d"],"/static/images/smiles/tango/tongue.png":[":-P",":p",":P",":-p"],"/static/images/smiles/tango/wink.png":[";-)",";)"],"/static/images/smiles/tango/sad.png":[":-(",":("],"/static/images/smiles/tango/confused.png":[":-S",":s",":-s",":S"],"/static/images/smiles/tango/neutral.png":[":-|",":|"],"/static/images/smiles/tango/crying.png":[":'("],"/static/images/smiles/tango/embarrassed.png":[":-$",":$"],"/static/images/smiles/tango/glasses-cool.png":["(H)","(h)"],"/static/images/smiles/tango/angry.png":[":-@",":@"],"/static/images/smiles/tango/angel.png":["(A)","(a)"],"/static/images/smiles/tango/devil.png":["(6)"],"/static/images/smiles/tango/quiet.png":[":-#",":#"],"/static/images/smiles/tango/teeth.png":["8o|"],"/static/images/smiles/tango/glasses-nerdy.png":["8-|"],"/static/images/smiles/tango/sarcastic.png":["^o)"],"/static/images/smiles/tango/secret.png":[":-*"],"/static/images/smiles/tango/sick.png":["+o("],"/static/images/smiles/tango/dont-know.png":[":^)"],"/static/images/smiles/tango/thinking.png":["*-)"],"/static/images/smiles/tango/party.png":["<:o)"],"/static/images/smiles/tango/eyeroll.png":["8-)"],"/static/images/smiles/tango/sleepy.png":["|-)"],"/static/images/smiles/tango/coffee.png":["(C)","(c)"],"/static/images/smiles/tango/good.png":["(Y)","(y)"],"/static/images/smiles/tango/bad.png":["(N)","(n)"],"/static/images/smiles/tango/beer.png":["(B)","(b)"],"/static/images/smiles/tango/drink.png":["(D)","(d)"],"/static/images/smiles/tango/girl.png":["(X)","(x)"],"/static/images/smiles/tango/boy.png":["(Z)","(z)"],"/static/images/smiles/tango/hug-left.png":["({)"],"/static/images/smiles/tango/hug-right.png":["(})"],"/static/images/smiles/tango/vampire.png":[":-[",":["],"/static/images/smiles/tango/cake.png":["(^)"],"/static/images/smiles/tango/love.png":["(L)","(l)"],"/static/images/smiles/tango/love-over.png":["(U)","(u)"],"/static/images/smiles/tango/kiss.png":["(K)","(k)"],"/static/images/smiles/tango/present.png":["(G)","(g)"],"/static/images/smiles/tango/rose.png":["(F)","(f)"],"/static/images/smiles/tango/rose-dead.png":["(W)","(w)"],"/static/images/smiles/tango/camera.png":["(P)","(p)"],"/static/images/smiles/tango/film.png":["(~)"],"/static/images/smiles/tango/cat.png":["(@)"],"/static/images/smiles/tango/dog.png":["(&)"],"/static/images/smiles/tango/phone.png":["(T)","(t)"],"/static/images/smiles/tango/mobile.png":["(mp)"],"/static/images/smiles/tango/lamp.png":["(I)","(i)"],"/static/images/smiles/tango/musical-note.png":["(8)"],"/static/images/smiles/tango/moon.png":["(S)"],"/static/images/smiles/tango/star.png":["(*)"],"/static/images/smiles/tango/mail.png":["(E)","(e)"],"/static/images/smiles/tango/clock.png":["(O)","(o)"],"/static/images/smiles/tango/msn.png":["(M)","(m)"],"/static/images/smiles/tango/snail.png":["(sn)"],"/static/images/smiles/tango/turtle.png":["(tu)"],"/static/images/smiles/tango/sheep.png":["(bah)"],"/static/images/smiles/tango/plate.png":["(pl)"],"/static/images/smiles/tango/bowl.png":["(||)"],"/static/images/smiles/tango/pizza.png":["(pi)"],"/static/images/smiles/tango/soccerball.png":["(so)"],"/static/images/smiles/tango/car.png":["(au)"],"/static/images/smiles/tango/airplane.png":["(ap)"],"/static/images/smiles/tango/umbrella.png":["(um)"],"/static/images/smiles/tango/island.png":["(ip)"],"/static/images/smiles/tango/rain.png":["(st)"],"/static/images/smiles/tango/thunder.png":["(li)"],"/static/images/smiles/tango/coins.png":["(mo)"],"/static/images/smiles/tango/computer.png":["(co)"],"/static/images/smiles/tango/console.png":["(xx)"],"/static/images/smiles/tango/question.png":["(?)"],"/static/images/smiles/tango/brb.png":["(brb)"],"/static/images/smiles/tango/cigarette.png":["(ci)"],"/static/images/smiles/tango/handcuffs.png":["(%)"],"/static/images/smiles/tango/highfive.png":["(h5)"],"/static/images/smiles/tango/fingers-crossed.png":["(yn)"],"/static/images/smiles/tango/foot-in-mouth.png":[":-!",":!"],"/static/images/smiles/tango/sun.png":["(#)"],"/static/images/smiles/tango/rainbow.png":["(R)","(r)"],"/static/images/smiles/tango/shock.png":[":-O",":o",":O",":-o"]},news={};news["delete"]=function(e){Popup.show({title:"Удалить новость",content:"Вы уверены,что хотите удалить новость?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.ajax({url:"/news/"+e,type:"DELETE",
success:function(){window.location.href="/"}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})};var base_url=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");String.prototype.format=String.prototype.f=function(){var e=arguments;return this.replace(/\{(\d+)\}/g,function(t,n){return e[n]?e[n]:t})},$(window).load(function(){tinymceInit()});var _MS_PER_DAY=864e5;$(window).resize(function(){$(".media-holder .approved img").each(function(){mediaFill($(this))})}),$(window).load(function(){$(window).trigger("resize")}),$(document).on("click",".company-structure .workers-toggle a",function(e){e.preventDefault(),$(this).closest(".workers").toggleClass("show")}),$(document).on("selectstart",".company-structure .structure",function(e){e.preventDefault()}),$(document).ready(function(){var e=$(".company-structure .structure");$(".company-structure .structure").removeClass("loading"),e.scrollLeft((e.find(".level-0").outerWidth()-e.parent().width())/2)}),$(document).on("mousedown",".company-structure .structure",function(e){function t(e){$("body").removeClass("dragging"),clearTimeout(o),n.off("mouseup mousemove")}if(1==e.which||2==e.which){var n=$(this),a=e.clientX-$(this).offset().left,s=e.clientY-$(this).offset().top,r=$(document).scrollTop(),i=$(this).scrollLeft(),o=setTimeout(function(){$("body").addClass("dragging"),n.on("mousemove",function(e){var t=e.clientX-$(this).offset().left,n=e.clientY-$(this).offset().top,o=t-a,c=s-n;$(document).scrollTop(r+c+2),$(this).scrollLeft(i-o)})},10);$(this).on("mouseup",t),$(window).on("mouseup",t)}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.JSXTransformer=e()}}(function(){var define,module,exports;return function e(t,n,a){function s(i,o){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!o&&c)return c(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return s(n?n:e)},l,l.exports,e,t,n,a)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)s(a[i]);return s}({1:[function(_dereq_,module,exports){"use strict";function transformReact(e,t){return t=t||{},t.sourceMap&&(t.sourceMap=supportsAccessors),ReactTools.transformWithDetails(e,t)}function exec(source,options){return eval(transformReact(source,options).code)}function createSourceCodeErrorMessage(e,t){var n=e.split("\n");if(!t.lineNumber||t.lineNumber>n.length)return"";var a=n[t.lineNumber-1],s=0;a=a.replace(/^\s+/,function(e){return s=e.length,""});var r=30,i=t.column-s;i>r&&(a="... "+a.slice(i-r),i=4+r),a.length-i>r&&(a=a.slice(0,i+r)+" ...");var o="\n\n"+a+"\n";return o+=new Array(i-1).join(" ")+"^"}function transformCode(e,t,n){try{var a=transformReact(e,n)}catch(s){throw s.message+="\n    at ",t?("fileName"in s&&(s.fileName=t),s.message+=t+":"+s.lineNumber+":"+s.columnNumber):s.message+=location.href,s.message+=createSourceCodeErrorMessage(e,s),s}if(!a.sourceMap)return a.code;var r;return null==t?(r="Inline JSX script",inlineScriptCount++,inlineScriptCount>1&&(r+=" ("+inlineScriptCount+")")):dummyAnchor&&(dummyAnchor.href=t,r=dummyAnchor.pathname.substr(1)),a.code+"\n"+inlineSourceMap(a.sourceMap,e,r)}function run(e,t,n){var a=document.createElement("script");a.text=transformCode(e,t,n),headEl.appendChild(a)}function load(e,t,n){var a;return a=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,a.open("GET",e,!0),"overrideMimeType"in a&&a.overrideMimeType("text/plain"),a.onreadystatechange=function(){if(4===a.readyState){if(0!==a.status&&200!==a.status)throw n(),new Error("Could not load "+e);t(a.responseText)}},a.send(null)}function loadScripts(e){function t(){var e,t;for(t=0;a>t;t++)if(e=n[t],e.loaded&&!e.executed)e.executed=!0,run(e.content,e.url,e.options);else if(!e.loaded&&!e.error&&!e.async)break}var n=[],a=e.length;e.forEach(function(e,a){var s={sourceMap:!0};/;harmony=true(;|$)/.test(e.type)&&(s.harmony=!0),/;stripTypes=true(;|$)/.test(e.type)&&(s.stripTypes=!0);var r=e.hasAttribute("async");e.src?(n[a]={async:r,error:!1,executed:!1,content:null,loaded:!1,url:e.src,options:s},load(e.src,function(e){n[a].loaded=!0,n[a].content=e,t()},function(){n[a].error=!0,t()})):n[a]={async:r,error:!1,executed:!1,content:e.innerHTML,loaded:!0,url:null,options:s}}),t()}function runScripts(){for(var e=document.getElementsByTagName("script"),t=[],n=0;n<e.length;n++)/^text\/jsx(;|$)/.test(e.item(n).type)&&t.push(e.item(n));t.length<1||(console.warn("You are using the in-browser JSX transformer. Be sure to precompile your JSX for production - http://facebook.github.io/react/docs/tooling-integration.html#jsx"),loadScripts(t))}var ReactTools=_dereq_("../main"),inlineSourceMap=_dereq_("./inline-source-map"),headEl,dummyAnchor,inlineScriptCount=0,supportsAccessors=Object.prototype.hasOwnProperty("__defineGetter__");"undefined"!=typeof window&&null!==window&&(headEl=document.getElementsByTagName("head")[0],dummyAnchor=document.createElement("a"),window.addEventListener?window.addEventListener("DOMContentLoaded",runScripts,!1):window.attachEvent("onload",runScripts)),module.exports={transform:transformReact,exec:exec}},{"../main":2,"./inline-source-map":41}],2:[function(e,t,n){"use strict";function a(e){e=e||{};var t={};return t.harmony=e.harmony,t.stripTypes=e.stripTypes,t.sourceMap=e.sourceMap,t.filename=e.sourceFilename,e.es6module&&(t.sourceType="module"),e.nonStrictEs6module&&(t.sourceType="nonStrictModule"),t.es3="es3"===e.target,t.es5=!t.es3,t}function s(e,t){var n=["react"];t.harmony&&n.push("harmony"),t.es3&&n.push("es3"),t.stripTypes&&(e=i(o.visitorList,e,t).code);var a=r.getVisitorsBySet(n);return i(a,e,t)}var r=e("./vendor/fbtransform/visitors"),i=e("jstransform").transform,o=e("jstransform/visitors/type-syntax"),c=e("./vendor/inline-source-map");t.exports={transform:function(e,t){t=a(t);var n=s(e,t),r=n.code;if(t.sourceMap){var i=c(n.sourceMap,e,t.filename);r+="\n"+i}return r},transformWithDetails:function(e,t){t=a(t);var n=s(e,t),r={};return r.code=n.code,t.sourceMap&&(r.sourceMap=n.sourceMap.toJSON()),t.filename&&(r.sourceMap.sources=[t.filename]),r}}},{"./vendor/fbtransform/visitors":40,"./vendor/inline-source-map":41,jstransform:22,"jstransform/visitors/type-syntax":36}],3:[function(e,t,n){function a(e,t){var n=this;if(!(n instanceof a))return new a(e,t);var s,r=typeof e;if("number"===r)s=+e;else if("string"===r)s=a.byteLength(e,t);else{if("object"!==r||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&F(e.data)&&(e=e.data),s=+e.length}if(s>L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");0>s?s=0:s>>>=0,a.TYPED_ARRAY_SUPPORT?n=a._augment(new Uint8Array(s)):(n.length=s,n._isBuffer=!0);var i;if(a.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)n._set(e);else if(w(e))if(a.isBuffer(e))for(i=0;s>i;i++)n[i]=e.readUInt8(i);else for(i=0;s>i;i++)n[i]=(e[i]%256+256)%256;else if("string"===r)n.write(e,0,t);else if("number"===r&&!a.TYPED_ARRAY_SUPPORT)for(i=0;s>i;i++)n[i]=0;return s>0&&s<=a.poolSize&&(n.parent=U),n}function s(e,t){if(!(this instanceof s))return new s(e,t);var n=new a(e,t);return delete n.parent,n}function r(e,t,n,a){n=Number(n)||0;var s=e.length-n;a?(a=Number(a),a>s&&(a=s)):a=s;var r=t.length;if(r%2!==0)throw new Error("Invalid hex string");a>r/2&&(a=r/2);for(var i=0;a>i;i++){var o=parseInt(t.substr(2*i,2),16);if(isNaN(o))throw new Error("Invalid hex string");e[n+i]=o}return i}function i(e,t,n,a){var s=T(k(t,e.length-n),e,n,a);return s}function o(e,t,n,a){var s=T(D(t),e,n,a);return s}function c(e,t,n,a){return o(e,t,n,a)}function u(e,t,n,a){var s=T(I(t),e,n,a);return s}function l(e,t,n,a){var s=T(M(t,e.length-n),e,n,a);return s}function m(e,t,n){return 0===t&&n===e.length?O.fromByteArray(e):O.fromByteArray(e.slice(t,n))}function p(e,t,n){var a="",s="";n=Math.min(e.length,n);for(var r=t;n>r;r++)e[r]<=127?(a+=P(s)+String.fromCharCode(e[r]),s=""):s+="%"+e[r].toString(16);return a+P(s)}function d(e,t,n){var a="";n=Math.min(e.length,n);for(var s=t;n>s;s++)a+=String.fromCharCode(127&e[s]);return a}function h(e,t,n){var a="";n=Math.min(e.length,n);for(var s=t;n>s;s++)a+=String.fromCharCode(e[s]);return a}function f(e,t,n){var a=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>a)&&(n=a);for(var s="",r=t;n>r;r++)s+=x(e[r]);return s}function g(e,t,n){for(var a=e.slice(t,n),s="",r=0;r<a.length;r+=2)s+=String.fromCharCode(a[r]+256*a[r+1]);return s}function v(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function b(e,t,n,s,r,i){if(!a.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>r||i>t)throw new RangeError("value is out of bounds");if(n+s>e.length)throw new RangeError("index out of range")}function y(e,t,n,a){0>t&&(t=65535+t+1);for(var s=0,r=Math.min(e.length-n,2);r>s;s++)e[n+s]=(t&255<<8*(a?s:1-s))>>>8*(a?s:1-s)}function E(e,t,n,a){0>t&&(t=4294967295+t+1);for(var s=0,r=Math.min(e.length-n,4);r>s;s++)e[n+s]=t>>>8*(a?s:3-s)&255}function R(e,t,n,a,s,r){if(t>s||r>t)throw new RangeError("value is out of bounds");if(n+a>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function C(e,t,n,a,s){return s||R(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),A.write(e,t,n,a,23,4),n+4}function S(e,t,n,a,s){return s||R(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),A.write(e,t,n,a,52,8),n+8}function _(e){if(e=N(e).replace(q,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function N(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function w(e){return F(e)||a.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function x(e){return 16>e?"0"+e.toString(16):e.toString(16)}function k(e,t){t=t||1/0;for(var n,a=e.length,s=null,r=[],i=0;a>i;i++){if(n=e.charCodeAt(i),n>55295&&57344>n){if(!s){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(i+1===a){(t-=3)>-1&&r.push(239,191,189);continue}s=n;continue}if(56320>n){(t-=3)>-1&&r.push(239,191,189),s=n;continue}n=s-55296<<10|n-56320|65536,s=null}else s&&((t-=3)>-1&&r.push(239,191,189),s=null);if(128>n){if((t-=1)<0)break;r.push(n)}else if(2048>n){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(2097152>n))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function D(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function M(e,t){for(var n,a,s,r=[],i=0;i<e.length&&!((t-=2)<0);i++)n=e.charCodeAt(i),a=n>>8,s=n%256,r.push(s),r.push(a);return r}function I(e){return O.toByteArray(_(e))}function T(e,t,n,a){for(var s=0;a>s&&!(s+n>=t.length||s>=e.length);s++)t[s+n]=e[s];return s}function P(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}var O=e("base64-js"),A=e("ieee754"),F=e("is-array");n.Buffer=a,n.SlowBuffer=s,n.INSPECT_MAX_BYTES=50,a.poolSize=8192;var L=1073741823,U={};a.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,s=t.length,r=0,i=Math.min(n,s);i>r&&e[r]===t[r];r++);return r!==i&&(n=e[r],s=t[r]),s>n?-1:n>s?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!F(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new a(0);if(1===e.length)return e[0];var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var s=new a(t),r=0;for(n=0;n<e.length;n++){var i=e[n];i.copy(s,r),r+=i.length}return s},a.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":n=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;case"hex":n=e.length>>>1;break;case"utf8":case"utf-8":n=k(e).length;break;case"base64":n=I(e).length;break;default:n=e.length}return n},a.prototype.length=void 0,a.prototype.parent=void 0,a.prototype.toString=function(e,t,n){var a=!1;if(t>>>=0,n=void 0===n||n===1/0?this.length:n>>>0,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return f(this,t,n);case"utf8":case"utf-8":return p(this,t,n);case"ascii":return d(this,t,n);case"binary":return h(this,t,n);case"base64":return m(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:a.compare(this,e)},a.prototype.indexOf=function(e,t){function n(e,t,n){for(var a=-1,s=0;n+s<e.length;s++)if(e[n+s]===t[-1===a?0:s-a]){if(-1===a&&(a=s),s-a+1===t.length)return n+a}else a=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(a.isBuffer(e))return n(this,e,t);if("number"==typeof e)return a.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},a.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},a.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},a.prototype.write=function(e,t,n,a){if(isFinite(t))isFinite(n)||(a=n,n=void 0);else{var s=a;a=t,t=n,n=s}if(t=Number(t)||0,0>n||0>t||t>this.length)throw new RangeError("attempt to write outside buffer bounds");var m=this.length-t;n?(n=Number(n),n>m&&(n=m)):n=m,a=String(a||"utf8").toLowerCase();var p;switch(a){case"hex":p=r(this,e,t,n);break;case"utf8":case"utf-8":p=i(this,e,t,n);break;case"ascii":p=o(this,e,t,n);break;case"binary":p=c(this,e,t,n);break;case"base64":p=u(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":p=l(this,e,t,n);break;default:throw new TypeError("Unknown encoding: "+a)}return p},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var s;if(a.TYPED_ARRAY_SUPPORT)s=a._augment(this.subarray(e,t));else{var r=t-e;s=new a(r,void 0);for(var i=0;r>i;i++)s[i]=this[i+e]}return s.length&&(s.parent=this.parent||this),s},a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var a=this[e],s=1,r=0;++r<t&&(s*=256);)a+=this[e+r]*s;return a},a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var a=this[e+--t],s=1;t>0&&(s*=256);)a+=this[e+--t]*s;return a},a.prototype.readUInt8=function(e,t){return t||v(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||v(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||v(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var a=this[e],s=1,r=0;++r<t&&(s*=256);)a+=this[e+r]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*t)),a},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var a=t,s=1,r=this[e+--a];a>0&&(s*=256);)r+=this[e+--a]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*t)),r},a.prototype.readInt8=function(e,t){return t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||v(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||v(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||v(e,4,this.length),A.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||v(e,4,this.length),A.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||v(e,8,this.length),A.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||v(e,8,this.length),A.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,a){e=+e,t>>>=0,n>>>=0,a||b(this,e,t,n,Math.pow(2,8*n),0);var s=1,r=0;for(this[t]=255&e;++r<n&&(s*=256);)this[t+r]=e/s>>>0&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,a){e=+e,t>>>=0,n>>>=0,a||b(this,e,t,n,Math.pow(2,8*n),0);var s=n-1,r=1;for(this[t+s]=255&e;--s>=0&&(r*=256);)this[t+s]=e/r>>>0&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):y(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):y(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):E(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):E(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,a){e=+e,t>>>=0,a||b(this,e,t,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var s=0,r=1,i=0>e?1:0;for(this[t]=255&e;++s<n&&(r*=256);)this[t+s]=(e/r>>0)-i&255;return t+n},a.prototype.writeIntBE=function(e,t,n,a){e=+e,t>>>=0,a||b(this,e,t,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var s=n-1,r=1,i=0>e?1:0;for(this[t+s]=255&e;--s>=0&&(r*=256);)this[t+s]=(e/r>>0)-i&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):y(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):y(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):E(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):E(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return C(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return C(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return S(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return S(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,s){if(n||(n=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&n>s&&(s=n),s===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>s)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-n&&(s=e.length-t+n);var r=s-n;if(1e3>r||!a.TYPED_ARRAY_SUPPORT)for(var i=0;r>i;i++)e[i+t]=this[i+n];else e._set(this.subarray(n,n+r),t);return r},a.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var a;if("number"==typeof e)for(a=t;n>a;a++)this[a]=e;else{var s=k(e.toString()),r=s.length;for(a=t;n>a;a++)this[a]=s[a%r]}return this}},a.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(a.TYPED_ARRAY_SUPPORT)return new a(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var $=a.prototype;a._augment=function(e){return e.constructor=a,e._isBuffer=!0,e._set=e.set,e.get=$.get,e.set=$.set,e.write=$.write,e.toString=$.toString,e.toLocaleString=$.toString,e.toJSON=$.toJSON,e.equals=$.equals,e.compare=$.compare,e.indexOf=$.indexOf,e.copy=$.copy,e.slice=$.slice,e.readUIntLE=$.readUIntLE,e.readUIntBE=$.readUIntBE,e.readUInt8=$.readUInt8,e.readUInt16LE=$.readUInt16LE,e.readUInt16BE=$.readUInt16BE,e.readUInt32LE=$.readUInt32LE,e.readUInt32BE=$.readUInt32BE,e.readIntLE=$.readIntLE,e.readIntBE=$.readIntBE,e.readInt8=$.readInt8,e.readInt16LE=$.readInt16LE,e.readInt16BE=$.readInt16BE,e.readInt32LE=$.readInt32LE,e.readInt32BE=$.readInt32BE,e.readFloatLE=$.readFloatLE,e.readFloatBE=$.readFloatBE,e.readDoubleLE=$.readDoubleLE,e.readDoubleBE=$.readDoubleBE,e.writeUInt8=$.writeUInt8,e.writeUIntLE=$.writeUIntLE,e.writeUIntBE=$.writeUIntBE,e.writeUInt16LE=$.writeUInt16LE,e.writeUInt16BE=$.writeUInt16BE,e.writeUInt32LE=$.writeUInt32LE,e.writeUInt32BE=$.writeUInt32BE,e.writeIntLE=$.writeIntLE,e.writeIntBE=$.writeIntBE,e.writeInt8=$.writeInt8,e.writeInt16LE=$.writeInt16LE,e.writeInt16BE=$.writeInt16BE,e.writeInt32LE=$.writeInt32LE,e.writeInt32BE=$.writeInt32BE,e.writeFloatLE=$.writeFloatLE,e.writeFloatBE=$.writeFloatBE,e.writeDoubleLE=$.writeDoubleLE,e.writeDoubleBE=$.writeDoubleBE,e.fill=$.fill,e.inspect=$.inspect,e.toArrayBuffer=$.toArrayBuffer,e};var q=/[^+\/0-9A-z\-]/g},{"base64-js":4,ieee754:5,"is-array":6}],4:[function(e,t,n){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===i||t===m?62:t===o||t===p?63:c>t?-1:c+10>t?t-c+26+26:l+26>t?t-l:u+26>t?t-u+26:void 0}function n(e){function n(e){u[m++]=e}var a,s,i,o,c,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;c="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,u=new r(3*e.length/4-c),i=c>0?e.length-4:e.length;var m=0;for(a=0,s=0;i>a;a+=4,s+=3)o=t(e.charAt(a))<<18|t(e.charAt(a+1))<<12|t(e.charAt(a+2))<<6|t(e.charAt(a+3)),n((16711680&o)>>16),n((65280&o)>>8),n(255&o);return 2===c?(o=t(e.charAt(a))<<2|t(e.charAt(a+1))>>4,n(255&o)):1===c&&(o=t(e.charAt(a))<<10|t(e.charAt(a+1))<<4|t(e.charAt(a+2))>>2,n(o>>8&255),n(255&o)),u}function s(e){function t(e){return a.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var s,r,i,o=e.length%3,c="";for(s=0,i=e.length-o;i>s;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],c+=n(r);switch(o){case 1:r=e[e.length-1],c+=t(r>>2),c+=t(r<<4&63),c+="==";break;case 2:r=(e[e.length-2]<<8)+e[e.length-1],c+=t(r>>10),c+=t(r>>4&63),c+=t(r<<2&63),c+="="}return c}var r="undefined"!=typeof Uint8Array?Uint8Array:Array,i="+".charCodeAt(0),o="/".charCodeAt(0),c="0".charCodeAt(0),u="a".charCodeAt(0),l="A".charCodeAt(0),m="-".charCodeAt(0),p="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=s}("undefined"==typeof n?this.base64js={}:n)},{}],5:[function(e,t,n){n.read=function(e,t,n,a,s){var r,i,o=8*s-a-1,c=(1<<o)-1,u=c>>1,l=-7,m=n?s-1:0,p=n?-1:1,d=e[t+m];for(m+=p,r=d&(1<<-l)-1,d>>=-l,l+=o;l>0;r=256*r+e[t+m],m+=p,l-=8);for(i=r&(1<<-l)-1,r>>=-l,l+=a;l>0;i=256*i+e[t+m],m+=p,l-=8);if(0===r)r=1-u;else{if(r===c)return i?NaN:(d?-1:1)*(1/0);i+=Math.pow(2,a),r-=u}return(d?-1:1)*i*Math.pow(2,r-a)},n.write=function(e,t,n,a,s,r){var i,o,c,u=8*r-s-1,l=(1<<u)-1,m=l>>1,p=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,d=a?0:r-1,h=a?1:-1,f=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),t+=i+m>=1?p/c:p*Math.pow(2,1-m),t*c>=2&&(i++,c/=2),i+m>=l?(o=0,i=l):i+m>=1?(o=(t*c-1)*Math.pow(2,s),i+=m):(o=t*Math.pow(2,m-1)*Math.pow(2,s),i=0));s>=8;e[n+d]=255&o,d+=h,o/=256,s-=8);for(i=i<<s|o,u+=s;u>0;e[n+d]=255&i,d+=h,i/=256,u-=8);e[n+d-h]|=128*f}},{}],6:[function(e,t,n){var a=Array.isArray,s=Object.prototype.toString;t.exports=a||function(e){return!!e&&"[object Array]"==s.call(e)}},{}],7:[function(e,t,n){(function(e){function t(e,t){for(var n=0,a=e.length-1;a>=0;a--){var s=e[a];"."===s?e.splice(a,1):".."===s?(e.splice(a,1),n++):n&&(e.splice(a,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function a(e,t){if(e.filter)return e.filter(t);for(var n=[],a=0;a<e.length;a++)t(e[a],a,e)&&n.push(e[a]);return n}var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(e){return s.exec(e).slice(1)};n.resolve=function(){for(var n="",s=!1,r=arguments.length-1;r>=-1&&!s;r--){var i=r>=0?arguments[r]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(n=i+"/"+n,s="/"===i.charAt(0))}return n=t(a(n.split("/"),function(e){return!!e}),!s).join("/"),(s?"/":"")+n||"."},n.normalize=function(e){var s=n.isAbsolute(e),r="/"===i(e,-1);return e=t(a(e.split("/"),function(e){return!!e}),!s).join("/"),e||s||(e="."),e&&r&&(e+="/"),(s?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(a(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function a(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var s=a(e.split("/")),r=a(t.split("/")),i=Math.min(s.length,r.length),o=i,c=0;i>c;c++)if(s[c]!==r[c]){o=c;break}for(var u=[],c=o;c<s.length;c++)u.push("..");return u=u.concat(r.slice(o)),u.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=r(e),n=t[0],a=t[1];return n||a?(a&&(a=a.substr(0,a.length-1)),n+a):"."},n.basename=function(e,t){var n=r(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return r(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:8}],8:[function(e,t,n){function a(){if(!o){o=!0;for(var e,t=i.length;t;){e=i,i=[];for(var n=-1;++n<t;)e[n]();t=i.length}o=!1}}function s(){}var r=t.exports={},i=[],o=!1;r.nextTick=function(e){i.push(e),o||setTimeout(a,0)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=s,r.addListener=s,r.once=s,r.off=s,r.removeListener=s,r.removeAllListeners=s,r.emit=s,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],9:[function(e,t,n){!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof n?n:e.esprima={})}(this,function(e){"use strict";function t(e,t){if(!e)throw new Error("ASSERT: "+t)}function n(){this.$data={}}function a(e){return e>=48&&57>=e}function s(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function r(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&" ᠎             　\ufeff".indexOf(String.fromCharCode(e))>0}function o(e){return 10===e||13===e||8232===e||8233===e}function c(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&ea.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function u(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&ea.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function l(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function m(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function p(e){return"eval"===e||"arguments"===e}function d(e){if(ra&&m(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function h(e,n,a,s,r){var i;t("number"==typeof a,"Comment must have valid position"),pa.lastCommentStart>=a||(pa.lastCommentStart=a,i={type:e,value:n},da.range&&(i.range=[a,s]),da.loc&&(i.loc=r),da.comments.push(i),da.attachComment&&(da.leadingComments.push(i),da.trailingComments.push(i)))}function f(){var e,t,n,a;for(e=ia-2,t={start:{line:oa,column:ia-ca-2}};ua>ia;)if(n=sa.charCodeAt(ia),++ia,o(n))return da.comments&&(a=sa.slice(e+2,ia-1),t.end={line:oa,column:ia-ca-1},h("Line",a,e,ia-1,t)),13===n&&10===sa.charCodeAt(ia)&&++ia,++oa,void(ca=ia);da.comments&&(a=sa.slice(e+2,ia),t.end={line:oa,column:ia-ca},h("Line",a,e,ia,t))}function g(){var e,t,n,a;for(da.comments&&(e=ia-2,t={start:{line:oa,column:ia-ca-2}});ua>ia;)if(n=sa.charCodeAt(ia),o(n))13===n&&10===sa.charCodeAt(ia+1)&&++ia,++oa,++ia,ca=ia,ia>=ua&&K({},Zn.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===sa.charCodeAt(ia+1))return++ia,++ia,void(da.comments&&(a=sa.slice(e+2,ia-2),t.end={line:oa,column:ia-ca},h("Block",a,e,ia,t)));++ia}else++ia;K({},Zn.UnexpectedToken,"ILLEGAL")}function v(){for(var e;ua>ia;)if(e=sa.charCodeAt(ia),i(e))++ia;else if(o(e))++ia,13===e&&10===sa.charCodeAt(ia)&&++ia,++oa,ca=ia;else{if(47!==e)break;if(e=sa.charCodeAt(ia+1),47===e)++ia,++ia,f();else{if(42!==e)break;++ia,++ia,g()}}}function b(e){var t,n,a,r=0;for(n="u"===e?4:2,t=0;n>t;++t){if(!(ua>ia&&s(sa[ia])))return"";a=sa[ia++],r=16*r+"0123456789abcdef".indexOf(a.toLowerCase())}return String.fromCharCode(r)}function y(){var e,t,n,a;for(e=sa[ia],t=0,"}"===e&&K({},Zn.UnexpectedToken,"ILLEGAL");ua>ia&&(e=sa[ia++],s(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&K({},Zn.UnexpectedToken,"ILLEGAL"),65535>=t?String.fromCharCode(t):(n=(t-65536>>10)+55296,a=(t-65536&1023)+56320,
String.fromCharCode(n,a))}function E(){var e,t;for(e=sa.charCodeAt(ia++),t=String.fromCharCode(e),92===e&&(117!==sa.charCodeAt(ia)&&K({},Zn.UnexpectedToken,"ILLEGAL"),++ia,e=b("u"),e&&"\\"!==e&&c(e.charCodeAt(0))||K({},Zn.UnexpectedToken,"ILLEGAL"),t=e);ua>ia&&(e=sa.charCodeAt(ia),u(e));)++ia,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==sa.charCodeAt(ia)&&K({},Zn.UnexpectedToken,"ILLEGAL"),++ia,e=b("u"),e&&"\\"!==e&&u(e.charCodeAt(0))||K({},Zn.UnexpectedToken,"ILLEGAL"),t+=e);return t}function R(){var e,t;for(e=ia++;ua>ia;){if(t=sa.charCodeAt(ia),92===t)return ia=e,E();if(!u(t))break;++ia}return sa.slice(e,ia)}function C(){var e,t,n;return e=ia,t=92===sa.charCodeAt(ia)?E():R(),n=1===t.length?Vn.Identifier:d(t)?Vn.Keyword:"null"===t?Vn.NullLiteral:"true"===t||"false"===t?Vn.BooleanLiteral:Vn.Identifier,{type:n,value:t,lineNumber:oa,lineStart:ca,range:[e,ia]}}function S(){var e,t,n,a,s=ia,r=sa.charCodeAt(ia),i=sa[ia];if(pa.inJSXTag||pa.inJSXChild)switch(r){case 60:case 62:return++ia,{type:Vn.Punctuator,value:String.fromCharCode(r),lineNumber:oa,lineStart:ca,range:[s,ia]}}switch(r){case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ia,da.tokenize&&(40===r?da.openParenToken=da.tokens.length:123===r&&(da.openCurlyToken=da.tokens.length)),{type:Vn.Punctuator,value:String.fromCharCode(r),lineNumber:oa,lineStart:ca,range:[s,ia]};default:if(e=sa.charCodeAt(ia+1),61===e)switch(r){case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 94:case 124:return ia+=2,{type:Vn.Punctuator,value:String.fromCharCode(r)+String.fromCharCode(e),lineNumber:oa,lineStart:ca,range:[s,ia]};case 33:case 61:return ia+=2,61===sa.charCodeAt(ia)&&++ia,{type:Vn.Punctuator,value:sa.slice(s,ia),lineNumber:oa,lineStart:ca,range:[s,ia]}}}return t=sa[ia+1],n=sa[ia+2],a=sa[ia+3],">"===i&&">"===t&&">"===n&&"="===a?(ia+=4,{type:Vn.Punctuator,value:">>>=",lineNumber:oa,lineStart:ca,range:[s,ia]}):">"!==i||">"!==t||">"!==n||pa.inType?"<"===i&&"<"===t&&"="===n?(ia+=3,{type:Vn.Punctuator,value:"<<=",lineNumber:oa,lineStart:ca,range:[s,ia]}):">"===i&&">"===t&&"="===n?(ia+=3,{type:Vn.Punctuator,value:">>=",lineNumber:oa,lineStart:ca,range:[s,ia]}):"."===i&&"."===t&&"."===n?(ia+=3,{type:Vn.Punctuator,value:"...",lineNumber:oa,lineStart:ca,range:[s,ia]}):i===t&&"+-<>&|".indexOf(i)>=0&&!pa.inType?(ia+=2,{type:Vn.Punctuator,value:i+t,lineNumber:oa,lineStart:ca,range:[s,ia]}):"="===i&&">"===t?(ia+=2,{type:Vn.Punctuator,value:"=>",lineNumber:oa,lineStart:ca,range:[s,ia]}):"<>=!+-*%&|^/".indexOf(i)>=0?(++ia,{type:Vn.Punctuator,value:i,lineNumber:oa,lineStart:ca,range:[s,ia]}):"."===i?(++ia,{type:Vn.Punctuator,value:i,lineNumber:oa,lineStart:ca,range:[s,ia]}):void K({},Zn.UnexpectedToken,"ILLEGAL"):(ia+=3,{type:Vn.Punctuator,value:">>>",lineNumber:oa,lineStart:ca,range:[s,ia]})}function _(e){for(var t="";ua>ia&&s(sa[ia]);)t+=sa[ia++];return 0===t.length&&K({},Zn.UnexpectedToken,"ILLEGAL"),c(sa.charCodeAt(ia))&&K({},Zn.UnexpectedToken,"ILLEGAL"),{type:Vn.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:oa,lineStart:ca,range:[e,ia]}}function N(e){var t,n;for(n="";ua>ia&&(t=sa[ia],"0"===t||"1"===t);)n+=sa[ia++];return 0===n.length&&K({},Zn.UnexpectedToken,"ILLEGAL"),ua>ia&&(t=sa.charCodeAt(ia),(c(t)||a(t))&&K({},Zn.UnexpectedToken,"ILLEGAL")),{type:Vn.NumericLiteral,value:parseInt(n,2),lineNumber:oa,lineStart:ca,range:[e,ia]}}function w(e,t){var n,s;for(r(e)?(s=!0,n="0"+sa[ia++]):(s=!1,++ia,n="");ua>ia&&r(sa[ia]);)n+=sa[ia++];return s||0!==n.length||K({},Zn.UnexpectedToken,"ILLEGAL"),(c(sa.charCodeAt(ia))||a(sa.charCodeAt(ia)))&&K({},Zn.UnexpectedToken,"ILLEGAL"),{type:Vn.NumericLiteral,value:parseInt(n,8),octal:s,lineNumber:oa,lineStart:ca,range:[t,ia]}}function x(){var e,n,s;if(s=sa[ia],t(a(s.charCodeAt(0))||"."===s,"Numeric literal must start with a decimal digit or a decimal point"),n=ia,e="","."!==s){if(e=sa[ia++],s=sa[ia],"0"===e){if("x"===s||"X"===s)return++ia,_(n);if("b"===s||"B"===s)return++ia,N(n);if("o"===s||"O"===s||r(s))return w(s,n);s&&a(s.charCodeAt(0))&&K({},Zn.UnexpectedToken,"ILLEGAL")}for(;a(sa.charCodeAt(ia));)e+=sa[ia++];s=sa[ia]}if("."===s){for(e+=sa[ia++];a(sa.charCodeAt(ia));)e+=sa[ia++];s=sa[ia]}if("e"===s||"E"===s)if(e+=sa[ia++],s=sa[ia],("+"===s||"-"===s)&&(e+=sa[ia++]),a(sa.charCodeAt(ia)))for(;a(sa.charCodeAt(ia));)e+=sa[ia++];else K({},Zn.UnexpectedToken,"ILLEGAL");return c(sa.charCodeAt(ia))&&K({},Zn.UnexpectedToken,"ILLEGAL"),{type:Vn.NumericLiteral,value:parseFloat(e),lineNumber:oa,lineStart:ca,range:[n,ia]}}function k(){var e,n,a,s,i,c,u="",l=!1;for(e=sa[ia],t("'"===e||'"'===e,"String literal must starts with a quote"),n=ia,++ia;ua>ia;){if(a=sa[ia++],a===e){e="";break}if("\\"===a)if(a=sa[ia++],a&&o(a.charCodeAt(0)))++oa,"\r"===a&&"\n"===sa[ia]&&++ia,ca=ia;else switch(a){case"n":u+="\n";break;case"r":u+="\r";break;case"t":u+="	";break;case"u":case"x":"{"===sa[ia]?(++ia,u+=y()):(c=ia,i=b(a),i?u+=i:(ia=c,u+=a));break;case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="";break;default:r(a)?(s="01234567".indexOf(a),0!==s&&(l=!0),ua>ia&&r(sa[ia])&&(l=!0,s=8*s+"01234567".indexOf(sa[ia++]),"0123".indexOf(a)>=0&&ua>ia&&r(sa[ia])&&(s=8*s+"01234567".indexOf(sa[ia++]))),u+=String.fromCharCode(s)):u+=a}else{if(o(a.charCodeAt(0)))break;u+=a}}return""!==e&&K({},Zn.UnexpectedToken,"ILLEGAL"),{type:Vn.StringLiteral,value:u,octal:l,lineNumber:oa,lineStart:ca,range:[n,ia]}}function D(){var e,t,n,a,s,i,c,u,l="";for(n=!1,a=!1,t=ia,++ia;ua>ia;){if(e=sa[ia++],"`"===e){a=!0,n=!0;break}if("$"===e){if("{"===sa[ia]){++ia,n=!0;break}l+=e}else if("\\"===e)if(e=sa[ia++],o(e.charCodeAt(0)))++oa,"\r"===e&&"\n"===sa[ia]&&++ia,ca=ia;else switch(e){case"n":l+="\n";break;case"r":l+="\r";break;case"t":l+="	";break;case"u":case"x":"{"===sa[ia]?(++ia,l+=y()):(s=ia,i=b(e),i?l+=i:(ia=s,l+=e));break;case"b":l+="\b";break;case"f":l+="\f";break;case"v":l+="";break;default:r(e)?(c="01234567".indexOf(e),0!==c&&(u=!0),ua>ia&&r(sa[ia])&&(u=!0,c=8*c+"01234567".indexOf(sa[ia++]),"0123".indexOf(e)>=0&&ua>ia&&r(sa[ia])&&(c=8*c+"01234567".indexOf(sa[ia++]))),l+=String.fromCharCode(c)):l+=e}else o(e.charCodeAt(0))?(++oa,"\r"===e&&"\n"===sa[ia]&&++ia,ca=ia,l+="\n"):l+=e}return n||K({},Zn.UnexpectedToken,"ILLEGAL"),{type:Vn.Template,value:{cooked:l,raw:sa.slice(t+1,ia-(a?1:2))},tail:a,octal:u,lineNumber:oa,lineStart:ca,range:[t,ia]}}function M(e){var t,n;return ma=null,v(),t=e.head?"`":"}",sa[ia]!==t&&K({},Zn.UnexpectedToken,"ILLEGAL"),n=D(),$(),n}function I(e,t){var n,a=e;t.indexOf("u")>=0&&(a=a.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void K({},Zn.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{n=new RegExp(a)}catch(s){K({},Zn.InvalidRegExp)}try{return new RegExp(e,t)}catch(r){return null}}function T(){var e,n,a,s,r;for(e=sa[ia],t("/"===e,"Regular expression literal must start with a slash"),n=sa[ia++],a=!1,s=!1;ua>ia;)if(e=sa[ia++],n+=e,"\\"===e)e=sa[ia++],o(e.charCodeAt(0))&&K({},Zn.UnterminatedRegExp),n+=e;else if(o(e.charCodeAt(0)))K({},Zn.UnterminatedRegExp);else if(a)"]"===e&&(a=!1);else{if("/"===e){s=!0;break}"["===e&&(a=!0)}return s||K({},Zn.UnterminatedRegExp),r=n.substr(1,n.length-2),{value:r,literal:n}}function P(){var e,t,n,a;for(t="",n="";ua>ia&&(e=sa[ia],u(e.charCodeAt(0)));)if(++ia,"\\"===e&&ua>ia)if(e=sa[ia],"u"===e){if(++ia,a=ia,e=b("u"))for(n+=e,t+="\\u";ia>a;++a)t+=sa[a];else ia=a,n+="u",t+="\\u";V({},Zn.UnexpectedToken,"ILLEGAL")}else t+="\\",V({},Zn.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function O(){var e,t,n,a;return ma=null,v(),e=ia,t=T(),n=P(),a=I(t.value,n.value),da.tokenize?{type:Vn.RegularExpression,value:a,regex:{pattern:t.value,flags:n.value},lineNumber:oa,lineStart:ca,range:[e,ia]}:{literal:t.literal+n.literal,value:a,regex:{pattern:t.value,flags:n.value},range:[e,ia]}}function A(e){return e.type===Vn.Identifier||e.type===Vn.Keyword||e.type===Vn.BooleanLiteral||e.type===Vn.NullLiteral}function F(){var e,t;if(e=da.tokens[da.tokens.length-1],!e)return O();if("Punctuator"===e.type){if(")"===e.value)return t=da.tokens[da.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?S():O();if("}"===e.value){if(da.tokens[da.openCurlyToken-3]&&"Keyword"===da.tokens[da.openCurlyToken-3].type){if(t=da.tokens[da.openCurlyToken-4],!t)return S()}else{if(!da.tokens[da.openCurlyToken-4]||"Keyword"!==da.tokens[da.openCurlyToken-4].type)return S();if(t=da.tokens[da.openCurlyToken-5],!t)return O()}return Yn.indexOf(t.value)>=0?S():O()}return O()}return"Keyword"===e.type&&"this"!==e.value?O():S()}function L(){var e;return pa.inJSXChild||v(),ia>=ua?{type:Vn.EOF,lineNumber:oa,lineStart:ca,range:[ia,ia]}:pa.inJSXChild?vn():(e=sa.charCodeAt(ia),40===e||41===e||58===e?S():39===e||34===e?pa.inJSXTag?gn():k():pa.inJSXTag&&mn(e)?dn():96===e?D():c(e)?C():46===e?a(sa.charCodeAt(ia+1))?x():S():a(e)?x():da.tokenize&&47===e?F():S())}function U(){var e;return e=ma,ia=e.range[1],oa=e.lineNumber,ca=e.lineStart,ma=L(),ia=e.range[1],oa=e.lineNumber,ca=e.lineStart,e}function $(){var e,t,n;e=ia,t=oa,n=ca,ma=L(),ia=e,oa=t,ca=n}function q(){var e,t,n,a,s;return e="function"==typeof da.advance?da.advance:L,t=ia,n=oa,a=ca,null===ma&&(ma=e()),ia=ma.range[1],oa=ma.lineNumber,ca=ma.lineStart,s=e(),ia=t,oa=n,ca=a,s}function j(e){ia=e.range[0],oa=e.lineNumber,ca=e.lineStart,ma=e}function B(){return da.loc||da.range?(v(),{offset:ia,line:oa,col:ia-ca}):void 0}function W(){return da.loc||da.range?{offset:ia,line:oa,col:ia-ca}:void 0}function H(e){var t,n,a=da.bottomRightStack,s=a[a.length-1];if(!(e.type===Qn.Program&&e.body.length>0)){if(da.trailingComments.length>0?da.trailingComments[0].range[0]>=e.range[1]?(n=da.trailingComments,da.trailingComments=[]):da.trailingComments.length=0:s&&s.trailingComments&&s.trailingComments[0].range[0]>=e.range[1]&&(n=s.trailingComments,delete s.trailingComments),s)for(;s&&s.range[0]>=e.range[0];)t=s,s=a.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):da.leadingComments.length>0&&da.leadingComments[da.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=da.leadingComments,da.leadingComments=[]),n&&(e.trailingComments=n),a.push(e)}}function z(e,t){return da.range&&(t.range=[e.offset,ia]),da.loc&&(t.loc={start:{line:e.line,column:e.col},end:{line:oa,column:ia-ca}},t=la.postProcess(t)),da.attachComment&&H(t),t}function J(){var e,t,n,a;return e=ia,t=oa,n=ca,v(),a=oa!==t,ia=e,oa=t,ca=n,a}function K(e,n){var a,s=Array.prototype.slice.call(arguments,2),r=n.replace(/%(\d)/g,function(e,n){return t(n<s.length,"Message reference must be in range"),s[n]});throw"number"==typeof e.lineNumber?(a=new Error("Line "+e.lineNumber+": "+r),a.index=e.range[0],a.lineNumber=e.lineNumber,a.column=e.range[0]-ca+1):(a=new Error("Line "+oa+": "+r),a.index=ia,a.lineNumber=oa,a.column=ia-ca+1),a.description=r,a}function V(){try{K.apply(null,arguments)}catch(e){if(!da.errors)throw e;da.errors.push(e)}}function X(e){if(e.type===Vn.EOF&&K(e,Zn.UnexpectedEOS),e.type===Vn.NumericLiteral&&K(e,Zn.UnexpectedNumber),(e.type===Vn.StringLiteral||e.type===Vn.JSXText)&&K(e,Zn.UnexpectedString),e.type===Vn.Identifier&&K(e,Zn.UnexpectedIdentifier),e.type===Vn.Keyword){if(l(e.value))K(e,Zn.UnexpectedReserved);else if(ra&&m(e.value))return void V(e,Zn.StrictReservedWord);K(e,Zn.UnexpectedToken,e.value)}e.type===Vn.Template&&K(e,Zn.UnexpectedTemplate,e.value.raw),K(e,Zn.UnexpectedToken,e.value)}function Y(e){var t=U();(t.type!==Vn.Punctuator||t.value!==e)&&X(t)}function Q(e,t){var n=U();(n.type!==(t?Vn.Identifier:Vn.Keyword)||n.value!==e)&&X(n)}function G(e){return Q(e,!0)}function Z(e){return ma.type===Vn.Punctuator&&ma.value===e}function ee(e,t){var n=t?Vn.Identifier:Vn.Keyword;return ma.type===n&&ma.value===e}function te(e){return ee(e,!0)}function ne(){var e;return ma.type!==Vn.Punctuator?!1:(e=ma.value,"="===e||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}function ae(){return pa.yieldAllowed&&ee("yield",!ra)}function se(){var e=ma,t=!1;return te("async")&&(U(),t=!J(),j(e)),t}function re(){return pa.awaitAllowed&&te("await")}function ie(){var e,t=ia,n=oa,a=ca,s=ma;return 59===sa.charCodeAt(ia)?void U():(e=oa,v(),oa!==e?(ia=t,oa=n,ca=a,void(ma=s)):Z(";")?void U():void(ma.type===Vn.EOF||Z("}")||X(ma)))}function oe(e){return e.type===Qn.Identifier||e.type===Qn.MemberExpression}function ce(e){return oe(e)||e.type===Qn.ObjectPattern||e.type===Qn.ArrayPattern}function ue(){var e,t=[],n=[],a=null,s=!0,r=B();for(Y("[");!Z("]");)"for"===ma.value&&ma.type===Vn.Keyword?(s||K({},Zn.ComprehensionError),ee("for"),e=Mt({ignoreBody:!0}),e.of=e.type===Qn.ForOfStatement,e.type=Qn.ComprehensionBlock,e.left.kind&&K({},Zn.ComprehensionError),n.push(e)):"if"===ma.value&&ma.type===Vn.Keyword?(s||K({},Zn.ComprehensionError),Q("if"),Y("("),a=qe(),Y(")")):","===ma.value&&ma.type===Vn.Punctuator?(s=!1,U(),t.push(null)):(e=Se(),t.push(e),e&&e.type===Qn.SpreadElement?Z("]")||K({},Zn.ElementAfterSpreadElement):Z("]")||ee("for")||ee("if")||(Y(","),s=!1));return Y("]"),a&&!n.length&&K({},Zn.ComprehensionRequiresBlock),n.length?(1!==t.length&&K({},Zn.ComprehensionError),z(r,la.createComprehensionExpression(a,n,t[0]))):z(r,la.createArrayExpression(t))}function le(e){var t,n,a,s,r,i,o=B();return t=ra,n=pa.yieldAllowed,pa.yieldAllowed=e.generator,a=pa.awaitAllowed,pa.awaitAllowed=e.async,s=e.params||[],r=e.defaults||[],i=Bt(),e.name&&ra&&p(s[0].name)&&V(e.name,Zn.StrictParamName),ra=t,pa.yieldAllowed=n,pa.awaitAllowed=a,z(o,la.createFunctionExpression(null,s,r,i,e.rest||null,e.generator,i.type!==Qn.BlockStatement,e.async,e.returnType,e.typeParameters))}function me(e){var t,n,a;return t=ra,ra=!0,n=Jt(),n.stricted&&V(n.stricted,n.message),a=le({params:n.params,defaults:n.defaults,rest:n.rest,generator:e.generator,async:e.async,returnType:n.returnType,typeParameters:e.typeParameters}),ra=t,a}function pe(){var e,t,n=B(),a=U();return a.type===Vn.StringLiteral||a.type===Vn.NumericLiteral?(ra&&a.octal&&V(a,Zn.StrictOctalLiteral),z(n,la.createLiteral(a))):a.type===Vn.Punctuator&&"["===a.value?(n=B(),e=$e(),t=z(n,e),Y("]"),t):z(n,la.createIdentifier(a.value))}function de(){var e,t,n,a,s,r,i,o=B();return e=ma,s="["===e.value&&e.type===Vn.Punctuator,e.type===Vn.Identifier||s||se()?(n=pe(),Z(":")?(U(),z(o,la.createProperty("init",n,$e(),!1,!1,s))):Z("(")||Z("<")?(Z("<")&&(i=We()),z(o,la.createProperty("init",n,me({generator:!1,async:!1,typeParameters:i}),!0,!1,s))):"get"===e.value?(s="["===ma.value,t=pe(),Y("("),Y(")"),Z(":")&&(r=ct()),z(o,la.createProperty("get",t,le({generator:!1,async:!1,returnType:r}),!1,!1,s))):"set"===e.value?(s="["===ma.value,t=pe(),Y("("),e=ma,a=[lt()],Y(")"),Z(":")&&(r=ct()),z(o,la.createProperty("set",t,le({params:a,generator:!1,async:!1,name:e,returnType:r}),!1,!1,s))):"async"===e.value?(s="["===ma.value,t=pe(),Z("<")&&(i=We()),z(o,la.createProperty("init",t,me({generator:!1,async:!0,typeParameters:i}),!0,!1,s))):(s&&X(ma),z(o,la.createProperty("init",n,n,!1,!0,!1)))):e.type===Vn.EOF||e.type===Vn.Punctuator?(Z("*")||X(e),U(),s=ma.type===Vn.Punctuator&&"["===ma.value,n=pe(),Z("<")&&(i=We()),Z("(")||X(U()),z(o,la.createProperty("init",n,me({generator:!0,typeParameters:i}),!0,!1,s))):(t=pe(),Z(":")?(U(),z(o,la.createProperty("init",t,$e(),!1,!1,!1))):Z("(")||Z("<")?(Z("<")&&(i=We()),z(o,la.createProperty("init",t,me({generator:!1,typeParameters:i}),!0,!1,!1))):void X(U()))}function he(){var e=B();return Y("..."),z(e,la.createSpreadProperty($e()))}function fe(e){var t=String;return e.type===Qn.Identifier?e.name:t(e.value)}function ge(){var e,t,a,s,r=[],i=new n,o=B(),c=String;for(Y("{");!Z("}");)Z("...")?e=he():(e=de(),t=e.key.type===Qn.Identifier?e.key.name:c(e.key.value),a="init"===e.kind?Gn.Data:"get"===e.kind?Gn.Get:Gn.Set,i.has(t)?(s=i.get(t),s===Gn.Data?ra&&a===Gn.Data?V({},Zn.StrictDuplicateProperty):a!==Gn.Data&&V({},Zn.AccessorDataProperty):a===Gn.Data?V({},Zn.AccessorDataProperty):s&a&&V({},Zn.AccessorGetSet),i.set(t,s|a)):i.set(t,a)),r.push(e),Z("}")||Y(",");return Y("}"),z(o,la.createObjectExpression(r))}function ve(e){var t=B(),n=M(e);return ra&&n.octal&&K(n,Zn.StrictOctalLiteral),z(t,la.createTemplateElement({raw:n.value.raw,cooked:n.value.cooked},n.tail))}function be(){var e,t,n,a=B();for(e=ve({head:!0}),t=[e],n=[];!e.tail;)n.push(qe()),e=ve({head:!1}),t.push(e);return z(a,la.createTemplateLiteral(t,n))}function ye(){var e,t,n;return Y("("),++pa.parenthesizedCount,t=B(),e=qe(),Z(":")&&(n=ct(),e=z(t,la.createTypeCast(e,n))),Y(")"),e}function Ee(){var e;return se()&&(e=q(),e.type===Vn.Keyword&&"function"===e.value)?!0:!1}function Re(){var e,t,n,a;if(t=ma.type,t===Vn.Identifier)return e=B(),z(e,la.createIdentifier(U().value));if(t===Vn.StringLiteral||t===Vn.NumericLiteral)return ra&&ma.octal&&V(ma,Zn.StrictOctalLiteral),e=B(),z(e,la.createLiteral(U()));if(t===Vn.Keyword){if(ee("this"))return e=B(),U(),z(e,la.createThisExpression());if(ee("function"))return Vt();if(ee("class"))return an();if(ee("super"))return e=B(),U(),z(e,la.createIdentifier("super"))}return t===Vn.BooleanLiteral?(e=B(),n=U(),n.value="true"===n.value,z(e,la.createLiteral(n))):t===Vn.NullLiteral?(e=B(),n=U(),n.value=null,z(e,la.createLiteral(n))):Z("[")?ue():Z("{")?ge():Z("(")?ye():Z("/")||Z("/=")?(e=B(),a=la.createLiteral(O()),$(),z(e,a)):t===Vn.Template?be():Z("<")?In():void X(U())}function Ce(){var e,t=[];if(Y("("),!Z(")"))for(;ua>ia&&(e=Se(),t.push(e),!Z(")"));)e.type===Qn.SpreadElement&&K({},Zn.ElementAfterSpreadElement),Y(",");return Y(")"),t}function Se(){if(Z("...")){var e=B();return U(),z(e,la.createSpreadElement($e()))}return $e()}function _e(){var e=B(),t=U();return A(t)||X(t),z(e,la.createIdentifier(t.value))}function Ne(){return Y("."),_e()}function we(){var e;return Y("["),e=qe(),Y("]"),e}function xe(){var e,t,n=B();return Q("new"),e=De(),t=Z("(")?Ce():[],z(n,la.createNewExpression(e,t))}function ke(){var e,t,n=B();for(e=ee("new")?xe():Re();Z(".")||Z("[")||Z("(")||ma.type===Vn.Template;)Z("(")?(t=Ce(),e=z(n,la.createCallExpression(e,t))):e=Z("[")?z(n,la.createMemberExpression("[",e,we())):Z(".")?z(n,la.createMemberExpression(".",e,Ne())):z(n,la.createTaggedTemplateExpression(e,be()));return e}function De(){var e,t=B();for(e=ee("new")?xe():Re();Z(".")||Z("[")||ma.type===Vn.Template;)e=Z("[")?z(t,la.createMemberExpression("[",e,we())):Z(".")?z(t,la.createMemberExpression(".",e,Ne())):z(t,la.createTaggedTemplateExpression(e,be()));return e}function Me(){var e,t=B(),n=ke();return ma.type!==Vn.Punctuator?n:(!Z("++")&&!Z("--")||J()||(ra&&n.type===Qn.Identifier&&p(n.name)&&V({},Zn.StrictLHSPostfix),oe(n)||K({},Zn.InvalidLHSInAssignment),e=U(),n=z(t,la.createPostfixExpression(e.value,n))),n)}function Ie(){var e,t,n;return ma.type!==Vn.Punctuator&&ma.type!==Vn.Keyword?Me():Z("++")||Z("--")?(e=B(),t=U(),n=Ie(),ra&&n.type===Qn.Identifier&&p(n.name)&&V({},Zn.StrictLHSPrefix),oe(n)||K({},Zn.InvalidLHSInAssignment),z(e,la.createUnaryExpression(t.value,n))):Z("+")||Z("-")||Z("~")||Z("!")?(e=B(),t=U(),n=Ie(),z(e,la.createUnaryExpression(t.value,n))):ee("delete")||ee("void")||ee("typeof")?(e=B(),t=U(),n=Ie(),n=z(e,la.createUnaryExpression(t.value,n)),ra&&"delete"===n.operator&&n.argument.type===Qn.Identifier&&V({},Zn.StrictDelete),n):Me()}function Te(e,t){var n=0;if(e.type!==Vn.Punctuator&&e.type!==Vn.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function Pe(){var e,t,n,a,s,r,i,o,c,u,l;if(a=pa.allowIn,pa.allowIn=!0,u=B(),o=Ie(),t=ma,n=Te(t,a),0===n)return o;for(t.prec=n,U(),l=[u,B()],r=Ie(),s=[o,t,r];(n=Te(ma,a))>0;){for(;s.length>2&&n<=s[s.length-2].prec;)r=s.pop(),i=s.pop().value,o=s.pop(),e=la.createBinaryExpression(i,o,r),l.pop(),u=l.pop(),z(u,e),s.push(e),l.push(u);t=U(),t.prec=n,s.push(t),l.push(B()),e=Ie(),s.push(e)}for(pa.allowIn=a,c=s.length-1,e=s[c],l.pop();c>1;)e=la.createBinaryExpression(s[c-1].value,s[c-2],e),c-=2,u=l.pop(),z(u,e);return e}function Oe(){var e,t,n,a,s=B();return e=Pe(),Z("?")&&(U(),t=pa.allowIn,pa.allowIn=!0,n=$e(),pa.allowIn=t,Y(":"),a=$e(),e=z(s,la.createConditionalExpression(e,n,a))),e}function Ae(e){var t,n,a,s;if(e.type===Qn.ObjectExpression)for(e.type=Qn.ObjectPattern,t=0,n=e.properties.length;n>t;t+=1)a=e.properties[t],a.type===Qn.SpreadProperty?(n-1>t&&K({},Zn.PropertyAfterSpreadProperty),Ae(a.argument)):("init"!==a.kind&&K({},Zn.InvalidLHSInAssignment),Ae(a.value));else if(e.type===Qn.ArrayExpression)for(e.type=Qn.ArrayPattern,t=0,n=e.elements.length;n>t;t+=1)s=e.elements[t],s&&Ae(s);else e.type===Qn.Identifier?p(e.name)&&K({},Zn.InvalidLHSInAssignment):e.type===Qn.SpreadElement?(Ae(e.argument),e.argument.type===Qn.ObjectPattern&&K({},Zn.ObjectPatternAsSpread)):e.type!==Qn.MemberExpression&&e.type!==Qn.CallExpression&&e.type!==Qn.NewExpression&&K({},Zn.InvalidLHSInAssignment)}function Fe(e,t){var n,a,s,r;if(t.type===Qn.ObjectExpression)for(t.type=Qn.ObjectPattern,n=0,a=t.properties.length;a>n;n+=1)s=t.properties[n],s.type===Qn.SpreadProperty?(a-1>n&&K({},Zn.PropertyAfterSpreadProperty),Fe(e,s.argument)):("init"!==s.kind&&K({},Zn.InvalidLHSInFormalsList),Fe(e,s.value));else if(t.type===Qn.ArrayExpression)for(t.type=Qn.ArrayPattern,n=0,a=t.elements.length;a>n;n+=1)r=t.elements[n],r&&Fe(e,r);else t.type===Qn.Identifier?Ht(e,t,t.name):t.type===Qn.SpreadElement?(t.argument.type!==Qn.Identifier&&K({},Zn.InvalidLHSInFormalsList),Ht(e,t.argument,t.argument.name)):K({},Zn.InvalidLHSInFormalsList)}function Le(e){var a,s,r,i,o,c,u,l;for(i=[],o=[],c=0,l=null,u={paramSet:new n},a=0,s=e.length;s>a;a+=1)if(r=e[a],r.type===Qn.Identifier)i.push(r),o.push(null),Ht(u,r,r.name);else if(r.type===Qn.ObjectExpression||r.type===Qn.ArrayExpression)Fe(u,r),i.push(r),o.push(null);else if(r.type===Qn.SpreadElement)t(a===s-1,"It is guaranteed that SpreadElement is last element by parseExpression"),r.argument.type!==Qn.Identifier&&K({},Zn.InvalidLHSInFormalsList),Fe(u,r.argument),l=r.argument;else{if(r.type!==Qn.AssignmentExpression)return null;i.push(r.left),o.push(r.right),++c,Ht(u,r.left,r.left.name)}return u.message===Zn.StrictParamDupe&&K(ra?u.stricted:u.firstRestricted,u.message),0===c&&(o=[]),{params:i,defaults:o,rest:l,stricted:u.stricted,firstRestricted:u.firstRestricted,message:u.message}}function Ue(e,t){var n,a,s,r;return Y("=>"),n=ra,a=pa.yieldAllowed,pa.yieldAllowed=!1,s=pa.awaitAllowed,pa.awaitAllowed=!!e.async,r=Bt(),ra&&e.firstRestricted&&K(e.firstRestricted,e.message),ra&&e.stricted&&V(e.stricted,e.message),ra=n,pa.yieldAllowed=a,pa.awaitAllowed=s,z(t,la.createArrowFunctionExpression(e.params,e.defaults,r,e.rest,r.type!==Qn.BlockStatement,!!e.async))}function $e(){var e,t,n,a,s,r=!1,i=ma,o=!1;if(ae())return Xt();if(re())return Yt();if(s=pa.parenthesizedCount,e=B(),Ee())return Vt();if(se()&&(o=!0,U()),Z("(")){if(n=q(),n.type===Vn.Punctuator&&")"===n.value||"..."===n.value)return a=Jt(),Z("=>")||X(U()),a.async=o,Ue(a,e);r=!0}return n=ma,o&&!Z("(")&&n.type!==Vn.Identifier&&(o=!1,j(i)),t=Oe(),Z("=>")&&(pa.parenthesizedCount===s||pa.parenthesizedCount===s+1)&&(t.type===Qn.Identifier?a=Le([t]):t.type===Qn.AssignmentExpression||t.type===Qn.ArrayExpression||t.type===Qn.ObjectExpression?(r||X(U()),a=Le([t])):t.type===Qn.SequenceExpression&&(a=Le(t.expressions)),a)?(a.async=o,Ue(a,e)):(o&&(o=!1,j(i),t=Oe()),ne()&&(ra&&t.type===Qn.Identifier&&p(t.name)&&V(n,Zn.StrictLHSAssignment),!Z("=")||t.type!==Qn.ObjectExpression&&t.type!==Qn.ArrayExpression?oe(t)||K({},Zn.InvalidLHSInAssignment):Ae(t),t=z(e,la.createAssignmentExpression(U().value,t,$e()))),t)}function qe(){var e,t,n,a,s;if(e=B(),t=$e(),n=[t],Z(",")){for(;ua>ia&&Z(",");)if(U(),t=Se(),n.push(t),t.type===Qn.SpreadElement){s=!0,Z(")")||K({},Zn.ElementAfterSpreadElement);break}a=z(e,la.createSequenceExpression(n))}return s&&"=>"!==q().value&&K({},Zn.IllegalSpread),a||t}function je(){for(var e,t=[];ua>ia&&!Z("}")&&(e=rn(),"undefined"!=typeof e);)t.push(e);return t}function Be(){var e,t=B();return Y("{"),e=je(),Y("}"),z(t,la.createBlockStatement(e))}function We(){var e=B(),t=[];for(Y("<");!Z(">");)t.push(lt()),Z(">")||Y(",");return Y(">"),z(e,la.createTypeParameterDeclaration(t))}function He(){var e=B(),t=pa.inType,n=[];for(pa.inType=!0,Y("<");!Z(">");)n.push(ot()),Z(">")||Y(",");return Y(">"),pa.inType=t,z(e,la.createTypeParameterInstantiation(n))}function ze(e,t){var n,a,s;return Y("["),n=pe(),Y(":"),a=ot(),Y("]"),Y(":"),s=ot(),z(e,la.createObjectTypeIndexer(n,a,s,t))}function Je(e){var t,n=[],a=null,s=null;for(Z("<")&&(s=We()),Y("(");ma.type===Vn.Identifier;)n.push(et()),Z(")")||Y(",");return Z("...")&&(U(),a=et()),Y(")"),Y(":"),t=ot(),z(e,la.createFunctionTypeAnnotation(n,t,a,s))}function Ke(e,t,n){var a,s=!1;return a=Je(e),z(e,la.createObjectTypeProperty(n,a,s,t))}function Ve(e,t){var n=B();return z(e,la.createObjectTypeCallProperty(Je(n),t))}function Xe(e){var t,n,a,s,r,i,o=[],c=[],u=!1,l=[];for(Y("{");!Z("}");)t=B(),i=ra?ee("static"):te("static"),e&&i&&(s=U(),r=!0),Z("[")?c.push(ze(t,r)):Z("(")||Z("<")?o.push(Ve(t,e)):(r&&Z(":")?(n=z(t,la.createIdentifier(s)),V(s,Zn.StrictReservedWord)):n=pe(),Z("<")||Z("(")?l.push(Ke(t,r,n)):(Z("?")&&(U(),u=!0),Y(":"),a=ot(),l.push(z(t,la.createObjectTypeProperty(n,a,u,r))))),Z(";")?U():Z("}")||X(ma);return Y("}"),la.createObjectTypeAnnotation(l,c,o)}function Ye(){var e,t=B(),n=null;for(e=ut();Z(".");)Y("."),e=z(t,la.createQualifiedTypeIdentifier(e,ut()));return Z("<")&&(n=He()),z(t,la.createGenericTypeAnnotation(e,n))}function Qe(){var e=B();return Q("void"),z(e,la.createVoidTypeAnnotation())}function Ge(){var e,t=B();return Q("typeof"),e=nt(),z(t,la.createTypeofTypeAnnotation(e))}function Ze(){var e=B(),t=[];for(Y("[");ua>ia&&!Z("]")&&(t.push(ot()),!Z("]"));)Y(",");return Y("]"),z(e,la.createTupleTypeAnnotation(t))}function et(){var e,t,n=B(),a=!1;return e=ut(),Z("?")&&(U(),a=!0),Y(":"),t=ot(),z(n,la.createFunctionTypeParam(e,t,a))}function tt(){for(var e={params:[],rest:null};ma.type===Vn.Identifier;)e.params.push(et()),Z(")")||Y(",");return Z("...")&&(U(),e.rest=et()),e}function nt(){var e,t,n,a,s=null,r=null,i=B(),o=null,c=!1;switch(ma.type){case Vn.Identifier:switch(ma.value){case"any":return U(),z(i,la.createAnyTypeAnnotation());case"bool":case"boolean":return U(),z(i,la.createBooleanTypeAnnotation());case"number":return U(),z(i,la.createNumberTypeAnnotation());case"string":return U(),z(i,la.createStringTypeAnnotation())}return z(i,Ye());case Vn.Punctuator:switch(ma.value){case"{":return z(i,Xe());case"[":return Ze();case"<":return t=We(),Y("("),e=tt(),s=e.params,o=e.rest,Y(")"),Y("=>"),r=ot(),z(i,la.createFunctionTypeAnnotation(s,r,o,t));case"(":return U(),Z(")")||Z("...")||(ma.type===Vn.Identifier?(n=q(),c="?"!==n.value&&":"!==n.value):c=!0),c?(a=ot(),Y(")"),Z("=>")&&K({},Zn.ConfusedAboutFunctionType),a):(e=tt(),s=e.params,o=e.rest,Y(")"),Y("=>"),r=ot(),z(i,la.createFunctionTypeAnnotation(s,r,o,null)))}break;case Vn.Keyword:switch(ma.value){case"void":return z(i,Qe());case"typeof":return z(i,Ge())}break;case Vn.StringLiteral:return n=U(),n.octal&&K(n,Zn.StrictOctalLiteral),z(i,la.createStringLiteralTypeAnnotation(n))}X(ma)}function at(){var e=B(),t=nt();return Z("[")?(Y("["),Y("]"),z(e,la.createArrayTypeAnnotation(t))):t}function st(){var e=B();return Z("?")?(U(),z(e,la.createNullableTypeAnnotation(st()))):at()}function rt(){var e,t,n=B();for(e=st(),t=[e];Z("&");)U(),t.push(st());return 1===t.length?e:z(n,la.createIntersectionTypeAnnotation(t))}function it(){var e,t,n=B();for(e=rt(),t=[e];Z("|");)U(),t.push(rt());return 1===t.length?e:z(n,la.createUnionTypeAnnotation(t))}function ot(){var e,t=pa.inType;return pa.inType=!0,e=it(),pa.inType=t,e}function ct(){var e,t=B();return Y(":"),e=ot(),z(t,la.createTypeAnnotation(e))}function ut(){var e=B(),t=U();return t.type!==Vn.Identifier&&X(t),z(e,la.createIdentifier(t.value))}function lt(e,t){var n=B(),a=ut(),s=!1;return t&&Z("?")&&(Y("?"),s=!0),(e||Z(":"))&&(a.typeAnnotation=ct(),a=z(n,a)),s&&(a.optional=!0,a=z(n,a)),a}function mt(e){var t,n=B(),a=null,s=B();return Z("{")?(t=ge(),Ae(t),Z(":")&&(t.typeAnnotation=ct(),z(s,t))):Z("[")?(t=ue(),Ae(t),Z(":")&&(t.typeAnnotation=ct(),z(s,t))):(t=pa.allowKeyword?_e():lt(),ra&&p(t.name)&&V({},Zn.StrictVarName)),"const"===e?(Z("=")||K({},Zn.NoUninitializedConst),Y("="),a=$e()):Z("=")&&(U(),a=$e()),z(n,la.createVariableDeclarator(t,a))}function pt(e){var t=[];do{if(t.push(mt(e)),!Z(","))break;U()}while(ua>ia);return t}function dt(){var e,t=B();return Q("var"),e=pt(),ie(),z(t,la.createVariableDeclaration(e,"var"))}function ht(e){var t,n=B();return Q(e),t=pt(e),ie(),z(n,la.createVariableDeclaration(t,e))}function ft(){var e,t=B();return ma.type!==Vn.StringLiteral&&K({},Zn.InvalidModuleSpecifier),e=la.createModuleSpecifier(ma),U(),z(t,e)}function gt(){var e=B();return Y("*"),z(e,la.createExportBatchSpecifier())}function vt(){var e,t=null,n=B();return ee("default")?(U(),e=z(n,la.createIdentifier("default"))):e=ut(),te("as")&&(U(),t=_e()),z(n,la.createExportSpecifier(e,t))}function bt(){var e,t,n,a=null,s=null,r=[],i=B();if(Q("export"),ee("default")){if(U(),ee("function")||ee("class")){if(e=q(),A(e))return t=rn(),z(i,la.createExportDeclaration(!0,t,[t.id],null));switch(ma.value){case"class":return z(i,la.createExportDeclaration(!0,an(),[],null));case"function":return z(i,la.createExportDeclaration(!0,Vt(),[],null))}}return te("from")&&K({},Zn.UnexpectedToken,ma.value),a=Z("{")?ge():Z("[")?ue():$e(),ie(),z(i,la.createExportDeclaration(!0,a,[],null))}if(ma.type===Vn.Keyword||te("type"))switch(ma.value){case"type":case"let":case"const":case"var":case"class":case"function":return z(i,la.createExportDeclaration(!1,rn(),r,null))}if(Z("*"))return r.push(gt()),te("from")||K({},ma.value?Zn.UnexpectedToken:Zn.MissingFromClause,ma.value),U(),s=ft(),ie(),z(i,la.createExportDeclaration(!1,null,r,s));if(Y("{"),!Z("}"))do n=n||ee("default"),r.push(vt());while(Z(",")&&U());return Y("}"),te("from")?(U(),s=ft(),ie()):n?K({},ma.value?Zn.UnexpectedToken:Zn.MissingFromClause,ma.value):ie(),z(i,la.createExportDeclaration(!1,a,r,s))}function yt(){var e,t=null,n=B();return e=_e(),te("as")&&(U(),t=ut()),z(n,la.createImportSpecifier(e,t))}function Et(){var e=[];if(Y("{"),!Z("}"))do e.push(yt());while(Z(",")&&U());return Y("}"),e}function Rt(){var e,t=B();return e=_e(),z(t,la.createImportDefaultSpecifier(e))}function Ct(){var e,t=B();return Y("*"),te("as")||K({},Zn.NoAsAfterImportNamespace),U(),e=_e(),z(t,la.createImportNamespaceSpecifier(e))}function St(){var e,t,n,a=B(),s=!1;return Q("import"),te("type")&&(n=q(),(n.type===Vn.Identifier&&"from"!==n.value||n.type===Vn.Punctuator&&("{"===n.value||"*"===n.value))&&(s=!0,U())),e=[],ma.type===Vn.StringLiteral?(t=ft(),ie(),z(a,la.createImportDeclaration(e,t,s))):(!ee("default")&&A(ma)&&(e.push(Rt()),Z(",")&&U()),Z("*")?e.push(Ct()):Z("{")&&(e=e.concat(Et())),te("from")||K({},ma.value?Zn.UnexpectedToken:Zn.MissingFromClause,ma.value),U(),t=ft(),ie(),z(a,la.createImportDeclaration(e,t,s)))}function _t(){var e=B();return Y(";"),z(e,la.createEmptyStatement())}function Nt(){var e=B(),t=qe();return ie(),z(e,la.createExpressionStatement(t))}function wt(){var e,t,n,a=B();return Q("if"),Y("("),e=qe(),Y(")"),t=jt(),ee("else")?(U(),n=jt()):n=null,z(a,la.createIfStatement(e,t,n))}function xt(){var e,t,n,a=B();return Q("do"),n=pa.inIteration,pa.inIteration=!0,e=jt(),pa.inIteration=n,Q("while"),Y("("),t=qe(),Y(")"),Z(";")&&U(),z(a,la.createDoWhileStatement(e,t))}function kt(){var e,t,n,a=B();return Q("while"),Y("("),e=qe(),Y(")"),n=pa.inIteration,pa.inIteration=!0,t=jt(),pa.inIteration=n,z(a,la.createWhileStatement(e,t))}function Dt(){var e=B(),t=U(),n=pt();return z(e,la.createVariableDeclaration(n,t.value))}function Mt(e){
var t,n,a,s,r,i,o,c,u=B();return t=n=a=null,Q("for"),te("each")&&K({},Zn.EachNotAllowed),Y("("),Z(";")?U():(ee("var")||ee("let")||ee("const")?(pa.allowIn=!1,t=Dt(),pa.allowIn=!0,1===t.declarations.length&&(ee("in")||te("of"))&&(o=ma,("in"!==o.value&&"var"===t.kind||!t.declarations[0].init)&&(U(),s=t,r=qe(),t=null))):(pa.allowIn=!1,t=qe(),pa.allowIn=!0,te("of")?(o=U(),s=t,r=qe(),t=null):ee("in")&&(ce(t)||K({},Zn.InvalidLHSInForIn),o=U(),s=t,r=qe(),t=null)),"undefined"==typeof s&&Y(";")),"undefined"==typeof s&&(Z(";")||(n=qe()),Y(";"),Z(")")||(a=qe())),Y(")"),c=pa.inIteration,pa.inIteration=!0,void 0!==e&&e.ignoreBody||(i=jt()),pa.inIteration=c,"undefined"==typeof s?z(u,la.createForStatement(t,n,a,i)):"in"===o.value?z(u,la.createForInStatement(s,r,i)):z(u,la.createForOfStatement(s,r,i))}function It(){var e=null,t=B();return Q("continue"),59===sa.charCodeAt(ia)?(U(),pa.inIteration||K({},Zn.IllegalContinue),z(t,la.createContinueStatement(null))):J()?(pa.inIteration||K({},Zn.IllegalContinue),z(t,la.createContinueStatement(null))):(ma.type===Vn.Identifier&&(e=ut(),pa.labelSet.has(e.name)||K({},Zn.UnknownLabel,e.name)),ie(),null!==e||pa.inIteration||K({},Zn.IllegalContinue),z(t,la.createContinueStatement(e)))}function Tt(){var e=null,t=B();return Q("break"),59===sa.charCodeAt(ia)?(U(),pa.inIteration||pa.inSwitch||K({},Zn.IllegalBreak),z(t,la.createBreakStatement(null))):J()?(pa.inIteration||pa.inSwitch||K({},Zn.IllegalBreak),z(t,la.createBreakStatement(null))):(ma.type===Vn.Identifier&&(e=ut(),pa.labelSet.has(e.name)||K({},Zn.UnknownLabel,e.name)),ie(),null!==e||pa.inIteration||pa.inSwitch||K({},Zn.IllegalBreak),z(t,la.createBreakStatement(e)))}function Pt(){var e=null,t=B();return Q("return"),pa.inFunctionBody||V({},Zn.IllegalReturn),32===sa.charCodeAt(ia)&&c(sa.charCodeAt(ia+1))?(e=qe(),ie(),z(t,la.createReturnStatement(e))):J()?z(t,la.createReturnStatement(null)):(Z(";")||Z("}")||ma.type===Vn.EOF||(e=qe()),ie(),z(t,la.createReturnStatement(e)))}function Ot(){var e,t,n=B();return ra&&V({},Zn.StrictModeWith),Q("with"),Y("("),e=qe(),Y(")"),t=jt(),z(n,la.createWithStatement(e,t))}function At(){var e,t,n=[],a=B();for(ee("default")?(U(),e=null):(Q("case"),e=qe()),Y(":");ua>ia&&!(Z("}")||ee("default")||ee("case"))&&(t=rn(),"undefined"!=typeof t);)n.push(t);return z(a,la.createSwitchCase(e,n))}function Ft(){var e,t,n,a,s,r=B();if(Q("switch"),Y("("),e=qe(),Y(")"),Y("{"),t=[],Z("}"))return U(),z(r,la.createSwitchStatement(e,t));for(a=pa.inSwitch,pa.inSwitch=!0,s=!1;ua>ia&&!Z("}");)n=At(),null===n.test&&(s&&K({},Zn.MultipleDefaultsInSwitch),s=!0),t.push(n);return pa.inSwitch=a,Y("}"),z(r,la.createSwitchStatement(e,t))}function Lt(){var e,t=B();return Q("throw"),J()&&K({},Zn.NewlineAfterThrow),e=qe(),ie(),z(t,la.createThrowStatement(e))}function Ut(){var e,t,n=B();return Q("catch"),Y("("),Z(")")&&X(ma),e=qe(),ra&&e.type===Qn.Identifier&&p(e.name)&&V({},Zn.StrictCatchVariable),Y(")"),t=Be(),z(n,la.createCatchClause(e,t))}function $t(){var e,t=[],n=null,a=B();return Q("try"),e=Be(),ee("catch")&&t.push(Ut()),ee("finally")&&(U(),n=Be()),0!==t.length||n||K({},Zn.NoCatchOrFinally),z(a,la.createTryStatement(e,[],t,n))}function qt(){var e=B();return Q("debugger"),ie(),z(e,la.createDebuggerStatement())}function jt(){var e,t,n,a=ma.type;if(a===Vn.EOF&&X(ma),a===Vn.Punctuator)switch(ma.value){case";":return _t();case"{":return Be();case"(":return Nt()}if(a===Vn.Keyword)switch(ma.value){case"break":return Tt();case"continue":return It();case"debugger":return qt();case"do":return xt();case"for":return Mt();case"function":return Kt();case"class":return sn();case"if":return wt();case"return":return Pt();case"switch":return Ft();case"throw":return Lt();case"try":return $t();case"var":return dt();case"while":return kt();case"with":return Ot()}return Ee()?Kt():(e=B(),t=qe(),t.type===Qn.Identifier&&Z(":")?(U(),pa.labelSet.has(t.name)&&K({},Zn.Redeclaration,"Label",t.name),pa.labelSet.set(t.name,!0),n=jt(),pa.labelSet["delete"](t.name),z(e,la.createLabeledStatement(t,n))):(ie(),z(e,la.createExpressionStatement(t))))}function Bt(){return Z("{")?Wt():$e()}function Wt(){var e,t,a,s,r,i,o,c,u,l=[],m=B();for(Y("{");ua>ia&&ma.type===Vn.StringLiteral&&(t=ma,e=rn(),l.push(e),e.expression.type===Qn.Literal);)a=sa.slice(t.range[0]+1,t.range[1]-1),"use strict"===a?(ra=!0,s&&V(s,Zn.StrictOctalLiteral)):!s&&t.octal&&(s=t);for(r=pa.labelSet,i=pa.inIteration,o=pa.inSwitch,c=pa.inFunctionBody,u=pa.parenthesizedCount,pa.labelSet=new n,pa.inIteration=!1,pa.inSwitch=!1,pa.inFunctionBody=!0,pa.parenthesizedCount=0;ua>ia&&!Z("}")&&(e=rn(),"undefined"!=typeof e);)l.push(e);return Y("}"),pa.labelSet=r,pa.inIteration=i,pa.inSwitch=o,pa.inFunctionBody=c,pa.parenthesizedCount=u,z(m,la.createBlockStatement(l))}function Ht(e,t,n){ra?(p(n)&&(e.stricted=t,e.message=Zn.StrictParamName),e.paramSet.has(n)&&(e.stricted=t,e.message=Zn.StrictParamDupe)):e.firstRestricted||(p(n)?(e.firstRestricted=t,e.message=Zn.StrictParamName):m(n)?(e.firstRestricted=t,e.message=Zn.StrictReservedWord):e.paramSet.has(n)&&(e.firstRestricted=t,e.message=Zn.StrictParamDupe)),e.paramSet.set(n,!0)}function zt(e){var t,n,a,s,r;return n=ma,"..."===n.value&&(n=U(),a=!0),Z("[")?(t=B(),s=ue(),Fe(e,s),Z(":")&&(s.typeAnnotation=ct(),z(t,s))):Z("{")?(t=B(),a&&K({},Zn.ObjectPatternAsRestParameter),s=ge(),Fe(e,s),Z(":")&&(s.typeAnnotation=ct(),z(t,s))):(s=a?lt(!1,!1):lt(!1,!0),Ht(e,n,n.value)),Z("=")&&(a&&V(ma,Zn.DefaultRestParameter),U(),r=$e(),++e.defaultCount),a?(Z(")")||K({},Zn.ParameterAfterRestParameter),e.rest=s,!1):(e.params.push(s),e.defaults.push(r),!Z(")"))}function Jt(e){var t,a=B();if(t={params:[],defaultCount:0,defaults:[],rest:null,firstRestricted:e},Y("("),!Z(")"))for(t.paramSet=new n;ua>ia&&zt(t);)Y(",");return Y(")"),0===t.defaultCount&&(t.defaults=[]),Z(":")&&(t.returnType=ct()),z(a,t)}function Kt(){var e,t,n,a,s,r,i,o,c,u,l,d,h=B();return o=!1,se()&&(U(),o=!0),Q("function"),i=!1,Z("*")&&(U(),i=!0),n=ma,e=ut(),Z("<")&&(d=We()),ra?p(n.value)&&V(n,Zn.StrictFunctionName):p(n.value)?(s=n,r=Zn.StrictFunctionName):m(n.value)&&(s=n,r=Zn.StrictReservedWord),a=Jt(s),s=a.firstRestricted,a.message&&(r=a.message),c=ra,u=pa.yieldAllowed,pa.yieldAllowed=i,l=pa.awaitAllowed,pa.awaitAllowed=o,t=Wt(),ra&&s&&K(s,r),ra&&a.stricted&&V(a.stricted,r),ra=c,pa.yieldAllowed=u,pa.awaitAllowed=l,z(h,la.createFunctionDeclaration(e,a.params,a.defaults,t,a.rest,i,!1,o,a.returnType,d))}function Vt(){var e,t,n,a,s,r,i,o,c,u,l,d=null,h=B();return i=!1,se()&&(U(),i=!0),Q("function"),r=!1,Z("*")&&(U(),r=!0),Z("(")||(Z("<")||(e=ma,d=ut(),ra?p(e.value)&&V(e,Zn.StrictFunctionName):p(e.value)?(t=e,n=Zn.StrictFunctionName):m(e.value)&&(t=e,n=Zn.StrictReservedWord)),Z("<")&&(l=We())),a=Jt(t),t=a.firstRestricted,a.message&&(n=a.message),o=ra,c=pa.yieldAllowed,pa.yieldAllowed=r,u=pa.awaitAllowed,pa.awaitAllowed=i,s=Wt(),ra&&t&&K(t,n),ra&&a.stricted&&V(a.stricted,n),ra=o,pa.yieldAllowed=c,pa.awaitAllowed=u,z(h,la.createFunctionExpression(d,a.params,a.defaults,s,a.rest,r,!1,i,a.returnType,l))}function Xt(){var e,t,n=B();return Q("yield",!ra),e=!1,Z("*")&&(U(),e=!0),t=$e(),z(n,la.createYieldExpression(t,e))}function Yt(){var e,t=B();return G("await"),e=$e(),z(t,la.createAwaitExpression(e))}function Qt(e){return"get"===e.kind||"set"===e.kind||e.value.generator}function Gt(e,t,n,a){var s,r,i,o,c,u,l;return i=t?aa["static"]:aa.prototype,n?la.createMethodDefinition(i,"",e,me({generator:!0}),a):(u="Identifier"===e.type&&e.name,"get"!==u||Z("(")?"set"!==u||Z("(")?(Z("<")&&(c=We()),o="async"===u&&!Z("("),o&&(e=pe()),la.createMethodDefinition(i,"",e,me({generator:!1,async:o,typeParameters:c}),a)):(e=pe(),Y("("),s=ma,r=[lt()],Y(")"),Z(":")&&(l=ct()),la.createMethodDefinition(i,"set",e,le({params:r,generator:!1,name:s,returnType:l}),a)):(e=pe(),Y("("),Y(")"),Z(":")&&(l=ct()),la.createMethodDefinition(i,"get",e,le({generator:!1,returnType:l}),a)))}function Zt(e,t,n){var a;return a=ct(),Y(";"),la.createClassProperty(e,a,t,n)}function en(){var e,t,n=!1,a=!1,s=B(),r=!1;return Z(";")?void U():("static"===ma.value&&(U(),r=!0),Z("*")&&(U(),a=!0),t=ma,(te("get")||te("set"))&&(t=q()),t.type===Vn.Punctuator&&"["===t.value&&(n=!0),e=pe(),a||":"!==ma.value?z(s,Gt(e,r,a,n)):z(s,Zt(e,n,r)))}function tn(){var e,t,a,s=[],r={},i=B();for(r[aa["static"]]=new n,r[aa.prototype]=new n,Y("{");ua>ia&&!Z("}");)e=en(r),"undefined"!=typeof e&&(s.push(e),t=!e.computed&&fe(e.key),t!==!1&&(a=e["static"]?aa["static"]:aa.prototype,e.type===Qn.MethodDefinition&&("constructor"!==t||e["static"]||(Qt(e)&&K(e,Zn.IllegalClassConstructorProperty),r[aa.prototype].has("constructor")&&K(e.key,Zn.IllegalDuplicateClassProperty)),r[a].set(t,!0))));return Y("}"),z(i,la.createClassBody(s))}function nn(){var e,t,n,a=[];for(ra?Q("implements"):G("implements");ua>ia&&(t=B(),e=ut(),n=Z("<")?He():null,a.push(z(t,la.createClassImplements(e,n))),Z(","));)Y(",");return a}function an(){var e,t,n,a,s,r,i=null,o=B();return Q("class"),r=ra?ee("implements"):te("implements"),ee("extends")||r||Z("{")||(e=ut()),Z("<")&&(s=We()),ee("extends")&&(Q("extends"),n=pa.yieldAllowed,pa.yieldAllowed=!1,i=ke(),Z("<")&&(a=He()),pa.yieldAllowed=n),(ra?ee("implements"):te("implements"))&&(t=nn()),z(o,la.createClassExpression(e,i,tn(),s,a,t))}function sn(){var e,t,n,a,s,r=null,i=B();return Q("class"),e=ut(),Z("<")&&(s=We()),ee("extends")&&(Q("extends"),n=pa.yieldAllowed,pa.yieldAllowed=!1,r=ke(),Z("<")&&(a=He()),pa.yieldAllowed=n),(ra?ee("implements"):te("implements"))&&(t=nn()),z(i,la.createClassDeclaration(e,r,tn(),s,a,t))}function rn(){var e;if(ma.type===Vn.Keyword)switch(ma.value){case"const":case"let":return ht(ma.value);case"function":return Kt();case"export":return V({},Zn.IllegalExportDeclaration),bt();case"import":return V({},Zn.IllegalImportDeclaration),St();case"interface":return q().type===Vn.Identifier?An():jt();default:return jt()}if(te("type")&&q().type===Vn.Identifier)return Tn();if(te("interface")&&q().type===Vn.Identifier)return An();if(te("declare"))if(e=q(),e.type===Vn.Keyword)switch(e.value){case"class":return Fn();case"function":return Ln();case"var":return Un()}else if(e.type===Vn.Identifier&&"module"===e.value)return $n();return ma.type!==Vn.EOF?jt():void 0}function on(){var e="module"===da.sourceType||"nonStrictModule"===da.sourceType;if(e&&ma.type===Vn.Keyword)switch(ma.value){case"export":return bt();case"import":return St()}return rn()}function cn(){for(var e,t,n,a,s=[];ua>ia&&(t=ma,t.type===Vn.StringLiteral)&&(e=on(),s.push(e),e.expression.type===Qn.Literal);)n=sa.slice(t.range[0]+1,t.range[1]-1),"use strict"===n?(ra=!0,a&&V(a,Zn.StrictOctalLiteral)):!a&&t.octal&&(a=t);for(;ua>ia&&(e=on(),"undefined"!=typeof e);)s.push(e);return s}function un(){var e,t=B();return ra="module"===da.sourceType,$(),e=cn(),z(t,la.createProgram(e))}function ln(e){return e.type===Qn.JSXIdentifier?e.name:e.type===Qn.JSXNamespacedName?e.namespace.name+":"+e.name.name:e.type===Qn.JSXMemberExpression?ln(e.object)+"."+ln(e.property):void X(e)}function mn(e){return 92!==e&&c(e)}function pn(e){return 92!==e&&(45===e||u(e))}function dn(){var e,t,n="";for(t=ia;ua>ia&&(e=sa.charCodeAt(ia),pn(e));)n+=sa[ia++];return{type:Vn.JSXIdentifier,value:n,lineNumber:oa,lineStart:ca,range:[t,ia]}}function hn(){var e,n,a="",s=ia,r=0;for(e=sa[ia],t("&"===e,"Entity must start with an ampersand"),ia++;ua>ia&&r++<10&&(e=sa[ia++],";"!==e);)a+=e;if(";"===e)if("#"===a[0]){if(n="x"===a[1]?+("0"+a.substr(1)):+a.substr(1).replace(ea.LeadingZeros,""),!isNaN(n))return String.fromCharCode(n)}else if(na[a])return na[a];return ia=s+1,"&"}function fn(e){var t,n,a="";for(n=ia;ua>ia&&(t=sa[ia],-1===e.indexOf(t));)"&"===t?a+=hn():(ia++,"\r"===t&&"\n"===sa[ia]&&(a+=t,t=sa[ia],ia++),o(t.charCodeAt(0))&&(++oa,ca=ia),a+=t);return{type:Vn.JSXText,value:a,lineNumber:oa,lineStart:ca,range:[n,ia]}}function gn(){var e,n,a;return n=sa[ia],t("'"===n||'"'===n,"String literal must starts with a quote"),a=ia,++ia,e=fn([n]),n!==sa[ia]&&K({},Zn.UnexpectedToken,"ILLEGAL"),++ia,e.range=[a,ia],e}function vn(){var e=sa.charCodeAt(ia);return 60!==e&&62!==e&&123!==e&&125!==e?fn(["<",">","{","}"]):S()}function bn(){var e,t=B();return ma.type!==Vn.JSXIdentifier&&X(ma),e=U(),z(t,la.createJSXIdentifier(e.value))}function yn(){var e,t,n=B();return e=bn(),Y(":"),t=bn(),z(n,la.createJSXNamespacedName(e,t))}function En(){for(var e=B(),t=bn();Z(".");)U(),t=z(e,la.createJSXMemberExpression(t,bn()));return t}function Rn(){return":"===q().value?yn():"."===q().value?En():bn()}function Cn(){return":"===q().value?yn():bn()}function Sn(){var e,t;return Z("{")?(e=Nn(),e.expression.type===Qn.JSXEmptyExpression&&K(e,"JSX attributes must only be assigned a non-empty expression")):Z("<")?e=In():ma.type===Vn.JSXText?(t=B(),e=z(t,la.createLiteral(U()))):K({},Zn.InvalidJSXAttributeValue),e}function _n(){for(var e=W();"}"!==sa.charAt(ia);)ia++;return z(e,la.createJSXEmptyExpression())}function Nn(){var e,t,n,a=B();return t=pa.inJSXChild,n=pa.inJSXTag,pa.inJSXChild=!1,pa.inJSXTag=!1,Y("{"),e=Z("}")?_n():qe(),pa.inJSXChild=t,pa.inJSXTag=n,Y("}"),z(a,la.createJSXExpressionContainer(e))}function wn(){var e,t,n,a=B();return t=pa.inJSXChild,n=pa.inJSXTag,pa.inJSXChild=!1,pa.inJSXTag=!1,Y("{"),Y("..."),e=$e(),pa.inJSXChild=t,pa.inJSXTag=n,Y("}"),z(a,la.createJSXSpreadAttribute(e))}function xn(){var e,t;return Z("{")?wn():(t=B(),e=Cn(),Z("=")?(U(),z(t,la.createJSXAttribute(e,Sn()))):z(t,la.createJSXAttribute(e)))}function kn(){var e,t;return Z("{")?e=Nn():ma.type===Vn.JSXText?(t=W(),e=z(t,la.createLiteral(U()))):Z("<")?e=In():X(ma),e}function Dn(){var e,t,n,a=B();return t=pa.inJSXChild,n=pa.inJSXTag,pa.inJSXChild=!1,pa.inJSXTag=!0,Y("<"),Y("/"),e=Rn(),pa.inJSXChild=t,pa.inJSXTag=n,Y(">"),z(a,la.createJSXClosingElement(e))}function Mn(){var e,t,n,a=[],s=!1,r=B();for(t=pa.inJSXChild,n=pa.inJSXTag,pa.inJSXChild=!1,pa.inJSXTag=!0,Y("<"),e=Rn();ua>ia&&"/"!==ma.value&&">"!==ma.value;)a.push(xn());return pa.inJSXTag=n,"/"===ma.value?(Y("/"),pa.inJSXChild=t,Y(">"),s=!0):(pa.inJSXChild=!0,Y(">")),z(r,la.createJSXOpeningElement(e,a,s))}function In(){var e,t,n,a=null,s=[],r=B();if(t=pa.inJSXChild,n=pa.inJSXTag,e=Mn(),!e.selfClosing){for(;ua>ia&&(pa.inJSXChild=!1,"<"!==ma.value||"/"!==q().value);)pa.inJSXChild=!0,s.push(kn());pa.inJSXChild=t,pa.inJSXTag=n,a=Dn(),ln(a.name)!==ln(e.name)&&K({},Zn.ExpectedJSXClosingTag,ln(e.name))}return!t&&Z("<")&&K(ma,Zn.AdjacentJSXElements),z(r,la.createJSXElement(e,a,s))}function Tn(){var e,t,n=B(),a=null;return G("type"),e=ut(),Z("<")&&(a=We()),Y("="),t=ot(),ie(),z(n,la.createTypeAlias(e,a,t))}function Pn(){var e,t=B(),n=null;return e=ut(),Z("<")&&(n=He()),z(t,la.createInterfaceExtends(e,n))}function On(e,t){var n,a,s,r=[],i=null;if(s=ut(),Z("<")&&(i=We()),ee("extends"))for(Q("extends");ua>ia&&(r.push(Pn()),Z(","));)Y(",");return a=B(),n=z(a,Xe(t)),z(e,la.createInterface(s,i,n,r))}function An(){var e=B();return ra?Q("interface"):G("interface"),On(e,!1)}function Fn(){var e,t=B();return G("declare"),Q("class"),e=On(t,!0),e.type=Qn.DeclareClass,e}function Ln(){var e,t,n,a,s,r,i,o,c=B(),u=null;return G("declare"),Q("function"),t=B(),e=ut(),o=B(),Z("<")&&(u=We()),Y("("),r=tt(),n=r.params,s=r.rest,Y(")"),Y(":"),a=ot(),i=z(o,la.createFunctionTypeAnnotation(n,a,s,u)),e.typeAnnotation=z(o,la.createTypeAnnotation(i)),z(t,e),ie(),z(c,la.createDeclareFunction(e))}function Un(){var e,t=B();return G("declare"),Q("var"),e=lt(),ie(),z(t,la.createDeclareVariable(e))}function $n(){var e,t,n,a,s=[],r=B();for(G("declare"),G("module"),ma.type===Vn.StringLiteral?(ra&&ma.octal&&V(ma,Zn.StrictOctalLiteral),n=B(),t=z(n,la.createLiteral(U()))):t=ut(),e=B(),Y("{");ua>ia&&!Z("}");)switch(a=q(),a.value){case"class":s.push(Fn());break;case"function":s.push(Ln());break;case"var":s.push(Un());break;default:X(ma)}return Y("}"),z(r,la.createDeclareModule(t,z(e,la.createBlockStatement(s))))}function qn(){var e,t,n,a,s;return pa.inJSXChild||v(),e={start:{line:oa,column:ia-ca}},t=da.advance(),e.end={line:oa,column:ia-ca},t.type!==Vn.EOF&&(n=[t.range[0],t.range[1]],a=sa.slice(t.range[0],t.range[1]),s={type:Xn[t.type],value:a,range:n,loc:e},t.regex&&(s.regex={pattern:t.regex.pattern,flags:t.regex.flags}),da.tokens.push(s)),t}function jn(){var e,t,n,a;return v(),e=ia,t={start:{line:oa,column:ia-ca}},n=da.scanRegExp(),t.end={line:oa,column:ia-ca},da.tokenize||(da.tokens.length>0&&(a=da.tokens[da.tokens.length-1],a.range[0]===e&&"Punctuator"===a.type&&("/"===a.value||"/="===a.value)&&da.tokens.pop()),da.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,ia],loc:t})),n}function Bn(){var e,t,n,a=[];for(e=0;e<da.tokens.length;++e)t=da.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),da.range&&(n.range=t.range),da.loc&&(n.loc=t.loc),a.push(n);da.tokens=a}function Wn(){"undefined"!=typeof da.tokens&&(da.advance=L,da.scanRegExp=O,L=qn,O=jn)}function Hn(){"function"==typeof da.scanRegExp&&(L=da.advance,O=da.scanRegExp)}function zn(e,t){var n,a={};for(n in e)e.hasOwnProperty(n)&&(a[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(a[n]=t[n]);return a}function Jn(e,t){var a,s,r;a=String,"string"==typeof e||e instanceof String||(e=a(e)),la=ta,sa=e,ia=0,oa=sa.length>0?1:0,ca=0,ua=sa.length,ma=null,pa={allowKeyword:!0,allowIn:!0,labelSet:new n,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},da={},t=t||{},t.tokens=!0,da.tokens=[],da.tokenize=!0,da.openParenToken=-1,da.openCurlyToken=-1,da.range="boolean"==typeof t.range&&t.range,da.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.comment&&t.comment&&(da.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(da.errors=[]),Wn();try{if($(),ma.type===Vn.EOF)return da.tokens;for(s=U();ma.type!==Vn.EOF;)try{s=U()}catch(i){if(s=ma,da.errors){da.errors.push(i);break}throw i}Bn(),r=da.tokens,"undefined"!=typeof da.comments&&(r.comments=da.comments),"undefined"!=typeof da.errors&&(r.errors=da.errors)}catch(o){throw o}finally{Hn(),da={}}return r}function Kn(e,t){var a,s;s=String,"string"==typeof e||e instanceof String||(e=s(e)),la=ta,sa=e,ia=0,oa=sa.length>0?1:0,ca=0,ua=sa.length,ma=null,pa={allowKeyword:!1,allowIn:!0,labelSet:new n,parenthesizedCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,inJSXChild:!1,inJSXTag:!1,inType:!1,lastCommentStart:-1,yieldAllowed:!1,awaitAllowed:!1},da={},"undefined"!=typeof t&&(da.range="boolean"==typeof t.range&&t.range,da.loc="boolean"==typeof t.loc&&t.loc,da.attachComment="boolean"==typeof t.attachComment&&t.attachComment,da.loc&&null!==t.source&&void 0!==t.source&&(la=zn(la,{postProcess:function(e){return e.loc.source=s(t.source),e}})),da.sourceType=t.sourceType,"boolean"==typeof t.tokens&&t.tokens&&(da.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(da.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(da.errors=[]),da.attachComment&&(da.range=!0,da.comments=[],da.bottomRightStack=[],da.trailingComments=[],da.leadingComments=[])),Wn();try{a=un(),"undefined"!=typeof da.comments&&(a.comments=da.comments),"undefined"!=typeof da.tokens&&(Bn(),a.tokens=da.tokens),"undefined"!=typeof da.errors&&(a.errors=da.errors)}catch(r){throw r}finally{Hn(),da={}}return a}var Vn,Xn,Yn,Qn,Gn,Zn,ea,ta,na,aa,sa,ra,ia,oa,ca,ua,la,ma,pa,da;Vn={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10,JSXIdentifier:11,JSXText:12},Xn={},Xn[Vn.BooleanLiteral]="Boolean",Xn[Vn.EOF]="<end>",Xn[Vn.Identifier]="Identifier",Xn[Vn.Keyword]="Keyword",Xn[Vn.NullLiteral]="Null",Xn[Vn.NumericLiteral]="Numeric",Xn[Vn.Punctuator]="Punctuator",Xn[Vn.StringLiteral]="String",Xn[Vn.JSXIdentifier]="JSXIdentifier",Xn[Vn.JSXText]="JSXText",Xn[Vn.RegularExpression]="RegularExpression",Yn=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],Qn={AnyTypeAnnotation:"AnyTypeAnnotation",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrayTypeAnnotation:"ArrayTypeAnnotation",ArrowFunctionExpression:"ArrowFunctionExpression",AssignmentExpression:"AssignmentExpression",BinaryExpression:"BinaryExpression",BlockStatement:"BlockStatement",BooleanTypeAnnotation:"BooleanTypeAnnotation",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ClassImplements:"ClassImplements",ClassProperty:"ClassProperty",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DeclareClass:"DeclareClass",DeclareFunction:"DeclareFunction",DeclareModule:"DeclareModule",DeclareVariable:"DeclareVariable",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportDeclaration:"ExportDeclaration",ExportBatchSpecifier:"ExportBatchSpecifier",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",ForStatement:"ForStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",FunctionTypeAnnotation:"FunctionTypeAnnotation",FunctionTypeParam:"FunctionTypeParam",GenericTypeAnnotation:"GenericTypeAnnotation",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",InterfaceDeclaration:"InterfaceDeclaration",InterfaceExtends:"InterfaceExtends",IntersectionTypeAnnotation:"IntersectionTypeAnnotation",LabeledStatement:"LabeledStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",NullableTypeAnnotation:"NullableTypeAnnotation",NumberTypeAnnotation:"NumberTypeAnnotation",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",ObjectTypeAnnotation:"ObjectTypeAnnotation",ObjectTypeCallProperty:"ObjectTypeCallProperty",ObjectTypeIndexer:"ObjectTypeIndexer",ObjectTypeProperty:"ObjectTypeProperty",Program:"Program",Property:"Property",QualifiedTypeIdentifier:"QualifiedTypeIdentifier",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SpreadProperty:"SpreadProperty",StringLiteralTypeAnnotation:"StringLiteralTypeAnnotation",StringTypeAnnotation:"StringTypeAnnotation",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TupleTypeAnnotation:"TupleTypeAnnotation",TryStatement:"TryStatement",TypeAlias:"TypeAlias",TypeAnnotation:"TypeAnnotation",TypeCastExpression:"TypeCastExpression",TypeofTypeAnnotation:"TypeofTypeAnnotation",TypeParameterDeclaration:"TypeParameterDeclaration",TypeParameterInstantiation:"TypeParameterInstantiation",UnaryExpression:"UnaryExpression",UnionTypeAnnotation:"UnionTypeAnnotation",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",VoidTypeAnnotation:"VoidTypeAnnotation",WhileStatement:"WhileStatement",WithStatement:"WithStatement",JSXIdentifier:"JSXIdentifier",JSXNamespacedName:"JSXNamespacedName",JSXMemberExpression:"JSXMemberExpression",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXElement:"JSXElement",JSXClosingElement:"JSXClosingElement",JSXOpeningElement:"JSXOpeningElement",JSXAttribute:"JSXAttribute",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText",YieldExpression:"YieldExpression",AwaitExpression:"AwaitExpression"},Gn={Data:1,Get:2,Set:4},aa={"static":"static",prototype:"prototype"},Zn={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInFormalsList:"Invalid left-hand side in formals list",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalDuplicateClassProperty:"Illegal duplicate property in class definition",IllegalClassConstructorProperty:"Illegal constructor property in class definition",IllegalReturn:"Illegal return statement",IllegalSpread:"Illegal spread element",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",ParameterAfterRestParameter:"Rest parameter must be final parameter of an argument list",DefaultRestParameter:"Rest parameter can not have a default value",ElementAfterSpreadElement:"Spread must be the final element of an element list",PropertyAfterSpreadProperty:"A rest property must be the final property of an object literal",ObjectPatternAsRestParameter:"Invalid rest parameter",ObjectPatternAsSpread:"Invalid spread argument",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",MissingFromClause:"Missing from clause",NoAsAfterImportNamespace:"Missing as after import *",InvalidModuleSpecifier:"Invalid module specifier",IllegalImportDeclaration:"Illegal import declaration",IllegalExportDeclaration:"Illegal export declaration",NoUninitializedConst:"Const must be initialized",ComprehensionRequiresBlock:"Comprehension must have at least one block",ComprehensionError:"Comprehension Error",EachNotAllowed:"Each is not supported",InvalidJSXAttributeValue:"JSX value should be either an expression or a quoted JSX text",ExpectedJSXClosingTag:"Expected corresponding JSX closing tag for %0",AdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag",ConfusedAboutFunctionType:"Unexpected token =>. It looks like you are trying to write a function type, but you ended up writing a grouped type followed by an =>, which is a syntax error. Remember, function type parameters are named so function types look like (name1: type1, name2: type2) => returnType. You probably wrote (type1) => returnType"},ea={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),LeadingZeros:new RegExp("^0+(?!$)")},n.prototype.get=function(e){return e="$"+e,this.$data[e]},n.prototype.set=function(e,t){return e="$"+e,this.$data[e]=t,this},n.prototype.has=function(e){return e="$"+e,Object.prototype.hasOwnProperty.call(this.$data,e)},n.prototype["delete"]=function(e){return e="$"+e,delete this.$data[e]},ta={name:"SyntaxTree",postProcess:function(e){return e},createArrayExpression:function(e){return{type:Qn.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,n){return{type:Qn.AssignmentExpression,operator:e,left:t,right:n}},createBinaryExpression:function(e,t,n){var a="||"===e||"&&"===e?Qn.LogicalExpression:Qn.BinaryExpression;return{type:a,operator:e,left:t,right:n}},createBlockStatement:function(e){return{type:Qn.BlockStatement,body:e}},createBreakStatement:function(e){return{type:Qn.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:Qn.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:Qn.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,n){return{type:Qn.ConditionalExpression,test:e,consequent:t,alternate:n}},createContinueStatement:function(e){return{type:Qn.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:Qn.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:Qn.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:Qn.EmptyStatement}},createExpressionStatement:function(e){return{type:Qn.ExpressionStatement,expression:e}},createForStatement:function(e,t,n,a){return{type:Qn.ForStatement,init:e,test:t,update:n,body:a}},createForInStatement:function(e,t,n){return{type:Qn.ForInStatement,left:e,right:t,body:n,each:!1}},createForOfStatement:function(e,t,n){return{type:Qn.ForOfStatement,left:e,right:t,body:n}},createFunctionDeclaration:function(e,t,n,a,s,r,i,o,c,u){var l={type:Qn.FunctionDeclaration,id:e,params:t,defaults:n,body:a,rest:s,generator:r,expression:i,returnType:c,typeParameters:u};return o&&(l.async=!0),l},createFunctionExpression:function(e,t,n,a,s,r,i,o,c,u){
var l={type:Qn.FunctionExpression,id:e,params:t,defaults:n,body:a,rest:s,generator:r,expression:i,returnType:c,typeParameters:u};return o&&(l.async=!0),l},createIdentifier:function(e){return{type:Qn.Identifier,name:e,typeAnnotation:void 0,optional:void 0}},createTypeAnnotation:function(e){return{type:Qn.TypeAnnotation,typeAnnotation:e}},createTypeCast:function(e,t){return{type:Qn.TypeCastExpression,expression:e,typeAnnotation:t}},createFunctionTypeAnnotation:function(e,t,n,a){return{type:Qn.FunctionTypeAnnotation,params:e,returnType:t,rest:n,typeParameters:a}},createFunctionTypeParam:function(e,t,n){return{type:Qn.FunctionTypeParam,name:e,typeAnnotation:t,optional:n}},createNullableTypeAnnotation:function(e){return{type:Qn.NullableTypeAnnotation,typeAnnotation:e}},createArrayTypeAnnotation:function(e){return{type:Qn.ArrayTypeAnnotation,elementType:e}},createGenericTypeAnnotation:function(e,t){return{type:Qn.GenericTypeAnnotation,id:e,typeParameters:t}},createQualifiedTypeIdentifier:function(e,t){return{type:Qn.QualifiedTypeIdentifier,qualification:e,id:t}},createTypeParameterDeclaration:function(e){return{type:Qn.TypeParameterDeclaration,params:e}},createTypeParameterInstantiation:function(e){return{type:Qn.TypeParameterInstantiation,params:e}},createAnyTypeAnnotation:function(){return{type:Qn.AnyTypeAnnotation}},createBooleanTypeAnnotation:function(){return{type:Qn.BooleanTypeAnnotation}},createNumberTypeAnnotation:function(){return{type:Qn.NumberTypeAnnotation}},createStringTypeAnnotation:function(){return{type:Qn.StringTypeAnnotation}},createStringLiteralTypeAnnotation:function(e){return{type:Qn.StringLiteralTypeAnnotation,value:e.value,raw:sa.slice(e.range[0],e.range[1])}},createVoidTypeAnnotation:function(){return{type:Qn.VoidTypeAnnotation}},createTypeofTypeAnnotation:function(e){return{type:Qn.TypeofTypeAnnotation,argument:e}},createTupleTypeAnnotation:function(e){return{type:Qn.TupleTypeAnnotation,types:e}},createObjectTypeAnnotation:function(e,t,n){return{type:Qn.ObjectTypeAnnotation,properties:e,indexers:t,callProperties:n}},createObjectTypeIndexer:function(e,t,n,a){return{type:Qn.ObjectTypeIndexer,id:e,key:t,value:n,"static":a}},createObjectTypeCallProperty:function(e,t){return{type:Qn.ObjectTypeCallProperty,value:e,"static":t}},createObjectTypeProperty:function(e,t,n,a){return{type:Qn.ObjectTypeProperty,key:e,value:t,optional:n,"static":a}},createUnionTypeAnnotation:function(e){return{type:Qn.UnionTypeAnnotation,types:e}},createIntersectionTypeAnnotation:function(e){return{type:Qn.IntersectionTypeAnnotation,types:e}},createTypeAlias:function(e,t,n){return{type:Qn.TypeAlias,id:e,typeParameters:t,right:n}},createInterface:function(e,t,n,a){return{type:Qn.InterfaceDeclaration,id:e,typeParameters:t,body:n,"extends":a}},createInterfaceExtends:function(e,t){return{type:Qn.InterfaceExtends,id:e,typeParameters:t}},createDeclareFunction:function(e){return{type:Qn.DeclareFunction,id:e}},createDeclareVariable:function(e){return{type:Qn.DeclareVariable,id:e}},createDeclareModule:function(e,t){return{type:Qn.DeclareModule,id:e,body:t}},createJSXAttribute:function(e,t){return{type:Qn.JSXAttribute,name:e,value:t||null}},createJSXSpreadAttribute:function(e){return{type:Qn.JSXSpreadAttribute,argument:e}},createJSXIdentifier:function(e){return{type:Qn.JSXIdentifier,name:e}},createJSXNamespacedName:function(e,t){return{type:Qn.JSXNamespacedName,namespace:e,name:t}},createJSXMemberExpression:function(e,t){return{type:Qn.JSXMemberExpression,object:e,property:t}},createJSXElement:function(e,t,n){return{type:Qn.JSXElement,openingElement:e,closingElement:t,children:n}},createJSXEmptyExpression:function(){return{type:Qn.JSXEmptyExpression}},createJSXExpressionContainer:function(e){return{type:Qn.JSXExpressionContainer,expression:e}},createJSXOpeningElement:function(e,t,n){return{type:Qn.JSXOpeningElement,name:e,selfClosing:n,attributes:t}},createJSXClosingElement:function(e){return{type:Qn.JSXClosingElement,name:e}},createIfStatement:function(e,t,n){return{type:Qn.IfStatement,test:e,consequent:t,alternate:n}},createLabeledStatement:function(e,t){return{type:Qn.LabeledStatement,label:e,body:t}},createLiteral:function(e){var t={type:Qn.Literal,value:e.value,raw:sa.slice(e.range[0],e.range[1])};return e.regex&&(t.regex=e.regex),t},createMemberExpression:function(e,t,n){return{type:Qn.MemberExpression,computed:"["===e,object:t,property:n}},createNewExpression:function(e,t){return{type:Qn.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:Qn.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:Qn.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:Qn.Program,body:e}},createProperty:function(e,t,n,a,s,r){return{type:Qn.Property,key:t,value:n,kind:e,method:a,shorthand:s,computed:r}},createReturnStatement:function(e){return{type:Qn.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:Qn.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:Qn.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:Qn.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:Qn.ThisExpression}},createThrowStatement:function(e){return{type:Qn.ThrowStatement,argument:e}},createTryStatement:function(e,t,n,a){return{type:Qn.TryStatement,block:e,guardedHandlers:t,handlers:n,finalizer:a}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:Qn.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:Qn.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:Qn.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:Qn.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:Qn.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:Qn.WithStatement,object:e,body:t}},createTemplateElement:function(e,t){return{type:Qn.TemplateElement,value:e,tail:t}},createTemplateLiteral:function(e,t){return{type:Qn.TemplateLiteral,quasis:e,expressions:t}},createSpreadElement:function(e){return{type:Qn.SpreadElement,argument:e}},createSpreadProperty:function(e){return{type:Qn.SpreadProperty,argument:e}},createTaggedTemplateExpression:function(e,t){return{type:Qn.TaggedTemplateExpression,tag:e,quasi:t}},createArrowFunctionExpression:function(e,t,n,a,s,r){var i={type:Qn.ArrowFunctionExpression,id:null,params:e,defaults:t,body:n,rest:a,generator:!1,expression:s};return r&&(i.async=!0),i},createMethodDefinition:function(e,t,n,a,s){return{type:Qn.MethodDefinition,key:n,value:a,kind:t,"static":e===aa["static"],computed:s}},createClassProperty:function(e,t,n,a){return{type:Qn.ClassProperty,key:e,typeAnnotation:t,computed:n,"static":a}},createClassBody:function(e){return{type:Qn.ClassBody,body:e}},createClassImplements:function(e,t){return{type:Qn.ClassImplements,id:e,typeParameters:t}},createClassExpression:function(e,t,n,a,s,r){return{type:Qn.ClassExpression,id:e,superClass:t,body:n,typeParameters:a,superTypeParameters:s,"implements":r}},createClassDeclaration:function(e,t,n,a,s,r){return{type:Qn.ClassDeclaration,id:e,superClass:t,body:n,typeParameters:a,superTypeParameters:s,"implements":r}},createModuleSpecifier:function(e){return{type:Qn.ModuleSpecifier,value:e.value,raw:sa.slice(e.range[0],e.range[1])}},createExportSpecifier:function(e,t){return{type:Qn.ExportSpecifier,id:e,name:t}},createExportBatchSpecifier:function(){return{type:Qn.ExportBatchSpecifier}},createImportDefaultSpecifier:function(e){return{type:Qn.ImportDefaultSpecifier,id:e}},createImportNamespaceSpecifier:function(e){return{type:Qn.ImportNamespaceSpecifier,id:e}},createExportDeclaration:function(e,t,n,a){return{type:Qn.ExportDeclaration,"default":!!e,declaration:t,specifiers:n,source:a}},createImportSpecifier:function(e,t){return{type:Qn.ImportSpecifier,id:e,name:t}},createImportDeclaration:function(e,t,n){return{type:Qn.ImportDeclaration,specifiers:e,source:t,isType:n}},createYieldExpression:function(e,t){return{type:Qn.YieldExpression,argument:e,delegate:t}},createAwaitExpression:function(e){return{type:Qn.AwaitExpression,argument:e}},createComprehensionExpression:function(e,t,n){return{type:Qn.ComprehensionExpression,filter:e,blocks:t,body:n}}},na={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪","int":"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},e.version="13001.1001.0-dev-harmony-fb",e.tokenize=Jn,e.parse=Kn,e.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in Qn)Qn.hasOwnProperty(e)&&(t[e]=Qn[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()})},{}],10:[function(e,t,n){var a=function(e){return e.chars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.encode=function(e){if(0===e)return"0";for(var t="";e>0;)t=this.chars[e%62]+t,e=Math.floor(e/62);return t},e.decode=function(e,t,n,a){for(t=n=(e===(/\W|_|^$/.test(e+="")||e))-1;a=e.charCodeAt(n++);)t=62*t+a-[,48,29,87][a>>5];return t},e}({});t.exports=a},{}],11:[function(e,t,n){n.SourceMapGenerator=e("./source-map/source-map-generator").SourceMapGenerator,n.SourceMapConsumer=e("./source-map/source-map-consumer").SourceMapConsumer,n.SourceNode=e("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":16,"./source-map/source-map-generator":17,"./source-map/source-node":18}],12:[function(e,t,n){if("function"!=typeof a)var a=e("amdefine")(t,e);a(function(e,t,n){function a(){this._array=[],this._set={}}var s=e("./util");a.fromArray=function(e,t){for(var n=new a,s=0,r=e.length;r>s;s++)n.add(e[s],t);return n},a.prototype.add=function(e,t){var n=this.has(e),a=this._array.length;(!n||t)&&this._array.push(e),n||(this._set[s.toSetString(e)]=a)},a.prototype.has=function(e){return Object.prototype.hasOwnProperty.call(this._set,s.toSetString(e))},a.prototype.indexOf=function(e){if(this.has(e))return this._set[s.toSetString(e)];throw new Error('"'+e+'" is not in the set.')},a.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},a.prototype.toArray=function(){return this._array.slice()},t.ArraySet=a})},{"./util":19,amdefine:20}],13:[function(e,t,n){if("function"!=typeof a)var a=e("amdefine")(t,e);a(function(e,t,n){function a(e){return 0>e?(-e<<1)+1:(e<<1)+0}function s(e){var t=1===(1&e),n=e>>1;return t?-n:n}var r=e("./base64"),i=5,o=1<<i,c=o-1,u=o;t.encode=function(e){var t,n="",s=a(e);do t=s&c,s>>>=i,s>0&&(t|=u),n+=r.encode(t);while(s>0);return n},t.decode=function(e){var t,n,a=0,o=e.length,l=0,m=0;do{if(a>=o)throw new Error("Expected more digits in base 64 VLQ value.");n=r.decode(e.charAt(a++)),t=!!(n&u),n&=c,l+=n<<m,m+=i}while(t);return{value:s(l),rest:e.slice(a)}}})},{"./base64":14,amdefine:20}],14:[function(e,t,n){if("function"!=typeof a)var a=e("amdefine")(t,e);a(function(e,t,n){var a={},s={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(e,t){a[e]=t,s[t]=e}),t.encode=function(e){if(e in s)return s[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){if(e in a)return a[e];throw new TypeError("Not a valid base 64 digit: "+e)}})},{amdefine:20}],15:[function(e,t,n){if("function"!=typeof a)var a=e("amdefine")(t,e);a(function(e,t,n){function a(e,t,n,s,r){var i=Math.floor((t-e)/2)+e,o=r(n,s[i],!0);return 0===o?s[i]:o>0?t-i>1?a(i,t,n,s,r):s[i]:i-e>1?a(e,i,n,s,r):0>e?null:s[e]}t.search=function(e,t,n){return t.length>0?a(-1,t.length,e,t,n):null}})},{amdefine:20}],16:[function(e,t,n){if("function"!=typeof a)var a=e("amdefine")(t,e);a(function(e,t,n){function a(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=s.getArg(t,"version"),a=s.getArg(t,"sources"),r=s.getArg(t,"names",[]),o=s.getArg(t,"sourceRoot",null),c=s.getArg(t,"sourcesContent",null),u=s.getArg(t,"mappings"),l=s.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);this._names=i.fromArray(r,!0),this._sources=i.fromArray(a,!0),this.sourceRoot=o,this.sourcesContent=c,this._mappings=u,this.file=l}var s=e("./util"),r=e("./binary-search"),i=e("./array-set").ArraySet,o=e("./base64-vlq");a.fromSourceMap=function(e){var t=Object.create(a.prototype);return t._names=i.fromArray(e._names.toArray(),!0),t._sources=i.fromArray(e._sources.toArray(),!0),t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file,t.__generatedMappings=e._mappings.slice().sort(s.compareByGeneratedPositions),t.__originalMappings=e._mappings.slice().sort(s.compareByOriginalPositions),t},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return this.sourceRoot?s.join(this.sourceRoot,e):e},this)}}),a.prototype.__generatedMappings=null,Object.defineProperty(a.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),a.prototype.__originalMappings=null,Object.defineProperty(a.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),a.prototype._parseMappings=function(e,t){for(var n,a,r=1,i=0,c=0,u=0,l=0,m=0,p=/^[,;]/,d=e;d.length>0;)if(";"===d.charAt(0))r++,d=d.slice(1),i=0;else if(","===d.charAt(0))d=d.slice(1);else{if(n={},n.generatedLine=r,a=o.decode(d),n.generatedColumn=i+a.value,i=n.generatedColumn,d=a.rest,d.length>0&&!p.test(d.charAt(0))){if(a=o.decode(d),n.source=this._sources.at(l+a.value),l+=a.value,d=a.rest,0===d.length||p.test(d.charAt(0)))throw new Error("Found a source, but no line and column");if(a=o.decode(d),n.originalLine=c+a.value,c=n.originalLine,n.originalLine+=1,d=a.rest,0===d.length||p.test(d.charAt(0)))throw new Error("Found a source and line, but no column");a=o.decode(d),n.originalColumn=u+a.value,u=n.originalColumn,d=a.rest,d.length>0&&!p.test(d.charAt(0))&&(a=o.decode(d),n.name=this._names.at(m+a.value),m+=a.value,d=a.rest)}this.__generatedMappings.push(n),"number"==typeof n.originalLine&&this.__originalMappings.push(n)}this.__originalMappings.sort(s.compareByOriginalPositions)},a.prototype._findMapping=function(e,t,n,a,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[a]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[a]);return r.search(e,t,s)},a.prototype.originalPositionFor=function(e){var t={generatedLine:s.getArg(e,"line"),generatedColumn:s.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",s.compareByGeneratedPositions);if(n){var a=s.getArg(n,"source",null);return a&&this.sourceRoot&&(a=s.join(this.sourceRoot,a)),{source:a,line:s.getArg(n,"originalLine",null),column:s.getArg(n,"originalColumn",null),name:s.getArg(n,"name",null)}}return{source:null,line:null,column:null,name:null}},a.prototype.sourceContentFor=function(e){if(!this.sourcesContent)return null;if(this.sourceRoot&&(e=s.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var t;if(this.sourceRoot&&(t=s.urlParse(this.sourceRoot))){var n=e.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!t.path||"/"==t.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}throw new Error('"'+e+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(e){var t={source:s.getArg(e,"source"),originalLine:s.getArg(e,"line"),originalColumn:s.getArg(e,"column")};this.sourceRoot&&(t.source=s.relative(this.sourceRoot,t.source));var n=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",s.compareByOriginalPositions);return n?{line:s.getArg(n,"generatedLine",null),column:s.getArg(n,"generatedColumn",null)}:{line:null,column:null}},a.GENERATED_ORDER=1,a.ORIGINAL_ORDER=2,a.prototype.eachMapping=function(e,t,n){var r,i=t||null,o=n||a.GENERATED_ORDER;switch(o){case a.GENERATED_ORDER:r=this._generatedMappings;break;case a.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;r.map(function(e){var t=e.source;return t&&c&&(t=s.join(c,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,i)},t.SourceMapConsumer=a})},{"./array-set":12,"./base64-vlq":13,"./binary-search":15,"./util":19,amdefine:20}],17:[function(e,t,n){if("function"!=typeof a)var a=e("amdefine")(t,e);a(function(e,t,n){function a(e){this._file=r.getArg(e,"file"),this._sourceRoot=r.getArg(e,"sourceRoot",null),this._sources=new i,this._names=new i,this._mappings=[],this._sourcesContents=null}var s=e("./base64-vlq"),r=e("./util"),i=e("./array-set").ArraySet;a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,n=new a({file:e.file,sourceRoot:t});return e.eachMapping(function(e){var a={generated:{line:e.generatedLine,column:e.generatedColumn}};e.source&&(a.source=e.source,t&&(a.source=r.relative(t,a.source)),a.original={line:e.originalLine,column:e.originalColumn},e.name&&(a.name=e.name)),n.addMapping(a)}),e.sources.forEach(function(t){var a=e.sourceContentFor(t);a&&n.setSourceContent(t,a)}),n},a.prototype.addMapping=function(e){var t=r.getArg(e,"generated"),n=r.getArg(e,"original",null),a=r.getArg(e,"source",null),s=r.getArg(e,"name",null);this._validateMapping(t,n,a,s),a&&!this._sources.has(a)&&this._sources.add(a),s&&!this._names.has(s)&&this._names.add(s),this._mappings.push({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:a,name:s})},a.prototype.setSourceContent=function(e,t){var n=e;this._sourceRoot&&(n=r.relative(this._sourceRoot,n)),null!==t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[r.toSetString(n)]=t):(delete this._sourcesContents[r.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t){t||(t=e.file);var n=this._sourceRoot;n&&(t=r.relative(n,t));var a=new i,s=new i;this._mappings.forEach(function(i){if(i.source===t&&i.originalLine){var o=e.originalPositionFor({line:i.originalLine,column:i.originalColumn});null!==o.source&&(n?i.source=r.relative(n,o.source):i.source=o.source,i.originalLine=o.line,i.originalColumn=o.column,null!==o.name&&null!==i.name&&(i.name=o.name))}var c=i.source;c&&!a.has(c)&&a.add(c);var u=i.name;u&&!s.has(u)&&s.add(u)},this),this._sources=a,this._names=s,e.sources.forEach(function(t){var a=e.sourceContentFor(t);a&&(n&&(t=r.relative(n,t)),this.setSourceContent(t,a))},this)},a.prototype._validateMapping=function(e,t,n,a){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||a)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,orginal:t,name:a}))},a.prototype._serializeMappings=function(){var e,t=0,n=1,a=0,i=0,o=0,c=0,u="";this._mappings.sort(r.compareByGeneratedPositions);for(var l=0,m=this._mappings.length;m>l;l++){if(e=this._mappings[l],e.generatedLine!==n)for(t=0;e.generatedLine!==n;)u+=";",n++;else if(l>0){if(!r.compareByGeneratedPositions(e,this._mappings[l-1]))continue;u+=","}u+=s.encode(e.generatedColumn-t),t=e.generatedColumn,e.source&&(u+=s.encode(this._sources.indexOf(e.source)-c),c=this._sources.indexOf(e.source),u+=s.encode(e.originalLine-1-i),i=e.originalLine-1,u+=s.encode(e.originalColumn-a),a=e.originalColumn,e.name&&(u+=s.encode(this._names.indexOf(e.name)-o),o=this._names.indexOf(e.name)))}return u},a.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;t&&(e=r.relative(t,e));var n=r.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},a.prototype.toJSON=function(){var e={version:this._version,file:this._file,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this)},t.SourceMapGenerator=a})},{"./array-set":12,"./base64-vlq":13,"./util":19,amdefine:20}],18:[function(e,t,n){if("function"!=typeof a)var a=e("amdefine")(t,e);a(function(e,t,n){function a(e,t,n,a,s){this.children=[],this.sourceContents={},this.line=void 0===e?null:e,this.column=void 0===t?null:t,this.source=void 0===n?null:n,this.name=void 0===s?null:s,null!=a&&this.add(a)}var s=e("./source-map-generator").SourceMapGenerator,r=e("./util");a.fromStringWithSourceMap=function(e,t){function n(e,t){null===e||void 0===e.source?s.add(t):s.add(new a(e.originalLine,e.originalColumn,e.source,t,e.name))}var s=new a,r=e.split("\n"),i=1,o=0,c=null;return t.eachMapping(function(e){if(null===c){for(;i<e.generatedLine;)s.add(r.shift()+"\n"),i++;if(o<e.generatedColumn){var t=r[0];s.add(t.substr(0,e.generatedColumn)),r[0]=t.substr(e.generatedColumn),o=e.generatedColumn}}else if(i<e.generatedLine){var a="";do a+=r.shift()+"\n",i++,o=0;while(i<e.generatedLine);if(o<e.generatedColumn){var t=r[0];a+=t.substr(0,e.generatedColumn),r[0]=t.substr(e.generatedColumn),o=e.generatedColumn}n(c,a)}else{var t=r[0],a=t.substr(0,e.generatedColumn-o);r[0]=t.substr(e.generatedColumn-o),o=e.generatedColumn,n(c,a)}c=e},this),n(c,r.join("\n")),t.sources.forEach(function(e){var n=t.sourceContentFor(e);n&&s.setSourceContent(e,n)}),s},a.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!(e instanceof a||"string"==typeof e))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!(e instanceof a||"string"==typeof e))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,n=0,s=this.children.length;s>n;n++)t=this.children[n],t instanceof a?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,n,a=this.children.length;if(a>0){for(t=[],n=0;a-1>n;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n instanceof a?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[r.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;n>t;t++)this.children[t]instanceof a&&this.children[t].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),t=0,n=s.length;n>t;t++)e(r.fromSetString(s[t]),this.sourceContents[s[t]])},a.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new s(e),a=!1,r=null,i=null,o=null,c=null;return this.walk(function(e,s){t.code+=e,null!==s.source&&null!==s.line&&null!==s.column?((r!==s.source||i!==s.line||o!==s.column||c!==s.name)&&n.addMapping({source:s.source,original:{line:s.line,column:s.column},generated:{line:t.line,column:t.column},name:s.name}),r=s.source,i=s.line,o=s.column,c=s.name,a=!0):a&&(n.addMapping({generated:{line:t.line,column:t.column}}),r=null,a=!1),e.split("").forEach(function(e){"\n"===e?(t.line++,t.column=0):t.column++})}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:t.code,map:n}},t.SourceNode=a})},{"./source-map-generator":17,"./util":19,amdefine:20}],19:[function(e,t,n){if("function"!=typeof a)var a=e("amdefine")(t,e);a(function(e,t,n){function a(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')}function s(e){var t=e.match(d);return t?{scheme:t[1],auth:t[3],host:t[4],port:t[6],path:t[7]}:null}function r(e){var t=e.scheme+"://";return e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function i(e,t){var n;return t.match(d)||t.match(h)?t:"/"===t.charAt(0)&&(n=s(e))?(n.path=t,r(n)):e.replace(/\/$/,"")+"/"+t}function o(e){return"$"+e}function c(e){return e.substr(1)}function u(e,t){e=e.replace(/\/$/,"");var n=s(e);return"/"==t.charAt(0)&&n&&"/"==n.path?t.slice(1):0===t.indexOf(e+"/")?t.substr(e.length+1):t}function l(e,t){var n=e||"",a=t||"";return(n>a)-(a>n)}function m(e,t,n){var a;return(a=l(e.source,t.source))?a:(a=e.originalLine-t.originalLine)?a:(a=e.originalColumn-t.originalColumn,a||n?a:(a=l(e.name,t.name))?a:(a=e.generatedLine-t.generatedLine,a?a:e.generatedColumn-t.generatedColumn))}function p(e,t,n){var a;return(a=e.generatedLine-t.generatedLine)?a:(a=e.generatedColumn-t.generatedColumn,a||n?a:(a=l(e.source,t.source))?a:(a=e.originalLine-t.originalLine)?a:(a=e.originalColumn-t.originalColumn,a?a:l(e.name,t.name)))}t.getArg=a;var d=/([\w+\-.]+):\/\/((\w+:\w+)@)?([\w.]+)?(:(\d+))?(\S+)?/,h=/^data:.+\,.+/;t.urlParse=s,t.urlGenerate=r,t.join=i,t.toSetString=o,t.fromSetString=c,t.relative=u,t.compareByOriginalPositions=m,t.compareByGeneratedPositions=p})},{amdefine:20}],20:[function(e,t,n){(function(n,a){"use strict";function s(t,s){function r(e){var t,n;for(t=0;e[t];t+=1)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function i(e,t){var n;return e&&"."===e.charAt(0)&&t&&(n=t.split("/"),n=n.slice(0,n.length-1),n=n.concat(e.split("/")),r(n),e=n.join("/")),e}function o(e){return function(t){return i(t,e)}}function c(e){function t(t){h[e]=t}return t.fromText=function(e,t){throw new Error("amdefine does not implement load.fromText")},t}function u(e,n,r){var i,o,c,u;if(e)o=h[e]={},c={id:e,uri:a,exports:o},i=m(s,o,c,e);else{if(f)throw new Error("amdefine with no module ID cannot be called more than once per file.");f=!0,o=t.exports,c=t,i=m(s,o,c,t.id)}n&&(n=n.map(function(e){return i(e)})),u="function"==typeof r?r.apply(c.exports,n):r,void 0!==u&&(c.exports=u,e&&(h[e]=c.exports))}function l(e,t,n){Array.isArray(e)?(n=t,t=e,e=void 0):"string"!=typeof e&&(n=e,e=t=void 0),t&&!Array.isArray(t)&&(n=t,t=void 0),t||(t=["require","exports","module"]),e?d[e]=[e,t,n]:u(e,t,n)}var m,p,d={},h={},f=!1,g=e("path");return m=function(e,t,a,s){function r(r,i){return"string"==typeof r?p(e,t,a,r,s):(r=r.map(function(n){return p(e,t,a,n,s)}),void n.nextTick(function(){i.apply(null,r)}))}return r.toUrl=function(e){return 0===e.indexOf(".")?i(e,g.dirname(a.filename)):e},r},s=s||function(){return t.require.apply(t,arguments)},p=function(e,t,n,a,s){var r,l,f=a.indexOf("!"),g=a;if(-1===f){if(a=i(a,s),"require"===a)return m(e,t,n,s);if("exports"===a)return t;if("module"===a)return n;if(h.hasOwnProperty(a))return h[a];if(d[a])return u.apply(null,d[a]),h[a];if(e)return e(g);throw new Error("No module with ID: "+a)}return r=a.substring(0,f),a=a.substring(f+1,a.length),l=p(e,t,n,r,s),a=l.normalize?l.normalize(a,o(s)):i(a,s),h[a]?h[a]:(l.load(a,m(e,t,n,s),c(a),{}),h[a])},l.require=function(e){return h[e]?h[e]:d[e]?(u.apply(null,d[e]),h[e]):void 0},l.amd={},l}t.exports=s}).call(this,e("_process"),"/node_modules/jstransform/node_modules/source-map/node_modules/amdefine/amdefine.js")},{_process:8,path:7}],21:[function(e,t,n){function a(e){var t=e.match(i);return t?t[0].replace(o,"")||"":""}function s(e){e=e.replace(c,"").replace(u,"").replace(l," ").replace(m,"$1");for(var t="";t!=e;)t=e,e=e.replace(p,"\n$1 $2\n");e=e.trim();for(var n,a=[];n=d.exec(e);)a.push([n[1],n[2]]);return a}function r(e){for(var t=s(e),n={},a=0;a<t.length;a++)n[t[a][0]]=t[a][1];return n}var i=/^\s*(\/\*\*(.|\r?\n)*?\*\/)/,o=/^\s*/,c=/^\/\*\*?/,u=/\*+\/$/,l=/[\t ]+/g,m=/(\r?\n|^) *\*/g,p=/(?:^|\r?\n) *(@[^\r\n]*?) *\r?\n *([^@\r\n\s][^@\r\n]+?) *\r?\n/g,d=/(?:^|\r?\n) *@(\S+) *([^\r\n]*)/g;n.extract=a,n.parse=s,n.parseAsObject=r},{}],22:[function(e,t,n){"use strict";function a(e,t){if(e.type===b.Program)return!0;var n=t.type===b.FunctionDeclaration||t.type===b.FunctionExpression||t.type===b.ArrowFunctionExpression,a=t.type===b.ArrowFunctionExpression&&e===t.body;return n&&(e.type===b.BlockStatement||a)}function s(e,t){return e.type===b.Program?!1:e.type===b.BlockStatement&&t.type===b.CatchClause}function r(e,t,n){function c(e,t,n){e.range&&h.catchup(e.range[0],n),r(e,t,n),e.range&&h.catchup(e.range[1],n)}var u=null,m=t[0];if(!Array.isArray(e)&&n.localScope.parentNode!==m){if(a(e,m)){var p=n.scopeIsStrict;if(p||e.type!==b.BlockStatement&&e.type!==b.Program||(p=e.body.length>0&&e.body[0].type===b.ExpressionStatement&&e.body[0].expression.type===b.Literal&&"use strict"===e.body[0].expression.value),e.type===b.Program)u=n.g.buffer.length,n=h.updateState(n,{scopeIsStrict:p});else{if(u=n.g.buffer.length+1,
n=h.updateState(n,{localScope:{parentNode:m,parentScope:n.localScope,identifiers:{},tempVarIndex:0,tempVars:[]},scopeIsStrict:p}),g("arguments",v(e),n),m.params.length>0)for(var d,f=v(m,t.slice(1),t[0]),y=0;y<m.params.length;y++)d=m.params[y],d.type===b.Identifier&&g(d.name,f,n);if(m.rest){var f=v(m,t.slice(1),t[0]);g(m.rest.name,f,n)}if(m.type===b.FunctionExpression&&m.id){var E=v(m,t.parentNodeslice,m);g(m.id.name,E,n)}}i(e,t,n)}if(s(e,m)){if(u=n.g.buffer.length,n=h.updateState(n,{localScope:{parentNode:m,parentScope:n.localScope,identifiers:{},tempVarIndex:0,tempVars:[]}}),m.type===b.CatchClause){var f=v(m,t.slice(1),m);g(m.param.name,f,n)}o(e,t,n)}}h.analyzeAndTraverse(l,c,e,t,n),null!==u&&h.injectTempVarDeclarations(n,u)}function i(e,t,n){h.analyzeAndTraverse(c,i,e,t,n)}function o(e,t,n){h.analyzeAndTraverse(u,o,e,t,n)}function c(e,t,n){var a;switch(e.type){case b.ArrowFunctionExpression:case b.FunctionExpression:return!1;case b.ClassDeclaration:case b.ClassExpression:case b.FunctionDeclaration:return e.id&&(a=v(f(t),t.slice(),e),g(e.id.name,a,n)),!1;case b.VariableDeclarator:"var"===t[0].kind&&(a=v(f(t),t.slice(),e),g(e.id.name,a,n))}}function u(e,t,n){return e.type===b.CatchClause?!1:void 0}function l(e,t,n){for(var a=n.g.visitors,s=0;s<a.length;s++)if(a[s].test(e,t,n))return a[s](r,e,t,n)}function m(e,t){if(y[e]&&!t.disableAstCache)return y[e];var n=d.parse(e,{comment:!0,loc:!0,range:!0,sourceType:t.sourceType});return t.disableAstCache||(y[e]=n),n}function p(t,n,a){a=a||{};var s;try{s=m(n,a)}catch(i){throw i.message="Parse Error: "+i.message,i}var o=h.createState(n,s,a);if(o.g.visitors=t,a.sourceMap){var c=e("source-map").SourceMapGenerator;o.g.sourceMap=new c({file:a.filename||"transformed.js"})}r(s,[],o),h.catchup(n.length,o);var u={code:o.g.buffer,extra:o.g.extra};return a.sourceMap&&(u.sourceMap=o.g.sourceMap,u.sourceMapFilename=a.filename||"source.js"),u}var d=e("esprima-fb"),h=e("./utils"),f=h.getBoundaryNode,g=h.declareIdentInLocalScope,v=h.initScopeMetadata,b=d.Syntax,y={};n.transform=p,n.Syntax=b},{"./utils":23,"esprima-fb":9,"source-map":11}],23:[function(e,t,n){function a(e,t,n){return{localScope:{parentNode:t,parentScope:null,identifiers:{},tempVarIndex:0,tempVars:[]},superClass:null,mungeNamespace:"",methodNode:null,methodFuncNode:null,className:null,scopeIsStrict:null,indentBy:0,g:{opts:n,position:0,extra:{},buffer:"",source:e,docblock:null,tagNamespaceUsed:!1,isBolt:void 0,sourceMap:null,sourceMapFilename:"source.js",sourceLine:1,bufferLine:1,originalProgramAST:null,sourceColumn:0,bufferColumn:0}}}function s(e,t){var n=Object.create(e);return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function r(e,t,n){if(!(e<t.g.position)){var a=t.g.source.substring(t.g.position,e),s=g(a,t);if(t.g.sourceMap&&s){t.g.sourceMap.addMapping({generated:{line:t.g.bufferLine,column:t.g.bufferColumn},original:{line:t.g.sourceLine,column:t.g.sourceColumn},source:t.g.sourceMapFilename});for(var r=a.split("\n"),i=s.split("\n"),o=1;o<r.length-1;o++)t.g.sourceMap.addMapping({generated:{line:t.g.bufferLine,column:0},original:{line:t.g.sourceLine,column:0},source:t.g.sourceMapFilename}),t.g.sourceLine++,t.g.bufferLine++;r.length>1&&(t.g.sourceLine++,t.g.bufferLine++,t.g.sourceColumn=0,t.g.bufferColumn=0),t.g.sourceColumn+=r[r.length-1].length,t.g.bufferColumn+=i[i.length-1].length}t.g.buffer+=n?n(s):s,t.g.position=e}}function i(e,t){return t.g.source.substring(e.range[0],e.range[1])}function o(e){return e.replace(F," ")}function c(e){return e.replace(F,"")}function u(e,t){var n,a=t.g.source.substring(t.g.position),s=a.split("\n"),r=0,i=!1,o=!1;e:for(;void 0!==(n=s.shift());){var c=r+n.length;t:for(;c>r;r++){var u=a[r];if('"'!==u&&"'"!==u){if(!o){if(c>r+1){var l=u+n[r+1];if("//"===l){r=c+1;continue e}if("/*"===l){i=!0,r+=1;continue t}if("*/"===l){i=!1,r+=1;continue t}}if(!i&&u===e)return r+t.g.position}}else o=!o}r++,o=!1}throw new Error("`"+e+"` not found!")}function l(e,t){r(e,t,o)}function m(e,t){r(e,t,c)}function p(e){return e.replace(L,function(){return""})}function d(e,t){r(e,t,p)}function h(e,t){if(t.g.sourceMap){e<t.g.position&&(t.g.position=0,t.g.sourceLine=1,t.g.sourceColumn=0);var n=t.g.source.substring(t.g.position,e),a=n.split("\n");a.length>1&&(t.g.sourceLine+=a.length-1,t.g.sourceColumn=0),t.g.sourceColumn+=a[a.length-1].length}t.g.position=e}function f(e,t){if(t.g.sourceMap&&e){t.g.sourceMap.addMapping({generated:{line:t.g.bufferLine,column:t.g.bufferColumn},original:{line:t.g.sourceLine,column:t.g.sourceColumn},source:t.g.sourceMapFilename});var n=e.split("\n");n.length>1&&(t.g.bufferLine+=n.length-1,t.g.bufferColumn=0),t.g.bufferColumn+=n[n.length-1].length}t.g.buffer+=e}function g(e,t){var n=t.indentBy;if(0>n)for(var a=0;-n>a;a++)e=e.replace(A,"$1");else for(var a=0;n>a;a++)e=e.replace(A,"$1$2$2");return e}function v(e,t){var n=e;for(e-=1;e>0&&"\n"!=t.g.source[e];)t.g.source[e].match(/[ \t]/)||(n=e),e--;return t.g.source.substring(e+1,n)}function b(t){if(!t.g.docblock){var n=e("./docblock");t.g.docblock=n.parseAsObject(n.extract(t.g.source))}return t.g.docblock}function y(e,t,n){for(var a=t.localScope;a;){if(void 0!==a.identifiers[e])return!0;if(n&&a.parentNode===n)break;a=a.parentScope}return!1}function E(e,t){return void 0!==t.localScope.identifiers[e]}function R(e,t,n){return{boundaryNode:e,bindingPath:t,bindingNode:n}}function C(e,t,n){n.localScope.identifiers[e]={boundaryNode:t.boundaryNode,path:t.bindingPath,node:t.bindingNode,state:Object.create(n)}}function S(e,t){for(var n=t.localScope;n;){if(void 0!==n.identifiers[e])return n.identifiers[e];n=n.parentScope}}function _(e,t){return t.localScope.identifiers[e]}function N(e,t,n,a,s){if(n.type){if(e(n,a,s)===!1)return;a.unshift(n)}w(n).forEach(function(e){t(e,a,s)}),n.type&&a.shift()}function w(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&x(t,e[n]);return t.sort(function(e,t){return e[1]-t[1]}),t.map(function(e){return e[0]})}function x(e,t){if("object"==typeof t&&null!==t)if(t.range)e.push([t,t.range[0]]);else if(Array.isArray(t))for(var n=0;n<t.length;n++)x(e,t[n])}function k(e,t){return D(e,function(e){return e.type===t})}function D(e,t){function n(e){return t(e)===!0?(s=!0,!1):void 0}function a(e,n,a){s||(s=D(e,t))}var s=!1;return N(n,a,e,[]),s}function M(e){for(var t=0;t<e.length;++t)if(U[e[t].type])return e[t];throw new Error("Expected to find a node with one of the following types in path:\n"+JSON.stringify(Object.keys(U)))}function I(e){return"$__"+e}function T(e){var t="$__"+e.localScope.tempVarIndex++;return e.localScope.tempVars.push(t),t}function P(e,t){e.localScope.tempVars.length&&(e.g.buffer=e.g.buffer.slice(0,t)+"var "+e.localScope.tempVars.join(", ")+";"+e.g.buffer.slice(t),e.localScope.tempVars=[])}var O=e("esprima-fb").Syntax,A=/(^|\n)( {2}|\t)/g,F=/(\S)/g,L=/[^\n]/g,U={};U[O.ArrowFunctionExpression]=!0,U[O.FunctionExpression]=!0,U[O.FunctionDeclaration]=!0,U[O.Program]=!0,n.analyzeAndTraverse=N,n.append=f,n.catchup=r,n.catchupNewlines=d,n.catchupWhiteOut=l,n.catchupWhiteSpace=m,n.containsChildMatching=D,n.containsChildOfType=k,n.createState=a,n.declareIdentInLocalScope=C,n.getBoundaryNode=M,n.getDocblock=b,n.getLexicalBindingMetadata=S,n.getLocalBindingMetadata=_,n.getNextSyntacticCharOffset=u,n.getNodeSourceText=i,n.getOrderedChildren=w,n.getTempVar=I,n.identInLocalScope=E,n.identWithinLexicalScope=y,n.indentBefore=v,n.initScopeMetadata=R,n.injectTempVar=T,n.injectTempVarDeclarations=P,n.move=h,n.scopeTypes=U,n.updateIndent=g,n.updateState=s},{"./docblock":21,"esprima-fb":9}],24:[function(e,t,n){function a(e,t,n,a){var r=n[0].type===l.ExpressionStatement;r&&m.append("(",a),m.append("function",a),s(e,t,n,a),m.catchupWhiteSpace(t.body.range[0],a);var c=t.body.type==l.BlockStatement?o:i;n.unshift(t),c(e,t,n,a),n.shift();var u=m.containsChildMatching(t.body,function(e){return e.type===l.ThisExpression||e.type===l.Identifier&&"super"===e.name});return u&&m.append(".bind(this)",a),m.catchupWhiteSpace(t.range[1],a),r&&m.append(")",a),!1}function s(e,t,n,a){(r(t,a)||!t.params.length)&&m.append("(",a),0!==t.params.length&&(n.unshift(t),e(t.params,n,a),n.unshift()),m.append(")",a)}function r(e,t){return 1===e.params.length&&"("!==t.g.source[t.g.position]}function i(e,t,n,a){m.append("{",a),t.rest&&m.append(c.renderRestParamSetup(t,a),a),u.renderDestructuredComponents(t,m.updateState(a,{localScope:{parentNode:a.parentNode,parentScope:a.parentScope,identifiers:a.identifiers,tempVarIndex:0}})),m.append("return ",a),o(e,t,n,a),m.append(";}",a)}function o(e,t,n,a){e(t.body,n,a),m.catchup(t.body.range[1],a)}var c=e("./es6-rest-param-visitors"),u=e("./es6-destructuring-visitors"),l=e("esprima-fb").Syntax,m=e("../src/utils");a.test=function(e,t,n){return e.type===l.ArrowFunctionExpression},n.visitorList=[a]},{"../src/utils":23,"./es6-destructuring-visitors":27,"./es6-rest-param-visitors":30,"esprima-fb":9}],25:[function(e,t,n){function a(e,t,n,a){i.move(t.range[0],a),e(t,n,a),i.catchup(t.range[1],a)}function s(e,t,n,s){if(i.catchup(t.range[0],s),t.type===r.NewExpression)i.append("new (Function.prototype.bind.apply(",s),a(e,t.callee,n,s);else if(t.callee.type===r.MemberExpression){var o=i.injectTempVar(s);i.append("("+o+" = ",s),a(e,t.callee.object,n,s),i.append(")",s),t.callee.property.type===r.Identifier?(i.append(".",s),a(e,t.callee.property,n,s)):(i.append("[",s),a(e,t.callee.property,n,s),i.append("]",s)),i.append(".apply("+o,s)}else{var c=t.callee.type===r.FunctionDeclaration||t.callee.type===r.FunctionExpression;c&&i.append("(",s),a(e,t.callee,n,s),c&&i.append(")",s),i.append(".apply(null",s)}i.append(", ",s);var u=t.arguments.slice(),l=u.pop();if(u.length||t.type===r.NewExpression){for(i.append("[",s),t.type===r.NewExpression&&i.append("null"+(u.length?", ":""),s);u.length;){var m=u.shift();i.move(m.range[0],s),e(m,n,s),u.length?i.catchup(u[0].range[0],s):i.catchup(m.range[1],s)}i.append("].concat(",s),a(e,l.argument,n,s),i.append(")",s)}else a(e,l.argument,n,s);return i.append(t.type===r.NewExpression?"))":")",s),i.move(t.range[1],s),!1}var r=e("esprima-fb").Syntax,i=e("../src/utils");s.test=function(e,t,n){return(e.type===r.CallExpression||e.type===r.NewExpression)&&e.arguments.length>0&&e.arguments[e.arguments.length-1].type===r.SpreadElement},n.visitorList=[s]},{"../src/utils":23,"esprima-fb":9}],26:[function(e,t,n){"use strict";function a(){N=0,w={}}function s(e){var t=e.mungeNamespace||"";return"____Class"+t+b.encode(N++)}function r(e,t){var n=t.mungeNamespace,a=t.g.opts.minify;if(a){w[n]||(w[n]={symbolMap:{},identUUIDCounter:0});var s=w[n].symbolMap;s[e]||(s[e]=b.encode(w[n].identUUIDCounter++)),e=s[e]}return"$"+n+e}function i(e,t){var n={name:null,expression:null};return e.superClass&&(e.superClass.type===y.Identifier?n.name=e.superClass.name:(n.name=s(t),n.expression=t.g.source.substring(e.superClass.range[0],e.superClass.range[1]))),n}function o(e){return e.type===y.MethodDefinition&&e.key.type===y.Identifier&&"constructor"===e.key.name}function c(e,t){return!!t.methodFuncNode&&!E.getDocblock(t).hasOwnProperty("preventMunge")&&/^_(?!_)/.test(e.name)}function u(e,t,n,a){if(!a.g.opts.es5&&("get"===t.kind||"set"===t.kind))throw new Error("This transform does not support "+t.kind+"ter methods for ES6 classes. (line: "+t.loc.start.line+", col: "+t.loc.start.column+")");return a=E.updateState(a,{methodNode:t}),E.catchup(t.range[0],a),n.unshift(t),e(t.value,n,a),n.shift(),!1}function l(e,t,n,a){var s=n[0],i="get"===s.kind,o="set"===s.kind;if(a=E.updateState(a,{methodFuncNode:t}),"constructor"===s.key.name)E.append("function "+a.className,a);else{var u,l=!1,m=s["static"]?"":".prototype",p=a.className+m;s.key.type===y.Identifier?(u=s.key.name,c(s.key,a)&&(u=r(u,a)),i||o?u=JSON.stringify(u):R.isReservedWord(u)&&(l=!0,u=JSON.stringify(u))):s.key.type===y.Literal&&(u=JSON.stringify(s.key.value),l=!0),o||i?E.append("Object.defineProperty("+p+","+u+",{configurable:true,"+s.kind+":function",a):a.g.opts.es3?(u=l?"["+u+"]":"."+u,E.append(p+u+"=function"+(t.generator?"*":""),a)):(l||(u=JSON.stringify(u)),E.append("Object.defineProperty("+p+","+u+",{writable:true,configurable:true,value:function"+(t.generator?"*":""),a))}E.move(s.key.range[1],a),E.append("(",a);var d=t.params;if(d.length>0){E.catchupNewlines(d[0].range[0],a);for(var h=0;h<d.length;h++)E.catchup(t.params[h].range[0],a),n.unshift(t),e(d[h],n,a),n.shift()}var f=E.getNextSyntacticCharOffset(")",a);E.catchupWhiteSpace(f,a);var g=E.getNextSyntacticCharOffset("{",a);return E.catchup(g+1,a),a.scopeIsStrict||(E.append('"use strict";',a),a=E.updateState(a,{scopeIsStrict:!0})),E.move(t.body.range[0]+"{".length,a),n.unshift(t),e(t.body,n,a),n.shift(),E.catchup(t.body.range[1],a),"constructor"!==s.key.name&&((i||o||!a.g.opts.es3)&&E.append("})",a),E.append(";",a)),!1}function m(e,t,n,a){var s=t.name;c(t,a)&&(s=r(t.name,a)),E.append(s,a),E.move(t.range[1],a)}function p(e,t,n,a){var s=a.className,r=a.superClass;if(r.name){null!==r.expression&&E.append("var "+r.name+"="+r.expression+";",a);var i=r.name+"____Key",c="";E.identWithinLexicalScope(i,a)||(c="var ",C(i,S(t),a)),E.append("for("+c+i+" in "+r.name+"){if("+r.name+".hasOwnProperty("+i+")){"+s+"["+i+"]="+r.name+"["+i+"];}}",a);var u=_+r.name;E.identWithinLexicalScope(u,a)||(E.append("var "+u+"="+r.name+"===null?null:"+r.name+".prototype;",a),C(u,S(t),a)),E.append(s+".prototype=Object.create("+u+");",a),E.append(s+".prototype.constructor="+s+";",a),E.append(s+".__superConstructor__="+r.name+";",a)}t.body.body.filter(o).pop()||(E.append("function "+s+"(){",a),a.scopeIsStrict||E.append('"use strict";',a),r.name&&E.append("if("+r.name+"!==null){"+r.name+".apply(this,arguments);}",a),E.append("}",a)),E.move(t.body.range[0]+"{".length,a),e(t.body,n,a),E.catchupWhiteSpace(t.range[1],a)}function d(e,t,n,a){var s=t.id.name,r=i(t,a);return a=E.updateState(a,{mungeNamespace:s,className:s,superClass:r}),p(e,t,n,a),!1}function h(e,t,n,a){var r=t.id&&t.id.name||s(a),o=i(t,a);return E.append("(function(){",a),a=E.updateState(a,{mungeNamespace:r,className:r,superClass:o}),p(e,t,n,a),E.append("return "+r+";})()",a),!1}function f(e,t,n,a){E.append(r(t.name,a),a),E.move(t.range[1],a)}function g(e,t,n,a){var s=a.superClass.name;if(t.callee.type===y.Identifier){if(o(a.methodNode))E.append(s+".call(",a);else{var r=_+s;a.methodNode.key.type===y.Identifier?r+="."+a.methodNode.key.name:a.methodNode.key.type===y.Literal&&(r+="["+JSON.stringify(a.methodNode.key.value)+"]"),E.append(r+".call(",a)}E.move(t.callee.range[1],a)}else t.callee.type===y.MemberExpression&&(E.append(_+s,a),E.move(t.callee.object.range[1],a),t.callee.computed?E.catchup(t.callee.property.range[1]+"]".length,a):E.append("."+t.callee.property.name,a),E.append(".call(",a),E.move(t.callee.range[1],a));return E.append("this",a),t.arguments.length>0&&(E.append(",",a),E.catchupWhiteSpace(t.arguments[0].range[0],a),e(t.arguments,n,a)),E.catchupWhiteSpace(t.range[1],a),E.append(")",a),!1}function v(e,t,n,a){var s=a.superClass.name;E.append(_+s,a),E.move(t.object.range[1],a)}var b=e("base62"),y=e("esprima-fb").Syntax,E=e("../src/utils"),R=e("./reserved-words-helper"),C=E.declareIdentInLocalScope,S=E.initScopeMetadata,_="____SuperProtoOf",N=0,w={};u.test=function(e,t,n){return e.type===y.MethodDefinition},l.test=function(e,t,n){return e.type===y.FunctionExpression&&t[0].type===y.MethodDefinition},m.test=function(e,t,n){if(t[0]&&t[1]){var a=t[0],s=t[1];return a.type===y.FunctionExpression&&s.type===y.MethodDefinition&&e.type===y.Identifier}},d.test=function(e,t,n){return e.type===y.ClassDeclaration},h.test=function(e,t,n){return e.type===y.ClassExpression},f.test=function(e,t,n){if(e.type===y.Identifier&&c(e,n)){if(t[0].type===y.MemberExpression&&t[0].object!==e&&t[0].computed===!1)return!0;if(E.identWithinLexicalScope(e.name,n,n.methodFuncNode))return!0;if(t[0].type===y.Property&&t[1].type===y.ObjectExpression)return!0;if(t[0].type===y.FunctionExpression||t[0].type===y.FunctionDeclaration||t[0].type===y.ArrowFunctionExpression)for(var a=0;a<t[0].params.length;a++)if(t[0].params[a]===e)return!0}return!1},g.test=function(e,t,n){if(n.superClass&&e.type===y.CallExpression){var a=e.callee;if(a.type===y.Identifier&&"super"===a.name||a.type==y.MemberExpression&&"super"===a.object.name)return!0}return!1},v.test=function(e,t,n){return n.superClass&&e.type===y.MemberExpression&&e.object.type===y.Identifier&&"super"===e.object.name},n.resetSymbols=a,n.visitorList=[d,h,l,u,m,f,g,v]},{"../src/utils":23,"./reserved-words-helper":34,base62:10,"esprima-fb":9}],27:[function(e,t,n){function a(e,t,n,a){return g.append(g.getTempVar(a.localScope.tempVarIndex)+"=",a),g.catchupWhiteSpace(t.init.range[0],a),e(t.init,n,a),g.catchup(t.init.range[1],a),g.append(","+r(t.id,a),a),a.localScope.tempVarIndex++,!1}function s(e){return e.type===f.ObjectPattern||e.type===f.ArrayPattern}function r(e,t){for(var n=t.localScope.tempVarIndex,a=[],s=i(e),u=0;u<s.length;u++){var l=s[u];if(l)if(l.type!==f.SpreadElement)if(l.type!==f.SpreadProperty){var m=o(e,l,n,u),p=c(e,l);p.type===f.Identifier?a.push(p.name+"="+m):a.push(g.getTempVar(++t.localScope.tempVarIndex)+"="+m+","+r(p,t))}else{var d=y.renderRestExpression(g.getTempVar(n),s);a.push(l.argument.name+"="+d)}else a.push(l.argument.name+"=Array.prototype.slice.call("+g.getTempVar(n)+","+u+")")}return a.join(",")}function i(e){return e.properties||e.elements}function o(e,t,n,a){var s=g.getTempVar(n);if(e.type===f.ObjectPattern){if(v.isReservedWord(t.key.name))return s+'["'+t.key.name+'"]';if(t.key.type===f.Literal)return s+"["+JSON.stringify(t.key.value)+"]";if(t.key.type===f.Identifier)return s+"."+t.key.name}else if(e.type===f.ArrayPattern)return s+"["+a+"]"}function c(e,t){return e.type===f.ObjectPattern?t.value:t}function u(e,t,n,a){var s=t.expression;return g.append("var "+g.getTempVar(a.localScope.tempVarIndex)+"=",a),g.catchupWhiteSpace(s.right.range[0],a),e(s.right,n,a),g.catchup(s.right.range[1],a),g.append(";"+r(s.left,a)+";",a),g.catchupWhiteSpace(t.range[1],a),a.localScope.tempVarIndex++,!1}function l(e,t,n,a){return g.append(g.getTempVar(m(t,n)),a),g.catchupWhiteSpace(t.range[1],a),!0}function m(e,t){for(var n=t[0],a=0,r=0;r<n.params.length;r++){var i=n.params[r];if(i===e)break;s(i)&&a++}return a}function p(e){return e.type==f.FunctionDeclaration||e.type==f.FunctionExpression||e.type==f.MethodDefinition||e.type==f.ArrowFunctionExpression}function d(e,t,n,a){var s=n[0];return g.catchup(s.body.range[0]+1,a),h(s,a),s.rest&&g.append(b.renderRestParamSetup(s,a),a),!0}function h(e,t){for(var n=[],a=0;a<e.params.length;a++){var i=e.params[a];s(i)&&(n.push(r(i,t)),t.localScope.tempVarIndex++)}n.length&&g.append("var "+n.join(",")+";",t)}var f=e("esprima-fb").Syntax,g=e("../src/utils"),v=e("./reserved-words-helper"),b=e("./es6-rest-param-visitors"),y=e("./es7-rest-property-helpers");a.test=function(e,t,n){return e.type===f.VariableDeclarator&&s(e.id)},u.test=function(e,t,n){return e.type===f.ExpressionStatement&&e.expression.type===f.AssignmentExpression&&s(e.expression.left)},l.test=function(e,t,n){return s(e)&&p(t[0])},d.test=function(e,t,n){return e.type===f.BlockStatement&&p(t[0])},n.visitorList=[a,u,l,d],n.renderDestructuredComponents=h},{"../src/utils":23,"./es6-rest-param-visitors":30,"./es7-rest-property-helpers":32,"./reserved-words-helper":34,"esprima-fb":9}],28:[function(e,t,n){function a(e,t,n,a){var s=t.value.generator;return s&&r.catchupWhiteSpace(t.range[0]+1,a),t.computed?r.catchup(t.key.range[1]+1,a):i.isReservedWord(t.key.name)&&(r.catchup(t.key.range[0],a),r.append('"',a),r.catchup(t.key.range[1],a),r.append('"',a)),r.catchup(t.key.range[1],a),r.append(":function"+(s?"*":""),a),n.unshift(t),e(t.value,n,a),n.shift(),!1}var s=e("esprima-fb").Syntax,r=e("../src/utils"),i=e("./reserved-words-helper");a.test=function(e,t,n){return e.type===s.Property&&e.value.type===s.FunctionExpression&&e.method===!0},n.visitorList=[a]},{"../src/utils":23,"./reserved-words-helper":34,"esprima-fb":9}],29:[function(e,t,n){function a(e,t,n,a){return r.catchup(t.key.range[1],a),r.append(":"+t.key.name,a),!1}var s=e("esprima-fb").Syntax,r=e("../src/utils");a.test=function(e,t,n){return e.type===s.Property&&"init"===e.kind&&e.shorthand===!0&&t[0].type!==s.ObjectPattern},n.visitorList=[a]},{"../src/utils":23,"esprima-fb":9}],30:[function(e,t,n){function a(e){return(e.type===o.FunctionDeclaration||e.type===o.FunctionExpression||e.type===o.ArrowFunctionExpression)&&e.rest}function s(e,t,n,a){return t.parametricType&&(c.catchup(t.parametricType.range[0],a),n.unshift(t),e(t.parametricType,n,a),n.shift()),t.params.length?(n.unshift(t),e(t.params,n,a),n.shift()):c.catchup(t.rest.range[0]-3,a),c.catchupWhiteSpace(t.rest.range[1],a),n.unshift(t),e(t.body,n,a),n.shift(),!1}function r(e,t){var n=t.localScope.tempVarIndex++,a=t.localScope.tempVarIndex++;return"for (var "+e.rest.name+"=[],"+c.getTempVar(n)+"="+e.params.length+","+c.getTempVar(a)+"=arguments.length;"+c.getTempVar(n)+"<"+c.getTempVar(a)+";"+c.getTempVar(n)+"++) "+e.rest.name+".push(arguments["+c.getTempVar(n)+"]);"}function i(e,t,n,a){c.catchup(t.range[0]+1,a);var s=n[0];return c.append(r(s,a),a),!0}var o=e("esprima-fb").Syntax,c=e("../src/utils");s.test=function(e,t,n){return a(e)},i.test=function(e,t,n){return e.type===o.BlockStatement&&a(t[0])},n.renderRestParamSetup=r,n.visitorList=[s,i]},{"../src/utils":23,"esprima-fb":9}],31:[function(e,t,n){"use strict";function a(e,t,n,a){var s=t.quasis;c.append("(",a);for(var i=0;i<s.length;i++){var u=s[i];if(""!==u.value.raw?(c.append(r(u),a),u.tail||c.append(" + ",a),c.move(u.range[0],a),c.catchupNewlines(u.range[1],a)):i>0&&!u.tail&&c.append(" + ",a),c.move(u.range[1],a),!u.tail){var l=t.expressions[i];l.type===o.Identifier||l.type===o.MemberExpression||l.type===o.CallExpression?c.catchup(l.range[1],a):(c.append("(",a),e(l,n,a),c.catchup(l.range[1],a),c.append(")",a)),""!==s[i+1].value.cooked&&c.append(" + ",a)}}return c.move(t.range[1],a),c.append(")",a),!1}function s(e,t,n,a){var s=t.quasi,o=s.quasis.length;c.move(t.tag.range[0],a),e(t.tag,n,a),c.catchup(t.tag.range[1],a),c.append("(function() { var siteObj = [",a);for(var u=0;o>u;u++)c.append(r(s.quasis[u]),a),u!==o-1&&c.append(", ",a);for(c.append("]; siteObj.raw = [",a),u=0;o>u;u++)c.append(i(s.quasis[u]),a),u!==o-1&&c.append(", ",a);if(c.append("]; Object.freeze(siteObj.raw); Object.freeze(siteObj); return siteObj; }()",a),o>1)for(u=0;u<s.expressions.length;u++){var l=s.expressions[u];c.append(", ",a),c.move(s.quasis[u].range[0],a),c.catchupNewlines(s.quasis[u].range[1],a),c.move(l.range[0],a),e(l,n,a),c.catchup(l.range[1],a)}return c.catchupNewlines(t.range[1],a),c.append(")",a),!1}function r(e){return JSON.stringify(e.value.cooked)}function i(e){return JSON.stringify(e.value.raw)}var o=e("esprima-fb").Syntax,c=e("../src/utils");a.test=function(e,t,n){return e.type===o.TemplateLiteral},s.test=function(e,t,n){return e.type===o.TaggedTemplateExpression},n.visitorList=[a,s]},{"../src/utils":23,"esprima-fb":9}],32:[function(e,t,n){function a(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];a.type!==o.SpreadProperty&&(a.type===o.Identifier?t.push(a.name):t.push(a.key.name))}return t}function s(e,t){return c+"("+e+","+t+")"}function r(e){return s(e,"{}")}function i(e,t){var n=a(t);return n.length?s(e,"{"+n.join(":1,")+":1}"):r(e)}var o=e("esprima-fb").Syntax,c="(function(source, exclusion) {var rest = {};var hasOwn = Object.prototype.hasOwnProperty;if (source == null) {throw new TypeError();}for (var key in source) {if (hasOwn.call(source, key) && !hasOwn.call(exclusion, key)) {rest[key] = source[key];}}return rest;})";n.renderRestExpression=i},{"esprima-fb":9}],33:[function(e,t,n){function a(e,t,n,a){r.catchup(t.range[0],a),r.append("Object.assign({",a),r.move(t.range[0]+1,a);for(var i=!1,o=0;o<t.properties.length;o++){var c=t.properties[o];c.type===s.SpreadProperty?(i||r.append("}",a),0===o&&r.append(",",a),r.catchup(c.range[0],a),r.move(c.range[0]+3,a),e(c.argument,n,a),r.catchup(c.range[1],a),i=!0):(r.catchup(c.range[0],a),i&&r.append("{",a),e(c,n,a),r.catchup(c.range[1],a),i=!1)}return r.catchupWhiteSpace(t.range[1]-1,a),r.move(t.range[1],a),i||r.append("}",a),r.append(")",a),!1}var s=e("esprima-fb").Syntax,r=e("../src/utils");a.test=function(e,t,n){if(e.type!==s.ObjectExpression)return!1;for(var a=!1,r=0;r<e.properties.length;r++){var i=e.properties[r];if(i.type===s.SpreadProperty)a=!0;else if("init"!==i.kind)return!1}return a},n.visitorList=[a]},{"../src/utils":23,"esprima-fb":9}],34:[function(e,t,n){var a=["break","do","in","typeof","case","else","instanceof","var","catch","export","new","void","class","extends","return","while","const","finally","super","with","continue","for","switch","yield","debugger","function","this","default","if","throw","delete","import","try"],s=["enum","await","implements","package","protected","static","interface","private","public"],r=["null","true","false"],i=[].concat(a,s,r),o=Object.create(null);i.forEach(function(e){o[e]=!0});var c=["enum","implements","package","protected","static","interface","private","public"],u=[].concat(a,c,r),l=Object.create(null);u.forEach(function(e){l[e]=!0}),n.isReservedWord=function(e){return!!o[e]},n.isES3ReservedWord=function(e){return!!l[e]}},{}],35:[function(e,t,n){function a(e,t,n,a){return i.catchup(t.key.range[0],a),i.append('"',a),i.catchup(t.key.range[1],a),i.append('"',a),i.catchup(t.value.range[0],a),e(t.value,n,a),!1}function s(e,t,n,a){return e(t.object,n,a),i.catchup(t.property.range[0]-1,a),i.append("[",a),i.catchupWhiteSpace(t.property.range[0],a),i.append('"',a),i.catchup(t.property.range[1],a),i.append('"]',a),!1}var r=e("esprima-fb").Syntax,i=e("../src/utils"),o=e("./reserved-words-helper");a.test=function(e){return e.type===r.Property&&e.key.type===r.Identifier&&!e.method&&!e.shorthand&&!e.computed&&o.isES3ReservedWord(e.key.name)},s.test=function(e){return e.type===r.MemberExpression&&e.property.type===r.Identifier&&o.isES3ReservedWord(e.property.name)},n.visitorList=[a,s]},{"../src/utils":23,"./reserved-words-helper":34,"esprima-fb":9}],36:[function(e,t,n){function a(e){return e.type===b.FunctionDeclaration||e.type===b.FunctionExpression||e.type===b.ArrowFunctionExpression}function s(e,t,n,a){return v.catchup(t.range[0],a),v.catchupWhiteOut(t.range[1],a),!1}function r(e,t,n,a){return v.catchupWhiteOut(t.range[1],a),!1}function i(e,t,n,a){return n.unshift(t),e(t.expression,n,a),n.shift(),v.catchup(t.typeAnnotation.range[0],a),v.catchupWhiteOut(t.typeAnnotation.range[1],a),!1}function o(e,t,n,a){return v.catchupWhiteOut(t.range[1],a),!1}function c(e,t,n,a){return v.catchupWhiteOut(t.range[1],a),!1}function u(e,t,n,a){return v.catchup(t.range[0],a),v.catchupWhiteOut(t.range[1],a),!1}function l(e,t,n,a){return v.catchup(t.range[0],a),v.catchupWhiteOut(t.range[1],a),!1}function m(e,t,n,a){return v.catchup(t.range[0]+t.name.length,a),v.catchupWhiteOut(t.range[1],a),!1}function p(e,t,n,a){return v.catchup(t.typeAnnotation.range[0],a),v.catchupWhiteOut(t.typeAnnotation.range[1],a),!1}function d(e,t,n,a){return v.catchup(t.typeAnnotation.range[0],a),v.catchupWhiteOut(t.typeAnnotation.range[1],a),!1}function h(e,t,n,a){return n.unshift(t),e(t.key,n,a),n.unshift(t.value),e(t.value.params,n,a),t.value.rest&&e(t.value.rest,n,a),t.value.returnType&&e(t.value.returnType,n,a),e(t.value.body,n,a),n.shift(),n.shift(),!1}function f(e,t,n,a){return v.catchupWhiteOut(t.range[1],a),!1}var g=e("esprima-fb"),v=e("../src/utils"),b=g.Syntax;s.test=function(e,t,n){return e.type===b.ClassProperty},r.test=function(e,t,n){return e.type===b.TypeAlias},i.test=function(e,t,n){return e.type===b.TypeCastExpression},o.test=function(e,t,n){return e.type===b.InterfaceDeclaration},c.test=function(e,t,n){switch(e.type){case b.DeclareVariable:case b.DeclareFunction:case b.DeclareClass:case b.DeclareModule:return!0}return!1},u.test=function(e,t,n){return e.type===b.TypeParameterDeclaration&&t[0]&&a(t[0])&&e===t[0].typeParameters},l.test=function(e,t,n){return t[0]&&a(t[0])&&e===t[0].returnType},m.test=function(e,t,n){return e.type===b.Identifier&&e.optional&&t[0]&&a(t[0])},p.test=function(e,t,n){return e.type===b.Identifier&&e.typeAnnotation},d.test=function(e,t,n){var a=e.type===b.ObjectPattern||e.type===b.ArrayPattern;return a&&e.typeAnnotation},h.test=function(e,t,n){return"Property"===e.type&&(e.method||"set"===e.kind||"get"===e.kind)||"MethodDefinition"===e.type},f.test=function(e,t,n){return"ImportDeclaration"===e.type&&e.isType},n.visitorList=[s,c,f,o,u,l,h,m,r,i,p,d]},{"../src/utils":23,"esprima-fb":9}],37:[function(e,t,n){"use strict";function a(e,t,n,a,s){var r=e.value.split(/\r\n|\n|\r/);a&&c.append(a,n);var i=0;r.forEach(function(e,t){e.match(/[^ \t]/)&&(i=t)}),r.forEach(function(e,a){var o=0===a,u=a===r.length-1,l=a===i,m=e.replace(/\t/g," ");o||(m=m.replace(/^[ ]+/,"")),u||(m=m.replace(/[ ]+$/,"")),o||c.append(e.match(/^[ \t]*/)[0],n),(m||l)&&(c.append(JSON.stringify(m)+(l?"":" + ' ' +"),n),l&&(s&&c.append(s,n),t||c.append(", ",n)),m&&!u&&c.append(e.match(/[ \t]*$/)[0],n)),u||c.append("\n",n)}),c.move(e.range[1],n)}function s(e,t,n,a,s){return c.move(t.range[0]+1,s),c.catchup(t.expression.range[0],s),e(t.expression,a,s),n||t.expression.type===o.JSXEmptyExpression||(c.catchup(t.expression.range[1],s,i),c.append(", ",s)),c.catchup(t.range[1]-1,s,i),c.move(t.range[1],s),!1}function r(e){return/^[a-z_$][a-z\d_$]*$/i.test(e)?e:'"'+e+'"'}function i(e){return e.replace(/^[ ]+/,"")}var o=e("jstransform").Syntax,c=e("jstransform/src/utils");n.renderJSXExpressionContainer=s,n.renderJSXLiteral=a,n.quoteAttrName=r,n.trimLeft=i},{jstransform:22,"jstransform/src/utils":23}],38:[function(e,t,n){"use strict";function a(e){return e.replace(p,"")}function s(e){return d.test(e)}function r(e,t,n,r){var p=t.openingElement,d=p.name,h=p.attributes;if(o.catchup(p.range[0],r,m),d.type===i.JSXNamespacedName&&d.namespace)throw new Error("Namespace tags are not supported. ReactJSX is not XML.");o.append("React.createElement(",r),d.type===i.JSXIdentifier&&s(d.name)?(o.append('"'+d.name+'"',r),o.move(d.range[1],r)):(o.move(d.range[0],r),o.catchup(d.range[1],r)),o.append(", ",r);var f=h.length,g=h.some(function(e){return e.type===i.JSXSpreadAttribute});g?o.append("React.__spread({",r):f?o.append("{",r):o.append("null",r);var v=!1;h.forEach(function(t,s){var p=s===h.length-1;if(t.type===i.JSXSpreadAttribute)return v||o.append("}, ",r),o.catchup(t.range[0],r,a),o.move(t.range[0]+1,r),o.catchup(t.argument.range[0],r,a),e(t.argument,n,r),o.catchup(t.argument.range[1],r),o.catchup(t.range[1]-1,r,a),p||o.append(", ",r),o.move(t.range[1],r),void(v=!0);if(p||(p=h[s+1].type===i.JSXSpreadAttribute),t.name.namespace)throw new Error("Namespace attributes are not supported. ReactJSX is not XML.");var d=t.name.name;o.catchup(t.range[0],r,m),v&&o.append("{",r),o.append(l(d),r),o.append(": ",r),t.value?(o.move(t.name.range[1],r),o.catchupNewlines(t.value.range[0],r),t.value.type===i.Literal?u(t.value,p,r):c(e,t.value,p,n,r)):(r.g.buffer+="true",r.g.position=t.name.range[1],p||o.append(", ",r)),o.catchup(t.range[1],r,m),v=!1}),p.selfClosing||(o.catchup(p.range[1]-1,r,m),o.move(p.range[1],r)),f&&!v&&o.append("}",r),g&&o.append(")",r);var b=t.children.filter(function(e){return!(e.type===i.Literal&&"string"==typeof e.value&&e.value.match(/^[ \t]*[\r\n][ \t\r\n]*$/))});if(b.length>0){var y;b.forEach(function(e,t){(e.type!==i.JSXExpressionContainer||e.expression.type!==i.JSXEmptyExpression)&&(y=t)}),void 0!==y&&o.append(", ",r),b.forEach(function(t,a){o.catchup(t.range[0],r,m);var s=a>=y;t.type===i.Literal?u(t,s,r):t.type===i.JSXExpressionContainer?c(e,t,s,n,r):(e(t,n,r),s||o.append(", ",r)),o.catchup(t.range[1],r,m)})}return p.selfClosing?(o.catchup(p.range[1]-2,r,m),o.move(p.range[1],r)):(o.catchup(t.closingElement.range[0],r,m),o.move(t.closingElement.range[1],r)),o.append(")",r),!1}var i=e("jstransform").Syntax,o=e("jstransform/src/utils"),c=e("./jsx").renderJSXExpressionContainer,u=e("./jsx").renderJSXLiteral,l=e("./jsx").quoteAttrName,m=e("./jsx").trimLeft,p=/([^\s\(\)])/g,d=/^[a-z]|\-/;r.test=function(e,t,n){
return e.type===i.JSXElement},n.visitorList=[r]},{"./jsx":37,jstransform:22,"jstransform/src/utils":23}],39:[function(e,t,n){"use strict";function a(e,t,n){if(t&&t.type===r.CallExpression&&t.callee.type===r.MemberExpression&&t.callee.object.type===r.Identifier&&"React"===t.callee.object.name&&t.callee.property.type===r.Identifier&&"createClass"===t.callee.property.name&&1===t.arguments.length&&t.arguments[0].type===r.ObjectExpression){var a=t.arguments[0].properties,s=a.every(function(e){var t=e.key.type===r.Identifier?e.key.name:e.key.value;return"displayName"!==t});s&&(i.catchup(t.arguments[0].range[0]+1,n),i.append('displayName: "'+e+'",',n))}}function s(e,t,n,s){var i,o;t.type===r.AssignmentExpression?(i=t.left,o=t.right):t.type===r.Property?(i=t.key,o=t.value):t.type===r.VariableDeclarator&&(i=t.id,o=t.init),i&&i.type===r.MemberExpression&&(i=i.property),i&&i.type===r.Identifier&&a(i.name,o,s)}var r=e("jstransform").Syntax,i=e("jstransform/src/utils");s.test=function(e,t,n){return e.type===r.AssignmentExpression||e.type===r.Property||e.type===r.VariableDeclarator},n.visitorList=[s]},{jstransform:22,"jstransform/src/utils":23}],40:[function(e,t,n){"use strict";function a(e){for(var t=[],n=0,a=y.length;a>n;n++)e&&-1!==e.indexOf(y[n])||(t=t.concat(v[y[n]]));return t}function s(e){for(var t=e.reduce(function(e,t){if(!b.hasOwnProperty(t))throw new Error("Unknown visitor set: "+t);return b[t].forEach(function(t){e[t]=!0}),e},{}),n=[],a=0;a<y.length;a++)t.hasOwnProperty(y[a])&&(n=n.concat(v[y[a]]));return n}var r=e("jstransform/visitors/es6-arrow-function-visitors"),i=e("jstransform/visitors/es6-class-visitors"),o=e("jstransform/visitors/es6-destructuring-visitors"),c=e("jstransform/visitors/es6-object-concise-method-visitors"),u=e("jstransform/visitors/es6-object-short-notation-visitors"),l=e("jstransform/visitors/es6-rest-param-visitors"),m=e("jstransform/visitors/es6-template-visitors"),p=e("jstransform/visitors/es6-call-spread-visitors"),d=e("jstransform/visitors/es7-spread-property-visitors"),h=e("./transforms/react"),f=e("./transforms/reactDisplayName"),g=e("jstransform/visitors/reserved-words-visitors"),v={"es6-arrow-functions":r.visitorList,"es6-classes":i.visitorList,"es6-destructuring":o.visitorList,"es6-object-concise-method":c.visitorList,"es6-object-short-notation":u.visitorList,"es6-rest-params":l.visitorList,"es6-templates":m.visitorList,"es6-call-spread":p.visitorList,"es7-spread-property":d.visitorList,react:h.visitorList.concat(f.visitorList),"reserved-words":g.visitorList},b={harmony:["es6-arrow-functions","es6-object-concise-method","es6-object-short-notation","es6-classes","es6-rest-params","es6-templates","es6-destructuring","es6-call-spread","es7-spread-property"],es3:["reserved-words"],react:["react"]},y=["reserved-words","es6-arrow-functions","es6-object-concise-method","es6-object-short-notation","es6-classes","es6-rest-params","es6-templates","es6-destructuring","es6-call-spread","es7-spread-property","react"];n.getVisitorsBySet=s,n.getAllVisitors=a,n.transformVisitors=v},{"./transforms/react":38,"./transforms/reactDisplayName":39,"jstransform/visitors/es6-arrow-function-visitors":24,"jstransform/visitors/es6-call-spread-visitors":25,"jstransform/visitors/es6-class-visitors":26,"jstransform/visitors/es6-destructuring-visitors":27,"jstransform/visitors/es6-object-concise-method-visitors":28,"jstransform/visitors/es6-object-short-notation-visitors":29,"jstransform/visitors/es6-rest-param-visitors":30,"jstransform/visitors/es6-template-visitors":31,"jstransform/visitors/es7-spread-property-visitors":33,"jstransform/visitors/reserved-words-visitors":35}],41:[function(e,t,n){"use strict";function a(e,t,n){var a=e;"function"==typeof e.toJSON&&(a=e.toJSON()),a.sources=[n],a.sourcesContent=[t];var r=s(JSON.stringify(a)).toString("base64");return"//# sourceMappingURL=data:portal/json;base64,"+r}var s=e("buffer").Buffer;t.exports=a},{buffer:3}]},{},[1])(1)}),function(e){var t=function(t,n){this.options=n,this.$elementFilestyle=[],this.$element=e(t)};t.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val(""),this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle").val(""),this.$elementFilestyle.remove()},disabled:function(e){if(e===!0)this.options.disabled||(this.$element.attr("disabled","true"),this.$elementFilestyle.find("label").attr("disabled","true"),this.options.disabled=!0);else{if(e!==!1)return this.options.disabled;this.options.disabled&&(this.$element.removeAttr("disabled"),this.$elementFilestyle.find("label").removeAttr("disabled"),this.options.disabled=!1)}},buttonBefore:function(e){if(e===!0)this.options.buttonBefore||(this.options.buttonBefore=!0,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(e!==!1)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=!1,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},icon:function(e){if(e===!0)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(e!==!1)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find(".glyphicon").remove())}},input:function(e){if(e===!0)this.options.input||(this.options.input=!0,this.options.buttonBefore?this.$elementFilestyle.append(this.htmlInput()):this.$elementFilestyle.prepend(this.htmlInput()),this.$elementFilestyle.find(".badge").remove(),this.pushNameFiles(),this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn"));else{if(e!==!1)return this.options.input;if(this.options.input){this.options.input=!1,this.$elementFilestyle.find(":text").remove();var t=this.pushNameFiles();t.length>0&&this.options.badge&&this.$elementFilestyle.find("label").append(' <span class="badge">'+t.length+"</span>"),this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn")}}},size:function(e){if(void 0===e)return this.options.size;var t=this.$elementFilestyle.find("label"),n=this.$elementFilestyle.find("input");t.removeClass("btn-lg btn-sm"),n.removeClass("input-lg input-sm"),"nr"!=e&&(t.addClass("btn-"+e),n.addClass("input-"+e))},buttonText:function(e){return void 0===e?this.options.buttonText:(this.options.buttonText=e,void this.$elementFilestyle.find("label span").html(this.options.buttonText))},buttonName:function(e){return void 0===e?this.options.buttonName:(this.options.buttonName=e,void this.$elementFilestyle.find("label").attr({"class":"btn "+this.options.buttonName}))},iconName:function(e){return void 0===e?this.options.iconName:void this.$elementFilestyle.find(".glyphicon").attr({"class":".glyphicon "+this.options.iconName})},htmlIcon:function(){return this.options.icon?'<span class="glyphicon '+this.options.iconName+'"></span> ':""},htmlInput:function(){return this.options.input?'<input type="text" class="form-control '+("nr"==this.options.size?"":"input-"+this.options.size)+'" disabled> ':""},pushNameFiles:function(){var e="",t=[];void 0===this.$element[0].files?t[0]={name:this.$element[0]&&this.$element[0].value}:t=this.$element[0].files;for(var n=0;n<t.length;n++)e+=t[n].name.split("\\").pop()+", ";return""!==e?this.$elementFilestyle.find(":text").val(e.replace(/\, $/g,"")):this.$elementFilestyle.find(":text").val(""),t},constructor:function(){var t=this,n="",a=t.$element.attr("id"),s="";""!==a&&a||(a="filestyle-"+e(".bootstrap-filestyle").length,t.$element.attr({id:a})),s='<span class="group-span-filestyle '+(t.options.input?"input-group-btn":"")+'"><label for="'+a+'" class="btn '+t.options.buttonName+" "+("nr"==t.options.size?"":"btn-"+t.options.size)+'" '+(t.options.disabled?'disabled="true"':"")+">"+t.htmlIcon()+t.options.buttonText+"</label></span>",n=t.options.buttonBefore?s+t.htmlInput():t.htmlInput()+s,t.$elementFilestyle=e('<div class="bootstrap-filestyle input-group">'+n+"</div>"),t.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress(function(e){return 13===e.keyCode||32===e.charCode?(t.$elementFilestyle.find("label").click(),!1):void 0}),t.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(t.$elementFilestyle),t.options.disabled&&t.$element.attr("disabled","true"),t.$element.change(function(){var e=t.pushNameFiles();0==t.options.input&&t.options.badge?0==t.$elementFilestyle.find(".badge").length?t.$elementFilestyle.find("label").append(' <span class="badge">'+e.length+"</span>"):0==e.length?t.$elementFilestyle.find(".badge").remove():t.$elementFilestyle.find(".badge").html(e.length):t.$elementFilestyle.find(".badge").remove()}),window.navigator.userAgent.search(/firefox/i)>-1&&t.$elementFilestyle.find("label").click(function(){return t.$element.click(),!1})}};var n=e.fn.filestyle;e.fn.filestyle=function(n,a){var s="",r=this.each(function(){if("file"===e(this).attr("type")){var r=e(this),i=r.data("filestyle"),o=e.extend({},e.fn.filestyle.defaults,n,"object"==typeof n&&n);i||(r.data("filestyle",i=new t(this,o)),i.constructor()),"string"==typeof n&&(s=i[n](a))}});return void 0!==typeof s?s:r},e.fn.filestyle.defaults={buttonText:"Choose file",iconName:"glyphicon-folder-open",buttonName:"btn-default",size:"nr",input:!0,badge:!0,icon:!0,buttonBefore:!1,disabled:!1},e.fn.filestyle.noConflict=function(){return e.fn.filestyle=n,this},e(function(){e(".filestyle").each(function(){var t=e(this),n={input:"false"===t.attr("data-input")?!1:!0,icon:"false"===t.attr("data-icon")?!1:!0,buttonBefore:"true"===t.attr("data-buttonBefore")?!0:!1,disabled:"true"===t.attr("data-disabled")?!0:!1,size:t.attr("data-size"),buttonText:t.attr("data-buttonText"),buttonName:t.attr("data-buttonName"),iconName:t.attr("data-iconName"),badge:"false"===t.attr("data-badge")?!1:!0};t.filestyle(n)})})}(window.jQuery);var dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,a=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(s,r,i){var o=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(s)||/\d/.test(s)||(r=s,s=void 0),s=s?new Date(s):new Date,isNaN(s))throw SyntaxError("invalid date");r=String(o.masks[r]||r||o.masks["default"]),"UTC:"==r.slice(0,4)&&(r=r.slice(4),i=!0);var c=i?"getUTC":"get",u=s[c+"Date"](),l=s[c+"Day"](),m=s[c+"Month"](),p=s[c+"FullYear"](),d=s[c+"Hours"](),h=s[c+"Minutes"](),f=s[c+"Seconds"](),g=s[c+"Milliseconds"](),v=i?0:s.getTimezoneOffset(),b={d:u,dd:a(u),ddd:o.i18n.dayNames[l],dddd:o.i18n.dayNames[l+7],m:m+1,mm:a(m+1),mmm:o.i18n.monthNames[m],mmmm:o.i18n.monthNames[m+12],yy:String(p).slice(2),yyyy:p,h:d%12||12,hh:a(d%12||12),H:d,HH:a(d),M:h,MM:a(h),s:f,ss:a(f),l:a(g,3),L:a(g>99?Math.round(g/10):g),t:12>d?"a":"p",tt:12>d?"am":"pm",T:12>d?"A":"P",TT:12>d?"AM":"PM",Z:i?"UTC":(String(s).match(t)||[""]).pop().replace(n,""),o:(v>0?"-":"+")+a(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][u%10>3?0:(u%100-u%10!=10)*u%10]};return r.replace(e,function(e){return e in b?b[e]:e.slice(1,e.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return dateFormat(this,e,t)},!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=se.type(e);return"function"===n||se.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function a(e,t,n){if(se.isFunction(t))return se.grep(e,function(e,a){return!!t.call(e,a,e)!==n});if(t.nodeType)return se.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(pe.test(t))return se.filter(t,e,n);t=se.filter(t,e)}return se.grep(e,function(e){return se.inArray(e,t)>=0!==n})}function s(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function r(e){var t=Ee[e]={};return se.each(e.match(ye)||[],function(e,n){t[n]=!0}),t}function i(){he.addEventListener?(he.removeEventListener("DOMContentLoaded",o,!1),e.removeEventListener("load",o,!1)):(he.detachEvent("onreadystatechange",o),e.detachEvent("onload",o))}function o(){(he.addEventListener||"load"===event.type||"complete"===he.readyState)&&(i(),se.ready())}function c(e,t,n){if(void 0===n&&1===e.nodeType){var a="data-"+t.replace(Ne,"-$1").toLowerCase();if(n=e.getAttribute(a),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:_e.test(n)?se.parseJSON(n):n}catch(s){}se.data(e,t,n)}else n=void 0}return n}function u(e){var t;for(t in e)if(("data"!==t||!se.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(e,t,n,a){if(se.acceptData(e)){var s,r,i=se.expando,o=e.nodeType,c=o?se.cache:e,u=o?e[i]:e[i]&&i;if(u&&c[u]&&(a||c[u].data)||void 0!==n||"string"!=typeof t)return u||(u=o?e[i]=V.pop()||se.guid++:i),c[u]||(c[u]=o?{}:{toJSON:se.noop}),("object"==typeof t||"function"==typeof t)&&(a?c[u]=se.extend(c[u],t):c[u].data=se.extend(c[u].data,t)),r=c[u],a||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[se.camelCase(t)]=n),"string"==typeof t?(s=r[t],null==s&&(s=r[se.camelCase(t)])):s=r,s}}function m(e,t,n){if(se.acceptData(e)){var a,s,r=e.nodeType,i=r?se.cache:e,o=r?e[se.expando]:se.expando;if(i[o]){if(t&&(a=n?i[o]:i[o].data)){se.isArray(t)?t=t.concat(se.map(t,se.camelCase)):t in a?t=[t]:(t=se.camelCase(t),t=t in a?[t]:t.split(" ")),s=t.length;for(;s--;)delete a[t[s]];if(n?!u(a):!se.isEmptyObject(a))return}(n||(delete i[o].data,u(i[o])))&&(r?se.cleanData([e],!0):ne.deleteExpando||i!=i.window?delete i[o]:i[o]=null)}}}function p(){return!0}function d(){return!1}function h(){try{return he.activeElement}catch(e){}}function f(e){var t=Fe.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,a,s=0,r=typeof e.getElementsByTagName!==Se?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Se?e.querySelectorAll(t||"*"):void 0;if(!r)for(r=[],n=e.childNodes||e;null!=(a=n[s]);s++)!t||se.nodeName(a,t)?r.push(a):se.merge(r,g(a,t));return void 0===t||t&&se.nodeName(e,t)?se.merge([e],r):r}function v(e){Me.test(e.type)&&(e.defaultChecked=e.checked)}function b(e,t){return se.nodeName(e,"table")&&se.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==se.find.attr(e,"type"))+"/"+e.type,e}function E(e){var t=Ke.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function R(e,t){for(var n,a=0;null!=(n=e[a]);a++)se._data(n,"globalEval",!t||se._data(t[a],"globalEval"))}function C(e,t){if(1===t.nodeType&&se.hasData(e)){var n,a,s,r=se._data(e),i=se._data(t,r),o=r.events;if(o){delete i.handle,i.events={};for(n in o)for(a=0,s=o[n].length;s>a;a++)se.event.add(t,n,o[n][a])}i.data&&(i.data=se.extend({},i.data))}}function S(e,t){var n,a,s;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ne.noCloneEvent&&t[se.expando]){s=se._data(t);for(a in s.events)se.removeEvent(t,a,s.handle);t.removeAttribute(se.expando)}"script"===n&&t.text!==e.text?(y(t).text=e.text,E(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ne.html5Clone&&e.innerHTML&&!se.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Me.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function _(t,n){var a,s=se(n.createElement(t)).appendTo(n.body),r=e.getDefaultComputedStyle&&(a=e.getDefaultComputedStyle(s[0]))?a.display:se.css(s[0],"display");return s.detach(),r}function N(e){var t=he,n=Ze[e];return n||(n=_(e,t),"none"!==n&&n||(Ge=(Ge||se("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Ge[0].contentWindow||Ge[0].contentDocument).document,t.write(),t.close(),n=_(e,t),Ge.detach()),Ze[e]=n),n}function w(e,t){return{get:function(){var n=e();return null!=n?n?void delete this.get:(this.get=t).apply(this,arguments):void 0}}}function x(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),a=t,s=pt.length;s--;)if(t=pt[s]+n,t in e)return t;return a}function k(e,t){for(var n,a,s,r=[],i=0,o=e.length;o>i;i++)a=e[i],a.style&&(r[i]=se._data(a,"olddisplay"),n=a.style.display,t?(r[i]||"none"!==n||(a.style.display=""),""===a.style.display&&ke(a)&&(r[i]=se._data(a,"olddisplay",N(a.nodeName)))):(s=ke(a),(n&&"none"!==n||!s)&&se._data(a,"olddisplay",s?n:se.css(a,"display"))));for(i=0;o>i;i++)a=e[i],a.style&&(t&&"none"!==a.style.display&&""!==a.style.display||(a.style.display=t?r[i]||"":"none"));return e}function D(e,t,n){var a=ct.exec(t);return a?Math.max(0,a[1]-(n||0))+(a[2]||"px"):t}function M(e,t,n,a,s){for(var r=n===(a?"border":"content")?4:"width"===t?1:0,i=0;4>r;r+=2)"margin"===n&&(i+=se.css(e,n+xe[r],!0,s)),a?("content"===n&&(i-=se.css(e,"padding"+xe[r],!0,s)),"margin"!==n&&(i-=se.css(e,"border"+xe[r]+"Width",!0,s))):(i+=se.css(e,"padding"+xe[r],!0,s),"padding"!==n&&(i+=se.css(e,"border"+xe[r]+"Width",!0,s)));return i}function I(e,t,n){var a=!0,s="width"===t?e.offsetWidth:e.offsetHeight,r=et(e),i=ne.boxSizing&&"border-box"===se.css(e,"boxSizing",!1,r);if(0>=s||null==s){if(s=tt(e,t,r),(0>s||null==s)&&(s=e.style[t]),at.test(s))return s;a=i&&(ne.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+M(e,t,n||(i?"border":"content"),a,r)+"px"}function T(e,t,n,a,s){return new T.prototype.init(e,t,n,a,s)}function P(){return setTimeout(function(){dt=void 0}),dt=se.now()}function O(e,t){var n,a={height:e},s=0;for(t=t?1:0;4>s;s+=2-t)n=xe[s],a["margin"+n]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function A(e,t,n){for(var a,s=(yt[t]||[]).concat(yt["*"]),r=0,i=s.length;i>r;r++)if(a=s[r].call(n,t,e))return a}function F(e,t,n){var a,s,r,i,o,c,u,l,m=this,p={},d=e.style,h=e.nodeType&&ke(e),f=se._data(e,"fxshow");n.queue||(o=se._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,c=o.empty.fire,o.empty.fire=function(){o.unqueued||c()}),o.unqueued++,m.always(function(){m.always(function(){o.unqueued--,se.queue(e,"fx").length||o.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],u=se.css(e,"display"),l="none"===u?se._data(e,"olddisplay")||N(e.nodeName):u,"inline"===l&&"none"===se.css(e,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==N(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ne.shrinkWrapBlocks()||m.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(a in t)if(s=t[a],ft.exec(s)){if(delete t[a],r=r||"toggle"===s,s===(h?"hide":"show")){if("show"!==s||!f||void 0===f[a])continue;h=!0}p[a]=f&&f[a]||se.style(e,a)}else u=void 0;if(se.isEmptyObject(p))"inline"===("none"===u?N(e.nodeName):u)&&(d.display=u);else{f?"hidden"in f&&(h=f.hidden):f=se._data(e,"fxshow",{}),r&&(f.hidden=!h),h?se(e).show():m.done(function(){se(e).hide()}),m.done(function(){var t;se._removeData(e,"fxshow");for(t in p)se.style(e,t,p[t])});for(a in p)i=A(h?f[a]:0,a,m),a in f||(f[a]=i.start,h&&(i.end=i.start,i.start="width"===a||"height"===a?1:0))}}function L(e,t){var n,a,s,r,i;for(n in e)if(a=se.camelCase(n),s=t[a],r=e[n],se.isArray(r)&&(s=r[1],r=e[n]=r[0]),n!==a&&(e[a]=r,delete e[n]),i=se.cssHooks[a],i&&"expand"in i){r=i.expand(r),delete e[a];for(n in r)n in e||(e[n]=r[n],t[n]=s)}else t[a]=s}function U(e,t,n){var a,s,r=0,i=bt.length,o=se.Deferred().always(function(){delete c.elem}),c=function(){if(s)return!1;for(var t=dt||P(),n=Math.max(0,u.startTime+u.duration-t),a=n/u.duration||0,r=1-a,i=0,c=u.tweens.length;c>i;i++)u.tweens[i].run(r);return o.notifyWith(e,[u,r,n]),1>r&&c?n:(o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:se.extend({},t),opts:se.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:dt||P(),duration:n.duration,tweens:[],createTween:function(t,n){var a=se.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(a),a},stop:function(t){var n=0,a=t?u.tweens.length:0;if(s)return this;for(s=!0;a>n;n++)u.tweens[n].run(1);return t?o.resolveWith(e,[u,t]):o.rejectWith(e,[u,t]),this}}),l=u.props;for(L(l,u.opts.specialEasing);i>r;r++)if(a=bt[r].call(u,e,l,u.opts))return a;return se.map(l,A,u),se.isFunction(u.opts.start)&&u.opts.start.call(e,u),se.fx.timer(se.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function $(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var a,s=0,r=t.toLowerCase().match(ye)||[];if(se.isFunction(n))for(;a=r[s++];)"+"===a.charAt(0)?(a=a.slice(1)||"*",(e[a]=e[a]||[]).unshift(n)):(e[a]=e[a]||[]).push(n)}}function q(e,t,n,a){function s(o){var c;return r[o]=!0,se.each(e[o]||[],function(e,o){var u=o(t,n,a);return"string"!=typeof u||i||r[u]?i?!(c=u):void 0:(t.dataTypes.unshift(u),s(u),!1)}),c}var r={},i=e===Wt;return s(t.dataTypes[0])||!r["*"]&&s("*")}function j(e,t){var n,a,s=se.ajaxSettings.flatOptions||{};for(a in t)void 0!==t[a]&&((s[a]?e:n||(n={}))[a]=t[a]);return n&&se.extend(!0,e,n),e}function B(e,t,n){for(var a,s,r,i,o=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===s&&(s=e.mimeType||t.getResponseHeader("Content-Type"));if(s)for(i in o)if(o[i]&&o[i].test(s)){c.unshift(i);break}if(c[0]in n)r=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){r=i;break}a||(a=i)}r=r||a}return r?(r!==c[0]&&c.unshift(r),n[r]):void 0}function W(e,t,n,a){var s,r,i,o,c,u={},l=e.dataTypes.slice();if(l[1])for(i in e.converters)u[i.toLowerCase()]=e.converters[i];for(r=l.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!c&&a&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=r,r=l.shift())if("*"===r)r=c;else if("*"!==c&&c!==r){if(i=u[c+" "+r]||u["* "+r],!i)for(s in u)if(o=s.split(" "),o[1]===r&&(i=u[c+" "+o[0]]||u["* "+o[0]])){i===!0?i=u[s]:u[s]!==!0&&(r=o[0],l.unshift(o[1]));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(m){return{state:"parsererror",error:i?m:"No conversion from "+c+" to "+r}}}return{state:"success",data:t}}function H(e,t,n,a){var s;if(se.isArray(t))se.each(t,function(t,s){n||Kt.test(e)?a(e,s):H(e+"["+("object"==typeof s?t:"")+"]",s,n,a)});else if(n||"object"!==se.type(t))a(e,t);else for(s in t)H(e+"["+s+"]",t[s],n,a)}function z(){try{return new e.XMLHttpRequest}catch(t){}}function J(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function K(e){return se.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var V=[],X=V.slice,Y=V.concat,Q=V.push,G=V.indexOf,Z={},ee=Z.toString,te=Z.hasOwnProperty,ne={},ae="1.11.3",se=function(e,t){return new se.fn.init(e,t)},re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ie=/^-ms-/,oe=/-([\da-z])/gi,ce=function(e,t){return t.toUpperCase()};se.fn=se.prototype={jquery:ae,constructor:se,selector:"",length:0,toArray:function(){return X.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:X.call(this)},pushStack:function(e){var t=se.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return se.each(this,e,t)},map:function(e){return this.pushStack(se.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:V.sort,splice:V.splice},se.extend=se.fn.extend=function(){var e,t,n,a,s,r,i=arguments[0]||{},o=1,c=arguments.length,u=!1;for("boolean"==typeof i&&(u=i,i=arguments[o]||{},o++),"object"==typeof i||se.isFunction(i)||(i={}),o===c&&(i=this,o--);c>o;o++)if(null!=(s=arguments[o]))for(a in s)e=i[a],n=s[a],i!==n&&(u&&n&&(se.isPlainObject(n)||(t=se.isArray(n)))?(t?(t=!1,r=e&&se.isArray(e)?e:[]):r=e&&se.isPlainObject(e)?e:{},i[a]=se.extend(u,r,n)):void 0!==n&&(i[a]=n));return i},se.extend({expando:"jQuery"+(ae+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===se.type(e)},isArray:Array.isArray||function(e){return"array"===se.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!se.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==se.type(e)||e.nodeType||se.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&se.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ie,"ms-").replace(oe,ce)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,a){var s,r=0,i=e.length,o=n(e);if(a){if(o)for(;i>r&&(s=t.apply(e[r],a),s!==!1);r++);else for(r in e)if(s=t.apply(e[r],a),s===!1)break}else if(o)for(;i>r&&(s=t.call(e[r],r,e[r]),s!==!1);r++);else for(r in e)if(s=t.call(e[r],r,e[r]),s===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(re,"")},makeArray:function(e,t){var a=t||[];return null!=e&&(n(Object(e))?se.merge(a,"string"==typeof e?[e]:e):Q.call(a,e)),a},inArray:function(e,t,n){var a;if(t){if(G)return G.call(t,e,n);for(a=t.length,n=n?0>n?Math.max(0,a+n):n:0;a>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,a=0,s=e.length;n>a;)e[s++]=t[a++];if(n!==n)for(;void 0!==t[a];)e[s++]=t[a++];return e.length=s,e},grep:function(e,t,n){for(var a,s=[],r=0,i=e.length,o=!n;i>r;r++)a=!t(e[r],r),a!==o&&s.push(e[r]);return s},map:function(e,t,a){var s,r=0,i=e.length,o=n(e),c=[];if(o)for(;i>r;r++)s=t(e[r],r,a),null!=s&&c.push(s);else for(r in e)s=t(e[r],r,a),null!=s&&c.push(s);return Y.apply([],c)},guid:1,proxy:function(e,t){var n,a,s;return"string"==typeof t&&(s=e[t],t=e,e=s),se.isFunction(e)?(n=X.call(arguments,2),a=function(){return e.apply(t||this,n.concat(X.call(arguments)))},a.guid=e.guid=e.guid||se.guid++,a):void 0},now:function(){return+new Date},support:ne}),se.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ue=function(e){function t(e,t,n,a){var s,r,i,o,c,u,m,d,h,f;if((t?t.ownerDocument||t:q)!==T&&I(t),t=t||T,n=n||[],o=t.nodeType,"string"!=typeof e||!e||1!==o&&9!==o&&11!==o)return n;if(!a&&O){if(11!==o&&(s=be.exec(e)))if(i=s[1]){if(9===o){if(r=t.getElementById(i),!r||!r.parentNode)return n;if(r.id===i)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(i))&&U(t,r)&&r.id===i)return n.push(r),n}else{if(s[2])return G.apply(n,t.getElementsByTagName(e)),n;if((i=s[3])&&R.getElementsByClassName)return G.apply(n,t.getElementsByClassName(i)),n}if(R.qsa&&(!A||!A.test(e))){if(d=m=$,h=t,f=1!==o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(u=N(e),(m=t.getAttribute("id"))?d=m.replace(Ee,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",c=u.length;c--;)u[c]=d+p(u[c]);h=ye.test(e)&&l(t.parentNode)||t,f=u.join(",")}if(f)try{return G.apply(n,h.querySelectorAll(f)),n}catch(g){}finally{m||t.removeAttribute("id")}}}return x(e.replace(ce,"$1"),t,n,a)}function n(){function e(n,a){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=a}var t=[];return e}function a(e){return e[$]=!0,e}function s(e){var t=T.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),a=e.length;a--;)C.attrHandle[n[a]]=t}function i(e,t){var n=t&&e,a=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(a)return a;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function o(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return a(function(t){return t=+t,a(function(n,a){for(var s,r=e([],n.length,t),i=r.length;i--;)n[s=r[i]]&&(n[s]=!(a[s]=n[s]))})})}function l(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function m(){}function p(e){for(var t=0,n=e.length,a="";n>t;t++)a+=e[t].value;return a}function d(e,t,n){var a=t.dir,s=n&&"parentNode"===a,r=B++;return t.first?function(t,n,r){for(;t=t[a];)if(1===t.nodeType||s)return e(t,n,r)}:function(t,n,i){var o,c,u=[j,r];if(i){for(;t=t[a];)if((1===t.nodeType||s)&&e(t,n,i))return!0}else for(;t=t[a];)if(1===t.nodeType||s){if(c=t[$]||(t[$]={}),(o=c[a])&&o[0]===j&&o[1]===r)return u[2]=o[2];if(c[a]=u,u[2]=e(t,n,i))return!0}}}function h(e){return e.length>1?function(t,n,a){for(var s=e.length;s--;)if(!e[s](t,n,a))return!1;return!0}:e[0]}function f(e,n,a){for(var s=0,r=n.length;r>s;s++)t(e,n[s],a);return a}function g(e,t,n,a,s){for(var r,i=[],o=0,c=e.length,u=null!=t;c>o;o++)(r=e[o])&&(!n||n(r,a,s))&&(i.push(r),u&&t.push(o));return i}function v(e,t,n,s,r,i){return s&&!s[$]&&(s=v(s)),r&&!r[$]&&(r=v(r,i)),a(function(a,i,o,c){var u,l,m,p=[],d=[],h=i.length,v=a||f(t||"*",o.nodeType?[o]:o,[]),b=!e||!a&&t?v:g(v,p,e,o,c),y=n?r||(a?e:h||s)?[]:i:b;if(n&&n(b,y,o,c),s)for(u=g(y,d),s(u,[],o,c),l=u.length;l--;)(m=u[l])&&(y[d[l]]=!(b[d[l]]=m));if(a){if(r||e){if(r){for(u=[],l=y.length;l--;)(m=y[l])&&u.push(b[l]=m);r(null,y=[],u,c)}for(l=y.length;l--;)(m=y[l])&&(u=r?ee(a,m):p[l])>-1&&(a[u]=!(i[u]=m))}}else y=g(y===i?y.splice(h,y.length):y),r?r(null,i,y,c):G.apply(i,y)})}function b(e){for(var t,n,a,s=e.length,r=C.relative[e[0].type],i=r||C.relative[" "],o=r?1:0,c=d(function(e){return e===t},i,!0),u=d(function(e){return ee(t,e)>-1},i,!0),l=[function(e,n,a){var s=!r&&(a||n!==k)||((t=n).nodeType?c(e,n,a):u(e,n,a));return t=null,s}];s>o;o++)if(n=C.relative[e[o].type])l=[d(h(l),n)];else{if(n=C.filter[e[o].type].apply(null,e[o].matches),n[$]){for(a=++o;s>a&&!C.relative[e[a].type];a++);return v(o>1&&h(l),o>1&&p(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(ce,"$1"),n,a>o&&b(e.slice(o,a)),s>a&&b(e=e.slice(a)),s>a&&p(e))}l.push(n)}return h(l)}function y(e,n){var s=n.length>0,r=e.length>0,i=function(a,i,o,c,u){var l,m,p,d=0,h="0",f=a&&[],v=[],b=k,y=a||r&&C.find.TAG("*",u),E=j+=null==b?1:Math.random()||.1,R=y.length;for(u&&(k=i!==T&&i);h!==R&&null!=(l=y[h]);h++){if(r&&l){for(m=0;p=e[m++];)if(p(l,i,o)){c.push(l);break}u&&(j=E)}s&&((l=!p&&l)&&d--,a&&f.push(l))}if(d+=h,s&&h!==d){for(m=0;p=n[m++];)p(f,v,i,o);if(a){if(d>0)for(;h--;)f[h]||v[h]||(v[h]=Y.call(c));v=g(v)}G.apply(c,v),u&&!a&&v.length>0&&d+n.length>1&&t.uniqueSort(c)}return u&&(j=E,k=b),f};return s?a(i):i}var E,R,C,S,_,N,w,x,k,D,M,I,T,P,O,A,F,L,U,$="sizzle"+1*new Date,q=e.document,j=0,B=0,W=n(),H=n(),z=n(),J=function(e,t){return e===t&&(M=!0),0},K=1<<31,V={}.hasOwnProperty,X=[],Y=X.pop,Q=X.push,G=X.push,Z=X.slice,ee=function(e,t){
for(var n=0,a=e.length;a>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ae="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",se=ae.replace("w","w#"),re="\\["+ne+"*("+ae+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+se+"))|)"+ne+"*\\]",ie=":("+ae+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",oe=new RegExp(ne+"+","g"),ce=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),me=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),pe=new RegExp(ie),de=new RegExp("^"+se+"$"),he={ID:new RegExp("^#("+ae+")"),CLASS:new RegExp("^\\.("+ae+")"),TAG:new RegExp("^("+ae.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,Ee=/'|\\/g,Re=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Ce=function(e,t,n){var a="0x"+t-65536;return a!==a||n?t:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320)},Se=function(){I()};try{G.apply(X=Z.call(q.childNodes),q.childNodes),X[q.childNodes.length].nodeType}catch(_e){G={apply:X.length?function(e,t){Q.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,a=0;e[n++]=t[a++];);e.length=n-1}}}R=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},I=t.setDocument=function(e){var t,n,a=e?e.ownerDocument||e:q;return a!==T&&9===a.nodeType&&a.documentElement?(T=a,P=a.documentElement,n=a.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),O=!_(a),R.attributes=s(function(e){return e.className="i",!e.getAttribute("className")}),R.getElementsByTagName=s(function(e){return e.appendChild(a.createComment("")),!e.getElementsByTagName("*").length}),R.getElementsByClassName=ve.test(a.getElementsByClassName),R.getById=s(function(e){return P.appendChild(e).id=$,!a.getElementsByName||!a.getElementsByName($).length}),R.getById?(C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(Re,Ce);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(Re,Ce);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=R.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):R.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,a=[],s=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[s++];)1===n.nodeType&&a.push(n);return a}return r},C.find.CLASS=R.getElementsByClassName&&function(e,t){return O?t.getElementsByClassName(e):void 0},F=[],A=[],(R.qsa=ve.test(a.querySelectorAll))&&(s(function(e){P.appendChild(e).innerHTML="<a id='"+$+"'></a><select id='"+$+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&A.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||A.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+$+"-]").length||A.push("~="),e.querySelectorAll(":checked").length||A.push(":checked"),e.querySelectorAll("a#"+$+"+*").length||A.push(".#.+[+~]")}),s(function(e){var t=a.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&A.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),A.push(",.*:")})),(R.matchesSelector=ve.test(L=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&s(function(e){R.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),F.push("!=",ie)}),A=A.length&&new RegExp(A.join("|")),F=F.length&&new RegExp(F.join("|")),t=ve.test(P.compareDocumentPosition),U=t||ve.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,a=t&&t.parentNode;return e===a||!(!a||1!==a.nodeType||!(n.contains?n.contains(a):e.compareDocumentPosition&&16&e.compareDocumentPosition(a)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},J=t?function(e,t){if(e===t)return M=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!R.sortDetached&&t.compareDocumentPosition(e)===n?e===a||e.ownerDocument===q&&U(q,e)?-1:t===a||t.ownerDocument===q&&U(q,t)?1:D?ee(D,e)-ee(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return M=!0,0;var n,s=0,r=e.parentNode,o=t.parentNode,c=[e],u=[t];if(!r||!o)return e===a?-1:t===a?1:r?-1:o?1:D?ee(D,e)-ee(D,t):0;if(r===o)return i(e,t);for(n=e;n=n.parentNode;)c.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;c[s]===u[s];)s++;return s?i(c[s],u[s]):c[s]===q?-1:u[s]===q?1:0},a):T},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==T&&I(e),n=n.replace(me,"='$1']"),!(!R.matchesSelector||!O||F&&F.test(n)||A&&A.test(n)))try{var a=L.call(e,n);if(a||R.disconnectedMatch||e.document&&11!==e.document.nodeType)return a}catch(s){}return t(n,T,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==T&&I(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==T&&I(e);var n=C.attrHandle[t.toLowerCase()],a=n&&V.call(C.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==a?a:R.attributes||!O?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],a=0,s=0;if(M=!R.detectDuplicates,D=!R.sortStable&&e.slice(0),e.sort(J),M){for(;t=e[s++];)t===e[s]&&(a=n.push(s));for(;a--;)e.splice(n[a],1)}return D=null,e},S=t.getText=function(e){var t,n="",a=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[a++];)n+=S(t);return n},C=t.selectors={cacheLength:50,createPseudo:a,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Re,Ce),e[3]=(e[3]||e[4]||e[5]||"").replace(Re,Ce),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pe.test(n)&&(t=N(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Re,Ce).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,a){return function(s){var r=t.attr(s,e);return null==r?"!="===n:n?(r+="","="===n?r===a:"!="===n?r!==a:"^="===n?a&&0===r.indexOf(a):"*="===n?a&&r.indexOf(a)>-1:"$="===n?a&&r.slice(-a.length)===a:"~="===n?(" "+r.replace(oe," ")+" ").indexOf(a)>-1:"|="===n?r===a||r.slice(0,a.length+1)===a+"-":!1):!0}},CHILD:function(e,t,n,a,s){var r="nth"!==e.slice(0,3),i="last"!==e.slice(-4),o="of-type"===t;return 1===a&&0===s?function(e){return!!e.parentNode}:function(t,n,c){var u,l,m,p,d,h,f=r!==i?"nextSibling":"previousSibling",g=t.parentNode,v=o&&t.nodeName.toLowerCase(),b=!c&&!o;if(g){if(r){for(;f;){for(m=t;m=m[f];)if(o?m.nodeName.toLowerCase()===v:1===m.nodeType)return!1;h=f="only"===e&&!h&&"nextSibling"}return!0}if(h=[i?g.firstChild:g.lastChild],i&&b){for(l=g[$]||(g[$]={}),u=l[e]||[],d=u[0]===j&&u[1],p=u[0]===j&&u[2],m=d&&g.childNodes[d];m=++d&&m&&m[f]||(p=d=0)||h.pop();)if(1===m.nodeType&&++p&&m===t){l[e]=[j,d,p];break}}else if(b&&(u=(t[$]||(t[$]={}))[e])&&u[0]===j)p=u[1];else for(;(m=++d&&m&&m[f]||(p=d=0)||h.pop())&&((o?m.nodeName.toLowerCase()!==v:1!==m.nodeType)||!++p||(b&&((m[$]||(m[$]={}))[e]=[j,p]),m!==t)););return p-=s,p===a||p%a===0&&p/a>=0}}},PSEUDO:function(e,n){var s,r=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[$]?r(n):r.length>1?(s=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?a(function(e,t){for(var a,s=r(e,n),i=s.length;i--;)a=ee(e,s[i]),e[a]=!(t[a]=s[i])}):function(e){return r(e,0,s)}):r}},pseudos:{not:a(function(e){var t=[],n=[],s=w(e.replace(ce,"$1"));return s[$]?a(function(e,t,n,a){for(var r,i=s(e,null,a,[]),o=e.length;o--;)(r=i[o])&&(e[o]=!(t[o]=r))}):function(e,a,r){return t[0]=e,s(t,null,r,n),t[0]=null,!n.pop()}}),has:a(function(e){return function(n){return t(e,n).length>0}}),contains:a(function(e){return e=e.replace(Re,Ce),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:a(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Re,Ce).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var a=0>n?n+t:n;--a>=0;)e.push(a);return e}),gt:u(function(e,t,n){for(var a=0>n?n+t:n;++a<t;)e.push(a);return e})}},C.pseudos.nth=C.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[E]=o(E);for(E in{submit:!0,reset:!0})C.pseudos[E]=c(E);return m.prototype=C.filters=C.pseudos,C.setFilters=new m,N=t.tokenize=function(e,n){var a,s,r,i,o,c,u,l=H[e+" "];if(l)return n?0:l.slice(0);for(o=e,c=[],u=C.preFilter;o;){(!a||(s=ue.exec(o)))&&(s&&(o=o.slice(s[0].length)||o),c.push(r=[])),a=!1,(s=le.exec(o))&&(a=s.shift(),r.push({value:a,type:s[0].replace(ce," ")}),o=o.slice(a.length));for(i in C.filter)!(s=he[i].exec(o))||u[i]&&!(s=u[i](s))||(a=s.shift(),r.push({value:a,type:i,matches:s}),o=o.slice(a.length));if(!a)break}return n?o.length:o?t.error(e):H(e,c).slice(0)},w=t.compile=function(e,t){var n,a=[],s=[],r=z[e+" "];if(!r){for(t||(t=N(e)),n=t.length;n--;)r=b(t[n]),r[$]?a.push(r):s.push(r);r=z(e,y(s,a)),r.selector=e}return r},x=t.select=function(e,t,n,a){var s,r,i,o,c,u="function"==typeof e&&e,m=!a&&N(e=u.selector||e);if(n=n||[],1===m.length){if(r=m[0]=m[0].slice(0),r.length>2&&"ID"===(i=r[0]).type&&R.getById&&9===t.nodeType&&O&&C.relative[r[1].type]){if(t=(C.find.ID(i.matches[0].replace(Re,Ce),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(s=he.needsContext.test(e)?0:r.length;s--&&(i=r[s],!C.relative[o=i.type]);)if((c=C.find[o])&&(a=c(i.matches[0].replace(Re,Ce),ye.test(r[0].type)&&l(t.parentNode)||t))){if(r.splice(s,1),e=a.length&&p(r),!e)return G.apply(n,a),n;break}}return(u||w(e,m))(a,t,!O,n,ye.test(e)&&l(t.parentNode)||t),n},R.sortStable=$.split("").sort(J).join("")===$,R.detectDuplicates=!!M,I(),R.sortDetached=s(function(e){return 1&e.compareDocumentPosition(T.createElement("div"))}),s(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),R.attributes&&s(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),s(function(e){return null==e.getAttribute("disabled")})||r(te,function(e,t,n){var a;return n?void 0:e[t]===!0?t.toLowerCase():(a=e.getAttributeNode(t))&&a.specified?a.value:null}),t}(e);se.find=ue,se.expr=ue.selectors,se.expr[":"]=se.expr.pseudos,se.unique=ue.uniqueSort,se.text=ue.getText,se.isXMLDoc=ue.isXML,se.contains=ue.contains;var le=se.expr.match.needsContext,me=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pe=/^.[^:#\[\.,]*$/;se.filter=function(e,t,n){var a=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===a.nodeType?se.find.matchesSelector(a,e)?[a]:[]:se.find.matches(e,se.grep(t,function(e){return 1===e.nodeType}))},se.fn.extend({find:function(e){var t,n=[],a=this,s=a.length;if("string"!=typeof e)return this.pushStack(se(e).filter(function(){for(t=0;s>t;t++)if(se.contains(a[t],this))return!0}));for(t=0;s>t;t++)se.find(e,a[t],n);return n=this.pushStack(s>1?se.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(a(this,e||[],!1))},not:function(e){return this.pushStack(a(this,e||[],!0))},is:function(e){return!!a(this,"string"==typeof e&&le.test(e)?se(e):e||[],!1).length}});var de,he=e.document,fe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=se.fn.init=function(e,t){var n,a;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:fe.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||de).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof se?t[0]:t,se.merge(this,se.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:he,!0)),me.test(n[1])&&se.isPlainObject(t))for(n in t)se.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(a=he.getElementById(n[2]),a&&a.parentNode){if(a.id!==n[2])return de.find(e);this.length=1,this[0]=a}return this.context=he,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):se.isFunction(e)?"undefined"!=typeof de.ready?de.ready(e):e(se):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),se.makeArray(e,this))};ge.prototype=se.fn,de=se(he);var ve=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};se.extend({dir:function(e,t,n){for(var a=[],s=e[t];s&&9!==s.nodeType&&(void 0===n||1!==s.nodeType||!se(s).is(n));)1===s.nodeType&&a.push(s),s=s[t];return a},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),se.fn.extend({has:function(e){var t,n=se(e,this),a=n.length;return this.filter(function(){for(t=0;a>t;t++)if(se.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,a=0,s=this.length,r=[],i=le.test(e)||"string"!=typeof e?se(e,t||this.context):0;s>a;a++)for(n=this[a];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(i?i.index(n)>-1:1===n.nodeType&&se.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?se.unique(r):r)},index:function(e){return e?"string"==typeof e?se.inArray(this[0],se(e)):se.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(se.unique(se.merge(this.get(),se(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),se.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return se.dir(e,"parentNode")},parentsUntil:function(e,t,n){return se.dir(e,"parentNode",n)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return se.dir(e,"nextSibling")},prevAll:function(e){return se.dir(e,"previousSibling")},nextUntil:function(e,t,n){return se.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return se.dir(e,"previousSibling",n)},siblings:function(e){return se.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return se.sibling(e.firstChild)},contents:function(e){return se.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:se.merge([],e.childNodes)}},function(e,t){se.fn[e]=function(n,a){var s=se.map(this,t,n);return"Until"!==e.slice(-5)&&(a=n),a&&"string"==typeof a&&(s=se.filter(a,s)),this.length>1&&(be[e]||(s=se.unique(s)),ve.test(e)&&(s=s.reverse())),this.pushStack(s)}});var ye=/\S+/g,Ee={};se.Callbacks=function(e){e="string"==typeof e?Ee[e]||r(e):se.extend({},e);var t,n,a,s,i,o,c=[],u=!e.once&&[],l=function(r){for(n=e.memory&&r,a=!0,i=o||0,o=0,s=c.length,t=!0;c&&s>i;i++)if(c[i].apply(r[0],r[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,c&&(u?u.length&&l(u.shift()):n?c=[]:m.disable())},m={add:function(){if(c){var a=c.length;!function r(t){se.each(t,function(t,n){var a=se.type(n);"function"===a?e.unique&&m.has(n)||c.push(n):n&&n.length&&"string"!==a&&r(n)})}(arguments),t?s=c.length:n&&(o=a,l(n))}return this},remove:function(){return c&&se.each(arguments,function(e,n){for(var a;(a=se.inArray(n,c,a))>-1;)c.splice(a,1),t&&(s>=a&&s--,i>=a&&i--)}),this},has:function(e){return e?se.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],s=0,this},disable:function(){return c=u=n=void 0,this},disabled:function(){return!c},lock:function(){return u=void 0,n||m.disable(),this},locked:function(){return!u},fireWith:function(e,n){return!c||a&&!u||(n=n||[],n=[e,n.slice?n.slice():n],t?u.push(n):l(n)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!a}};return m},se.extend({Deferred:function(e){var t=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],n="pending",a={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return se.Deferred(function(n){se.each(t,function(t,r){var i=se.isFunction(e[t])&&e[t];s[r[1]](function(){var e=i&&i.apply(this,arguments);e&&se.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===a?n.promise():this,i?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?se.extend(e,a):a}},s={};return a.pipe=a.then,se.each(t,function(e,r){var i=r[2],o=r[3];a[r[1]]=i.add,o&&i.add(function(){n=o},t[1^e][2].disable,t[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?a:this,arguments),this},s[r[0]+"With"]=i.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var t,n,a,s=0,r=X.call(arguments),i=r.length,o=1!==i||e&&se.isFunction(e.promise)?i:0,c=1===o?e:se.Deferred(),u=function(e,n,a){return function(s){n[e]=this,a[e]=arguments.length>1?X.call(arguments):s,a===t?c.notifyWith(n,a):--o||c.resolveWith(n,a)}};if(i>1)for(t=new Array(i),n=new Array(i),a=new Array(i);i>s;s++)r[s]&&se.isFunction(r[s].promise)?r[s].promise().done(u(s,a,r)).fail(c.reject).progress(u(s,n,t)):--o;return o||c.resolveWith(a,r),c.promise()}});var Re;se.fn.ready=function(e){return se.ready.promise().done(e),this},se.extend({isReady:!1,readyWait:1,holdReady:function(e){e?se.readyWait++:se.ready(!0)},ready:function(e){if(e===!0?!--se.readyWait:!se.isReady){if(!he.body)return setTimeout(se.ready);se.isReady=!0,e!==!0&&--se.readyWait>0||(Re.resolveWith(he,[se]),se.fn.triggerHandler&&(se(he).triggerHandler("ready"),se(he).off("ready")))}}}),se.ready.promise=function(t){if(!Re)if(Re=se.Deferred(),"complete"===he.readyState)setTimeout(se.ready);else if(he.addEventListener)he.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",o,!1);else{he.attachEvent("onreadystatechange",o),e.attachEvent("onload",o);var n=!1;try{n=null==e.frameElement&&he.documentElement}catch(a){}n&&n.doScroll&&!function s(){if(!se.isReady){try{n.doScroll("left")}catch(e){return setTimeout(s,50)}i(),se.ready()}}()}return Re.promise(t)};var Ce,Se="undefined";for(Ce in se(ne))break;ne.ownLast="0"!==Ce,ne.inlineBlockNeedsLayout=!1,se(function(){var e,t,n,a;n=he.getElementsByTagName("body")[0],n&&n.style&&(t=he.createElement("div"),a=he.createElement("div"),a.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(a).appendChild(t),typeof t.style.zoom!==Se&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(a))}),function(){var e=he.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(t){ne.deleteExpando=!1}}e=null}(),se.acceptData=function(e){var t=se.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var _e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ne=/([A-Z])/g;se.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?se.cache[e[se.expando]]:e[se.expando],!!e&&!u(e)},data:function(e,t,n){return l(e,t,n)},removeData:function(e,t){return m(e,t)},_data:function(e,t,n){return l(e,t,n,!0)},_removeData:function(e,t){return m(e,t,!0)}}),se.fn.extend({data:function(e,t){var n,a,s,r=this[0],i=r&&r.attributes;if(void 0===e){if(this.length&&(s=se.data(r),1===r.nodeType&&!se._data(r,"parsedAttrs"))){for(n=i.length;n--;)i[n]&&(a=i[n].name,0===a.indexOf("data-")&&(a=se.camelCase(a.slice(5)),c(r,a,s[a])));se._data(r,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){se.data(this,e)}):arguments.length>1?this.each(function(){se.data(this,e,t)}):r?c(r,e,se.data(r,e)):void 0},removeData:function(e){return this.each(function(){se.removeData(this,e)})}}),se.extend({queue:function(e,t,n){var a;return e?(t=(t||"fx")+"queue",a=se._data(e,t),n&&(!a||se.isArray(n)?a=se._data(e,t,se.makeArray(n)):a.push(n)),a||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=se.queue(e,t),a=n.length,s=n.shift(),r=se._queueHooks(e,t),i=function(){se.dequeue(e,t)};"inprogress"===s&&(s=n.shift(),a--),s&&("fx"===t&&n.unshift("inprogress"),delete r.stop,s.call(e,i,r)),!a&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return se._data(e,n)||se._data(e,n,{empty:se.Callbacks("once memory").add(function(){se._removeData(e,t+"queue"),se._removeData(e,n)})})}}),se.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?se.queue(this[0],e):void 0===t?this:this.each(function(){var n=se.queue(this,e,t);se._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&se.dequeue(this,e)})},dequeue:function(e){return this.each(function(){se.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,a=1,s=se.Deferred(),r=this,i=this.length,o=function(){--a||s.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)n=se._data(r[i],e+"queueHooks"),n&&n.empty&&(a++,n.empty.add(o));return o(),s.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xe=["Top","Right","Bottom","Left"],ke=function(e,t){return e=t||e,"none"===se.css(e,"display")||!se.contains(e.ownerDocument,e)},De=se.access=function(e,t,n,a,s,r,i){var o=0,c=e.length,u=null==n;if("object"===se.type(n)){s=!0;for(o in n)se.access(e,t,o,n[o],!0,r,i)}else if(void 0!==a&&(s=!0,se.isFunction(a)||(i=!0),u&&(i?(t.call(e,a),t=null):(u=t,t=function(e,t,n){return u.call(se(e),n)})),t))for(;c>o;o++)t(e[o],n,i?a:a.call(e[o],o,t(e[o],n)));return s?e:u?t.call(e):c?t(e[0],n):r},Me=/^(?:checkbox|radio)$/i;!function(){var e=he.createElement("input"),t=he.createElement("div"),n=he.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===t.firstChild.nodeType,ne.tbody=!t.getElementsByTagName("tbody").length,ne.htmlSerialize=!!t.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==he.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),ne.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ne.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(a){ne.deleteExpando=!1}}}(),function(){var t,n,a=he.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(ne[t+"Bubbles"]=n in e)||(a.setAttribute(n,"t"),ne[t+"Bubbles"]=a.attributes[n].expando===!1);a=null}();var Ie=/^(?:input|select|textarea)$/i,Te=/^key/,Pe=/^(?:mouse|pointer|contextmenu)|click/,Oe=/^(?:focusinfocus|focusoutblur)$/,Ae=/^([^.]*)(?:\.(.+)|)$/;se.event={global:{},add:function(e,t,n,a,s){var r,i,o,c,u,l,m,p,d,h,f,g=se._data(e);if(g){for(n.handler&&(c=n,n=c.handler,s=c.selector),n.guid||(n.guid=se.guid++),(i=g.events)||(i=g.events={}),(l=g.handle)||(l=g.handle=function(e){return typeof se===Se||e&&se.event.triggered===e.type?void 0:se.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(ye)||[""],o=t.length;o--;)r=Ae.exec(t[o])||[],d=f=r[1],h=(r[2]||"").split(".").sort(),d&&(u=se.event.special[d]||{},d=(s?u.delegateType:u.bindType)||d,u=se.event.special[d]||{},m=se.extend({type:d,origType:f,data:a,handler:n,guid:n.guid,selector:s,needsContext:s&&se.expr.match.needsContext.test(s),namespace:h.join(".")},c),(p=i[d])||(p=i[d]=[],p.delegateCount=0,u.setup&&u.setup.call(e,a,h,l)!==!1||(e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l))),u.add&&(u.add.call(e,m),m.handler.guid||(m.handler.guid=n.guid)),s?p.splice(p.delegateCount++,0,m):p.push(m),se.event.global[d]=!0);e=null}},remove:function(e,t,n,a,s){var r,i,o,c,u,l,m,p,d,h,f,g=se.hasData(e)&&se._data(e);if(g&&(l=g.events)){for(t=(t||"").match(ye)||[""],u=t.length;u--;)if(o=Ae.exec(t[u])||[],d=f=o[1],h=(o[2]||"").split(".").sort(),d){for(m=se.event.special[d]||{},d=(a?m.delegateType:m.bindType)||d,p=l[d]||[],o=o[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=r=p.length;r--;)i=p[r],!s&&f!==i.origType||n&&n.guid!==i.guid||o&&!o.test(i.namespace)||a&&a!==i.selector&&("**"!==a||!i.selector)||(p.splice(r,1),i.selector&&p.delegateCount--,m.remove&&m.remove.call(e,i));c&&!p.length&&(m.teardown&&m.teardown.call(e,h,g.handle)!==!1||se.removeEvent(e,d,g.handle),delete l[d])}else for(d in l)se.event.remove(e,d+t[u],n,a,!0);se.isEmptyObject(l)&&(delete g.handle,se._removeData(e,"events"))}},trigger:function(t,n,a,s){var r,i,o,c,u,l,m,p=[a||he],d=te.call(t,"type")?t.type:t,h=te.call(t,"namespace")?t.namespace.split("."):[];if(o=l=a=a||he,3!==a.nodeType&&8!==a.nodeType&&!Oe.test(d+se.event.triggered)&&(d.indexOf(".")>=0&&(h=d.split("."),d=h.shift(),h.sort()),i=d.indexOf(":")<0&&"on"+d,t=t[se.expando]?t:new se.Event(d,"object"==typeof t&&t),t.isTrigger=s?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=a),n=null==n?[t]:se.makeArray(n,[t]),u=se.event.special[d]||{},s||!u.trigger||u.trigger.apply(a,n)!==!1)){if(!s&&!u.noBubble&&!se.isWindow(a)){for(c=u.delegateType||d,Oe.test(c+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),l=o;l===(a.ownerDocument||he)&&p.push(l.defaultView||l.parentWindow||e)}for(m=0;(o=p[m++])&&!t.isPropagationStopped();)t.type=m>1?c:u.bindType||d,r=(se._data(o,"events")||{})[t.type]&&se._data(o,"handle"),r&&r.apply(o,n),r=i&&o[i],r&&r.apply&&se.acceptData(o)&&(t.result=r.apply(o,n),t.result===!1&&t.preventDefault());if(t.type=d,!s&&!t.isDefaultPrevented()&&(!u._default||u._default.apply(p.pop(),n)===!1)&&se.acceptData(a)&&i&&a[d]&&!se.isWindow(a)){l=a[i],l&&(a[i]=null),se.event.triggered=d;try{a[d]()}catch(f){}se.event.triggered=void 0,l&&(a[i]=l)}return t.result}},dispatch:function(e){e=se.event.fix(e);var t,n,a,s,r,i=[],o=X.call(arguments),c=(se._data(this,"events")||{})[e.type]||[],u=se.event.special[e.type]||{};if(o[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(i=se.event.handlers.call(this,e,c),t=0;(s=i[t++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,r=0;(a=s.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,n=((se.event.special[a.origType]||{}).handle||a.handler).apply(s.elem,o),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,a,s,r,i=[],o=t.delegateCount,c=e.target;if(o&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(s=[],r=0;o>r;r++)a=t[r],n=a.selector+" ",void 0===s[n]&&(s[n]=a.needsContext?se(n,this).index(c)>=0:se.find(n,this,null,[c]).length),s[n]&&s.push(a);s.length&&i.push({elem:c,handlers:s})}return o<t.length&&i.push({elem:this,handlers:t.slice(o)}),i},fix:function(e){if(e[se.expando])return e;var t,n,a,s=e.type,r=e,i=this.fixHooks[s];for(i||(this.fixHooks[s]=i=Pe.test(s)?this.mouseHooks:Te.test(s)?this.keyHooks:{}),a=i.props?this.props.concat(i.props):this.props,e=new se.Event(r),t=a.length;t--;)n=a[t],e[n]=r[n];return e.target||(e.target=r.srcElement||he),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,a,s,r=t.button,i=t.fromElement;return null==e.pageX&&null!=t.clientX&&(a=e.target.ownerDocument||he,s=a.documentElement,n=a.body,e.pageX=t.clientX+(s&&s.scrollLeft||n&&n.scrollLeft||0)-(s&&s.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(s&&s.scrollTop||n&&n.scrollTop||0)-(s&&s.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&i&&(e.relatedTarget=i===e.target?t.toElement:i),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return se.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),
!1):void 0},_default:function(e){return se.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,a){var s=se.extend(new se.Event,n,{type:e,isSimulated:!0,originalEvent:{}});a?se.event.trigger(s,null,t):se.event.dispatch.call(t,s),s.isDefaultPrevented()&&n.preventDefault()}},se.removeEvent=he.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var a="on"+t;e.detachEvent&&(typeof e[a]===Se&&(e[a]=null),e.detachEvent(a,n))},se.Event=function(e,t){return this instanceof se.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?p:d):this.type=e,t&&se.extend(this,t),this.timeStamp=e&&e.timeStamp||se.now(),void(this[se.expando]=!0)):new se.Event(e,t)},se.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){se.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,a=this,s=e.relatedTarget,r=e.handleObj;return(!s||s!==a&&!se.contains(a,s))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),ne.submitBubbles||(se.event.special.submit={setup:function(){return se.nodeName(this,"form")?!1:void se.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=se.nodeName(t,"input")||se.nodeName(t,"button")?t.form:void 0;n&&!se._data(n,"submitBubbles")&&(se.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),se._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&se.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return se.nodeName(this,"form")?!1:void se.event.remove(this,"._submit")}}),ne.changeBubbles||(se.event.special.change={setup:function(){return Ie.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(se.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),se.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),se.event.simulate("change",this,e,!0)})),!1):void se.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ie.test(t.nodeName)&&!se._data(t,"changeBubbles")&&(se.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||se.event.simulate("change",this.parentNode,e,!0)}),se._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return se.event.remove(this,"._change"),!Ie.test(this.nodeName)}}),ne.focusinBubbles||se.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){se.event.simulate(t,e.target,se.event.fix(e),!0)};se.event.special[t]={setup:function(){var a=this.ownerDocument||this,s=se._data(a,t);s||a.addEventListener(e,n,!0),se._data(a,t,(s||0)+1)},teardown:function(){var a=this.ownerDocument||this,s=se._data(a,t)-1;s?se._data(a,t,s):(a.removeEventListener(e,n,!0),se._removeData(a,t))}}}),se.fn.extend({on:function(e,t,n,a,s){var r,i;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(r in e)this.on(r,t,n,e[r],s);return this}if(null==n&&null==a?(a=t,n=t=void 0):null==a&&("string"==typeof t?(a=n,n=void 0):(a=n,n=t,t=void 0)),a===!1)a=d;else if(!a)return this;return 1===s&&(i=a,a=function(e){return se().off(e),i.apply(this,arguments)},a.guid=i.guid||(i.guid=se.guid++)),this.each(function(){se.event.add(this,e,a,n,t)})},one:function(e,t,n,a){return this.on(e,t,n,a,1)},off:function(e,t,n){var a,s;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,se(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=d),this.each(function(){se.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){se.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?se.event.trigger(e,t,n,!0):void 0}});var Fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Le=/ jQuery\d+="(?:null|\d+)"/g,Ue=new RegExp("<(?:"+Fe+")[\\s/>]","i"),$e=/^\s+/,qe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,je=/<([\w:]+)/,Be=/<tbody/i,We=/<|&#?\w+;/,He=/<(?:script|style|link)/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,Je=/^$|\/(?:java|ecma)script/i,Ke=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ye=f(he),Qe=Ye.appendChild(he.createElement("div"));Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td,se.extend({clone:function(e,t,n){var a,s,r,i,o,c=se.contains(e.ownerDocument,e);if(ne.html5Clone||se.isXMLDoc(e)||!Ue.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(Qe.innerHTML=e.outerHTML,Qe.removeChild(r=Qe.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||se.isXMLDoc(e)))for(a=g(r),o=g(e),i=0;null!=(s=o[i]);++i)a[i]&&S(s,a[i]);if(t)if(n)for(o=o||g(e),a=a||g(r),i=0;null!=(s=o[i]);i++)C(s,a[i]);else C(e,r);return a=g(r,"script"),a.length>0&&R(a,!c&&g(e,"script")),a=o=s=null,r},buildFragment:function(e,t,n,a){for(var s,r,i,o,c,u,l,m=e.length,p=f(t),d=[],h=0;m>h;h++)if(r=e[h],r||0===r)if("object"===se.type(r))se.merge(d,r.nodeType?[r]:r);else if(We.test(r)){for(o=o||p.appendChild(t.createElement("div")),c=(je.exec(r)||["",""])[1].toLowerCase(),l=Xe[c]||Xe._default,o.innerHTML=l[1]+r.replace(qe,"<$1></$2>")+l[2],s=l[0];s--;)o=o.lastChild;if(!ne.leadingWhitespace&&$e.test(r)&&d.push(t.createTextNode($e.exec(r)[0])),!ne.tbody)for(r="table"!==c||Be.test(r)?"<table>"!==l[1]||Be.test(r)?0:o:o.firstChild,s=r&&r.childNodes.length;s--;)se.nodeName(u=r.childNodes[s],"tbody")&&!u.childNodes.length&&r.removeChild(u);for(se.merge(d,o.childNodes),o.textContent="";o.firstChild;)o.removeChild(o.firstChild);o=p.lastChild}else d.push(t.createTextNode(r));for(o&&p.removeChild(o),ne.appendChecked||se.grep(g(d,"input"),v),h=0;r=d[h++];)if((!a||-1===se.inArray(r,a))&&(i=se.contains(r.ownerDocument,r),o=g(p.appendChild(r),"script"),i&&R(o),n))for(s=0;r=o[s++];)Je.test(r.type||"")&&n.push(r);return o=null,p},cleanData:function(e,t){for(var n,a,s,r,i=0,o=se.expando,c=se.cache,u=ne.deleteExpando,l=se.event.special;null!=(n=e[i]);i++)if((t||se.acceptData(n))&&(s=n[o],r=s&&c[s])){if(r.events)for(a in r.events)l[a]?se.event.remove(n,a):se.removeEvent(n,a,r.handle);c[s]&&(delete c[s],u?delete n[o]:typeof n.removeAttribute!==Se?n.removeAttribute(o):n[o]=null,V.push(s))}}}),se.fn.extend({text:function(e){return De(this,function(e){return void 0===e?se.text(this):this.empty().append((this[0]&&this[0].ownerDocument||he).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,a=e?se.filter(e,this):this,s=0;null!=(n=a[s]);s++)t||1!==n.nodeType||se.cleanData(g(n)),n.parentNode&&(t&&se.contains(n.ownerDocument,n)&&R(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&se.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&se.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return se.clone(this,e,t)})},html:function(e){return De(this,function(e){var t=this[0]||{},n=0,a=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Le,""):void 0;if(!("string"!=typeof e||He.test(e)||!ne.htmlSerialize&&Ue.test(e)||!ne.leadingWhitespace&&$e.test(e)||Xe[(je.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(qe,"<$1></$2>");try{for(;a>n;n++)t=this[n]||{},1===t.nodeType&&(se.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,se.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Y.apply([],e);var n,a,s,r,i,o,c=0,u=this.length,l=this,m=u-1,p=e[0],d=se.isFunction(p);if(d||u>1&&"string"==typeof p&&!ne.checkClone&&ze.test(p))return this.each(function(n){var a=l.eq(n);d&&(e[0]=p.call(this,n,a.html())),a.domManip(e,t)});if(u&&(o=se.buildFragment(e,this[0].ownerDocument,!1,this),n=o.firstChild,1===o.childNodes.length&&(o=n),n)){for(r=se.map(g(o,"script"),y),s=r.length;u>c;c++)a=o,c!==m&&(a=se.clone(a,!0,!0),s&&se.merge(r,g(a,"script"))),t.call(this[c],a,c);if(s)for(i=r[r.length-1].ownerDocument,se.map(r,E),c=0;s>c;c++)a=r[c],Je.test(a.type||"")&&!se._data(a,"globalEval")&&se.contains(i,a)&&(a.src?se._evalUrl&&se._evalUrl(a.src):se.globalEval((a.text||a.textContent||a.innerHTML||"").replace(Ve,"")));o=n=null}return this}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){se.fn[e]=function(e){for(var n,a=0,s=[],r=se(e),i=r.length-1;i>=a;a++)n=a===i?this:this.clone(!0),se(r[a])[t](n),Q.apply(s,n.get());return this.pushStack(s)}});var Ge,Ze={};!function(){var e;ne.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,a;return n=he.getElementsByTagName("body")[0],n&&n.style?(t=he.createElement("div"),a=he.createElement("div"),a.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(a).appendChild(t),typeof t.style.zoom!==Se&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(he.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(a),e):void 0}}();var et,tt,nt=/^margin/,at=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),st=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},tt=function(e,t,n){var a,s,r,i,o=e.style;return n=n||et(e),i=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==i||se.contains(e.ownerDocument,e)||(i=se.style(e,t)),at.test(i)&&nt.test(t)&&(a=o.width,s=o.minWidth,r=o.maxWidth,o.minWidth=o.maxWidth=o.width=i,i=n.width,o.width=a,o.minWidth=s,o.maxWidth=r)),void 0===i?i:i+""}):he.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,n){var a,s,r,i,o=e.style;return n=n||et(e),i=n?n[t]:void 0,null==i&&o&&o[t]&&(i=o[t]),at.test(i)&&!st.test(t)&&(a=o.left,s=e.runtimeStyle,r=s&&s.left,r&&(s.left=e.currentStyle.left),o.left="fontSize"===t?"1em":i,i=o.pixelLeft+"px",o.left=a,r&&(s.left=r)),void 0===i?i:i+""||"auto"}),!function(){function t(){var t,n,a,s;n=he.getElementsByTagName("body")[0],n&&n.style&&(t=he.createElement("div"),a=he.createElement("div"),a.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(a).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=i=!1,c=!0,e.getComputedStyle&&(r="1%"!==(e.getComputedStyle(t,null)||{}).top,i="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,s=t.appendChild(he.createElement("div")),s.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",s.style.marginRight=s.style.width="0",t.style.width="1px",c=!parseFloat((e.getComputedStyle(s,null)||{}).marginRight),t.removeChild(s)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=t.getElementsByTagName("td"),s[0].style.cssText="margin:0;border:0;padding:0;display:none",o=0===s[0].offsetHeight,o&&(s[0].style.display="",s[1].style.display="none",o=0===s[0].offsetHeight),n.removeChild(a))}var n,a,s,r,i,o,c;n=he.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",s=n.getElementsByTagName("a")[0],(a=s&&s.style)&&(a.cssText="float:left;opacity:.5",ne.opacity="0.5"===a.opacity,ne.cssFloat=!!a.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===a.boxSizing||""===a.MozBoxSizing||""===a.WebkitBoxSizing,se.extend(ne,{reliableHiddenOffsets:function(){return null==o&&t(),o},boxSizingReliable:function(){return null==i&&t(),i},pixelPosition:function(){return null==r&&t(),r},reliableMarginRight:function(){return null==c&&t(),c}}))}(),se.swap=function(e,t,n,a){var s,r,i={};for(r in t)i[r]=e.style[r],e.style[r]=t[r];s=n.apply(e,a||[]);for(r in t)e.style[r]=i[r];return s};var rt=/alpha\([^)]*\)/i,it=/opacity\s*=\s*([^)]*)/,ot=/^(none|table(?!-c[ea]).+)/,ct=new RegExp("^("+we+")(.*)$","i"),ut=new RegExp("^([+-])=("+we+")","i"),lt={position:"absolute",visibility:"hidden",display:"block"},mt={letterSpacing:"0",fontWeight:"400"},pt=["Webkit","O","Moz","ms"];se.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,i,o=se.camelCase(t),c=e.style;if(t=se.cssProps[o]||(se.cssProps[o]=x(c,o)),i=se.cssHooks[t]||se.cssHooks[o],void 0===n)return i&&"get"in i&&void 0!==(s=i.get(e,!1,a))?s:c[t];if(r=typeof n,"string"===r&&(s=ut.exec(n))&&(n=(s[1]+1)*s[2]+parseFloat(se.css(e,t)),r="number"),null!=n&&n===n&&("number"!==r||se.cssNumber[o]||(n+="px"),ne.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),!(i&&"set"in i&&void 0===(n=i.set(e,n,a)))))try{c[t]=n}catch(u){}}},css:function(e,t,n,a){var s,r,i,o=se.camelCase(t);return t=se.cssProps[o]||(se.cssProps[o]=x(e.style,o)),i=se.cssHooks[t]||se.cssHooks[o],i&&"get"in i&&(r=i.get(e,!0,n)),void 0===r&&(r=tt(e,t,a)),"normal"===r&&t in mt&&(r=mt[t]),""===n||n?(s=parseFloat(r),n===!0||se.isNumeric(s)?s||0:r):r}}),se.each(["height","width"],function(e,t){se.cssHooks[t]={get:function(e,n,a){return n?ot.test(se.css(e,"display"))&&0===e.offsetWidth?se.swap(e,lt,function(){return I(e,t,a)}):I(e,t,a):void 0},set:function(e,n,a){var s=a&&et(e);return D(e,n,a?M(e,t,a,ne.boxSizing&&"border-box"===se.css(e,"boxSizing",!1,s),s):0)}}}),ne.opacity||(se.cssHooks.opacity={get:function(e,t){return it.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,a=e.currentStyle,s=se.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=a&&a.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===se.trim(r.replace(rt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||a&&!a.filter)||(n.filter=rt.test(r)?r.replace(rt,s):r+" "+s)}}),se.cssHooks.marginRight=w(ne.reliableMarginRight,function(e,t){return t?se.swap(e,{display:"inline-block"},tt,[e,"marginRight"]):void 0}),se.each({margin:"",padding:"",border:"Width"},function(e,t){se.cssHooks[e+t]={expand:function(n){for(var a=0,s={},r="string"==typeof n?n.split(" "):[n];4>a;a++)s[e+xe[a]+t]=r[a]||r[a-2]||r[0];return s}},nt.test(e)||(se.cssHooks[e+t].set=D)}),se.fn.extend({css:function(e,t){return De(this,function(e,t,n){var a,s,r={},i=0;if(se.isArray(t)){for(a=et(e),s=t.length;s>i;i++)r[t[i]]=se.css(e,t[i],!1,a);return r}return void 0!==n?se.style(e,t,n):se.css(e,t)},e,t,arguments.length>1)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ke(this)?se(this).show():se(this).hide()})}}),se.Tween=T,T.prototype={constructor:T,init:function(e,t,n,a,s,r){this.elem=e,this.prop=n,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=a,this.unit=r||(se.cssNumber[n]?"":"px")},cur:function(){var e=T.propHooks[this.prop];return e&&e.get?e.get(this):T.propHooks._default.get(this)},run:function(e){var t,n=T.propHooks[this.prop];return this.options.duration?this.pos=t=se.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):T.propHooks._default.set(this),this}},T.prototype.init.prototype=T.prototype,T.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=se.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){se.fx.step[e.prop]?se.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[se.cssProps[e.prop]]||se.cssHooks[e.prop])?se.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},se.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},se.fx=T.prototype.init,se.fx.step={};var dt,ht,ft=/^(?:toggle|show|hide)$/,gt=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),vt=/queueHooks$/,bt=[F],yt={"*":[function(e,t){var n=this.createTween(e,t),a=n.cur(),s=gt.exec(t),r=s&&s[3]||(se.cssNumber[e]?"":"px"),i=(se.cssNumber[e]||"px"!==r&&+a)&&gt.exec(se.css(n.elem,e)),o=1,c=20;if(i&&i[3]!==r){r=r||i[3],s=s||[],i=+a||1;do o=o||".5",i/=o,se.style(n.elem,e,i+r);while(o!==(o=n.cur()/a)&&1!==o&&--c)}return s&&(i=n.start=+i||+a||0,n.unit=r,n.end=s[1]?i+(s[1]+1)*s[2]:+s[2]),n}]};se.Animation=se.extend(U,{tweener:function(e,t){se.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,a=0,s=e.length;s>a;a++)n=e[a],yt[n]=yt[n]||[],yt[n].unshift(t)},prefilter:function(e,t){t?bt.unshift(e):bt.push(e)}}),se.speed=function(e,t,n){var a=e&&"object"==typeof e?se.extend({},e):{complete:n||!n&&t||se.isFunction(e)&&e,duration:e,easing:n&&t||t&&!se.isFunction(t)&&t};return a.duration=se.fx.off?0:"number"==typeof a.duration?a.duration:a.duration in se.fx.speeds?se.fx.speeds[a.duration]:se.fx.speeds._default,(null==a.queue||a.queue===!0)&&(a.queue="fx"),a.old=a.complete,a.complete=function(){se.isFunction(a.old)&&a.old.call(this),a.queue&&se.dequeue(this,a.queue)},a},se.fn.extend({fadeTo:function(e,t,n,a){return this.filter(ke).css("opacity",0).show().end().animate({opacity:t},e,n,a)},animate:function(e,t,n,a){var s=se.isEmptyObject(e),r=se.speed(t,n,a),i=function(){var t=U(this,se.extend({},e),r);(s||se._data(this,"finish"))&&t.stop(!0)};return i.finish=i,s||r.queue===!1?this.each(i):this.queue(r.queue,i)},stop:function(e,t,n){var a=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",r=se.timers,i=se._data(this);if(s)i[s]&&i[s].stop&&a(i[s]);else for(s in i)i[s]&&i[s].stop&&vt.test(s)&&a(i[s]);for(s=r.length;s--;)r[s].elem!==this||null!=e&&r[s].queue!==e||(r[s].anim.stop(n),t=!1,r.splice(s,1));(t||!n)&&se.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=se._data(this),a=n[e+"queue"],s=n[e+"queueHooks"],r=se.timers,i=a?a.length:0;for(n.finish=!0,se.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;i>t;t++)a[t]&&a[t].finish&&a[t].finish.call(this);delete n.finish})}}),se.each(["toggle","show","hide"],function(e,t){var n=se.fn[t];se.fn[t]=function(e,a,s){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(O(t,!0),e,a,s)}}),se.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){se.fn[e]=function(e,n,a){return this.animate(t,e,n,a)}}),se.timers=[],se.fx.tick=function(){var e,t=se.timers,n=0;for(dt=se.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||se.fx.stop(),dt=void 0},se.fx.timer=function(e){se.timers.push(e),e()?se.fx.start():se.timers.pop()},se.fx.interval=13,se.fx.start=function(){ht||(ht=setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){clearInterval(ht),ht=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fn.delay=function(e,t){return e=se.fx?se.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var a=setTimeout(t,e);n.stop=function(){clearTimeout(a)}})},function(){var e,t,n,a,s;t=he.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=t.getElementsByTagName("a")[0],n=he.createElement("select"),s=n.appendChild(he.createElement("option")),e=t.getElementsByTagName("input")[0],a.style.cssText="top:1px",ne.getSetAttribute="t"!==t.className,ne.style=/top/.test(a.getAttribute("style")),ne.hrefNormalized="/a"===a.getAttribute("href"),ne.checkOn=!!e.value,ne.optSelected=s.selected,ne.enctype=!!he.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!s.disabled,e=he.createElement("input"),e.setAttribute("value",""),ne.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ne.radioValue="t"===e.value}();var Et=/\r/g;se.fn.extend({val:function(e){var t,n,a,s=this[0];return arguments.length?(a=se.isFunction(e),this.each(function(n){var s;1===this.nodeType&&(s=a?e.call(this,n,se(this).val()):e,null==s?s="":"number"==typeof s?s+="":se.isArray(s)&&(s=se.map(s,function(e){return null==e?"":e+""})),t=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))})):s?(t=se.valHooks[s.type]||se.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(s,"value"))?n:(n=s.value,"string"==typeof n?n.replace(Et,""):null==n?"":n)):void 0}}),se.extend({valHooks:{option:{get:function(e){var t=se.find.attr(e,"value");return null!=t?t:se.trim(se.text(e))}},select:{get:function(e){for(var t,n,a=e.options,s=e.selectedIndex,r="select-one"===e.type||0>s,i=r?null:[],o=r?s+1:a.length,c=0>s?o:r?s:0;o>c;c++)if(n=a[c],!(!n.selected&&c!==s||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&se.nodeName(n.parentNode,"optgroup"))){if(t=se(n).val(),r)return t;i.push(t)}return i},set:function(e,t){for(var n,a,s=e.options,r=se.makeArray(t),i=s.length;i--;)if(a=s[i],se.inArray(se.valHooks.option.get(a),r)>=0)try{a.selected=n=!0}catch(o){a.scrollHeight}else a.selected=!1;return n||(e.selectedIndex=-1),s}}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(e,t){return se.isArray(t)?e.checked=se.inArray(se(e).val(),t)>=0:void 0}},ne.checkOn||(se.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Rt,Ct,St=se.expr.attrHandle,_t=/^(?:checked|selected)$/i,Nt=ne.getSetAttribute,wt=ne.input;se.fn.extend({attr:function(e,t){return De(this,se.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){se.removeAttr(this,e)})}}),se.extend({attr:function(e,t,n){var a,s,r=e.nodeType;return e&&3!==r&&8!==r&&2!==r?typeof e.getAttribute===Se?se.prop(e,t,n):(1===r&&se.isXMLDoc(e)||(t=t.toLowerCase(),a=se.attrHooks[t]||(se.expr.match.bool.test(t)?Ct:Rt)),void 0===n?a&&"get"in a&&null!==(s=a.get(e,t))?s:(s=se.find.attr(e,t),null==s?void 0:s):null!==n?a&&"set"in a&&void 0!==(s=a.set(e,n,t))?s:(e.setAttribute(t,n+""),n):void se.removeAttr(e,t)):void 0},removeAttr:function(e,t){var n,a,s=0,r=t&&t.match(ye);if(r&&1===e.nodeType)for(;n=r[s++];)a=se.propFix[n]||n,se.expr.match.bool.test(n)?wt&&Nt||!_t.test(n)?e[a]=!1:e[se.camelCase("default-"+n)]=e[a]=!1:se.attr(e,n,""),e.removeAttribute(Nt?n:a)},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&se.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Ct={set:function(e,t,n){return t===!1?se.removeAttr(e,n):wt&&Nt||!_t.test(n)?e.setAttribute(!Nt&&se.propFix[n]||n,n):e[se.camelCase("default-"+n)]=e[n]=!0,n}},se.each(se.expr.match.bool.source.match(/\w+/g),function(e,t){var n=St[t]||se.find.attr;St[t]=wt&&Nt||!_t.test(t)?function(e,t,a){var s,r;return a||(r=St[t],St[t]=s,s=null!=n(e,t,a)?t.toLowerCase():null,St[t]=r),s}:function(e,t,n){return n?void 0:e[se.camelCase("default-"+t)]?t.toLowerCase():null}}),wt&&Nt||(se.attrHooks.value={set:function(e,t,n){return se.nodeName(e,"input")?void(e.defaultValue=t):Rt&&Rt.set(e,t,n)}}),Nt||(Rt={set:function(e,t,n){var a=e.getAttributeNode(n);return a||e.setAttributeNode(a=e.ownerDocument.createAttribute(n)),a.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},St.id=St.name=St.coords=function(e,t,n){var a;return n?void 0:(a=e.getAttributeNode(t))&&""!==a.value?a.value:null},se.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:Rt.set},se.attrHooks.contenteditable={set:function(e,t,n){Rt.set(e,""===t?!1:t,n)}},se.each(["width","height"],function(e,t){se.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ne.style||(se.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var xt=/^(?:input|select|textarea|button|object)$/i,kt=/^(?:a|area)$/i;se.fn.extend({prop:function(e,t){return De(this,se.prop,e,t,arguments.length>1)},removeProp:function(e){return e=se.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),se.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var a,s,r,i=e.nodeType;return e&&3!==i&&8!==i&&2!==i?(r=1!==i||!se.isXMLDoc(e),r&&(t=se.propFix[t]||t,s=se.propHooks[t]),void 0!==n?s&&"set"in s&&void 0!==(a=s.set(e,n,t))?a:e[t]=n:s&&"get"in s&&null!==(a=s.get(e,t))?a:e[t]):void 0},propHooks:{tabIndex:{get:function(e){var t=se.find.attr(e,"tabindex");return t?parseInt(t,10):xt.test(e.nodeName)||kt.test(e.nodeName)&&e.href?0:-1}}}}),ne.hrefNormalized||se.each(["href","src"],function(e,t){se.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ne.optSelected||(se.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this}),ne.enctype||(se.propFix.enctype="encoding");var Dt=/[\t\r\n\f]/g;se.fn.extend({addClass:function(e){var t,n,a,s,r,i,o=0,c=this.length,u="string"==typeof e&&e;if(se.isFunction(e))return this.each(function(t){se(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(ye)||[];c>o;o++)if(n=this[o],a=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dt," "):" ")){for(r=0;s=t[r++];)a.indexOf(" "+s+" ")<0&&(a+=s+" ");i=se.trim(a),n.className!==i&&(n.className=i)}return this},removeClass:function(e){var t,n,a,s,r,i,o=0,c=this.length,u=0===arguments.length||"string"==typeof e&&e;if(se.isFunction(e))return this.each(function(t){se(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(ye)||[];c>o;o++)if(n=this[o],a=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dt," "):"")){for(r=0;s=t[r++];)for(;a.indexOf(" "+s+" ")>=0;)a=a.replace(" "+s+" "," ");i=e?se.trim(a):"",n.className!==i&&(n.className=i)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(se.isFunction(e)?function(n){se(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,a=0,s=se(this),r=e.match(ye)||[];t=r[a++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else(n===Se||"boolean"===n)&&(this.className&&se._data(this,"__className__",this.className),this.className=this.className||e===!1?"":se._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,a=this.length;a>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Dt," ").indexOf(t)>=0)return!0;return!1}}),se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){se.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),se.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,a){return this.on(t,e,n,a)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Mt=se.now(),It=/\?/,Tt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;se.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,a=null,s=se.trim(t+"");return s&&!se.trim(s.replace(Tt,function(e,t,s,r){return n&&t&&(a=0),0===a?e:(n=s||t,a+=!r-!s,"")}))?Function("return "+s)():se.error("Invalid JSON: "+t)},se.parseXML=function(t){var n,a;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(a=new DOMParser,n=a.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(s){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||se.error("Invalid XML: "+t),n};var Pt,Ot,At=/#.*$/,Ft=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ut=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,$t=/^(?:GET|HEAD)$/,qt=/^\/\//,jt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Bt={},Wt={},Ht="*/".concat("*");try{Ot=location.href}catch(zt){Ot=he.createElement("a"),Ot.href="",Ot=Ot.href}Pt=jt.exec(Ot.toLowerCase())||[],se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ot,type:"GET",isLocal:Ut.test(Pt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",
json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?j(j(e,se.ajaxSettings),t):j(se.ajaxSettings,e)},ajaxPrefilter:$(Bt),ajaxTransport:$(Wt),ajax:function(e,t){function n(e,t,n,a){var s,l,v,b,E,C=t;2!==y&&(y=2,o&&clearTimeout(o),u=void 0,i=a||"",R.readyState=e>0?4:0,s=e>=200&&300>e||304===e,n&&(b=B(m,R,n)),b=W(m,b,R,s),s?(m.ifModified&&(E=R.getResponseHeader("Last-Modified"),E&&(se.lastModified[r]=E),E=R.getResponseHeader("etag"),E&&(se.etag[r]=E)),204===e||"HEAD"===m.type?C="nocontent":304===e?C="notmodified":(C=b.state,l=b.data,v=b.error,s=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),R.status=e,R.statusText=(t||C)+"",s?h.resolveWith(p,[l,C,R]):h.rejectWith(p,[R,C,v]),R.statusCode(g),g=void 0,c&&d.trigger(s?"ajaxSuccess":"ajaxError",[R,m,s?l:v]),f.fireWith(p,[R,C]),c&&(d.trigger("ajaxComplete",[R,m]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var a,s,r,i,o,c,u,l,m=se.ajaxSetup({},t),p=m.context||m,d=m.context&&(p.nodeType||p.jquery)?se(p):se.event,h=se.Deferred(),f=se.Callbacks("once memory"),g=m.statusCode||{},v={},b={},y=0,E="canceled",R={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!l)for(l={};t=Lt.exec(i);)l[t[1].toLowerCase()]=t[2];t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return y||(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)g[t]=[g[t],e[t]];else R.always(e[R.status]);return this},abort:function(e){var t=e||E;return u&&u.abort(t),n(0,t),this}};if(h.promise(R).complete=f.add,R.success=R.done,R.error=R.fail,m.url=((e||m.url||Ot)+"").replace(At,"").replace(qt,Pt[1]+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=se.trim(m.dataType||"*").toLowerCase().match(ye)||[""],null==m.crossDomain&&(a=jt.exec(m.url.toLowerCase()),m.crossDomain=!(!a||a[1]===Pt[1]&&a[2]===Pt[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(Pt[3]||("http:"===Pt[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=se.param(m.data,m.traditional)),q(Bt,m,t,R),2===y)return R;c=se.event&&m.global,c&&0===se.active++&&se.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!$t.test(m.type),r=m.url,m.hasContent||(m.data&&(r=m.url+=(It.test(r)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Ft.test(r)?r.replace(Ft,"$1_="+Mt++):r+(It.test(r)?"&":"?")+"_="+Mt++)),m.ifModified&&(se.lastModified[r]&&R.setRequestHeader("If-Modified-Since",se.lastModified[r]),se.etag[r]&&R.setRequestHeader("If-None-Match",se.etag[r])),(m.data&&m.hasContent&&m.contentType!==!1||t.contentType)&&R.setRequestHeader("Content-Type",m.contentType),R.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ht+"; q=0.01":""):m.accepts["*"]);for(s in m.headers)R.setRequestHeader(s,m.headers[s]);if(m.beforeSend&&(m.beforeSend.call(p,R,m)===!1||2===y))return R.abort();E="abort";for(s in{success:1,error:1,complete:1})R[s](m[s]);if(u=q(Wt,m,t,R)){R.readyState=1,c&&d.trigger("ajaxSend",[R,m]),m.async&&m.timeout>0&&(o=setTimeout(function(){R.abort("timeout")},m.timeout));try{y=1,u.send(v,n)}catch(C){if(!(2>y))throw C;n(-1,C)}}else n(-1,"No Transport");return R},getJSON:function(e,t,n){return se.get(e,t,n,"json")},getScript:function(e,t){return se.get(e,void 0,t,"script")}}),se.each(["get","post"],function(e,t){se[t]=function(e,n,a,s){return se.isFunction(n)&&(s=s||a,a=n,n=void 0),se.ajax({url:e,type:t,dataType:s,data:n,success:a})}}),se._evalUrl=function(e){return se.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},se.fn.extend({wrapAll:function(e){if(se.isFunction(e))return this.each(function(t){se(this).wrapAll(e.call(this,t))});if(this[0]){var t=se(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(se.isFunction(e)?function(t){se(this).wrapInner(e.call(this,t))}:function(){var t=se(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=se.isFunction(e);return this.each(function(n){se(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}}),se.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||se.css(e,"display"))},se.expr.filters.visible=function(e){return!se.expr.filters.hidden(e)};var Jt=/%20/g,Kt=/\[\]$/,Vt=/\r?\n/g,Xt=/^(?:submit|button|image|reset|file)$/i,Yt=/^(?:input|select|textarea|keygen)/i;se.param=function(e,t){var n,a=[],s=function(e,t){t=se.isFunction(t)?t():null==t?"":t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(e)||e.jquery&&!se.isPlainObject(e))se.each(e,function(){s(this.name,this.value)});else for(n in e)H(n,e[n],t,s);return a.join("&").replace(Jt,"+")},se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=se.prop(this,"elements");return e?se.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!se(this).is(":disabled")&&Yt.test(this.nodeName)&&!Xt.test(e)&&(this.checked||!Me.test(e))}).map(function(e,t){var n=se(this).val();return null==n?null:se.isArray(n)?se.map(n,function(e){return{name:t.name,value:e.replace(Vt,"\r\n")}}):{name:t.name,value:n.replace(Vt,"\r\n")}}).get()}}),se.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&z()||J()}:z;var Qt=0,Gt={},Zt=se.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Gt)Gt[e](void 0,!0)}),ne.cors=!!Zt&&"withCredentials"in Zt,Zt=ne.ajax=!!Zt,Zt&&se.ajaxTransport(function(e){if(!e.crossDomain||ne.cors){var t;return{send:function(n,a){var s,r=e.xhr(),i=++Qt;if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)r[s]=e.xhrFields[s];e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(s in n)void 0!==n[s]&&r.setRequestHeader(s,n[s]+"");r.send(e.hasContent&&e.data||null),t=function(n,s){var o,c,u;if(t&&(s||4===r.readyState))if(delete Gt[i],t=void 0,r.onreadystatechange=se.noop,s)4!==r.readyState&&r.abort();else{u={},o=r.status,"string"==typeof r.responseText&&(u.text=r.responseText);try{c=r.statusText}catch(l){c=""}o||!e.isLocal||e.crossDomain?1223===o&&(o=204):o=u.text?200:404}u&&a(o,c,u,r.getAllResponseHeaders())},e.async?4===r.readyState?setTimeout(t):r.onreadystatechange=Gt[i]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return se.globalEval(e),e}}}),se.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),se.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=he.head||se("head")[0]||he.documentElement;return{send:function(a,s){t=he.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||s(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||se.expando+"_"+Mt++;return this[e]=!0,e}}),se.ajaxPrefilter("json jsonp",function(t,n,a){var s,r,i,o=t.jsonp!==!1&&(tn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(s=t.jsonpCallback=se.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(tn,"$1"+s):t.jsonp!==!1&&(t.url+=(It.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return i||se.error(s+" was not called"),i[0]},t.dataTypes[0]="json",r=e[s],e[s]=function(){i=arguments},a.always(function(){e[s]=r,t[s]&&(t.jsonpCallback=n.jsonpCallback,en.push(s)),i&&se.isFunction(r)&&r(i[0]),i=r=void 0}),"script"):void 0}),se.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||he;var a=me.exec(e),s=!n&&[];return a?[t.createElement(a[1])]:(a=se.buildFragment([e],t,s),s&&s.length&&se(s).remove(),se.merge([],a.childNodes))};var nn=se.fn.load;se.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var a,s,r,i=this,o=e.indexOf(" ");return o>=0&&(a=se.trim(e.slice(o,e.length)),e=e.slice(0,o)),se.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),i.length>0&&se.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){s=arguments,i.html(a?se("<div>").append(se.parseHTML(e)).find(a):e)}).complete(n&&function(e,t){i.each(n,s||[e.responseText,t,e])}),this},se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){se.fn[t]=function(e){return this.on(t,e)}}),se.expr.filters.animated=function(e){return se.grep(se.timers,function(t){return e===t.elem}).length};var an=e.document.documentElement;se.offset={setOffset:function(e,t,n){var a,s,r,i,o,c,u,l=se.css(e,"position"),m=se(e),p={};"static"===l&&(e.style.position="relative"),o=m.offset(),r=se.css(e,"top"),c=se.css(e,"left"),u=("absolute"===l||"fixed"===l)&&se.inArray("auto",[r,c])>-1,u?(a=m.position(),i=a.top,s=a.left):(i=parseFloat(r)||0,s=parseFloat(c)||0),se.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(p.top=t.top-o.top+i),null!=t.left&&(p.left=t.left-o.left+s),"using"in t?t.using.call(e,p):m.css(p)}},se.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){se.offset.setOffset(this,e,t)});var t,n,a={top:0,left:0},s=this[0],r=s&&s.ownerDocument;return r?(t=r.documentElement,se.contains(t,s)?(typeof s.getBoundingClientRect!==Se&&(a=s.getBoundingClientRect()),n=K(r),{top:a.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:a.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):a):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},a=this[0];return"fixed"===se.css(a,"position")?t=a.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),se.nodeName(e[0],"html")||(n=e.offset()),n.top+=se.css(e[0],"borderTopWidth",!0),n.left+=se.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-se.css(a,"marginTop",!0),left:t.left-n.left-se.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||an;e&&!se.nodeName(e,"html")&&"static"===se.css(e,"position");)e=e.offsetParent;return e||an})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);se.fn[e]=function(a){return De(this,function(e,a,s){var r=K(e);return void 0===s?r?t in r?r[t]:r.document.documentElement[a]:e[a]:void(r?r.scrollTo(n?se(r).scrollLeft():s,n?s:se(r).scrollTop()):e[a]=s)},e,a,arguments.length,null)}}),se.each(["top","left"],function(e,t){se.cssHooks[t]=w(ne.pixelPosition,function(e,n){return n?(n=tt(e,t),at.test(n)?se(e).position()[t]+"px":n):void 0})}),se.each({Height:"height",Width:"width"},function(e,t){se.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,a){se.fn[a]=function(a,s){var r=arguments.length&&(n||"boolean"!=typeof a),i=n||(a===!0||s===!0?"margin":"border");return De(this,function(t,n,a){var s;return se.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===a?se.css(t,n,i):se.style(t,n,a,i)},t,r?a:void 0,r,null)}})}),se.fn.size=function(){return this.length},se.fn.andSelf=se.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return se});var sn=e.jQuery,rn=e.$;return se.noConflict=function(t){return e.$===se&&(e.$=rn),t&&e.jQuery===se&&(e.jQuery=sn),se},typeof t===Se&&(e.jQuery=e.$=se),se}),function(e){"use strict";var t={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeek:["ن","ث","ع","خ","ج","س","ح"]},ro:{months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],dayOfWeek:["l","ma","mi","j","v","s","d"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeek:["Min","Sen","Sel","Rab","Kam","Jum","Sab"]},is:{months:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],dayOfWeek:["Sun","Mán","Þrið","Mið","Fim","Fös","Lau"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeek:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeek:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeek:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeek:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["日","月","火","水","木","金","土"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeek:["Va","Hé","Ke","Sze","Cs","Pé","Szo"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeek:["B","Be","Ça","Ç","Ca","C","Ş"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeek:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeek:["P","E","T","K","N","R","L"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeek:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeek:["Su","Ma","Ti","Ke","To","Pe","La"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeek:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeek:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeek:["Sv","Pr","Ot","Tr","Ct","Pk","St"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeek:["нед","пон","вто","сре","чет","пет","саб"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeek:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeek:["Ne","Po","Ut","St","Št","Pi","So"]},sq:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sre","čet","Pet","Sub"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeek:["нед","пон","уто","сре","чет","пет","суб"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeek:["א'","ב'","ג'","ד'","ה'","ו'","שבת"]},hy:{months:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],dayOfWeek:["Կի","Երկ","Երք","Չոր","Հնգ","Ուրբ","Շբթ"]},kg:{months:["Үчтүн айы","Бирдин айы","Жалган Куран","Чын Куран","Бугу","Кулжа","Теке","Баш Оона","Аяк Оона","Тогуздун айы","Жетинин айы","Бештин айы"],dayOfWeek:["Жек","Дүй","Шей","Шар","Бей","Жум","Ише"]}},value:"",lang:"en",rtl:!1,format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnTimeSelect:!0,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,disabledMinTime:!1,disabledMaxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,prevButton:!0,nextButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0,showApplyButton:!1};window.getComputedStyle||(window.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"===t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(e,t,n){return n.toUpperCase()})),e.currentStyle[t]||null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,a;for(n=t||0,a=this.length;a>n;n+=1)if(this[n]===e)return n;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},e.fn.xdsoftScroller=function(t){return this.each(function(){var n,a,s,r,i,o=e(this),c=function(e){var t,n={x:0,y:0};return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type?(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n.x=t.clientX,n.y=t.clientY):("mousedown"===e.type||"mouseup"===e.type||"mousemove"===e.type||"mouseover"===e.type||"mouseout"===e.type||"mouseenter"===e.type||"mouseleave"===e.type)&&(n.x=e.clientX,n.y=e.clientY),n},u=100,l=!1,m=0,p=0,d=0,h=!1,f=0,g=function(){};return"hide"===t?void o.find(".xdsoft_scrollbar").hide():(e(this).hasClass("xdsoft_scroller_box")||(n=o.children().eq(0),a=o[0].clientHeight,s=n[0].offsetHeight,r=e('<div class="xdsoft_scrollbar"></div>'),i=e('<div class="xdsoft_scroller"></div>'),r.append(i),o.addClass("xdsoft_scroller_box").append(r),g=function(e){var t=c(e).y-m+f;0>t&&(t=0),t+i[0].offsetHeight>d&&(t=d-i[0].offsetHeight),o.trigger("scroll_element.xdsoft_scroller",[u?t/u:0])},i.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(n){a||o.trigger("resize_scroll.xdsoft_scroller",[t]),m=c(n).y,f=parseInt(i.css("margin-top"),10),d=r[0].offsetHeight,"mousedown"===n.type?(document&&e(document.body).addClass("xdsoft_noselect"),e([document.body,window]).on("mouseup.xdsoft_scroller",function s(){e([document.body,window]).off("mouseup.xdsoft_scroller",s).off("mousemove.xdsoft_scroller",g).removeClass("xdsoft_noselect")}),e(document.body).on("mousemove.xdsoft_scroller",g)):(h=!0,n.stopPropagation(),n.preventDefault())}).on("touchmove",function(e){h&&(e.preventDefault(),g(e))}).on("touchend touchcancel",function(e){h=!1,f=0}),o.on("scroll_element.xdsoft_scroller",function(e,t){a||o.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:0>t||isNaN(t)?0:t,i.css("margin-top",u*t),setTimeout(function(){n.css("marginTop",-parseInt((n[0].offsetHeight-a)*t,10))},10)}).on("resize_scroll.xdsoft_scroller",function(e,t,c){var l,m;a=o[0].clientHeight,s=n[0].offsetHeight,l=a/s,m=l*r[0].offsetHeight,l>1?i.hide():(i.show(),i.css("height",parseInt(m>10?m:10,10)),u=r[0].offsetHeight-i[0].offsetHeight,c!==!0&&o.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(n.css("marginTop"),10))/(s-a)]))}),o.on("mousewheel",function(e){var t=Math.abs(parseInt(n.css("marginTop"),10));return t-=20*e.deltaY,0>t&&(t=0),o.trigger("scroll_element.xdsoft_scroller",[t/(s-a)]),e.stopPropagation(),!1}),o.on("touchstart",function(e){l=c(e),p=Math.abs(parseInt(n.css("marginTop"),10))}),o.on("touchmove",function(e){if(l){e.preventDefault();var t=c(e);o.trigger("scroll_element.xdsoft_scroller",[(p-(t.y-l.y))/(s-a)])}}),o.on("touchend touchcancel",function(e){l=!1,p=0})),void o.trigger("resize_scroll.xdsoft_scroller",[t]))})},e.fn.datetimepicker=function(n){var a,s,r=48,i=57,o=96,c=105,u=17,l=46,m=13,p=27,d=8,h=37,f=38,g=39,v=40,b=9,y=116,E=65,R=67,C=86,S=90,_=89,N=!1,w=e.isPlainObject(n)||!n?e.extend(!0,{},t,n):e.extend(!0,{},t),x=0,k=function(e){e.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function t(n){e.is(":disabled")||e.data("xdsoft_datetimepicker")||(clearTimeout(x),x=setTimeout(function(){e.data("xdsoft_datetimepicker")||a(e),e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",t).trigger("open.xdsoft")},100))})};return a=function(t){function a(){var e,n=!1;return w.startDate?n=I.strToDate(w.startDate):(n=w.value||(t&&t.val&&t.val()?t.val():""),n?n=I.strToDateTime(n):w.defaultDate&&(n=I.strToDateTime(w.defaultDate),w.defaultTime&&(e=I.strtotime(w.defaultTime),n.setHours(e.getHours()),n.setMinutes(e.getMinutes())))),n&&I.isValidDate(n)?T.data("changed",!0):n="",n||0}var s,x,k,D,M,I,T=e('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),P=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),O=e('<div class="xdsoft_datepicker active"></div>'),A=e('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),F=e('<div class="xdsoft_calendar"></div>'),L=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),U=L.find(".xdsoft_time_box").eq(0),$=e('<div class="xdsoft_time_variant"></div>'),q=e('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),j=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),B=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),W=!1,H=0,z=0;w.id&&T.attr("id",w.id),w.style&&T.attr("style",w.style),w.weeks&&T.addClass("xdsoft_showweeks"),w.rtl&&T.addClass("xdsoft_rtl"),T.addClass("xdsoft_"+w.theme),T.addClass(w.className),A.find(".xdsoft_month span").after(j),A.find(".xdsoft_year span").after(B),A.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(t){var n,a,s=e(this).find(".xdsoft_select").eq(0),r=0,i=0,o=s.is(":visible");for(A.find(".xdsoft_select").hide(),I.currentTime&&(r=I.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),s[o?"hide":"show"](),n=s.find("div.xdsoft_option"),a=0;a<n.length&&n.eq(a).data("value")!==r;a+=1)i+=n[0].offsetHeight;return s.xdsoftScroller(i/(s.children()[0].offsetHeight-s[0].clientHeight)),t.stopPropagation(),!1}),A.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(t){(void 0===I.currentTime||null===I.currentTime)&&(I.currentTime=I.now());var n=I.currentTime.getFullYear();I&&I.currentTime&&I.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),T.trigger("xchange.xdsoft"),w.onChangeMonth&&e.isFunction(w.onChangeMonth)&&w.onChangeMonth.call(T,I.currentTime,T.data("input")),n!==I.currentTime.getFullYear()&&e.isFunction(w.onChangeYear)&&w.onChangeYear.call(T,I.currentTime,T.data("input"))}),T.setOptions=function(n){var a={},s=function(e){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(e.setSelectionRange)return e.selectionStart}catch(n){return 0}},x=function(e,t){if(e="string"==typeof e||e instanceof String?document.getElementById(e):e,!e)return!1;if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select(),!0}return e.setSelectionRange?(e.setSelectionRange(t,t),!0):!1},k=function(e,t){var n=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(n).test(t)};w=e.extend(!0,{},w,n),n.allowTimes&&e.isArray(n.allowTimes)&&n.allowTimes.length&&(w.allowTimes=e.extend(!0,[],n.allowTimes)),n.weekends&&e.isArray(n.weekends)&&n.weekends.length&&(w.weekends=e.extend(!0,[],n.weekends)),n.highlightedDates&&e.isArray(n.highlightedDates)&&n.highlightedDates.length&&(e.each(n.highlightedDates,function(t,n){var s,r=e.map(n.split(","),e.trim),i=new HighlightedDate(Date.parseDate(r[0],w.formatDate),r[1],r[2]),o=i.date.dateFormat(w.formatDate);void 0!==a[o]?(s=a[o].desc,s&&s.length&&i.desc&&i.desc.length&&(a[o].desc=s+"\n"+i.desc)):a[o]=i}),w.highlightedDates=e.extend(!0,[],a)),n.highlightedPeriods&&e.isArray(n.highlightedPeriods)&&n.highlightedPeriods.length&&(a=e.extend(!0,[],w.highlightedDates),e.each(n.highlightedPeriods,function(t,n){var s,r,i,o,c,u,l;if(e.isArray(n))s=n[0],r=n[1],i=n[2],l=n[3];else{var m=e.map(n.split(","),e.trim);s=Date.parseDate(m[0],w.formatDate),r=Date.parseDate(m[1],w.formatDate),i=m[2],l=m[3]}for(;r>=s;)o=new HighlightedDate(s,i,l),c=s.dateFormat(w.formatDate),s.setDate(s.getDate()+1),void 0!==a[c]?(u=a[c].desc,u&&u.length&&o.desc&&o.desc.length&&(a[c].desc=u+"\n"+o.desc)):a[c]=o}),w.highlightedDates=e.extend(!0,[],a)),n.disabledDates&&e.isArray(n.disabledDates)&&n.disabledDates.length&&(w.disabledDates=e.extend(!0,[],n.disabledDates)),n.disabledWeekDays&&e.isArray(n.disabledWeekDays)&&n.disabledWeekDays.length&&(w.disabledWeekDays=e.extend(!0,[],n.disabledWeekDays)),
!w.open&&!w.opened||w.inline||t.trigger("open.xdsoft"),w.inline&&(W=!0,T.addClass("xdsoft_inline"),t.after(T).hide()),w.inverseButton&&(w.next="xdsoft_prev",w.prev="xdsoft_next"),w.datepicker?O.addClass("active"):O.removeClass("active"),w.timepicker?L.addClass("active"):L.removeClass("active"),w.value&&(I.setCurrentTime(w.value),t&&t.val&&t.val(I.str)),isNaN(w.dayOfWeekStart)?w.dayOfWeekStart=0:w.dayOfWeekStart=parseInt(w.dayOfWeekStart,10)%7,w.timepickerScrollbar||U.xdsoftScroller("hide"),w.minDate&&/^[\+\-](.*)$/.test(w.minDate)&&(w.minDate=I.strToDateTime(w.minDate).dateFormat(w.formatDate)),w.maxDate&&/^[\+\-](.*)$/.test(w.maxDate)&&(w.maxDate=I.strToDateTime(w.maxDate).dateFormat(w.formatDate)),q.toggle(w.showApplyButton),A.find(".xdsoft_today_button").css("visibility",w.todayButton?"visible":"hidden"),A.find("."+w.prev).css("visibility",w.prevButton?"visible":"hidden"),A.find("."+w.next).css("visibility",w.nextButton?"visible":"hidden"),w.mask&&(t.off("keydown.xdsoft"),w.mask===!0&&(w.mask=w.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===e.type(w.mask)&&(k(w.mask,t.val())||t.val(w.mask.replace(/[0-9]/g,"_")),t.on("keydown.xdsoft",function(n){var a,D,M=this.value,I=n.which;if(I>=r&&i>=I||I>=o&&c>=I||I===d||I===l){for(a=s(this),D=I!==d&&I!==l?String.fromCharCode(I>=o&&c>=I?I-r:I):"_",I!==d&&I!==l||!a||(a-=1,D="_");/[^0-9_]/.test(w.mask.substr(a,1))&&a<w.mask.length&&a>0;)a+=I===d||I===l?-1:1;if(M=M.substr(0,a)+D+M.substr(a+1),""===e.trim(M))M=w.mask.replace(/[0-9]/g,"_");else if(a===w.mask.length)return n.preventDefault(),!1;for(a+=I===d||I===l?0:1;/[^0-9_]/.test(w.mask.substr(a,1))&&a<w.mask.length&&a>0;)a+=I===d||I===l?-1:1;k(w.mask,M)?(this.value=M,x(this,a)):""===e.trim(M)?this.value=w.mask.replace(/[0-9]/g,"_"):t.trigger("error_input.xdsoft")}else if(-1!==[E,R,C,S,_].indexOf(I)&&N||-1!==[p,f,v,h,g,y,u,b,m].indexOf(I))return!0;return n.preventDefault(),!1}))),w.validateOnBlur&&t.off("blur.xdsoft").on("blur.xdsoft",function(){if(w.allowBlank&&!e.trim(e(this).val()).length)e(this).val(null),T.data("xdsoft_datetime").empty();else if(Date.parseDate(e(this).val(),w.format))T.data("xdsoft_datetime").setCurrentTime(e(this).val());else{var t=+[e(this).val()[0],e(this).val()[1]].join(""),n=+[e(this).val()[2],e(this).val()[3]].join("");!w.datepicker&&w.timepicker&&t>=0&&24>t&&n>=0&&60>n?e(this).val([t,n].map(function(e){return e>9?e:"0"+e}).join(":")):e(this).val(I.now().dateFormat(w.format)),T.data("xdsoft_datetime").setCurrentTime(e(this).val())}T.trigger("changedatetime.xdsoft")}),w.dayOfWeekStartPrev=0===w.dayOfWeekStart?6:w.dayOfWeekStart-1,T.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},T.data("options",w).on("mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),B.hide(),j.hide(),!1}),U.append($),U.xdsoftScroller(),T.on("afterOpen.xdsoft",function(){U.xdsoftScroller()}),T.append(O).append(L),w.withoutCopyright!==!0&&T.append(P),O.append(A).append(F).append(q),e(w.parentID).append(T),s=function(){var t=this;t.now=function(e){var n,a,s=new Date;return!e&&w.defaultDate&&(n=t.strToDateTime(w.defaultDate),s.setFullYear(n.getFullYear()),s.setMonth(n.getMonth()),s.setDate(n.getDate())),w.yearOffset&&s.setFullYear(s.getFullYear()+w.yearOffset),!e&&w.defaultTime&&(a=t.strtotime(w.defaultTime),s.setHours(a.getHours()),s.setMinutes(a.getMinutes())),s},t.isValidDate=function(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())},t.setCurrentTime=function(e){t.currentTime="string"==typeof e?t.strToDateTime(e):t.isValidDate(e)?e:t.now(),T.trigger("xchange.xdsoft")},t.empty=function(){t.currentTime=null},t.getCurrentTime=function(e){return t.currentTime},t.nextMonth=function(){(void 0===t.currentTime||null===t.currentTime)&&(t.currentTime=t.now());var n,a=t.currentTime.getMonth()+1;return 12===a&&(t.currentTime.setFullYear(t.currentTime.getFullYear()+1),a=0),n=t.currentTime.getFullYear(),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),a+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(a),w.onChangeMonth&&e.isFunction(w.onChangeMonth)&&w.onChangeMonth.call(T,I.currentTime,T.data("input")),n!==t.currentTime.getFullYear()&&e.isFunction(w.onChangeYear)&&w.onChangeYear.call(T,I.currentTime,T.data("input")),T.trigger("xchange.xdsoft"),a},t.prevMonth=function(){(void 0===t.currentTime||null===t.currentTime)&&(t.currentTime=t.now());var n=t.currentTime.getMonth()-1;return-1===n&&(t.currentTime.setFullYear(t.currentTime.getFullYear()-1),n=11),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),n+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(n),w.onChangeMonth&&e.isFunction(w.onChangeMonth)&&w.onChangeMonth.call(T,I.currentTime,T.data("input")),T.trigger("xchange.xdsoft"),n},t.getWeekOfYear=function(e){var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+t.getDay()+1)/7)},t.strToDateTime=function(e){var n,a,s=[];return e&&e instanceof Date&&t.isValidDate(e)?e:(s=/^(\+|\-)(.*)$/.exec(e),s&&(s[2]=Date.parseDate(s[2],w.formatDate)),s&&s[2]?(n=s[2].getTime()-6e4*s[2].getTimezoneOffset(),a=new Date(t.now(!0).getTime()+parseInt(s[1]+"1",10)*n)):a=e?Date.parseDate(e,w.format):t.now(),t.isValidDate(a)||(a=t.now()),a)},t.strToDate=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var n=e?Date.parseDate(e,w.formatDate):t.now(!0);return t.isValidDate(n)||(n=t.now(!0)),n},t.strtotime=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var n=e?Date.parseDate(e,w.formatTime):t.now(!0);return t.isValidDate(n)||(n=t.now(!0)),n},t.str=function(){return t.currentTime.dateFormat(w.format)},t.currentTime=this.now()},I=new s,q.on("click",function(e){e.preventDefault(),T.data("changed",!0),I.setCurrentTime(a()),t.val(I.str()),T.trigger("close.xdsoft")}),A.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){T.data("changed",!0),I.setCurrentTime(0),T.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var e,n,a=I.getCurrentTime();a=new Date(a.getFullYear(),a.getMonth(),a.getDate()),e=I.strToDate(w.minDate),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),e>a||(n=I.strToDate(w.maxDate),n=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a>n||(t.val(I.str()),t.trigger("change"),T.trigger("close.xdsoft")))}),A.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,a=!1;!function s(e){t.hasClass(w.next)?I.nextMonth():t.hasClass(w.prev)&&I.prevMonth(),w.monthChangeSpinner&&(a||(n=setTimeout(s,e||100)))}(500),e([document.body,window]).on("mouseup.xdsoft",function r(){clearTimeout(n),a=!0,e([document.body,window]).off("mouseup.xdsoft",r)})}),L.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,a=!1,s=110;!function r(e){var i=U[0].clientHeight,o=$[0].offsetHeight,c=Math.abs(parseInt($.css("marginTop"),10));t.hasClass(w.next)&&o-i-w.timeHeightInTimePicker>=c?$.css("marginTop","-"+(c+w.timeHeightInTimePicker)+"px"):t.hasClass(w.prev)&&c-w.timeHeightInTimePicker>=0&&$.css("marginTop","-"+(c-w.timeHeightInTimePicker)+"px"),U.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt($.css("marginTop"),10)/(o-i))]),s=s>10?10:s-10,a||(n=setTimeout(r,e||s))}(500),e([document.body,window]).on("mouseup.xdsoft",function i(){clearTimeout(n),a=!0,e([document.body,window]).off("mouseup.xdsoft",i)})}),x=0,T.on("xchange.xdsoft",function(t){clearTimeout(x),x=setTimeout(function(){(void 0===I.currentTime||null===I.currentTime)&&(I.currentTime=I.now());for(var t,a,s,r,i,o,c,u,l,m,p="",d=new Date(I.currentTime.getFullYear(),I.currentTime.getMonth(),1,12,0,0),h=0,f=I.now(),g=!1,v=!1,b=[],y=!0,E="",R="";d.getDay()!==w.dayOfWeekStart;)d.setDate(d.getDate()-1);for(p+="<table><thead><tr>",w.weeks&&(p+="<th></th>"),t=0;7>t;t+=1)p+="<th>"+w.i18n[w.lang].dayOfWeek[(t+w.dayOfWeekStart)%7]+"</th>";for(p+="</tr></thead>",p+="<tbody>",w.maxDate!==!1&&(g=I.strToDate(w.maxDate),g=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59,999)),w.minDate!==!1&&(v=I.strToDate(w.minDate),v=new Date(v.getFullYear(),v.getMonth(),v.getDate()));h<I.currentTime.countDaysInMonth()||d.getDay()!==w.dayOfWeekStart||I.currentTime.getMonth()===d.getMonth();)b=[],h+=1,s=d.getDay(),r=d.getDate(),i=d.getFullYear(),o=d.getMonth(),c=I.getWeekOfYear(d),m="",b.push("xdsoft_date"),u=w.beforeShowDay&&e.isFunction(w.beforeShowDay.call)?w.beforeShowDay.call(T,d):null,g!==!1&&d>g||v!==!1&&v>d||u&&u[0]===!1?b.push("xdsoft_disabled"):-1!==w.disabledDates.indexOf(d.dateFormat(w.formatDate))?b.push("xdsoft_disabled"):-1!==w.disabledWeekDays.indexOf(s)&&b.push("xdsoft_disabled"),u&&""!==u[1]&&b.push(u[1]),I.currentTime.getMonth()!==o&&b.push("xdsoft_other_month"),(w.defaultSelect||T.data("changed"))&&I.currentTime.dateFormat(w.formatDate)===d.dateFormat(w.formatDate)&&b.push("xdsoft_current"),f.dateFormat(w.formatDate)===d.dateFormat(w.formatDate)&&b.push("xdsoft_today"),(0===d.getDay()||6===d.getDay()||-1!==w.weekends.indexOf(d.dateFormat(w.formatDate)))&&b.push("xdsoft_weekend"),void 0!==w.highlightedDates[d.dateFormat(w.formatDate)]&&(a=w.highlightedDates[d.dateFormat(w.formatDate)],b.push(void 0===a.style?"xdsoft_highlighted_default":a.style),m=void 0===a.desc?"":a.desc),w.beforeShowDay&&e.isFunction(w.beforeShowDay)&&b.push(w.beforeShowDay(d)),y&&(p+="<tr>",y=!1,w.weeks&&(p+="<th>"+c+"</th>")),p+='<td data-date="'+r+'" data-month="'+o+'" data-year="'+i+'" class="xdsoft_date xdsoft_day_of_week'+d.getDay()+" "+b.join(" ")+'" title="'+m+'"><div>'+r+"</div></td>",d.getDay()===w.dayOfWeekStartPrev&&(p+="</tr>",y=!0),d.setDate(r+1);if(p+="</tbody></table>",F.html(p),A.find(".xdsoft_label span").eq(0).text(w.i18n[w.lang].months[I.currentTime.getMonth()]),A.find(".xdsoft_label span").eq(1).text(I.currentTime.getFullYear()),E="",R="",o="",l=function(e,t){var n,a,s=I.now();s.setHours(e),e=parseInt(s.getHours(),10),s.setMinutes(t),t=parseInt(s.getMinutes(),10),n=new Date(I.currentTime),n.setHours(e),n.setMinutes(t),b=[],(w.minDateTime!==!1&&w.minDateTime>n||w.maxTime!==!1&&I.strtotime(w.maxTime).getTime()<s.getTime()||w.minTime!==!1&&I.strtotime(w.minTime).getTime()>s.getTime())&&b.push("xdsoft_disabled"),(w.minDateTime!==!1&&w.minDateTime>n||w.disabledMinTime!==!1&&s.getTime()>I.strtotime(w.disabledMinTime).getTime()&&w.disabledMaxTime!==!1&&s.getTime()<I.strtotime(w.disabledMaxTime).getTime())&&b.push("xdsoft_disabled"),a=new Date(I.currentTime),a.setHours(parseInt(I.currentTime.getHours(),10)),a.setMinutes(Math[w.roundTime](I.currentTime.getMinutes()/w.step)*w.step),(w.initTime||w.defaultSelect||T.data("changed"))&&a.getHours()===parseInt(e,10)&&(w.step>59||a.getMinutes()===parseInt(t,10))&&(w.defaultSelect||T.data("changed")?b.push("xdsoft_current"):w.initTime&&b.push("xdsoft_init_time")),parseInt(f.getHours(),10)===parseInt(e,10)&&parseInt(f.getMinutes(),10)===parseInt(t,10)&&b.push("xdsoft_today"),E+='<div class="xdsoft_time '+b.join(" ")+'" data-hour="'+e+'" data-minute="'+t+'">'+s.dateFormat(w.formatTime)+"</div>"},w.allowTimes&&e.isArray(w.allowTimes)&&w.allowTimes.length)for(h=0;h<w.allowTimes.length;h+=1)R=I.strtotime(w.allowTimes[h]).getHours(),o=I.strtotime(w.allowTimes[h]).getMinutes(),l(R,o);else for(h=0,t=0;h<(w.hours12?12:24);h+=1)for(t=0;60>t;t+=w.step)R=(10>h?"0":"")+h,o=(10>t?"0":"")+t,l(R,o);for($.html(E),n="",h=0,h=parseInt(w.yearStart,10)+w.yearOffset;h<=parseInt(w.yearEnd,10)+w.yearOffset;h+=1)n+='<div class="xdsoft_option '+(I.currentTime.getFullYear()===h?"xdsoft_current":"")+'" data-value="'+h+'">'+h+"</div>";for(B.children().eq(0).html(n),h=parseInt(w.monthStart,10),n="";h<=parseInt(w.monthEnd,10);h+=1)n+='<div class="xdsoft_option '+(I.currentTime.getMonth()===h?"xdsoft_current":"")+'" data-value="'+h+'">'+w.i18n[w.lang].months[h]+"</div>";j.children().eq(0).html(n),e(T).trigger("generate.xdsoft")},10),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(w.timepicker){var e,t,n,a;$.find(".xdsoft_current").length?e=".xdsoft_current":$.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time"),e?(t=U[0].clientHeight,n=$[0].offsetHeight,a=$.find(e).index()*w.timeHeightInTimePicker+1,a>n-t&&(a=n-t),U.trigger("scroll_element.xdsoft_scroller",[parseInt(a,10)/(n-t)])):U.trigger("scroll_element.xdsoft_scroller",[0])}}),k=0,F.on("click.xdsoft","td",function(n){n.stopPropagation(),k+=1;var a=e(this),s=I.currentTime;return(void 0===s||null===s)&&(I.currentTime=I.now(),s=I.currentTime),a.hasClass("xdsoft_disabled")?!1:(s.setDate(1),s.setFullYear(a.data("year")),s.setMonth(a.data("month")),s.setDate(a.data("date")),T.trigger("select.xdsoft",[s]),t.val(I.str()),(k>1||w.closeOnDateSelect===!0||w.closeOnDateSelect===!1&&!w.timepicker)&&!w.inline&&T.trigger("close.xdsoft"),w.onSelectDate&&e.isFunction(w.onSelectDate)&&w.onSelectDate.call(T,I.currentTime,T.data("input"),n),T.data("changed",!0),T.trigger("xchange.xdsoft"),T.trigger("changedatetime.xdsoft"),void setTimeout(function(){k=0},200))}),$.on("click.xdsoft","div",function(t){t.stopPropagation();var n=e(this),a=I.currentTime;return(void 0===a||null===a)&&(I.currentTime=I.now(),a=I.currentTime),n.hasClass("xdsoft_disabled")?!1:(a.setHours(n.data("hour")),a.setMinutes(n.data("minute")),T.trigger("select.xdsoft",[a]),T.data("input").val(I.str()),w.inline!==!0&&w.closeOnTimeSelect===!0&&T.trigger("close.xdsoft"),w.onSelectTime&&e.isFunction(w.onSelectTime)&&w.onSelectTime.call(T,I.currentTime,T.data("input"),t),T.data("changed",!0),T.trigger("xchange.xdsoft"),void T.trigger("changedatetime.xdsoft"))}),O.on("mousewheel.xdsoft",function(e){return w.scrollMonth?(e.deltaY<0?I.nextMonth():I.prevMonth(),!1):!0}),t.on("mousewheel.xdsoft",function(e){return w.scrollInput?!w.datepicker&&w.timepicker?(D=$.find(".xdsoft_current").length?$.find(".xdsoft_current").eq(0).index():0,D+e.deltaY>=0&&D+e.deltaY<$.children().length&&(D+=e.deltaY),$.children().eq(D).length&&$.children().eq(D).trigger("mousedown"),!1):w.datepicker&&!w.timepicker?(O.trigger(e,[e.deltaY,e.deltaX,e.deltaY]),t.val&&t.val(I.str()),T.trigger("changedatetime.xdsoft"),!1):void 0:!0}),T.on("changedatetime.xdsoft",function(t){if(w.onChangeDateTime&&e.isFunction(w.onChangeDateTime)){var n=T.data("input");w.onChangeDateTime.call(T,I.currentTime,n,t),delete w.value,n.trigger("change")}}).on("generate.xdsoft",function(){w.onGenerate&&e.isFunction(w.onGenerate)&&w.onGenerate.call(T,I.currentTime,T.data("input")),W&&(T.trigger("afterOpen.xdsoft"),W=!1)}).on("click.xdsoft",function(e){e.stopPropagation()}),D=0,M=function(){var t,n=T.data("input").offset(),a=n.top+T.data("input")[0].offsetHeight-1,s=n.left,r="absolute";"rtl"==T.data("input").parent().css("direction")&&(s-=T.outerWidth()-T.data("input").outerWidth()),w.fixed?(a-=e(window).scrollTop(),s-=e(window).scrollLeft(),r="fixed"):(a+T[0].offsetHeight>e(window).height()+e(window).scrollTop()&&(a=n.top-T[0].offsetHeight+1),0>a&&(a=0),s+T[0].offsetWidth>e(window).width()&&(s=e(window).width()-T[0].offsetWidth)),t=T[0];do if(t=t.parentNode,"relative"===window.getComputedStyle(t).getPropertyValue("position")&&e(window).width()>=t.offsetWidth){s-=(e(window).width()-t.offsetWidth)/2;break}while("HTML"!==t.nodeName);T.css({left:s,top:a,position:r})},T.on("open.xdsoft",function(t){var n=!0;w.onShow&&e.isFunction(w.onShow)&&(n=w.onShow.call(T,I.currentTime,T.data("input"),t)),n!==!1&&(T.show(),M(),e(window).off("resize.xdsoft",M).on("resize.xdsoft",M),w.closeOnWithoutClick&&e([document.body,window]).on("mousedown.xdsoft",function a(){T.trigger("close.xdsoft"),e([document.body,window]).off("mousedown.xdsoft",a)}))}).on("close.xdsoft",function(t){var n=!0;A.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),w.onClose&&e.isFunction(w.onClose)&&(n=w.onClose.call(T,I.currentTime,T.data("input"),t)),n===!1||w.opened||w.inline||T.hide(),t.stopPropagation()}).on("toggle.xdsoft",function(e){T.is(":visible")?T.trigger("close.xdsoft"):T.trigger("open.xdsoft")}).data("input",t),H=0,z=0,T.data("xdsoft_datetime",I),T.setOptions(w),I.setCurrentTime(a()),t.data("xdsoft_datetimepicker",T).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(e){t.is(":disabled")||t.data("xdsoft_datetimepicker").is(":visible")&&w.closeOnInputClick||(clearTimeout(H),H=setTimeout(function(){t.is(":disabled")||(W=!0,I.setCurrentTime(a()),T.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var n,a=(this.value,t.which);return-1!==[m].indexOf(a)&&w.enterLikeTab?(n=e("input:visible,textarea:visible"),T.trigger("close.xdsoft"),n.eq(n.index(this)+1).focus(),!1):-1!==[b].indexOf(a)?(T.trigger("close.xdsoft"),!0):void 0})},s=function(t){var n=t.data("xdsoft_datetimepicker");n&&(n.data("xdsoft_datetime",null),n.remove(),t.data("xdsoft_datetimepicker",null).off(".xdsoft"),e(window).off("resize.xdsoft"),e([window,document.body]).off("mousedown.xdsoft"),t.unmousewheel&&t.unmousewheel())},e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode===u&&(N=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode===u&&(N=!1)}),this.each(function(){var t,r=e(this).data("xdsoft_datetimepicker");if(r){if("string"===e.type(n))switch(n){case"show":e(this).select().focus(),r.trigger("open.xdsoft");break;case"hide":r.trigger("close.xdsoft");break;case"toggle":r.trigger("toggle.xdsoft");break;case"destroy":s(e(this));break;case"reset":this.value=this.defaultValue,this.value&&r.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,w.format))||r.data("changed",!1),r.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":t=r.data("input"),t.trigger("blur.xdsoft")}else r.setOptions(n);return 0}"string"!==e.type(n)&&(!w.lazyInit||w.open||w.inline?a(e(this)):k(e(this)))})},e.fn.datetimepicker.defaults=t}(jQuery),function(){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var i=t||window.event,o=c.call(arguments,1),u=0,m=0,p=0,d=0,h=0,f=0;if(t=e.event.fix(i),t.type="mousewheel","detail"in i&&(p=-1*i.detail),"wheelDelta"in i&&(p=i.wheelDelta),"wheelDeltaY"in i&&(p=i.wheelDeltaY),"wheelDeltaX"in i&&(m=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(m=-1*p,p=0),u=0===p?m:p,"deltaY"in i&&(p=-1*i.deltaY,u=p),"deltaX"in i&&(m=i.deltaX,0===p&&(u=-1*m)),0!==p||0!==m){if(1===i.deltaMode){var g=e.data(this,"mousewheel-line-height");u*=g,p*=g,m*=g}else if(2===i.deltaMode){var v=e.data(this,"mousewheel-page-height");u*=v,p*=v,m*=v}if(d=Math.max(Math.abs(p),Math.abs(m)),(!r||r>d)&&(r=d,a(i,d)&&(r/=40)),a(i,d)&&(u/=40,m/=40,p/=40),u=Math[u>=1?"floor":"ceil"](u/r),m=Math[m>=1?"floor":"ceil"](m/r),p=Math[p>=1?"floor":"ceil"](p/r),l.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();h=t.clientX-b.left,f=t.clientY-b.top}return t.deltaX=m,t.deltaY=p,t.deltaFactor=r,t.offsetX=h,t.offsetY=f,t.deltaMode=0,o.unshift(t,u,m,p),s&&clearTimeout(s),s=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,o)}}function n(){r=null}function a(e,t){return l.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var s,r,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice;if(e.event.fixHooks)for(var u=i.length;u;)e.event.fixHooks[i[--u]]=e.event.mouseHooks;var l=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=o.length;n;)this.addEventListener(o[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",l.getLineHeight(this)),e.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=o.length;n;)this.removeEventListener(o[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),a=n["offsetParent"in e.fn?"offsetParent":"parent"]();return a.length||(a=e("body")),parseInt(a.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(e){if("unixtime"==e)return parseInt(this.getTime()/1e3);null==Date.formatFunctions[e]&&Date.createNewFormat(e);var t=Date.formatFunctions[e];return this[t]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var codePrefix="Date.prototype."+funcName+" = function() {return ",code="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;code=0==code.length?'""':code.substring(0,code.length-3),eval(codePrefix+code+";}")},Date.getFormatCode=function(e){switch(e){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(e)+"' + "}},Date.parseDate=function(e,t){if("unixtime"==t)return new Date(isNaN(parseInt(e))?0:1e3*parseInt(e));null==Date.parseFunctions[t]&&Date.createParser(t);var n=Date.parseFunctions[t];return Date[n](e)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$","i"),eval(code)},Date.formatCodeToRegex=function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+t+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(e)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()},Date.prototype.getWeekOfYear=function(){var e=this.getDayOfYear()+(4-this.getDay()),t=new Date(this.getFullYear(),0,1),n=7-t.getDay()+4;return String.leftPad(Math.ceil((e-n)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100||e%400==0&&e)},Date.prototype.getFirstDayOfMonth=function(){var e=(this.getDay()-(this.getDate()-1))%7;return 0>e?e+7:e},Date.prototype.getLastDayOfMonth=function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return 0>e?e+7:e},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(e){return e.replace(/('|\\)/g,"\\$1")},String.leftPad=function(e,t,n){var a=new String(e);for(null==n&&(n=" ");a.length<t;)a=n+a;return a},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}(),function(e,t,n,a){function s(t,n){this.element=t,this.settings=e.extend({},i,n),this._defaults=i,this._name=r,this.init()}var r="metisMenu",i={toggle:!0};s.prototype={init:function(){var t=e(this.element),n=this.settings.toggle;t.find("li.active").has("ul").children("ul").addClass("collapse in"),t.find("li").not(".active").has("ul").children("ul").addClass("collapse"),t.find("li").has("ul").children("a").on("click",function(t){t.preventDefault(),e(this).children("span").hasClass("fa-plus-square-o")?e(this).children("span").removeClass("fa-plus-square-o").addClass("fa-minus-square-o"):e(this).children("span").removeClass("fa-minus-square-o").addClass("fa-plus-square-o"),e(this).parent("li").toggleClass("active").children("ul").collapse("toggle"),n&&e(this).parent("li").siblings().removeClass("active").children("ul.in").collapse("hide")})}},e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new s(this,t))})}}(jQuery,window,document);