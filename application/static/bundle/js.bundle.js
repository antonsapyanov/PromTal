function markup(e){function t(e){function t(t,n){var r=(""+Math.random()).replace("0.","");return a[r]=n,"["+e+":"+r+"]"}return t}function n(e){function t(t,n,r){return e.format(a[n]).trim()}return t}var r,a={};return r=e.replace("<","&lt;").replace(">","&gt;"),r=r.replace("...","&hellip;"),r=r.replace(/(^|\s)+--(\s|$)+/gi,"$1&mdash;$2"),r=r.replace(/\[raw](.*?)\[\/raw]/gi,t("raw")),r=r.replace(/\[code](.*?)\[\/code]/gi,t("code")),r=r.replace(/\/\/\/(.+?)\/\/\//gi,"<i>$1</i>"),r=r.replace(/\+\+\+(.+?)\+\+\+/gi,"<b>$1</b>"),r=r.replace(/---(.+?)---/gi,"<del>$1</del>"),r=r.replace(/___(.+?)___/gi,"<ins>$1</ins>"),r=r.replace(/(^|\s)(.+):\/\/(.+?)($|\s)/gi,'$1<a href="$2://$3">$2://$3</a>$4'),r=r.replace(/\[raw:(.*?)]/gi,n("{0}")),r=r.replace(/\[code:(.*?)]/gi,n("<code>{0}</code>")),r=addSmiles(r)}function addSmiles(e){for(var t in smiles)for(var n in smiles[t])e=e.replace(smiles[t][n],'<img src="'+t+'" class="smile" alt=""/>');return e}function locationReload(){window.location.reload()}function tinymceInit(){tinymce.init({selector:"textarea.editor",language:"ru",height:300,convert_urls:!1,plugins:["pagebreak","advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],statusbar:!1,pagebreak_separator:"<!-- page break -->",file_picker_callback:function(e,t,n){if("image"==n.filetype){var r=$('<form id="file_upload_form" action="/file/upload/image" style="display: none" method="post" enctype="multipart/form-data"></form>'),a=$('<input type="file" name="file" />');r.append(a),$("body").append(r),a.on("change",function(){r.submit()}),r.submit(function(t){t.preventDefault();var n=new FormData($("#file_upload_form")[0]);return $.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:n,cache:!1,contentType:!1,processData:!1,success:function(t){r.remove(),e(t.file.url)},error:function(){alert("error in ajax form submission")}}),!1}),a.trigger("click")}},setup:function(e){e.on("init",function(){this.getDoc().body.style.fontSize="12px"}),e.on("change",function(){tinymce.triggerSave()})}})}function dateDiffInDays(e,t){var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((r-n)/_MS_PER_DAY)}function niceDateFormat(e,t){var n=new Date;return e?(t=t||!0,e=new Date(e),0==dateDiffInDays(n,e)?e.format("Сегодня"+(t?" в HH:MM":"")):-1==dateDiffInDays(n,e)?e.format("Вчера"+(t?" в HH:MM":"")):1==dateDiffInDays(n,e)?e.format("Завтра"+(t?" в HH:MM":"")):e.format("dd.mm.yy"+(t?" в HH:MM":""))):""}function mediaFill(e){var t=$(e),n=$(e).closest(".media"),r="contain",a=n[0].offsetHeight,s=n[0].offsetWidth,i=t[0].naturalHeight,o=t[0].naturalWidth;i>=a&&o>=s&&(r="cover"),n.removeClass("contain").removeClass("cover").addClass(r)}function LazyPaginator(e){this.url=e.url||null,this.targetElem=$(e.targetElem)||null,this.buttonMore=$(e.buttonMore)||null,this.render=e.render||function(){},this.posts=[],this.nextPage=1,this.pagesAmount=0,this.init=function(){if(this.targetElem&&this.buttonMore){var e=this;this.buttonMore.on("click",function(){e.get()})}},this.get=function(){var e=this;$.ajax({url:e.url,method:"GET",data:"page="+e.nextPage,dataType:"json"}).done(function(t){e.nextPage=t.paginator.page+1,e.pagesAmount=t.paginator.pages,e.append(t.objects),e.nextPage>e.pagesAmount?e.buttonMore.hide():e.buttonMore.show()})},this.append=function(e){e=e instanceof Array?e:[],this.posts=this.posts.concat(e);for(var t=0,n=e.length;n>t;t++)this.targetElem.append(this.render(e[t]))}}function deleteCommunity(e){Popup.show({title:"Удалить группу",content:"Вы уверены,что хотите удалить группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.ajax({url:"/community/"+e,type:"DELETE",success:function(e){window.location.reload()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}function deleteCommunityPost(e){return Popup.show({title:"Удалить новость",content:"Вы уверены,что хотите удалить новость?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.ajax({url:"/community/post/"+e,type:"DELETE",success:function(e){window.location.href="/community/"+e.community.id}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]}),!1}!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.React=e()}}(function(){return function e(t,n,r){function a(i,o){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!o&&c)return c(i,!0);if(s)return s(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return a(n?n:e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,t,n){"use strict";var r=e(25),a=e(31),s=e(42),i=e(34),o=e(69),c=e(98),u=e(100),l=e(127),p=e(122),m=e(170);a.addons={CSSTransitionGroup:i,LinkedStateMixin:r,PureRenderMixin:s,TransitionGroup:c,batchedUpdates:u.batchedUpdates,classSet:l,cloneWithProps:p,createFragment:o.create,update:m},a.addons.Perf=e(61),a.addons.TestUtils=e(95),t.exports=a},{100:100,122:122,127:127,170:170,25:25,31:31,34:34,42:42,61:61,69:69,95:95,98:98}],2:[function(e,t,n){"use strict";var r=e(134),a={componentDidMount:function(){this.props.autoFocus&&r(this.getDOMNode())}};t.exports=a},{134:134}],3:[function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function a(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function s(e){switch(e){case k.topCompositionStart:return D.compositionStart;case k.topCompositionEnd:return D.compositionEnd;case k.topCompositionUpdate:return D.compositionUpdate}}function i(e,t){return e===k.topKeyDown&&t.keyCode===C}function o(e,t){switch(e){case k.topKeyUp:return-1!==E.indexOf(t.keyCode);case k.topKeyDown:return t.keyCode!==C;case k.topKeyPress:case k.topMouseDown:case k.topBlur:return!0;default:return!1}}function c(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,r){var a,u;if(S?a=s(e):M?o(e,r)&&(a=D.compositionEnd):i(e,r)&&(a=D.compositionStart),!a)return null;w&&(M||a!==D.compositionStart?a===D.compositionEnd&&M&&(u=M.getData()):M=v.getPooled(t));var l=g.getPooled(a,n,r);if(u)l.data=u;else{var p=c(r);null!==p&&(l.data=p)}return h.accumulateTwoPhaseDispatches(l),l}function l(e,t){switch(e){case k.topCompositionEnd:return c(t);case k.topKeyPress:var n=t.which;return n!==_?null:(I=!0,x);case k.topTextInput:var r=t.data;return r===x&&I?null:r;default:return null}}function p(e,t){if(M){if(e===k.topCompositionEnd||o(e,t)){var n=M.getData();return v.release(M),M=null,n}return null}switch(e){case k.topPaste:return null;case k.topKeyPress:return t.which&&!a(t)?String.fromCharCode(t.which):null;case k.topCompositionEnd:return w?null:t.data;default:return null}}function m(e,t,n,r){var a;if(a=N?l(e,r):p(e,r),!a)return null;var s=y.getPooled(D.beforeInput,n,r);return s.data=a,h.accumulateTwoPhaseDispatches(s),s}var d=e(16),h=e(21),f=e(22),v=e(23),g=e(106),y=e(110),b=e(157),E=[9,13,27,32],C=229,S=f.canUseDOM&&"CompositionEvent"in window,R=null;f.canUseDOM&&"documentMode"in document&&(R=document.documentMode);var N=f.canUseDOM&&"TextEvent"in window&&!R&&!r(),w=f.canUseDOM&&(!S||R&&R>8&&11>=R),_=32,x=String.fromCharCode(_),k=d.topLevelTypes,D={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[k.topCompositionEnd,k.topKeyPress,k.topTextInput,k.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[k.topBlur,k.topCompositionEnd,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[k.topBlur,k.topCompositionStart,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[k.topBlur,k.topCompositionUpdate,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]}},I=!1,M=null,T={eventTypes:D,extractEvents:function(e,t,n,r){return[u(e,t,n,r),m(e,t,n,r)]}};t.exports=T},{106:106,110:110,157:157,16:16,21:21,22:22,23:23}],4:[function(e,t,n){var r=e(150),a={addClass:function(e,t){return r(!/\s/.test(t),'CSSCore.addClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.add(t):a.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return r(!/\s/.test(t),'CSSCore.removeClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.remove(t):a.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?a.addClass:a.removeClass)(e,t)},hasClass:function(e,t){return r(!/\s/.test(t),"CSS.hasClass takes only a single class name."),e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}};t.exports=a},{150:150}],5:[function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var a={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},s=["Webkit","ms","Moz","O"];Object.keys(a).forEach(function(e){s.forEach(function(t){a[r(t,e)]=a[e]})});var i={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},o={isUnitlessNumber:a,shorthandPropertyExpansions:i};t.exports=o},{}],6:[function(e,t,n){"use strict";var r=e(5),a=e(22),s=e(121),i=e(128),o=e(148),c=e(159),u=e(171),l=c(function(e){return o(e)}),p="cssFloat";a.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(p="styleFloat");var m=/^(?:webkit|moz|o)[A-Z]/,d=/;\s*$/,h={},f={},v=function(e){h.hasOwnProperty(e)&&h[e]||(h[e]=!0,u(!1,"Unsupported style property %s. Did you mean %s?",e,s(e)))},g=function(e){h.hasOwnProperty(e)&&h[e]||(h[e]=!0,u(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)))},y=function(e,t){f.hasOwnProperty(t)&&f[t]||(f[t]=!0,u(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',e,t.replace(d,"")))},b=function(e,t){e.indexOf("-")>-1?v(e):m.test(e)?g(e):d.test(t)&&y(e,t)},E={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];b(n,r),null!=r&&(t+=l(n)+":",t+=i(n,r)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var a in t)if(t.hasOwnProperty(a)){b(a,t[a]);var s=i(a,t[a]);if("float"===a&&(a=p),s)n[a]=s;else{var o=r.shorthandPropertyExpansions[a];if(o)for(var c in o)n[c]="";else n[a]=""}}}};t.exports=E},{121:121,128:128,148:148,159:159,171:171,22:22,5:5}],7:[function(e,t,n){"use strict";function r(){this._callbacks=null,this._contexts=null}var a=e(30),s=e(29),i=e(150);s(r.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){i(e.length===t.length,"Mismatched list of contexts in callback queue"),this._callbacks=null,this._contexts=null;for(var n=0,r=e.length;r>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),a.addPoolingTo(r),t.exports=r},{150:150,29:29,30:30}],8:[function(e,t,n){"use strict";function r(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function a(e){var t=R.getPooled(k.change,I,e);E.accumulateTwoPhaseDispatches(t),S.batchedUpdates(s,t)}function s(e){b.enqueueEvents(e),b.processEventQueue()}function i(e,t){D=e,I=t,D.attachEvent("onchange",a)}function o(){D&&(D.detachEvent("onchange",a),D=null,I=null)}function c(e,t,n){return e===x.topChange?n:void 0}function u(e,t,n){e===x.topFocus?(o(),i(t,n)):e===x.topBlur&&o()}function l(e,t){D=e,I=t,M=e.value,T=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(D,"value",O),D.attachEvent("onpropertychange",m)}function p(){D&&(delete D.value,D.detachEvent("onpropertychange",m),D=null,I=null,M=null,T=null)}function m(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==M&&(M=t,a(e))}}function d(e,t,n){return e===x.topInput?n:void 0}function h(e,t,n){e===x.topFocus?(p(),l(t,n)):e===x.topBlur&&p()}function f(e,t,n){return e!==x.topSelectionChange&&e!==x.topKeyUp&&e!==x.topKeyDown||!D||D.value===M?void 0:(M=D.value,I)}function v(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function g(e,t,n){return e===x.topClick?n:void 0}var y=e(16),b=e(18),E=e(21),C=e(22),S=e(100),R=e(108),N=e(151),w=e(153),_=e(157),x=y.topLevelTypes,k={change:{phasedRegistrationNames:{bubbled:_({onChange:null}),captured:_({onChangeCapture:null})},dependencies:[x.topBlur,x.topChange,x.topClick,x.topFocus,x.topInput,x.topKeyDown,x.topKeyUp,x.topSelectionChange]}},D=null,I=null,M=null,T=null,A=!1;C.canUseDOM&&(A=N("change")&&(!("documentMode"in document)||document.documentMode>8));var P=!1;C.canUseDOM&&(P=N("input")&&(!("documentMode"in document)||document.documentMode>9));var O={get:function(){return T.get.call(this)},set:function(e){M=""+e,T.set.call(this,e)}},L={eventTypes:k,extractEvents:function(e,t,n,a){var s,i;if(r(t)?A?s=c:i=u:w(t)?P?s=d:(s=f,i=h):v(t)&&(s=g),s){var o=s(e,t,n);if(o){var l=R.getPooled(k.change,o,a);return E.accumulateTwoPhaseDispatches(l),l}}i&&i(e,t,n)}};t.exports=L},{100:100,108:108,151:151,153:153,157:157,16:16,18:18,21:21,22:22}],9:[function(e,t,n){"use strict";var r=0,a={createReactRootIndex:function(){return r++}};t.exports=a},{}],10:[function(e,t,n){"use strict";function r(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var a=e(13),s=e(79),i=e(165),o=e(150),c={dangerouslyReplaceNodeWithMarkup:a.dangerouslyReplaceNodeWithMarkup,updateTextContent:i,processUpdates:function(e,t){for(var n,c=null,u=null,l=0;l<e.length;l++)if(n=e[l],n.type===s.MOVE_EXISTING||n.type===s.REMOVE_NODE){var p=n.fromIndex,m=n.parentNode.childNodes[p],d=n.parentID;o(m,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",p,d),c=c||{},c[d]=c[d]||[],c[d][p]=m,u=u||[],u.push(m)}var h=a.dangerouslyRenderMarkup(t);if(u)for(var f=0;f<u.length;f++)u[f].parentNode.removeChild(u[f]);for(var v=0;v<e.length;v++)switch(n=e[v],n.type){case s.INSERT_MARKUP:r(n.parentNode,h[n.markupIndex],n.toIndex);break;case s.MOVE_EXISTING:r(n.parentNode,c[n.parentID][n.fromIndex],n.toIndex);break;case s.TEXT_CONTENT:i(n.parentNode,n.textContent);break;case s.REMOVE_NODE:}}};t.exports=c},{13:13,150:150,165:165,79:79}],11:[function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var a=e(150),s={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},i=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&o._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var u in t){a(!o.isStandardName.hasOwnProperty(u),"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",u),o.isStandardName[u]=!0;var l=u.toLowerCase();if(o.getPossibleStandardName[l]=u,n.hasOwnProperty(u)){var p=n[u];o.getPossibleStandardName[p]=u,o.getAttributeName[u]=p}else o.getAttributeName[u]=l;o.getPropertyName[u]=i.hasOwnProperty(u)?i[u]:u,c.hasOwnProperty(u)?o.getMutationMethod[u]=c[u]:o.getMutationMethod[u]=null;var m=t[u];o.mustUseAttribute[u]=r(m,s.MUST_USE_ATTRIBUTE),o.mustUseProperty[u]=r(m,s.MUST_USE_PROPERTY),o.hasSideEffects[u]=r(m,s.HAS_SIDE_EFFECTS),o.hasBooleanValue[u]=r(m,s.HAS_BOOLEAN_VALUE),o.hasNumericValue[u]=r(m,s.HAS_NUMERIC_VALUE),o.hasPositiveNumericValue[u]=r(m,s.HAS_POSITIVE_NUMERIC_VALUE),o.hasOverloadedBooleanValue[u]=r(m,s.HAS_OVERLOADED_BOOLEAN_VALUE),a(!o.mustUseAttribute[u]||!o.mustUseProperty[u],"DOMProperty: Cannot require using both attribute and property: %s",u),a(o.mustUseProperty[u]||!o.hasSideEffects[u],"DOMProperty: Properties that have side effects must use property: %s",u),a(!!o.hasBooleanValue[u]+!!o.hasNumericValue[u]+!!o.hasOverloadedBooleanValue[u]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",u)}}},i={},o={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<o._isCustomAttributeFunctions.length;t++){var n=o._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=i[e];return r||(i[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:s};t.exports=o},{150:150}],12:[function(e,t,n){"use strict";function r(e,t){return null==t||a.hasBooleanValue[e]&&!t||a.hasNumericValue[e]&&isNaN(t)||a.hasPositiveNumericValue[e]&&1>t||a.hasOverloadedBooleanValue[e]&&t===!1}var a=e(11),s=e(163),i=e(171),o={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},c={},u=function(e){if(!(o.hasOwnProperty(e)&&o[e]||c.hasOwnProperty(e)&&c[e])){c[e]=!0;var t=e.toLowerCase(),n=a.isCustomAttribute(t)?t:a.getPossibleStandardName.hasOwnProperty(t)?a.getPossibleStandardName[t]:null;i(null==n,"Unknown DOM property %s. Did you mean %s?",e,n)}},l={createMarkupForID:function(e){return a.ID_ATTRIBUTE_NAME+"="+s(e)},createMarkupForProperty:function(e,t){if(a.isStandardName.hasOwnProperty(e)&&a.isStandardName[e]){if(r(e,t))return"";var n=a.getAttributeName[e];return a.hasBooleanValue[e]||a.hasOverloadedBooleanValue[e]&&t===!0?n:n+"="+s(t)}return a.isCustomAttribute(e)?null==t?"":e+"="+s(t):(u(e),null)},setValueForProperty:function(e,t,n){if(a.isStandardName.hasOwnProperty(t)&&a.isStandardName[t]){var s=a.getMutationMethod[t];if(s)s(e,n);else if(r(t,n))this.deleteValueForProperty(e,t);else if(a.mustUseAttribute[t])e.setAttribute(a.getAttributeName[t],""+n);else{var i=a.getPropertyName[t];a.hasSideEffects[t]&&""+e[i]==""+n||(e[i]=n)}}else a.isCustomAttribute(t)?null==n?e.removeAttribute(t):e.setAttribute(t,""+n):u(t)},deleteValueForProperty:function(e,t){if(a.isStandardName.hasOwnProperty(t)&&a.isStandardName[t]){var n=a.getMutationMethod[t];if(n)n(e,void 0);else if(a.mustUseAttribute[t])e.removeAttribute(a.getAttributeName[t]);else{var r=a.getPropertyName[t],s=a.getDefaultValueForProperty(e.nodeName,r);a.hasSideEffects[t]&&""+e[r]===s||(e[r]=s)}}else a.isCustomAttribute(t)?e.removeAttribute(t):u(t)}};t.exports=l},{11:11,163:163,171:171}],13:[function(e,t,n){"use strict";function r(e){return e.substring(1,e.indexOf(" "))}var a=e(22),s=e(126),i=e(129),o=e(142),c=e(150),u=/^(<[^ \/>]+)/,l="data-danger-index",p={dangerouslyRenderMarkup:function(e){c(a.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering.");for(var t,n={},p=0;p<e.length;p++)c(e[p],"dangerouslyRenderMarkup(...): Missing markup."),t=r(e[p]),t=o(t)?t:"*",n[t]=n[t]||[],n[t][p]=e[p];var m=[],d=0;for(t in n)if(n.hasOwnProperty(t)){var h,f=n[t];for(h in f)if(f.hasOwnProperty(h)){var v=f[h];f[h]=v.replace(u,"$1 "+l+'="'+h+'" ')}for(var g=s(f.join(""),i),y=0;y<g.length;++y){var b=g[y];b.hasAttribute&&b.hasAttribute(l)?(h=+b.getAttribute(l),b.removeAttribute(l),c(!m.hasOwnProperty(h),"Danger: Assigning to an already-occupied result index."),m[h]=b,d+=1):console.error("Danger: Discarding unexpected node:",b)}}return c(d===m.length,"Danger: Did not assign to every index of resultList."),c(m.length===e.length,"Danger: Expected markup to render %s nodes, but rendered %s.",e.length,m.length),m},dangerouslyReplaceNodeWithMarkup:function(e,t){c(a.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering."),c(t,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),c("html"!==e.tagName.toLowerCase(),"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See React.renderToString().");var n=s(t,i)[0];e.parentNode.replaceChild(n,e)}};t.exports=p},{126:126,129:129,142:142,150:150,22:22}],14:[function(e,t,n){"use strict";var r=e(157),a=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null}),r({AnalyticsEventPlugin:null}),r({MobileSafariClickEventPlugin:null})];t.exports=a},{157:157}],15:[function(e,t,n){"use strict";var r=e(16),a=e(21),s=e(112),i=e(77),o=e(157),c=r.topLevelTypes,u=i.getFirstReactDOM,l={mouseEnter:{registrationName:o({onMouseEnter:null}),dependencies:[c.topMouseOut,c.topMouseOver]},mouseLeave:{registrationName:o({onMouseLeave:null}),dependencies:[c.topMouseOut,c.topMouseOver]}},p=[null,null],m={eventTypes:l,extractEvents:function(e,t,n,r){if(e===c.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(e!==c.topMouseOut&&e!==c.topMouseOver)return null;var o;if(t.window===t)o=t;else{var m=t.ownerDocument;o=m?m.defaultView||m.parentWindow:window}var d,h;if(e===c.topMouseOut?(d=t,h=u(r.relatedTarget||r.toElement)||o):(d=o,h=t),d===h)return null;var f=d?i.getID(d):"",v=h?i.getID(h):"",g=s.getPooled(l.mouseLeave,f,r);g.type="mouseleave",g.target=d,g.relatedTarget=h;var y=s.getPooled(l.mouseEnter,v,r);return y.type="mouseenter",y.target=h,y.relatedTarget=d,a.accumulateEnterLeaveDispatches(g,y,f,v),p[0]=g,p[1]=y,p}};t.exports=m},{112:112,157:157,16:16,21:21,77:77}],16:[function(e,t,n){"use strict";var r=e(156),a=r({bubbled:null,captured:null}),s=r({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),i={topLevelTypes:s,PropagationPhases:a};t.exports=i},{156:156}],17:[function(e,t,n){var r=e(129),a={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):(console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})},registerDefault:function(){}};t.exports=a},{129:129}],18:[function(e,t,n){"use strict";function r(){var e=m&&m.traverseTwoPhase&&m.traverseEnterLeave;c(e,"InstanceHandle not injected before use!")}var a=e(19),s=e(20),i=e(118),o=e(135),c=e(150),u={},l=null,p=function(e){if(e){var t=s.executeDispatch,n=a.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),s.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},m=null,d={injection:{injectMount:s.injection.injectMount,injectInstanceHandle:function(e){m=e,r()},getInstanceHandle:function(){return r(),m},injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},eventNameDispatchConfigs:a.eventNameDispatchConfigs,registrationNameModules:a.registrationNameModules,putListener:function(e,t,n){c(!n||"function"==typeof n,"Expected %s listener to be a function, instead got type %s",t,typeof n);var r=u[t]||(u[t]={});r[e]=n},getListener:function(e,t){var n=u[t];return n&&n[e]},deleteListener:function(e,t){var n=u[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in u)delete u[t][e]},extractEvents:function(e,t,n,r){for(var s,o=a.plugins,c=0,u=o.length;u>c;c++){var l=o[c];if(l){var p=l.extractEvents(e,t,n,r);p&&(s=i(s,p))}}return s},enqueueEvents:function(e){e&&(l=i(l,e))},processEventQueue:function(){var e=l;l=null,o(e,p),c(!l,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.")},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=d},{118:118,135:135,150:150,19:19,20:20}],19:[function(e,t,n){"use strict";function r(){if(o)for(var e in c){var t=c[e],n=o.indexOf(e);if(i(n>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e),!u.plugins[n]){i(t.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e),u.plugins[n]=t;var r=t.eventTypes;for(var s in r)i(a(r[s],t,s),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",s,e)}}}function a(e,t,n){i(!u.eventNameDispatchConfigs.hasOwnProperty(n),"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",n),u.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];s(o,t,n)}return!0}return e.registrationName?(s(e.registrationName,t,n),!0):!1}function s(e,t,n){i(!u.registrationNameModules[e],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e),u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var i=e(150),o=null,c={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){i(!o,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."),o=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];c.hasOwnProperty(n)&&c[n]===a||(i(!c[n],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",n),c[n]=a,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=u.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){o=null;for(var e in c)c.hasOwnProperty(e)&&delete c[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=u.registrationNameModules;for(var a in r)r.hasOwnProperty(a)&&delete r[a]}};t.exports=u},{150:150}],20:[function(e,t,n){"use strict";function r(e){return e===g.topMouseUp||e===g.topTouchEnd||e===g.topTouchCancel}function a(e){return e===g.topMouseMove||e===g.topTouchMove}function s(e){return e===g.topMouseDown||e===g.topTouchStart}function i(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;if(d(e),Array.isArray(n))for(var a=0;a<n.length&&!e.isPropagationStopped();a++)t(e,n[a],r[a]);else n&&t(e,n,r)}function o(e,t,n){e.currentTarget=v.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function c(e,t){i(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function u(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(d(e),Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function l(e){var t=u(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function p(e){d(e);var t=e._dispatchListeners,n=e._dispatchIDs;f(!Array.isArray(t),"executeDirectDispatch(...): Invalid `event`.");var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function m(e){return!!e._dispatchListeners}var d,h=e(16),f=e(150),v={Mount:null,injectMount:function(e){v.Mount=e,f(e&&e.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode.")}},g=h.topLevelTypes;d=function(e){var t=e._dispatchListeners,n=e._dispatchIDs,r=Array.isArray(t),a=Array.isArray(n),s=a?n.length:n?1:0,i=r?t.length:t?1:0;f(a===r&&s===i,"EventPluginUtils: Invalid `event`.")};var y={isEndish:r,isMoveish:a,isStartish:s,executeDirectDispatch:p,executeDispatch:o,executeDispatchesInOrder:c,executeDispatchesInOrderStopAtTrue:l,hasDispatches:m,injection:v,useTouchEvents:!1};t.exports=y},{150:150,16:16}],21:[function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return v(e,r)}function a(e,t,n){if(!e)throw new Error("Dispatching id must not be null");var a=t?f.bubbled:f.captured,s=r(e,n,a);s&&(n._dispatchListeners=d(n._dispatchListeners,s),n._dispatchIDs=d(n._dispatchIDs,e))}function s(e){e&&e.dispatchConfig.phasedRegistrationNames&&m.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,a,e)}function i(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,a=v(e,r);a&&(n._dispatchListeners=d(n._dispatchListeners,a),n._dispatchIDs=d(n._dispatchIDs,e))}}function o(e){e&&e.dispatchConfig.registrationName&&i(e.dispatchMarker,null,e)}function c(e){h(e,s)}function u(e,t,n,r){m.injection.getInstanceHandle().traverseEnterLeave(n,r,i,e,t)}function l(e){h(e,o)}var p=e(16),m=e(18),d=e(118),h=e(135),f=p.PropagationPhases,v=m.getListener,g={accumulateTwoPhaseDispatches:c,accumulateDirectDispatches:l,accumulateEnterLeaveDispatches:u};t.exports=g},{118:118,135:135,16:16,18:18}],22:[function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),a={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r
};t.exports=a},{}],23:[function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var a=e(30),s=e(29),i=e(145);s(r.prototype,{getText:function(){return"value"in this._root?this._root.value:this._root[i()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,a=this.getText(),s=a.length;for(e=0;r>e&&n[e]===a[e];e++);var i=r-e;for(t=1;i>=t&&n[r-t]===a[s-t];t++);var o=t>1?1-t:void 0;return this._fallbackText=a.slice(e,o),this._fallbackText}}),a.addPoolingTo(r),t.exports=r},{145:145,29:29,30:30}],24:[function(e,t,n){"use strict";var r,a=e(11),s=e(22),i=a.injection.MUST_USE_ATTRIBUTE,o=a.injection.MUST_USE_PROPERTY,c=a.injection.HAS_BOOLEAN_VALUE,u=a.injection.HAS_SIDE_EFFECTS,l=a.injection.HAS_NUMERIC_VALUE,p=a.injection.HAS_POSITIVE_NUMERIC_VALUE,m=a.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(s.canUseDOM){var d=document.implementation;r=d&&d.hasFeature&&d.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var h={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:i|c,allowTransparency:i,alt:null,async:c,autoComplete:null,autoPlay:c,cellPadding:null,cellSpacing:null,charSet:i,checked:o|c,classID:i,className:r?i:o,cols:i|p,colSpan:null,content:null,contentEditable:null,contextMenu:i,controls:o|c,coords:null,crossOrigin:null,data:null,dateTime:i,defer:c,dir:null,disabled:i|c,download:m,draggable:null,encType:null,form:i,formAction:i,formEncType:i,formMethod:i,formNoValidate:c,formTarget:i,frameBorder:i,headers:null,height:i,hidden:i|c,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:o,label:null,lang:null,list:i,loop:o|c,low:null,manifest:i,marginHeight:null,marginWidth:null,max:null,maxLength:i,media:i,mediaGroup:null,method:null,min:null,multiple:o|c,muted:o|c,name:null,noValidate:c,open:c,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:o|c,rel:null,required:c,role:i,rows:i|p,rowSpan:null,sandbox:null,scope:null,scoped:c,scrolling:null,seamless:i|c,selected:o|c,shape:null,size:i|p,sizes:i,span:p,spellCheck:null,src:null,srcDoc:o,srcSet:i,start:l,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:o|u,width:i,wmode:i,autoCapitalize:null,autoCorrect:null,itemProp:i,itemScope:i|c,itemType:i,itemID:i,itemRef:i,property:null,unselectable:i},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=h},{11:11,22:22}],25:[function(e,t,n){"use strict";var r=e(75),a=e(94),s={linkState:function(e){return new r(this.state[e],a.createStateKeySetter(this,e))}};t.exports=s},{75:75,94:94}],26:[function(e,t,n){"use strict";function r(e){u(null==e.props.checkedLink||null==e.props.valueLink,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa.")}function a(e){r(e),u(null==e.props.value&&null==e.props.onChange,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink.")}function s(e){r(e),u(null==e.props.checked&&null==e.props.onChange,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink")}function i(e){this.props.valueLink.requestChange(e.target.value)}function o(e){this.props.checkedLink.requestChange(e.target.checked)}var c=e(86),u=e(150),l={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},p={Mixin:{propTypes:{value:function(e,t,n){return!e[t]||l[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:c.func}},getValue:function(e){return e.props.valueLink?(a(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(s(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(a(e),i):e.props.checkedLink?(s(e),o):e.props.onChange}};t.exports=p},{150:150,86:86}],27:[function(e,t,n){"use strict";function r(e){e.remove()}var a=e(33),s=e(118),i=e(135),o=e(150),c={trapBubbledEvent:function(e,t){o(this.isMounted(),"Must be mounted to trap events");var n=this.getDOMNode();o(n,"LocalEventTrapMixin.trapBubbledEvent(...): Requires node to be rendered.");var r=a.trapBubbledEvent(e,t,n);this._localEventListeners=s(this._localEventListeners,r)},componentWillUnmount:function(){this._localEventListeners&&i(this._localEventListeners,r)}};t.exports=c},{118:118,135:135,150:150,33:33}],28:[function(e,t,n){"use strict";var r=e(16),a=e(129),s=r.topLevelTypes,i={eventTypes:null,extractEvents:function(e,t,n,r){if(e===s.topTouchStart){var i=r.target;i&&!i.onclick&&(i.onclick=a)}}};t.exports=i},{129:129,16:16}],29:[function(e,t,n){"use strict";function r(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),r=Object.prototype.hasOwnProperty,a=1;a<arguments.length;a++){var s=arguments[a];if(null!=s){var i=Object(s);for(var o in i)r.call(i,o)&&(n[o]=i[o])}}return n}t.exports=r},{}],30:[function(e,t,n){"use strict";var r=e(150),a=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},s=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},i=function(e,t,n){var r=this;if(r.instancePool.length){var a=r.instancePool.pop();return r.call(a,e,t,n),a}return new r(e,t,n)},o=function(e,t,n,r,a){var s=this;if(s.instancePool.length){var i=s.instancePool.pop();return s.call(i,e,t,n,r,a),i}return new s(e,t,n,r,a)},c=function(e){var t=this;r(e instanceof t,"Trying to release an instance into a pool of a different type."),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},u=10,l=a,p=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=u),n.release=c,n},m={addPoolingTo:p,oneArgumentPooler:a,twoArgumentPooler:s,threeArgumentPooler:i,fiveArgumentPooler:o};t.exports=m},{150:150}],31:[function(e,t,n){"use strict";var r=e(20),a=e(37),s=e(39),i=e(38),o=e(44),c=e(45),u=e(63),l=e(64),p=e(46),m=e(57),d=e(60),h=e(72),f=e(77),v=e(82),g=e(86),y=e(89),b=e(92),E=e(29),C=e(132),S=e(160);d.inject();var R=u.createElement,N=u.createFactory,w=u.cloneElement;R=l.createElement,N=l.createFactory,w=l.cloneElement;var _=v.measure("React","render",f.render),x={Children:{map:a.map,forEach:a.forEach,count:a.count,only:S},Component:s,DOM:p,PropTypes:g,initializeTouchEvents:function(e){r.useTouchEvents=e},createClass:i.createClass,createElement:R,cloneElement:w,createFactory:N,createMixin:function(e){return e},constructAndRenderComponent:f.constructAndRenderComponent,constructAndRenderComponentByID:f.constructAndRenderComponentByID,findDOMNode:C,render:_,renderToString:b.renderToString,renderToStaticMarkup:b.renderToStaticMarkup,unmountComponentAtNode:f.unmountComponentAtNode,isValidElement:u.isValidElement,withContext:o.withContext,__spread:E};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:c,InstanceHandles:h,Mount:f,Reconciler:y,TextComponent:m});var k=e(22);if(k.canUseDOM&&window.top===window.self){navigator.userAgent.indexOf("Chrome")>-1&&"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&console.debug("Download the React DevTools for a better development experience: https://fb.me/react-devtools");for(var D=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze],I=0;I<D.length;I++)if(!D[I]){console.error("One or more ES5 shim/shams expected by React are not available: https://fb.me/react-warning-polyfills");break}}x.version="0.13.3",t.exports=x},{132:132,160:160,20:20,22:22,29:29,37:37,38:38,39:39,44:44,45:45,46:46,57:57,60:60,63:63,64:64,72:72,77:77,82:82,86:86,89:89,92:92}],32:[function(e,t,n){"use strict";var r=e(132),a={getDOMNode:function(){return r(this)}};t.exports=a},{132:132}],33:[function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,f)||(e[f]=d++,p[e[f]]={}),p[e[f]]}var a=e(16),s=e(18),i=e(19),o=e(67),c=e(117),u=e(29),l=e(151),p={},m=!1,d=0,h={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},f="_reactListenersID"+String(Math.random()).slice(2),v=u({},o,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,s=r(n),o=i.registrationNameDependencies[e],c=a.topLevelTypes,u=0,p=o.length;p>u;u++){var m=o[u];s.hasOwnProperty(m)&&s[m]||(m===c.topWheel?l("wheel")?v.ReactEventListener.trapBubbledEvent(c.topWheel,"wheel",n):l("mousewheel")?v.ReactEventListener.trapBubbledEvent(c.topWheel,"mousewheel",n):v.ReactEventListener.trapBubbledEvent(c.topWheel,"DOMMouseScroll",n):m===c.topScroll?l("scroll",!0)?v.ReactEventListener.trapCapturedEvent(c.topScroll,"scroll",n):v.ReactEventListener.trapBubbledEvent(c.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):m===c.topFocus||m===c.topBlur?(l("focus",!0)?(v.ReactEventListener.trapCapturedEvent(c.topFocus,"focus",n),v.ReactEventListener.trapCapturedEvent(c.topBlur,"blur",n)):l("focusin")&&(v.ReactEventListener.trapBubbledEvent(c.topFocus,"focusin",n),v.ReactEventListener.trapBubbledEvent(c.topBlur,"focusout",n)),s[c.topBlur]=!0,s[c.topFocus]=!0):h.hasOwnProperty(m)&&v.ReactEventListener.trapBubbledEvent(m,h[m],n),s[m]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!m){var e=c.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),m=!0}},eventNameDispatchConfigs:s.eventNameDispatchConfigs,registrationNameModules:s.registrationNameModules,putListener:s.putListener,getListener:s.getListener,deleteListener:s.deleteListener,deleteAllListeners:s.deleteAllListeners});t.exports=v},{117:117,151:151,16:16,18:18,19:19,29:29,67:67}],34:[function(e,t,n){"use strict";var r=e(31),a=e(29),s=r.createFactory(e(98)),i=r.createFactory(e(35)),o=r.createClass({displayName:"ReactCSSTransitionGroup",propTypes:{transitionName:r.PropTypes.string.isRequired,transitionAppear:r.PropTypes.bool,transitionEnter:r.PropTypes.bool,transitionLeave:r.PropTypes.bool},getDefaultProps:function(){return{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(e){return i({name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave},e)},render:function(){return s(a({},this.props,{childFactory:this._wrapChild}))}});t.exports=o},{29:29,31:31,35:35,98:98}],35:[function(e,t,n){"use strict";var r=e(31),a=e(4),s=e(97),i=e(160),o=e(171),c=17,u=5e3,l=null;l=function(){o(!1,"transition(): tried to perform an animation without an animationend or transitionend event after timeout (%sms). You should either disable this transition in JS or add a CSS animation/transition.",u)};var p=r.createClass({displayName:"ReactCSSTransitionGroupChild",transition:function(e,t){var n=this.getDOMNode(),r=this.props.name+"-"+e,i=r+"-active",o=null,c=function(e){e&&e.target!==n||(clearTimeout(o),a.removeClass(n,r),a.removeClass(n,i),s.removeEndEventListener(n,c),t&&t())};s.addEndEventListener(n,c),a.addClass(n,r),this.queueClass(i),o=setTimeout(l,u)},queueClass:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,c))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(a.addClass.bind(a,this.getDOMNode())),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},componentWillAppear:function(e){this.props.appear?this.transition("appear",e):e()},componentWillEnter:function(e){this.props.enter?this.transition("enter",e):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e):e()},render:function(){return i(this.props.children)}});t.exports=p},{160:160,171:171,31:31,4:4,97:97}],36:[function(e,t,n){"use strict";var r=e(89),a=e(133),s=e(149),i=e(167),o={instantiateChildren:function(e,t,n){var r=a(e);for(var i in r)if(r.hasOwnProperty(i)){var o=r[i],c=s(o,null);r[i]=c}return r},updateChildren:function(e,t,n,o){var c=a(t);if(!c&&!e)return null;var u;for(u in c)if(c.hasOwnProperty(u)){var l=e&&e[u],p=l&&l._currentElement,m=c[u];if(i(p,m))r.receiveComponent(l,m,n,o),c[u]=l;else{l&&r.unmountComponent(l,u);var d=s(m,null);c[u]=d}}for(u in e)!e.hasOwnProperty(u)||c&&c.hasOwnProperty(u)||r.unmountComponent(e[u]);return c},unmountChildren:function(e){for(var t in e){var n=e[t];r.unmountComponent(n)}}};t.exports=o},{133:133,149:149,167:167,89:89}],37:[function(e,t,n){"use strict";function r(e,t){this.forEachFunction=e,this.forEachContext=t}function a(e,t,n,r){var a=e;a.forEachFunction.call(a.forEachContext,t,r)}function s(e,t,n){if(null==e)return e;var s=r.getPooled(t,n);d(e,a,s),r.release(s)}function i(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function o(e,t,n,r){var a=e,s=a.mapResult,i=!s.hasOwnProperty(n);if(h(i,"ReactChildren.map(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),i){var o=a.mapFunction.call(a.mapContext,t,r);s[n]=o}}function c(e,t,n){if(null==e)return e;var r={},a=i.getPooled(r,t,n);return d(e,o,a),i.release(a),m.create(r)}function u(e,t,n,r){return null}function l(e,t){return d(e,u,null)}var p=e(30),m=e(69),d=e(169),h=e(171),f=p.twoArgumentPooler,v=p.threeArgumentPooler;p.addPoolingTo(r,f),p.addPoolingTo(i,v);var g={forEach:s,map:c,count:l};t.exports=g},{169:169,171:171,30:30,69:69}],38:[function(e,t,n){"use strict";function r(e,t,n){for(var r in t)t.hasOwnProperty(r)&&w("function"==typeof t[r],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactClass",b[n],r)}function a(e,t){var n=D.hasOwnProperty(t)?D[t]:null;T.hasOwnProperty(t)&&S(n===x.OVERRIDE_BASE,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e.hasOwnProperty(t)&&S(n===x.DEFINE_MANY||n===x.DEFINE_MANY_MERGED,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function s(e,t){if(t){S("function"!=typeof t,"ReactClass: You're attempting to use a component class as a mixin. Instead, just use a regular object."),S(!h.isValidElement(t),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype;t.hasOwnProperty(_)&&I.mixins(e,t.mixins);for(var r in t)if(t.hasOwnProperty(r)&&r!==_){var s=t[r];if(a(n,r),I.hasOwnProperty(r))I[r](e,s);else{var i=D.hasOwnProperty(r),o=n.hasOwnProperty(r),l=s&&s.__reactDontBind,p="function"==typeof s,m=p&&!i&&!o&&!l;if(m)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[r]=s,n[r]=s;else if(o){var d=D[r];S(i&&(d===x.DEFINE_MANY_MERGED||d===x.DEFINE_MANY),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",d,r),d===x.DEFINE_MANY_MERGED?n[r]=c(n[r],s):d===x.DEFINE_MANY&&(n[r]=u(n[r],s))}else n[r]=s,"function"==typeof s&&t.displayName&&(n[r].displayName=t.displayName+"_"+r)}}}}function i(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var a=n in I;S(!a,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var s=n in e;S(!s,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=r}}}function o(e,t){S(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(S(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function c(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var a={};return o(a,n),o(a,r),a}}function u(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function l(e,t){var n=t.bind(e);n.__reactBoundContext=e,n.__reactBoundMethod=t,n.__reactBoundArguments=null;var r=e.constructor.displayName,a=n.bind;return n.bind=function(s){for(var i=[],o=1,c=arguments.length;c>o;o++)i.push(arguments[o]);if(s!==e&&null!==s)w(!1,"bind(): React component methods may only be bound to the component instance. See %s",r);else if(!i.length)return w(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",r),n;var u=a.apply(n,arguments);return u.__reactBoundContext=e,u.__reactBoundMethod=t,u.__reactBoundArguments=i,u},n}function p(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=l(e,f.guard(n,e.constructor.displayName+"."+t))}}var m=e(39),d=e(45),h=e(63),f=e(66),v=e(73),g=e(74),y=e(85),b=e(84),E=e(99),C=e(29),S=e(150),R=e(156),N=e(157),w=e(171),_=N({mixins:null}),x=R({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),k=[],D={mixins:x.DEFINE_MANY,statics:x.DEFINE_MANY,propTypes:x.DEFINE_MANY,contextTypes:x.DEFINE_MANY,childContextTypes:x.DEFINE_MANY,getDefaultProps:x.DEFINE_MANY_MERGED,getInitialState:x.DEFINE_MANY_MERGED,getChildContext:x.DEFINE_MANY_MERGED,render:x.DEFINE_ONCE,componentWillMount:x.DEFINE_MANY,componentDidMount:x.DEFINE_MANY,componentWillReceiveProps:x.DEFINE_MANY,shouldComponentUpdate:x.DEFINE_ONCE,componentWillUpdate:x.DEFINE_MANY,componentDidUpdate:x.DEFINE_MANY,componentWillUnmount:x.DEFINE_MANY,updateComponent:x.OVERRIDE_BASE},I={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)s(e,t[n])},childContextTypes:function(e,t){r(e,t,y.childContext),e.childContextTypes=C({},e.childContextTypes,t)},contextTypes:function(e,t){r(e,t,y.context),e.contextTypes=C({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=c(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){r(e,t,y.prop),e.propTypes=C({},e.propTypes,t)},statics:function(e,t){i(e,t)}},M={enumerable:!1,get:function(){var e=this.displayName||this.name||"Component";return w(!1,"%s.type is deprecated. Use %s directly to access the class.",e,e),Object.defineProperty(this,"type",{value:this}),this}},T={replaceState:function(e,t){E.enqueueReplaceState(this,e),t&&E.enqueueCallback(this,t)},isMounted:function(){var e=d.current;null!==e&&(w(e._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",e.getName()||"A component"),e._warnedAboutRefsInRender=!0);var t=v.get(this);return t&&t!==g.currentlyMountingInstance},setProps:function(e,t){E.enqueueSetProps(this,e),t&&E.enqueueCallback(this,t)},replaceProps:function(e,t){E.enqueueReplaceProps(this,e),t&&E.enqueueCallback(this,t)}},A=function(){};C(A.prototype,m.prototype,T);var P={createClass:function(e){var t=function(e,n){w(this instanceof t,"Something is calling a React component directly. Use a factory or JSX instead. See: https://fb.me/react-legacyfactory"),this.__reactAutoBindMap&&p(this),this.props=e,this.context=n,this.state=null;var r=this.getInitialState?this.getInitialState():null;"undefined"==typeof r&&this.getInitialState._isMockFunction&&(r=null),S("object"==typeof r&&!Array.isArray(r),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=r};t.prototype=new A,t.prototype.constructor=t,k.forEach(s.bind(null,t)),s(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.getDefaultProps&&(t.getDefaultProps.isReactClassApproved={}),t.prototype.getInitialState&&(t.prototype.getInitialState.isReactClassApproved={}),S(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),w(!t.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",e.displayName||"A component");for(var n in D)t.prototype[n]||(t.prototype[n]=null);t.type=t;try{Object.defineProperty(t,"type",M)}catch(r){}return t},injection:{injectMixin:function(e){k.push(e)}}};t.exports=P},{150:150,156:156,157:157,171:171,29:29,39:39,45:45,63:63,66:66,73:73,74:74,84:84,85:85,99:99}],39:[function(e,t,n){"use strict";function r(e,t){this.props=e,this.context=t}var a=e(99),s=e(150),i=e(171);r.prototype.setState=function(e,t){s("object"==typeof e||"function"==typeof e||null==e,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."),i(null!=e,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."),a.enqueueSetState(this,e),t&&a.enqueueCallback(this,t)},r.prototype.forceUpdate=function(e){a.enqueueForceUpdate(this),e&&a.enqueueCallback(this,e)};var o={getDOMNode:["getDOMNode","Use React.findDOMNode(component) instead."],isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceProps:["replaceProps","Instead call React.render again at the top level."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."],setProps:["setProps","Instead call React.render again at the top level."]},c=function(e,t){try{Object.defineProperty(r.prototype,e,{get:function(){return void i(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})}catch(n){}};for(var u in o)o.hasOwnProperty(u)&&c(u,o[u]);t.exports=r},{150:150,171:171,99:99}],40:[function(e,t,n){"use strict";var r=e(50),a=e(77),s={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:r.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){a.purgeID(e)}};t.exports=s},{50:50,77:77}],41:[function(e,t,n){"use strict";var r=e(150),a=!1,s={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){r(!a,"ReactCompositeComponent: injectEnvironment() can only be called once."),s.unmountIDFromEnvironment=e.unmountIDFromEnvironment,s.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,s.processChildrenUpdates=e.processChildrenUpdates,a=!0}}};t.exports=s},{150:150}],42:[function(e,t,n){"use strict";var r=e(166),a={shouldComponentUpdate:function(e,t){return!r(this.props,e)||!r(this.state,t)}};t.exports=a},{166:166}],43:[function(e,t,n){"use strict";function r(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}var a=e(41),s=e(44),i=e(45),o=e(63),c=e(64),u=e(73),l=e(74),p=e(80),m=e(82),d=e(85),h=e(84),f=e(89),v=e(100),g=e(29),y=e(130),b=e(150),E=e(167),C=e(171),S=1,R={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._isTopLevel=!1,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=S++,this._rootNodeID=e;var r=this._processProps(this._currentElement.props),a=this._processContext(this._currentElement._context),s=p.getComponentClassForElement(this._currentElement),i=new s(r,a);C(null!=i.render,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render` in your component or you may have accidentally tried to render an element whose type is a function that isn't a React component.",s.displayName||s.name||"Component"),i.props=r,i.context=a,i.refs=y,this._instance=i,u.set(i,this),this._warnIfContextsDiffer(this._currentElement._context,n),C(!i.getInitialState||i.getInitialState.isReactClassApproved,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"),C(!i.getDefaultProps||i.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"),C(!i.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"),C(!i.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"),C("function"!=typeof i.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component");var o=i.state;void 0===o&&(i.state=o=null),b("object"==typeof o&&!Array.isArray(o),"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var c,m,d=l.currentlyMountingInstance;l.currentlyMountingInstance=this;try{i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),c=this._getValidatedChildContext(n),m=this._renderValidatedComponent(c)}finally{l.currentlyMountingInstance=d}this._renderedComponent=this._instantiateReactComponent(m,this._currentElement.type);var h=f.mountComponent(this._renderedComponent,e,t,this._mergeChildContext(n,c));return i.componentDidMount&&t.getReactMountReady().enqueue(i.componentDidMount,i),h},unmountComponent:function(){var e=this._instance;if(e.componentWillUnmount){var t=l.currentlyUnmountingInstance;l.currentlyUnmountingInstance=this;try{e.componentWillUnmount()}finally{l.currentlyUnmountingInstance=t}}f.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,u.remove(e)},_setPropsInternal:function(e,t){var n=this._pendingElement||this._currentElement;this._pendingElement=o.cloneAndReplaceProps(n,g({},n.props,e)),v.enqueueUpdate(this,t)},_maskContext:function(e){var t=null;if("string"==typeof this._currentElement.type)return y;var n=this._currentElement.type.contextTypes;if(!n)return y;t={};for(var r in n)t[r]=e[r];return t},_processContext:function(e){var t=this._maskContext(e),n=p.getComponentClassForElement(this._currentElement);return n.contextTypes&&this._checkPropTypes(n.contextTypes,t,d.context),t},_getValidatedChildContext:function(e){var t=this._instance,n=t.getChildContext&&t.getChildContext();if(n){b("object"==typeof t.constructor.childContextTypes,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"),this._checkPropTypes(t.constructor.childContextTypes,n,d.childContext);for(var r in n)b(r in t.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",r);return n}return null},_mergeChildContext:function(e,t){return t?g({},e,t):e},_processProps:function(e){var t=p.getComponentClassForElement(this._currentElement);return t.propTypes&&this._checkPropTypes(t.propTypes,e,d.prop),e},_checkPropTypes:function(e,t,n){var a=this.getName();for(var s in e)if(e.hasOwnProperty(s)){var i;try{b("function"==typeof e[s],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",a||"React class",h[n],s),i=e[s](t,s,a,n)}catch(o){i=o}if(i instanceof Error){var c=r(this);n===d.prop?C(!1,"Failed Composite propType: %s%s",i.message,c):C(!1,"Failed Context Types: %s%s",i.message,c)}}},receiveComponent:function(e,t,n){var r=this._currentElement,a=this._context;this._pendingElement=null,this.updateComponent(t,r,e,a,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&f.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&(c.checkAndWarnForMutatedProps(this._currentElement),this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context))},_warnIfContextsDiffer:function(e,t){e=this._maskContext(e),t=this._maskContext(t);for(var n=Object.keys(t).sort(),r=this.getName()||"ReactCompositeComponent",a=0;a<n.length;a++){var s=n[a];C(e[s]===t[s],"owner-based and parent-based contexts differ (values: `%s` vs `%s`) for key (%s) while mounting %s (see: http://fb.me/react-context-by-parent)",e[s],t[s],s,r)}},updateComponent:function(e,t,n,r,a){var s=this._instance,i=s.context,o=s.props;t!==n&&(i=this._processContext(n._context),o=this._processProps(n.props),null!=a&&this._warnIfContextsDiffer(n._context,a),s.componentWillReceiveProps&&s.componentWillReceiveProps(o,i));
var c=this._processPendingState(o,i),u=this._pendingForceUpdate||!s.shouldComponentUpdate||s.shouldComponentUpdate(o,c,i);C("undefined"!=typeof u,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"),u?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,o,c,i,e,a)):(this._currentElement=n,this._context=a,s.props=o,s.state=c,s.context=i)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,a=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(a&&1===r.length)return r[0];for(var s=g({},a?r[0]:n.state),i=a?1:0;i<r.length;i++){var o=r[i];g(s,"function"==typeof o?o.call(n,s,e,t):o)}return s},_performComponentUpdate:function(e,t,n,r,a,s){var i=this._instance,o=i.props,c=i.state,u=i.context;i.componentWillUpdate&&i.componentWillUpdate(t,n,r),this._currentElement=e,this._context=s,i.props=t,i.state=n,i.context=r,this._updateRenderedComponent(a,s),i.componentDidUpdate&&a.getReactMountReady().enqueue(i.componentDidUpdate.bind(i,o,c,u),i)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,a=this._getValidatedChildContext(),s=this._renderValidatedComponent(a);if(E(r,s))f.receiveComponent(n,s,e,this._mergeChildContext(t,a));else{var i=this._rootNodeID,o=n._rootNodeID;f.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(s,this._currentElement.type);var c=f.mountComponent(this._renderedComponent,i,e,this._mergeChildContext(t,a));this._replaceNodeWithMarkupByID(o,c)}},_replaceNodeWithMarkupByID:function(e,t){a.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return"undefined"==typeof t&&e.render._isMockFunction&&(t=null),t},_renderValidatedComponent:function(e){var t,n=s.current;s.current=this._mergeChildContext(this._currentElement._context,e),i.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{s.current=n,i.current=null}return b(null===t||t===!1||o.isValidElement(t),"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"),t},attachRef:function(e,t){var n=this.getPublicInstance(),r=n.refs===y?n.refs={}:n.refs;r[e]=t.getPublicInstance()},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};m.measureMethods(R,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var N={Mixin:R};t.exports=N},{100:100,130:130,150:150,167:167,171:171,29:29,41:41,44:44,45:45,63:63,64:64,73:73,74:74,80:80,82:82,84:84,85:85,89:89}],44:[function(e,t,n){"use strict";var r=e(29),a=e(130),s=e(171),i=!1,o={current:a,withContext:function(e,t){s(i,"withContext is deprecated and will be removed in a future version. Use a wrapper component with getChildContext instead."),i=!0;var n,a=o.current;o.current=r({},a,e);try{n=t()}finally{o.current=a}return n}};t.exports=o},{130:130,171:171,29:29}],45:[function(e,t,n){"use strict";var r={current:null};t.exports=r},{}],46:[function(e,t,n){"use strict";function r(e){return a.createFactory(e)}var a=(e(63),e(64)),s=e(158),i=s({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);t.exports=i},{158:158,63:63,64:64}],47:[function(e,t,n){"use strict";var r=e(2),a=e(32),s=e(38),i=e(63),o=e(156),c=i.createFactory("button"),u=o({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),l=s.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[r,a],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&u[t]||(e[t]=this.props[t]);return c(e,this.props.children)}});t.exports=l},{156:156,2:2,32:32,38:38,63:63}],48:[function(e,t,n){"use strict";function r(e){e&&(null!=e.dangerouslySetInnerHTML&&(g(null==e.children,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),g("object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information.")),E(null==e.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),E(!e.contentEditable||null==e.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),g(null==e.style||"object"==typeof e.style,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX."))}function a(e,t,n,r){E("onScroll"!==t||y("scroll",!0),"This browser doesn't support the `onScroll` event");var a=m.findReactContainerForID(e);if(a){var s=a.nodeType===_?a.ownerDocument:a;S(t,s)}r.getPutListenerQueue().enqueuePutListener(e,t,n)}function s(e){M.call(I,e)||(g(D.test(e),"Invalid tag: %s",e),I[e]=!0)}function i(e){s(e),this._tag=e,this._renderedChildren=null,this._previousStyleCopy=null,this._rootNodeID=null}var o=e(6),c=e(11),u=e(12),l=e(33),p=e(40),m=e(77),d=e(78),h=e(82),f=e(29),v=e(131),g=e(150),y=e(151),b=e(157),E=e(171),C=l.deleteListener,S=l.listenTo,R=l.registrationNameModules,N={string:!0,number:!0},w=b({style:null}),_=1,x=null,k={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},D=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,I={},M={}.hasOwnProperty;i.displayName="ReactDOMComponent",i.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,n){this._rootNodeID=e,r(this._currentElement.props);var a=k[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t,n)+a},_createOpenTagMarkupAndPutListeners:function(e){var t=this._currentElement.props,n="<"+this._tag;for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];if(null!=s)if(R.hasOwnProperty(r))a(this._rootNodeID,r,s,e);else{r===w&&(s&&(s=this._previousStyleCopy=f({},t.style)),s=o.createMarkupForStyles(s));var i=u.createMarkupForProperty(r,s);i&&(n+=" "+i)}}if(e.renderToStaticMarkup)return n+">";var c=u.createMarkupForID(this._rootNodeID);return n+" "+c+">"},_createContentMarkup:function(e,t){var n="";("listing"===this._tag||"pre"===this._tag||"textarea"===this._tag)&&(n="\n");var r=this._currentElement.props,a=r.dangerouslySetInnerHTML;if(null!=a){if(null!=a.__html)return n+a.__html}else{var s=N[typeof r.children]?r.children:null,i=null!=s?null:r.children;if(null!=s)return n+v(s);if(null!=i){var o=this.mountChildren(i,e,t);return n+o.join("")}}return n},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,a){r(this._currentElement.props),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e,a)},_updateDOMProperties:function(e,t){var n,r,s,i=this._currentElement.props;for(n in e)if(!i.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===w){var o=this._previousStyleCopy;for(r in o)o.hasOwnProperty(r)&&(s=s||{},s[r]="");this._previousStyleCopy=null}else R.hasOwnProperty(n)?C(this._rootNodeID,n):(c.isStandardName[n]||c.isCustomAttribute(n))&&x.deletePropertyByID(this._rootNodeID,n);for(n in i){var u=i[n],l=n===w?this._previousStyleCopy:e[n];if(i.hasOwnProperty(n)&&u!==l)if(n===w)if(u?u=this._previousStyleCopy=f({},u):this._previousStyleCopy=null,l){for(r in l)!l.hasOwnProperty(r)||u&&u.hasOwnProperty(r)||(s=s||{},s[r]="");for(r in u)u.hasOwnProperty(r)&&l[r]!==u[r]&&(s=s||{},s[r]=u[r])}else s=u;else R.hasOwnProperty(n)?a(this._rootNodeID,n,u,t):(c.isStandardName[n]||c.isCustomAttribute(n))&&x.updatePropertyByID(this._rootNodeID,n,u)}s&&x.updateStylesByID(this._rootNodeID,s)},_updateDOMChildren:function(e,t,n){var r=this._currentElement.props,a=N[typeof e.children]?e.children:null,s=N[typeof r.children]?r.children:null,i=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,o=r.dangerouslySetInnerHTML&&r.dangerouslySetInnerHTML.__html,c=null!=a?null:e.children,u=null!=s?null:r.children,l=null!=a||null!=i,p=null!=s||null!=o;null!=c&&null==u?this.updateChildren(null,t,n):l&&!p&&this.updateTextContent(""),null!=s?a!==s&&this.updateTextContent(""+s):null!=o?i!==o&&x.updateInnerHTMLByID(this._rootNodeID,o):null!=u&&this.updateChildren(u,t,n)},unmountComponent:function(){this.unmountChildren(),l.deleteAllListeners(this._rootNodeID),p.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null}},h.measureMethods(i,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),f(i.prototype,i.Mixin,d.Mixin),i.injection={injectIDOperations:function(e){i.BackendIDOperations=x=e}},t.exports=i},{11:11,12:12,131:131,150:150,151:151,157:157,171:171,29:29,33:33,40:40,6:6,77:77,78:78,82:82}],49:[function(e,t,n){"use strict";var r=e(16),a=e(27),s=e(32),i=e(38),o=e(63),c=o.createFactory("form"),u=i.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[s,a],render:function(){return c(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(r.topLevelTypes.topSubmit,"submit")}});t.exports=u},{16:16,27:27,32:32,38:38,63:63}],50:[function(e,t,n){"use strict";var r=e(6),a=e(10),s=e(12),i=e(77),o=e(82),c=e(150),u=e(164),l={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},p={updatePropertyByID:function(e,t,n){var r=i.getNode(e);c(!l.hasOwnProperty(t),"updatePropertyByID(...): %s",l[t]),null!=n?s.setValueForProperty(r,t,n):s.deleteValueForProperty(r,t)},deletePropertyByID:function(e,t,n){var r=i.getNode(e);c(!l.hasOwnProperty(t),"updatePropertyByID(...): %s",l[t]),s.deleteValueForProperty(r,t,n)},updateStylesByID:function(e,t){var n=i.getNode(e);r.setValueForStyles(n,t)},updateInnerHTMLByID:function(e,t){var n=i.getNode(e);u(n,t)},updateTextContentByID:function(e,t){var n=i.getNode(e);a.updateTextContent(n,t)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=i.getNode(e);a.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=i.getNode(e[n].parentID);a.processUpdates(e,t)}};o.measureMethods(p,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=p},{10:10,12:12,150:150,164:164,6:6,77:77,82:82}],51:[function(e,t,n){"use strict";var r=e(16),a=e(27),s=e(32),i=e(38),o=e(63),c=o.createFactory("iframe"),u=i.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[s,a],render:function(){return c(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load")}});t.exports=u},{16:16,27:27,32:32,38:38,63:63}],52:[function(e,t,n){"use strict";var r=e(16),a=e(27),s=e(32),i=e(38),o=e(63),c=o.createFactory("img"),u=i.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[s,a],render:function(){return c(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(r.topLevelTypes.topError,"error")}});t.exports=u},{16:16,27:27,32:32,38:38,63:63}],53:[function(e,t,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var a=e(2),s=e(12),i=e(26),o=e(32),c=e(38),u=e(63),l=e(77),p=e(100),m=e(29),d=e(150),h=u.createFactory("input"),f={},v=c.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[a,i.Mixin,o],getInitialState:function(){var e=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=e?e:null}},render:function(){var e=m({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=i.getValue(this);e.value=null!=t?t:this.state.initialValue;var n=i.getChecked(this);return e.checked=null!=n?n:this.state.initialChecked,e.onChange=this._handleChange,h(e,this.props.children)},componentDidMount:function(){var e=l.getID(this.getDOMNode());f[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=l.getID(e);delete f[t]},componentDidUpdate:function(e,t,n){var r=this.getDOMNode();null!=this.props.checked&&s.setValueForProperty(r,"checked",this.props.checked||!1);var a=i.getValue(this);null!=a&&s.setValueForProperty(r,"value",""+a)},_handleChange:function(e){var t,n=i.getOnChange(this);n&&(t=n.call(this,e)),p.asap(r,this);var a=this.props.name;if("radio"===this.props.type&&null!=a){for(var s=this.getDOMNode(),o=s;o.parentNode;)o=o.parentNode;for(var c=o.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),u=0,m=c.length;m>u;u++){var h=c[u];if(h!==s&&h.form===s.form){var v=l.getID(h);d(v,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");var g=f[v];d(g,"ReactDOMInput: Unknown radio button ID %s.",v),p.asap(r,g)}}}return t}});t.exports=v},{100:100,12:12,150:150,2:2,26:26,29:29,32:32,38:38,63:63,77:77}],54:[function(e,t,n){"use strict";var r=e(32),a=e(38),s=e(63),i=e(171),o=s.createFactory("option"),c=a.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[r],componentWillMount:function(){i(null==this.props.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.")},render:function(){return o(this.props,this.props.children)}});t.exports=c},{171:171,32:32,38:38,63:63}],55:[function(e,t,n){"use strict";function r(){if(this._pendingUpdate){this._pendingUpdate=!1;var e=o.getValue(this);null!=e&&this.isMounted()&&s(this,e)}}function a(e,t,n){if(null==e[t])return null;if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function s(e,t){var n,r,a,s=e.getDOMNode().options;if(e.props.multiple){for(n={},r=0,a=t.length;a>r;r++)n[""+t[r]]=!0;for(r=0,a=s.length;a>r;r++){var i=n.hasOwnProperty(s[r].value);s[r].selected!==i&&(s[r].selected=i)}}else{for(n=""+t,r=0,a=s.length;a>r;r++)if(s[r].value===n)return void(s[r].selected=!0);s.length&&(s[0].selected=!0)}}var i=e(2),o=e(26),c=e(32),u=e(38),l=e(63),p=e(100),m=e(29),d=l.createFactory("select"),h=u.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[i,o.Mixin,c],propTypes:{defaultValue:a,value:a},render:function(){var e=m({},this.props);return e.onChange=this._handleChange,e.value=null,d(e,this.props.children)},componentWillMount:function(){this._pendingUpdate=!1},componentDidMount:function(){var e=o.getValue(this);null!=e?s(this,e):null!=this.props.defaultValue&&s(this,this.props.defaultValue)},componentDidUpdate:function(e){var t=o.getValue(this);null!=t?(this._pendingUpdate=!1,s(this,t)):!e.multiple!=!this.props.multiple&&(null!=this.props.defaultValue?s(this,this.props.defaultValue):s(this,this.props.multiple?[]:""))},_handleChange:function(e){var t,n=o.getOnChange(this);return n&&(t=n.call(this,e)),this._pendingUpdate=!0,p.asap(r,this),t}});t.exports=h},{100:100,2:2,26:26,29:29,32:32,38:38,63:63}],56:[function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function a(e){var t=document.selection,n=t.createRange(),r=n.text.length,a=n.duplicate();a.moveToElementText(e),a.setEndPoint("EndToStart",n);var s=a.text.length,i=s+r;return{start:s,end:i}}function s(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,a=t.anchorOffset,s=t.focusNode,i=t.focusOffset,o=t.getRangeAt(0),c=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),u=c?0:o.toString().length,l=o.cloneRange();l.selectNodeContents(e),l.setEnd(o.startContainer,o.startOffset);var p=r(l.startContainer,l.startOffset,l.endContainer,l.endOffset),m=p?0:l.toString().length,d=m+u,h=document.createRange();h.setStart(n,a),h.setEnd(s,i);var f=h.collapsed;return{start:f?d:m,end:f?m:d}}function i(e,t){var n,r,a=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),a.moveToElementText(e),a.moveStart("character",n),a.setEndPoint("EndToStart",a),a.moveEnd("character",r-n),a.select()}function o(e,t){if(window.getSelection){var n=window.getSelection(),r=e[l()].length,a=Math.min(t.start,r),s="undefined"==typeof t.end?a:Math.min(t.end,r);if(!n.extend&&a>s){var i=s;s=a,a=i}var o=u(e,a),c=u(e,s);if(o&&c){var p=document.createRange();p.setStart(o.node,o.offset),n.removeAllRanges(),a>s?(n.addRange(p),n.extend(c.node,c.offset)):(p.setEnd(c.node,c.offset),n.addRange(p))}}}var c=e(22),u=e(143),l=e(145),p=c.canUseDOM&&"selection"in document&&!("getSelection"in window),m={getOffsets:p?a:s,setOffsets:p?i:o};t.exports=m},{143:143,145:145,22:22}],57:[function(e,t,n){"use strict";var r=e(12),a=e(40),s=e(48),i=e(29),o=e(131),c=function(e){};i(c.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){this._rootNodeID=e;var a=o(this._stringText);return t.renderToStaticMarkup?a:"<span "+r.createMarkupForID(e)+">"+a+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;n!==this._stringText&&(this._stringText=n,s.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}},unmountComponent:function(){a.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=c},{12:12,131:131,29:29,40:40,48:48}],58:[function(e,t,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var a=e(2),s=e(12),i=e(26),o=e(32),c=e(38),u=e(63),l=e(100),p=e(29),m=e(150),d=e(171),h=u.createFactory("textarea"),f=c.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[a,i.Mixin,o],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&(d(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),m(null==e,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(t)&&(m(t.length<=1,"<textarea> can only have at most one child."),t=t[0]),e=""+t),null==e&&(e="");var n=i.getValue(this);return{initialValue:""+(null!=n?n:e)}},render:function(){var e=p({},this.props);return m(null==e.dangerouslySetInnerHTML,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,h(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var r=i.getValue(this);if(null!=r){var a=this.getDOMNode();s.setValueForProperty(a,"value",""+r)}},_handleChange:function(e){var t,n=i.getOnChange(this);return n&&(t=n.call(this,e)),l.asap(r,this),t}});t.exports=f},{100:100,12:12,150:150,171:171,2:2,26:26,29:29,32:32,38:38,63:63}],59:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var a=e(100),s=e(116),i=e(29),o=e(129),c={initialize:o,close:function(){m.isBatchingUpdates=!1}},u={initialize:o,close:a.flushBatchedUpdates.bind(a)},l=[u,c];i(r.prototype,s.Mixin,{getTransactionWrappers:function(){return l}});var p=new r,m={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,a){var s=m.isBatchingUpdates;m.isBatchingUpdates=!0,s?e(t,n,r,a):p.perform(e,null,t,n,r,a)}};t.exports=m},{100:100,116:116,129:129,29:29}],60:[function(e,t,n){"use strict";function r(e){return h.createClass({tagName:e.toUpperCase(),render:function(){return new k(e,null,null,null,null,this.props)}})}function a(){I.EventEmitter.injectReactEventListener(D),I.EventPluginHub.injectEventPluginOrder(c),I.EventPluginHub.injectInstanceHandle(M),I.EventPluginHub.injectMount(T),I.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:L,EnterLeaveEventPlugin:u,ChangeEventPlugin:i,MobileSafariClickEventPlugin:m,SelectEventPlugin:P,BeforeInputEventPlugin:s}),I.NativeComponent.injectGenericComponentClass(g),I.NativeComponent.injectTextComponentClass(x),I.NativeComponent.injectAutoWrapper(r),I.Class.injectMixin(d),I.NativeComponent.injectComponentClasses({button:y,form:b,iframe:S,img:E,input:R,option:N,select:w,textarea:_,html:U("html"),head:U("head"),body:U("body")}),I.DOMProperty.injectDOMPropertyConfig(p),I.DOMProperty.injectDOMPropertyConfig(F),I.EmptyComponent.injectEmptyComponent("noscript"),I.Updates.injectReconcileTransaction(A),I.Updates.injectBatchingStrategy(v),I.RootIndex.injectCreateReactRootIndex(l.canUseDOM?o.createReactRootIndex:O.createReactRootIndex),I.Component.injectEnvironment(f),I.DOMComponent.injectIDOperations(C);var t=l.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(t)){var n=e(61);n.start()}}var s=e(3),i=e(8),o=e(9),c=e(14),u=e(15),l=e(22),p=e(24),m=e(28),d=e(32),h=e(38),f=e(40),v=e(59),g=e(48),y=e(47),b=e(49),E=e(52),C=e(50),S=e(51),R=e(53),N=e(54),w=e(55),_=e(58),x=e(57),k=e(63),D=e(68),I=e(70),M=e(72),T=e(77),A=e(88),P=e(102),O=e(103),L=e(104),F=e(101),U=e(125);t.exports={inject:a}},{101:101,102:102,103:103,104:104,125:125,14:14,15:15,22:22,24:24,28:28,3:3,32:32,38:38,40:40,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,57:57,58:58,59:59,61:61,63:63,68:68,70:70,72:72,77:77,8:8,88:88,9:9}],61:[function(e,t,n){"use strict";function r(e){return Math.floor(100*e)/100}function a(e,t,n){e[t]=(e[t]||0)+n}var s=e(11),i=e(62),o=e(77),c=e(82),u=e(162),l={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){l._injected||c.injection.injectMeasure(l.measure),l._allMeasurements.length=0,c.enableMeasure=!0},stop:function(){c.enableMeasure=!1},getLastMeasurements:function(){return l._allMeasurements},printExclusive:function(e){e=e||l._allMeasurements;var t=i.getExclusiveSummary(e);console.table(t.map(function(e){return{"Component class name":e.componentName,"Total inclusive time (ms)":r(e.inclusive),"Exclusive mount time (ms)":r(e.exclusive),"Exclusive render time (ms)":r(e.render),"Mount time per instance (ms)":r(e.exclusive/e.count),"Render time per instance (ms)":r(e.render/e.count),Instances:e.count}}))},printInclusive:function(e){e=e||l._allMeasurements;var t=i.getInclusiveSummary(e);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Inclusive time (ms)":r(e.time),Instances:e.count}})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(e){var t=i.getInclusiveSummary(e,!0);return t.map(function(e){return{"Owner > component":e.componentName,"Wasted time (ms)":e.time,Instances:e.count}})},printWasted:function(e){e=e||l._allMeasurements,console.table(l.getMeasurementsSummaryMap(e)),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},printDOM:function(e){e=e||l._allMeasurements;var t=i.getDOMSummary(e);console.table(t.map(function(e){var t={};return t[s.ID_ATTRIBUTE_NAME]=e.id,t.type=e.type,t.args=JSON.stringify(e.args),t})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},_recordWrite:function(e,t,n,r){var a=l._allMeasurements[l._allMeasurements.length-1].writes;a[e]=a[e]||[],a[e].push({type:t,time:n,args:r})},measure:function(e,t,n){return function(){for(var r=[],s=0,i=arguments.length;i>s;s++)r.push(arguments[s]);var c,p,m;if("_renderNewRootComponent"===t||"flushBatchedUpdates"===t)return l._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0}),m=u(),p=n.apply(this,r),l._allMeasurements[l._allMeasurements.length-1].totalTime=u()-m,p;if("_mountImageIntoNode"===t||"ReactDOMIDOperations"===e){if(m=u(),p=n.apply(this,r),c=u()-m,"_mountImageIntoNode"===t){var d=o.getID(r[1]);l._recordWrite(d,t,c,r[0])}else"dangerouslyProcessChildrenUpdates"===t?r[0].forEach(function(e){var t={};null!==e.fromIndex&&(t.fromIndex=e.fromIndex),null!==e.toIndex&&(t.toIndex=e.toIndex),null!==e.textContent&&(t.textContent=e.textContent),null!==e.markupIndex&&(t.markup=r[1][e.markupIndex]),l._recordWrite(e.parentID,e.type,c,t)}):l._recordWrite(r[0],t,c,Array.prototype.slice.call(r,1));return p}if("ReactCompositeComponent"!==e||"mountComponent"!==t&&"updateComponent"!==t&&"_renderValidatedComponent"!==t)return n.apply(this,r);if("string"==typeof this._currentElement.type)return n.apply(this,r);var h="mountComponent"===t?r[0]:this._rootNodeID,f="_renderValidatedComponent"===t,v="mountComponent"===t,g=l._mountStack,y=l._allMeasurements[l._allMeasurements.length-1];if(f?a(y.counts,h,1):v&&g.push(0),m=u(),p=n.apply(this,r),c=u()-m,f)a(y.render,h,c);else if(v){var b=g.pop();g[g.length-1]+=c,a(y.exclusive,h,c-b),a(y.inclusive,h,c)}else a(y.inclusive,h,c);return y.displayNames[h]={current:this.getName(),owner:this._currentElement._owner?this._currentElement._owner.getName():"<root>"},p}}};t.exports=l},{11:11,162:162,62:62,77:77,82:82}],62:[function(e,t,n){function r(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];t+=r.totalTime}return t}function a(e){for(var t=[],n=0;n<e.length;n++){var r,a=e[n];for(r in a.writes)a.writes[r].forEach(function(e){t.push({id:r,type:l[e.type]||e.type,args:e.args})})}return t}function s(e){for(var t,n={},r=0;r<e.length;r++){var a=e[r],s=c({},a.exclusive,a.inclusive);for(var i in s)t=a.displayNames[i].current,n[t]=n[t]||{componentName:t,inclusive:0,exclusive:0,render:0,count:0},a.render[i]&&(n[t].render+=a.render[i]),a.exclusive[i]&&(n[t].exclusive+=a.exclusive[i]),a.inclusive[i]&&(n[t].inclusive+=a.inclusive[i]),a.counts[i]&&(n[t].count+=a.counts[i])}var o=[];for(t in n)n[t].exclusive>=u&&o.push(n[t]);return o.sort(function(e,t){return t.exclusive-e.exclusive}),o}function i(e,t){for(var n,r={},a=0;a<e.length;a++){var s,i=e[a],l=c({},i.exclusive,i.inclusive);t&&(s=o(i));for(var p in l)if(!t||s[p]){var m=i.displayNames[p];n=m.owner+" > "+m.current,r[n]=r[n]||{componentName:n,time:0,count:0},i.inclusive[p]&&(r[n].time+=i.inclusive[p]),i.counts[p]&&(r[n].count+=i.counts[p])}}var d=[];for(n in r)r[n].time>=u&&d.push(r[n]);return d.sort(function(e,t){return t.time-e.time}),d}function o(e){var t={},n=Object.keys(e.writes),r=c({},e.exclusive,e.inclusive);for(var a in r){for(var s=!1,i=0;i<n.length;i++)if(0===n[i].indexOf(a)){s=!0;break}!s&&e.counts[a]>0&&(t[a]=!0)}return t}var c=e(29),u=1.2,l={_mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},p={getExclusiveSummary:s,getInclusiveSummary:i,getDOMSummary:a,getTotalTime:r};t.exports=p},{29:29}],63:[function(e,t,n){"use strict";function r(e,t){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[t]:null},set:function(e){c(!1,"Don't set the %s property of the React element. Instead, specify the correct value when initially creating the element.",t),this._store[t]=e}})}function a(e){try{var t={props:!0};for(var n in t)r(e,n);l=!0}catch(a){}}var s=e(44),i=e(45),o=e(29),c=e(171),u={key:!0,ref:!0},l=!1,p=function(e,t,n,r,a,s){this.type=e,this.key=t,this.ref=n,this._owner=r,this._context=a,this._store={props:s,originalProps:o({},s)};try{Object.defineProperty(this._store,"validated",{configurable:!1,enumerable:!1,writable:!0})}catch(i){}return this._store.validated=!1,l?void Object.freeze(this):void(this.props=s)};p.prototype={_isReactElement:!0},a(p.prototype),p.createElement=function(e,t,n){var r,a={},o=null,c=null;if(null!=t){c=void 0===t.ref?null:t.ref,o=void 0===t.key?null:""+t.key;for(r in t)t.hasOwnProperty(r)&&!u.hasOwnProperty(r)&&(a[r]=t[r])}var l=arguments.length-2;if(1===l)a.children=n;else if(l>1){for(var m=Array(l),d=0;l>d;d++)m[d]=arguments[d+2];a.children=m}if(e&&e.defaultProps){var h=e.defaultProps;for(r in h)"undefined"==typeof a[r]&&(a[r]=h[r])}return new p(e,o,c,i.current,s.current,a)},p.createFactory=function(e){var t=p.createElement.bind(null,e);return t.type=e,t},p.cloneAndReplaceProps=function(e,t){var n=new p(e.type,e.key,e.ref,e._owner,e._context,t);return n._store.validated=e._store.validated,n},p.cloneElement=function(e,t,n){var r,a=o({},e.props),s=e.key,c=e.ref,l=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,l=i.current),void 0!==t.key&&(s=""+t.key);for(r in t)t.hasOwnProperty(r)&&!u.hasOwnProperty(r)&&(a[r]=t[r])}var m=arguments.length-2;if(1===m)a.children=n;else if(m>1){for(var d=Array(m),h=0;m>h;h++)d[h]=arguments[h+2];a.children=d}return new p(e.type,s,c,l,e._context,a)},p.isValidElement=function(e){var t=!(!e||!e._isReactElement);return t},t.exports=p},{171:171,29:29,44:44,45:45}],64:[function(e,t,n){"use strict";function r(){if(b.current){var e=b.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function a(e){var t=e&&e.getPublicInstance();if(!t)return void 0;var n=t.constructor;return n?n.displayName||n.name||void 0:void 0}function s(){var e=b.current;return e&&a(e)||void 0}function i(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,c('Each child in an array or iterator should have a unique "key" prop.',e,t))}function o(e,t,n){_.test(e)&&c("Child objects should have non-numeric keys so ordering is preserved.",t,n)}function c(e,t,n){var r=s(),i="string"==typeof n?n:n.displayName||n.name,o=r||i,c=N[e]||(N[e]={});if(!c.hasOwnProperty(o)){c[o]=!0;var u=r?" Check the render method of "+r+".":i?" Check the React.render call using <"+i+">.":"",l="";if(t&&t._owner&&t._owner!==b.current){var p=a(t._owner);l=" It was passed a child from "+p+"."}R(!1,e+"%s%s See https://fb.me/react-warning-keys for more information.",u,l);
}}function u(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];f.isValidElement(r)&&i(r,t)}else if(f.isValidElement(e))e._store.validated=!0;else if(e){var a=C(e);if(a){if(a!==e.entries)for(var s,c=a.call(e);!(s=c.next()).done;)f.isValidElement(s.value)&&i(s.value,t)}else if("object"==typeof e){var u=v.extractIfFragment(e);for(var l in u)u.hasOwnProperty(l)&&o(l,u[l],t)}}}function l(e,t,n,a){for(var s in t)if(t.hasOwnProperty(s)){var i;try{S("function"==typeof t[s],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e||"React class",y[a],s),i=t[s](n,s,e,a)}catch(o){i=o}if(i instanceof Error&&!(i.message in w)){w[i.message]=!0;var c=r(this);R(!1,"Failed propType: %s%s",i.message,c)}}}function p(e,t){var n=t.type,r="string"==typeof n?n:n.displayName,a=t._owner?t._owner.getPublicInstance().constructor.displayName:null,s=e+"|"+r+"|"+a;if(!x.hasOwnProperty(s)){x[s]=!0;var i="";r&&(i=" <"+r+" />");var o="";a&&(o=" The element was created by "+a+"."),R(!1,"Don't set .props.%s of the React component%s. Instead, specify the correct value when initially creating the element or use React.cloneElement to make a new element with updated props.%s",e,i,o)}}function m(e,t){return e!==e?t!==t:0===e&&0===t?1/e===1/t:e===t}function d(e){if(e._store){var t=e._store.originalProps,n=e.props;for(var r in n)n.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&m(t[r],n[r])||(p(r,e),t[r]=n[r]))}}function h(e){if(null!=e.type){var t=E.getComponentClassForElement(e),n=t.displayName||t.name;t.propTypes&&l(n,t.propTypes,e.props,g.prop),"function"==typeof t.getDefaultProps&&R(t.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var f=e(63),v=e(69),g=e(85),y=e(84),b=e(45),E=e(80),C=e(141),S=e(150),R=e(171),N={},w={},_=/^\d+$/,x={},k={checkAndWarnForMutatedProps:d,createElement:function(e,t,n){R(null!=e,"React.createElement: type should not be null or undefined. It should be a string (for DOM elements) or a ReactClass (for composite components).");var r=f.createElement.apply(this,arguments);if(null==r)return r;for(var a=2;a<arguments.length;a++)u(arguments[a],e);return h(r),r},createFactory:function(e){var t=k.createElement.bind(null,e);t.type=e;try{Object.defineProperty(t,"type",{enumerable:!1,get:function(){return R(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}})}catch(n){}return t},cloneElement:function(e,t,n){for(var r=f.cloneElement.apply(this,arguments),a=2;a<arguments.length;a++)u(arguments[a],r.type);return h(r),r}};t.exports=k},{141:141,150:150,171:171,45:45,63:63,69:69,80:80,84:84,85:85}],65:[function(e,t,n){"use strict";function r(e){l[e]=!0}function a(e){delete l[e]}function s(e){return!!l[e]}var i,o=e(63),c=e(73),u=e(150),l={},p={injectEmptyComponent:function(e){i=o.createFactory(e)}},m=function(){};m.prototype.componentDidMount=function(){var e=c.get(this);e&&r(e._rootNodeID)},m.prototype.componentWillUnmount=function(){var e=c.get(this);e&&a(e._rootNodeID)},m.prototype.render=function(){return u(i,"Trying to return null from a render, but no null placeholder component was injected."),i()};var d=o.createElement(m),h={emptyElement:d,injection:p,isNullComponentID:s};t.exports=h},{150:150,63:63,73:73}],66:[function(e,t,n){"use strict";var r={guard:function(e,t){return e}};t.exports=r},{}],67:[function(e,t,n){"use strict";function r(e){a.enqueueEvents(e),a.processEventQueue()}var a=e(18),s={handleTopLevel:function(e,t,n,s){var i=a.extractEvents(e,t,n,s);r(i)}};t.exports=s},{18:18}],68:[function(e,t,n){"use strict";function r(e){var t=p.getID(e),n=l.getReactRootIDFromNodeID(t),r=p.findReactContainerForID(n),a=p.getFirstReactDOM(r);return a}function a(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function s(e){for(var t=p.getFirstReactDOM(h(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=r(n);for(var a=0,s=e.ancestors.length;s>a;a++){t=e.ancestors[a];var i=p.getID(t)||"";v._handleTopLevel(e.topLevelType,t,i,e.nativeEvent)}}function i(e){var t=f(window);e(t)}var o=e(17),c=e(22),u=e(30),l=e(72),p=e(77),m=e(100),d=e(29),h=e(140),f=e(146);d(a.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),u.addPoolingTo(a,u.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:c.canUseDOM?window:null,setHandleTopLevel:function(e){v._handleTopLevel=e},setEnabled:function(e){v._enabled=!!e},isEnabled:function(){return v._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?o.listen(r,t,v.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var r=n;return r?o.capture(r,t,v.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=i.bind(null,e);o.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(v._enabled){var n=a.getPooled(e,t);try{m.batchedUpdates(s,n)}finally{a.release(n)}}}};t.exports=v},{100:100,140:140,146:146,17:17,22:22,29:29,30:30,72:72,77:77}],69:[function(e,t,n){"use strict";var r=e(63),a=e(171),s="_reactFragment",i="_reactDidWarn",o=!1;try{var c=function(){return 1};Object.defineProperty({},s,{enumerable:!1,value:!0}),Object.defineProperty({},"key",{enumerable:!0,get:c}),o=!0}catch(u){}var l=function(e,t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return a(this[i],"A ReactFragment is an opaque type. Accessing any of its properties is deprecated. Pass it to one of the React.Children helpers."),this[i]=!0,this[s][t]},set:function(e){a(this[i],"A ReactFragment is an immutable opaque type. Mutating its properties is deprecated."),this[i]=!0,this[s][t]=e}})},p={},m=function(e){var t="";for(var n in e)t+=n+":"+typeof e[n]+",";var r=!!p[t];return p[t]=!0,r},d={create:function(e){if("object"!=typeof e||!e||Array.isArray(e))return a(!1,"React.addons.createFragment only accepts a single object.",e),e;if(r.isValidElement(e))return a(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),e;if(o){var t={};Object.defineProperty(t,s,{enumerable:!1,value:e}),Object.defineProperty(t,i,{writable:!0,enumerable:!1,value:!1});for(var n in e)l(t,n);return Object.preventExtensions(t),t}return e},extract:function(e){return o?e[s]?e[s]:(a(m(e),"Any use of a keyed object should be wrapped in React.addons.createFragment(object) before being passed as a child."),e):e},extractIfFragment:function(e){if(o){if(e[s])return e[s];for(var t in e)if(e.hasOwnProperty(t)&&r.isValidElement(e[t]))return d.extract(e)}return e}};t.exports=d},{171:171,63:63}],70:[function(e,t,n){"use strict";var r=e(11),a=e(18),s=e(41),i=e(38),o=e(65),c=e(33),u=e(80),l=e(48),p=e(82),m=e(91),d=e(100),h={Component:s.injection,Class:i.injection,DOMComponent:l.injection,DOMProperty:r.injection,EmptyComponent:o.injection,EventPluginHub:a.injection,EventEmitter:c.injection,NativeComponent:u.injection,Perf:p.injection,RootIndex:m.injection,Updates:d.injection};t.exports=h},{100:100,11:11,18:18,33:33,38:38,41:41,48:48,65:65,80:80,82:82,91:91}],71:[function(e,t,n){"use strict";function r(e){return s(document.documentElement,e)}var a=e(56),s=e(123),i=e(134),o=e(136),c={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=o();return{focusedElem:e,selectionRange:c.hasSelectionCapabilities(e)?c.getSelection(e):null}},restoreSelection:function(e){var t=o(),n=e.focusedElem,a=e.selectionRange;t!==n&&r(n)&&(c.hasSelectionCapabilities(n)&&c.setSelection(n,a),i(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=a.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if("undefined"==typeof r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",r-n),s.select()}else a.setOffsets(e,t)}};t.exports=c},{123:123,134:134,136:136,56:56}],72:[function(e,t,n){"use strict";function r(e){return d+e.toString(36)}function a(e,t){return e.charAt(t)===d||t===e.length}function s(e){return""===e||e.charAt(0)===d&&e.charAt(e.length-1)!==d}function i(e,t){return 0===t.indexOf(e)&&a(t,e.length)}function o(e){return e?e.substr(0,e.lastIndexOf(d)):""}function c(e,t){if(m(s(e)&&s(t),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",e,t),m(i(e,t),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",e,t),e===t)return e;var n,r=e.length+h;for(n=r;n<t.length&&!a(t,n);n++);return t.substr(0,n)}function u(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var r=0,i=0;n>=i;i++)if(a(e,i)&&a(t,i))r=i;else if(e.charAt(i)!==t.charAt(i))break;var o=e.substr(0,r);return m(s(o),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",e,t,o),o}function l(e,t,n,r,a,s){e=e||"",t=t||"",m(e!==t,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",e);var u=i(t,e);m(u||i(e,t),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",e,t);for(var l=0,p=u?o:c,d=e;;d=p(d,t)){var h;if(a&&d===e||s&&d===t||(h=n(d,u,r)),h===!1||d===t)break;m(l++<f,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",e,t)}}var p=e(91),m=e(150),d=".",h=d.length,f=100,v={createReactRootID:function(){return r(p.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===d&&e.length>1){var t=e.indexOf(d,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,a){var s=u(e,t);s!==e&&l(e,s,n,r,!1,!0),s!==t&&l(s,t,n,a,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(l("",e,t,n,!0,!1),l(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){l("",e,t,n,!0,!1)},_getFirstCommonAncestorID:u,_getNextDescendantID:c,isAncestorIDOf:i,SEPARATOR:d};t.exports=v},{150:150,91:91}],73:[function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=r},{}],74:[function(e,t,n){"use strict";var r={currentlyMountingInstance:null,currentlyUnmountingInstance:null};t.exports=r},{}],75:[function(e,t,n){"use strict";function r(e,t){this.value=e,this.requestChange=t}function a(e){var t={value:"undefined"==typeof e?s.PropTypes.any.isRequired:e.isRequired,requestChange:s.PropTypes.func.isRequired};return s.PropTypes.shape(t)}var s=e(31);r.PropTypes={link:a},t.exports=r},{31:31}],76:[function(e,t,n){"use strict";var r=e(119),a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return e.replace(">"," "+a.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var s=r(e);return s===n}};t.exports=a},{119:119}],77:[function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;n>r;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function a(e){var t=M(e);return t&&J.getID(t)}function s(e){var t=i(e);if(t)if(j.hasOwnProperty(t)){var n=j[t];n!==e&&(A(!l(n,t),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",U,t),j[t]=e)}else j[t]=e;return t}function i(e){return e&&e.getAttribute&&e.getAttribute(U)||""}function o(e,t){var n=i(e);n!==t&&delete j[n],e.setAttribute(U,t),j[t]=e}function c(e){return j.hasOwnProperty(e)&&l(j[e],e)||(j[e]=J.findReactNodeByID(e)),j[e]}function u(e){var t=R.get(e)._rootNodeID;return C.isNullComponentID(t)?null:(j.hasOwnProperty(t)&&l(j[t],t)||(j[t]=J.findReactNodeByID(t)),j[t])}function l(e,t){if(e){A(i(e)===t,"ReactMount: Unexpected modification of `%s`",U);var n=J.findReactContainerForID(t);if(n&&I(n,e))return!0}return!1}function p(e){delete j[e]}function m(e){var t=j[e];return t&&l(t,e)?void(z=t):!1}function d(e){z=null,S.traverseAncestors(e,m);var t=z;return z=null,t}function h(e,t,n,r,a){var s=_.mountComponent(e,t,r,D);e._isTopLevel=!0,J._mountImageIntoNode(s,n,a)}function f(e,t,n,r){var a=k.ReactReconcileTransaction.getPooled();a.perform(h,null,e,t,n,a,r),k.ReactReconcileTransaction.release(a)}var v=e(11),g=e(33),y=e(45),b=e(63),E=e(64),C=e(65),S=e(72),R=e(73),N=e(76),w=e(82),_=e(89),x=e(99),k=e(100),D=e(130),I=e(123),M=e(144),T=e(149),A=e(150),P=e(164),O=e(167),L=e(171),F=S.SEPARATOR,U=v.ID_ATTRIBUTE_NAME,j={},$=1,q=9,B={},W={},H={},V=[],z=null,J={_instancesByReactRootID:B,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){return E.checkAndWarnForMutatedProps(t),J.scrollMonitor(n,function(){x.enqueueElementInternal(e,t),r&&x.enqueueCallbackInternal(e,r)}),H[a(n)]=M(n),e},_registerComponent:function(e,t){A(t&&(t.nodeType===$||t.nodeType===q),"_registerComponent(...): Target container is not a DOM element."),g.ensureScrollValueMonitoring();var n=J.registerContainer(t);return B[n]=e,n},_renderNewRootComponent:function(e,t,n){L(null==y.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var r=T(e,null),a=J._registerComponent(r,t);return k.batchedUpdates(f,r,a,t,n),H[a]=M(t),r},render:function(e,t,n){A(b.isValidElement(e),"React.render(): Invalid component element.%s","string"==typeof e?" Instead of passing an element string, make sure to instantiate it by passing it to React.createElement.":"function"==typeof e?" Instead of passing a component class, make sure to instantiate it by passing it to React.createElement.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var r=B[a(t)];if(r){var s=r._currentElement;if(O(s,e))return J._updateRootComponent(r,e,t,n).getPublicInstance();J.unmountComponentAtNode(t)}var i=M(t),o=i&&J.isRenderedByReact(i);if(!o||i.nextSibling)for(var c=i;c;){if(J.isRenderedByReact(c)){L(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.");break}c=c.nextSibling}var u=o&&!r,l=J._renderNewRootComponent(e,t,u).getPublicInstance();return n&&n.call(l),l},constructAndRenderComponent:function(e,t,n){var r=b.createElement(e,t);return J.render(r,n)},constructAndRenderComponentByID:function(e,t,n){var r=document.getElementById(n);return A(r,'Tried to get element with id of "%s" but it is not present on the page.',n),J.constructAndRenderComponent(e,t,r)},registerContainer:function(e){var t=a(e);return t&&(t=S.getReactRootIDFromNodeID(t)),t||(t=S.createReactRootID()),W[t]=e,t},unmountComponentAtNode:function(e){L(null==y.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."),A(e&&(e.nodeType===$||e.nodeType===q),"unmountComponentAtNode(...): Target container is not a DOM element.");var t=a(e),n=B[t];return n?(J.unmountComponentFromNode(n,e),delete B[t],delete W[t],delete H[t],!0):!1},unmountComponentFromNode:function(e,t){for(_.unmountComponent(e),t.nodeType===q&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=S.getReactRootIDFromNodeID(e),n=W[t],r=H[t];if(r&&r.parentNode!==n){A(i(r)===t,"ReactMount: Root element ID differed from reactRootID.");var a=n.firstChild;a&&t===i(a)?H[t]=a:L(!1,"ReactMount: Root element has been removed from its original container. New container:",r.parentNode)}return n},findReactNodeByID:function(e){var t=J.findReactContainerForID(e);return J.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=J.getID(e);return t?t.charAt(0)===F:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(J.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=V,r=0,a=d(t)||e;for(n[0]=a.firstChild,n.length=1;r<n.length;){for(var s,i=n[r++];i;){var o=J.getID(i);o?t===o?s=i:S.isAncestorIDOf(o,t)&&(n.length=r=0,n.push(i.firstChild)):n.push(i.firstChild),i=i.nextSibling}if(s)return n.length=0,s}n.length=0,A(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",t,J.getID(e))},_mountImageIntoNode:function(e,t,n){if(A(t&&(t.nodeType===$||t.nodeType===q),"mountComponentIntoNode(...): Target container is not valid."),n){var a=M(t);if(N.canReuseMarkup(e,a))return;var s=a.getAttribute(N.CHECKSUM_ATTR_NAME);a.removeAttribute(N.CHECKSUM_ATTR_NAME);var i=a.outerHTML;a.setAttribute(N.CHECKSUM_ATTR_NAME,s);var o=r(e,i),c=" (client) "+e.substring(o-20,o+20)+"\n (server) "+i.substring(o-20,o+20);A(t.nodeType!==q,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",c),L(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",c)}A(t.nodeType!==q,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See React.renderToString() for server rendering."),P(t,e)},getReactRootID:a,getID:s,setID:o,getNode:c,getNodeFromInstance:u,purgeID:p};w.measureMethods(J,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=J},{100:100,11:11,123:123,130:130,144:144,149:149,150:150,164:164,167:167,171:171,33:33,45:45,63:63,64:64,65:65,72:72,73:73,76:76,82:82,89:89,99:99}],78:[function(e,t,n){"use strict";function r(e,t,n){h.push({parentID:e,parentNode:null,type:l.INSERT_MARKUP,markupIndex:f.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function a(e,t,n){h.push({parentID:e,parentNode:null,type:l.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function s(e,t){h.push({parentID:e,parentNode:null,type:l.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function i(e,t){h.push({parentID:e,parentNode:null,type:l.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function o(){h.length&&(u.processChildrenUpdates(h,f),c())}function c(){h.length=0,f.length=0}var u=e(41),l=e(79),p=e(89),m=e(36),d=0,h=[],f=[],v={Mixin:{mountChildren:function(e,t,n){var r=m.instantiateChildren(e,t,n);this._renderedChildren=r;var a=[],s=0;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i],c=this._rootNodeID+i,u=p.mountComponent(o,c,t,n);o._mountIndex=s,a.push(u),s++}return a},updateTextContent:function(e){d++;var t=!0;try{var n=this._renderedChildren;m.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{d--,d||(t?c():o())}},updateChildren:function(e,t,n){d++;var r=!0;try{this._updateChildren(e,t,n),r=!1}finally{d--,d||(r?c():o())}},_updateChildren:function(e,t,n){var r=this._renderedChildren,a=m.updateChildren(r,e,t,n);if(this._renderedChildren=a,a||r){var s,i=0,o=0;for(s in a)if(a.hasOwnProperty(s)){var c=r&&r[s],u=a[s];c===u?(this.moveChild(c,o,i),i=Math.max(c._mountIndex,i),c._mountIndex=o):(c&&(i=Math.max(c._mountIndex,i),this._unmountChildByName(c,s)),this._mountChildByNameAtIndex(u,s,o,t,n)),o++}for(s in r)!r.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||this._unmountChildByName(r[s],s)}},unmountChildren:function(){var e=this._renderedChildren;m.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&a(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){r(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){s(this._rootNodeID,e._mountIndex)},setTextContent:function(e){i(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r,a){var s=this._rootNodeID+t,i=p.mountComponent(e,s,r,a);e._mountIndex=n,this.createChild(e,i)},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null}}};t.exports=v},{36:36,41:41,79:79,89:89}],79:[function(e,t,n){"use strict";var r=e(156),a=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=a},{156:156}],80:[function(e,t,n){"use strict";function r(e){if("function"==typeof e.type)return e.type;var t=e.type,n=p[t];return null==n&&(p[t]=n=u(t)),n}function a(e){return c(l,"There is no registered component for the tag %s",e.type),new l(e.type,e.props)}function s(e){return new m(e)}function i(e){return e instanceof m}var o=e(29),c=e(150),u=null,l=null,p={},m=null,d={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){m=e},injectComponentClasses:function(e){o(p,e)},injectAutoWrapper:function(e){u=e}},h={getComponentClassForElement:r,createInternalComponent:a,createInstanceForText:s,isTextComponent:i,injection:d};t.exports=h},{150:150,29:29}],81:[function(e,t,n){"use strict";var r=e(150),a={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){r(a.isValidOwner(n),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(a.isValidOwner(n),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.getPublicInstance().refs[t]===e.getPublicInstance()&&n.detachRef(t)}};t.exports=a},{150:150}],82:[function(e,t,n){"use strict";function r(e,t,n){return n}var a={enableMeasure:!1,storedMeasure:r,measureMethods:function(e,t,n){for(var r in n)n.hasOwnProperty(r)&&(e[r]=a.measure(t,n[r],e[r]))},measure:function(e,t,n){var r=null,s=function(){return a.enableMeasure?(r||(r=a.storedMeasure(e,t,n)),r.apply(this,arguments)):n.apply(this,arguments)};return s.displayName=e+"_"+t,s},injection:{injectMeasure:function(e){a.storedMeasure=e}}};t.exports=a},{}],83:[function(e,t,n){"use strict";function r(e){return function(t,n,r){t.hasOwnProperty(n)?t[n]=e(t[n],r):t[n]=r}}function a(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=u[n];r&&u.hasOwnProperty(n)?r(e,n,t[n]):e.hasOwnProperty(n)||(e[n]=t[n])}return e}var s=e(29),i=e(129),o=e(155),c=r(function(e,t){return s({},t,e)}),u={children:i,className:r(o),style:c},l={mergeProps:function(e,t){return a(s({},e),t)}};t.exports=l},{129:129,155:155,29:29}],84:[function(e,t,n){"use strict";var r={};r={prop:"prop",context:"context",childContext:"child context"},t.exports=r},{}],85:[function(e,t,n){"use strict";var r=e(156),a=r({prop:null,context:null,childContext:null});t.exports=a},{156:156}],86:[function(e,t,n){"use strict";function r(e){function t(t,n,r,a,s){if(a=a||C,null==n[r]){var i=b[s];return t?new Error("Required "+i+" `"+r+"` was not specified in "+("`"+a+"`.")):null}return e(n,r,a,s)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function a(e){function t(t,n,r,a){var s=t[n],i=f(s);if(i!==e){var o=b[a],c=v(s);return new Error("Invalid "+o+" `"+n+"` of type `"+c+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}return null}return r(t)}function s(){return r(E.thatReturns(null))}function i(e){function t(t,n,r,a){var s=t[n];if(!Array.isArray(s)){var i=b[a],o=f(s);return new Error("Invalid "+i+" `"+n+"` of type "+("`"+o+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<s.length;c++){var u=e(s,c,r,a);if(u instanceof Error)return u}return null}return r(t)}function o(){function e(e,t,n,r){if(!g.isValidElement(e[t])){var a=b[r];return new Error("Invalid "+a+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}return null}return r(e)}function c(e){function t(t,n,r,a){if(!(t[n]instanceof e)){var s=b[a],i=e.name||C;return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+i+"`."))}return null}return r(t)}function u(e){function t(t,n,r,a){for(var s=t[n],i=0;i<e.length;i++)if(s===e[i])return null;var o=b[a],c=JSON.stringify(e);return new Error("Invalid "+o+" `"+n+"` of value `"+s+"` "+("supplied to `"+r+"`, expected one of "+c+"."))}return r(t)}function l(e){function t(t,n,r,a){var s=t[n],i=f(s);if("object"!==i){var o=b[a];return new Error("Invalid "+o+" `"+n+"` of type "+("`"+i+"` supplied to `"+r+"`, expected an object."))}for(var c in s)if(s.hasOwnProperty(c)){var u=e(s,c,r,a);if(u instanceof Error)return u}return null}return r(t)}function p(e){function t(t,n,r,a){for(var s=0;s<e.length;s++){var i=e[s];if(null==i(t,n,r,a))return null}var o=b[a];return new Error("Invalid "+o+" `"+n+"` supplied to "+("`"+r+"`."))}return r(t)}function m(){function e(e,t,n,r){if(!h(e[t])){var a=b[r];return new Error("Invalid "+a+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(e)}function d(e){function t(t,n,r,a){var s=t[n],i=f(s);if("object"!==i){var o=b[a];return new Error("Invalid "+o+" `"+n+"` of type `"+i+"` "+("supplied to `"+r+"`, expected `object`."))}for(var c in e){var u=e[c];if(u){var l=u(s,c,r,a);if(l)return l}}return null}return r(t)}function h(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(h);if(null===e||g.isValidElement(e))return!0;e=y.extractIfFragment(e);for(var t in e)if(!h(e[t]))return!1;return!0;default:return!1}}function f(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function v(e){var t=f(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var g=e(63),y=e(69),b=e(84),E=e(129),C="<<anonymous>>",S=o(),R=m(),N={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),any:s(),arrayOf:i,element:S,instanceOf:c,node:R,objectOf:l,oneOf:u,oneOfType:p,shape:d};t.exports=N},{129:129,63:63,69:69,84:84}],87:[function(e,t,n){"use strict";function r(){this.listenersToPut=[]}var a=e(30),s=e(33),i=e(29);i(r.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];s.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),a.addPoolingTo(r),t.exports=r},{29:29,30:30,33:33}],88:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=a.getPooled(null),this.putListenerQueue=c.getPooled()}var a=e(7),s=e(30),i=e(33),o=e(71),c=e(87),u=e(116),l=e(29),p={initialize:o.getSelectionInformation,close:o.restoreSelection},m={initialize:function(){var e=i.isEnabled();return i.setEnabled(!1),e},close:function(e){i.setEnabled(e)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},f=[h,p,m,d],v={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){a.release(this.reactMountReady),this.reactMountReady=null,c.release(this.putListenerQueue),this.putListenerQueue=null}};l(r.prototype,u.Mixin,v),s.addPoolingTo(r),t.exports=r},{116:116,29:29,30:30,33:33,7:7,71:71,87:87}],89:[function(e,t,n){"use strict";function r(){a.attachRefs(this,this._currentElement)}var a=e(90),s=e(64),i={mountComponent:function(e,t,n,a){var i=e.mountComponent(t,n,a);return s.checkAndWarnForMutatedProps(e._currentElement),n.getReactMountReady().enqueue(r,e),i},unmountComponent:function(e){a.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,i){var o=e._currentElement;if(t!==o||null==t._owner){s.checkAndWarnForMutatedProps(t);var c=a.shouldUpdateRefs(o,t);c&&a.detachRefs(e,o),e.receiveComponent(t,n,i),c&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};t.exports=i},{64:64,90:90}],90:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):s.addComponentAsRefTo(t,e,n)}function a(e,t,n){"function"==typeof e?e(null):s.removeComponentAsRefFrom(t,e,n)}var s=e(81),i={};i.attachRefs=function(e,t){var n=t.ref;null!=n&&r(n,e,t._owner)},i.shouldUpdateRefs=function(e,t){return t._owner!==e._owner||t.ref!==e.ref},i.detachRefs=function(e,t){var n=t.ref;null!=n&&a(n,e,t._owner)},t.exports=i},{81:81}],91:[function(e,t,n){"use strict";var r={injectCreateReactRootIndex:function(e){a.createReactRootIndex=e}},a={createReactRootIndex:null,injection:r};t.exports=a},{}],92:[function(e,t,n){"use strict";function r(e){p(s.isValidElement(e),"renderToString(): You must pass a valid ReactElement.");var t;try{var n=i.createReactRootID();return t=c.getPooled(!1),t.perform(function(){var r=l(e,null),a=r.mountComponent(n,t,u);return o.addChecksumToMarkup(a)},null)}finally{c.release(t)}}function a(e){p(s.isValidElement(e),"renderToStaticMarkup(): You must pass a valid ReactElement.");var t;try{var n=i.createReactRootID();return t=c.getPooled(!0),t.perform(function(){var r=l(e,null);return r.mountComponent(n,t,u)},null)}finally{c.release(t)}}var s=e(63),i=e(72),o=e(76),c=e(93),u=e(130),l=e(149),p=e(150);t.exports={renderToString:r,renderToStaticMarkup:a}},{130:130,149:149,150:150,63:63,72:72,76:76,93:93}],93:[function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=s.getPooled(null),this.putListenerQueue=i.getPooled()}var a=e(30),s=e(7),i=e(87),o=e(116),c=e(29),u=e(129),l={initialize:function(){this.reactMountReady.reset()},close:u},p={initialize:function(){this.putListenerQueue.reset()},close:u},m=[p,l],d={getTransactionWrappers:function(){return m},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){s.release(this.reactMountReady),this.reactMountReady=null,i.release(this.putListenerQueue),this.putListenerQueue=null}};c(r.prototype,o.Mixin,d),a.addPoolingTo(r),
t.exports=r},{116:116,129:129,29:29,30:30,7:7,87:87}],94:[function(e,t,n){"use strict";function r(e,t){var n={};return function(r){n[t]=r,e.setState(n)}}var a={createStateSetter:function(e,t){return function(n,r,a,s,i,o){var c=t.call(e,n,r,a,s,i,o);c&&e.setState(c)}},createStateKeySetter:function(e,t){var n=e.__keySetters||(e.__keySetters={});return n[t]||(n[t]=r(e,t))}};a.Mixin={createStateSetter:function(e){return a.createStateSetter(this,e)},createStateKeySetter:function(e){return a.createStateKeySetter(this,e)}},t.exports=a},{}],95:[function(e,t,n){"use strict";function r(e){}function a(e){return function(t,n){var a;R.isDOMComponent(t)?a=t.getDOMNode():t.tagName&&(a=t);var s=new r;s.target=a;var i=new b(d.eventNameDispatchConfigs[e],g.getID(a),s);E(i,n),u.accumulateTwoPhaseDispatches(i),y.batchedUpdates(function(){c.enqueueEvents(i),c.processEventQueue()})}}function s(){R.Simulate={};var e;for(e in d.eventNameDispatchConfigs)R.Simulate[e]=a(e)}function i(e){return function(t,n){var a=new r(e);E(a,n),R.isDOMComponent(t)?R.simulateNativeEventOnDOMComponent(e,t,a):t.tagName&&R.simulateNativeEventOnNode(e,t,a)}}var o=e(16),c=e(18),u=e(21),l=e(31),p=e(63),m=e(65),d=e(33),h=e(43),f=e(72),v=e(73),g=e(77),y=e(100),b=e(108),E=e(29),C=e(130),S=o.topLevelTypes,R={renderIntoDocument:function(e){var t=document.createElement("div");return l.render(e,t)},isElement:function(e){return p.isValidElement(e)},isElementOfType:function(e,t){return p.isValidElement(e)&&e.type===t},isDOMComponent:function(e){return!!(e&&e.tagName&&e.getDOMNode)},isDOMComponentElement:function(e){return!!(e&&p.isValidElement(e)&&e.tagName)},isCompositeComponent:function(e){return"function"==typeof e.render&&"function"==typeof e.setState},isCompositeComponentWithType:function(e,t){return!(!R.isCompositeComponent(e)||e.constructor!==t)},isCompositeComponentElement:function(e){if(!p.isValidElement(e))return!1;var t=e.type.prototype;return"function"==typeof t.render&&"function"==typeof t.setState},isCompositeComponentElementWithType:function(e,t){return!(!R.isCompositeComponentElement(e)||e.constructor!==t)},getRenderedChildOfCompositeComponent:function(e){if(!R.isCompositeComponent(e))return null;var t=v.get(e);return t._renderedComponent.getPublicInstance()},findAllInRenderedTree:function(e,t){if(!e)return[];var n=t(e)?[e]:[];if(R.isDOMComponent(e)){var r,a=v.get(e),s=a._renderedComponent._renderedChildren;for(r in s)s.hasOwnProperty(r)&&s[r].getPublicInstance&&(n=n.concat(R.findAllInRenderedTree(s[r].getPublicInstance(),t)))}else R.isCompositeComponent(e)&&(n=n.concat(R.findAllInRenderedTree(R.getRenderedChildOfCompositeComponent(e),t)));return n},scryRenderedDOMComponentsWithClass:function(e,t){return R.findAllInRenderedTree(e,function(e){var n=e.props.className;return R.isDOMComponent(e)&&n&&-1!==(" "+n+" ").indexOf(" "+t+" ")})},findRenderedDOMComponentWithClass:function(e,t){var n=R.scryRenderedDOMComponentsWithClass(e,t);if(1!==n.length)throw new Error("Did not find exactly one match (found: "+n.length+") for class:"+t);return n[0]},scryRenderedDOMComponentsWithTag:function(e,t){return R.findAllInRenderedTree(e,function(e){return R.isDOMComponent(e)&&e.tagName===t.toUpperCase()})},findRenderedDOMComponentWithTag:function(e,t){var n=R.scryRenderedDOMComponentsWithTag(e,t);if(1!==n.length)throw new Error("Did not find exactly one match for tag:"+t);return n[0]},scryRenderedComponentsWithType:function(e,t){return R.findAllInRenderedTree(e,function(e){return R.isCompositeComponentWithType(e,t)})},findRenderedComponentWithType:function(e,t){var n=R.scryRenderedComponentsWithType(e,t);if(1!==n.length)throw new Error("Did not find exactly one match for componentType:"+t);return n[0]},mockComponent:function(e,t){return t=t||e.mockTagName||"div",e.prototype.render.mockImplementation(function(){return l.createElement(t,null,this.props.children)}),this},simulateNativeEventOnNode:function(e,t,n){n.target=t,d.ReactEventListener.dispatchEvent(e,n)},simulateNativeEventOnDOMComponent:function(e,t,n){R.simulateNativeEventOnNode(e,t.getDOMNode(),n)},nativeTouchData:function(e,t){return{touches:[{pageX:e,pageY:t}]}},createRenderer:function(){return new N},Simulate:null,SimulateNative:{}},N=function(){this._instance=null};N.prototype.getRenderOutput=function(){return this._instance&&this._instance._renderedComponent&&this._instance._renderedComponent._renderedOutput||null};var w=function(e){this._renderedOutput=e,this._currentElement=null===e||e===!1?m.emptyElement:e};w.prototype={mountComponent:function(){},receiveComponent:function(e){this._renderedOutput=e,this._currentElement=null===e||e===!1?m.emptyElement:e},unmountComponent:function(){}};var _=function(){};E(_.prototype,h.Mixin,{_instantiateReactComponent:function(e){return new w(e)},_replaceNodeWithMarkupByID:function(){},_renderValidatedComponent:h.Mixin._renderValidatedComponentWithoutOwnerOrContext}),N.prototype.render=function(e,t){t||(t=C);var n=y.ReactReconcileTransaction.getPooled();this._render(e,n,t),y.ReactReconcileTransaction.release(n)},N.prototype.unmount=function(){this._instance&&this._instance.unmountComponent()},N.prototype._render=function(e,t,n){if(this._instance)this._instance.receiveComponent(e,t,n);else{var r=f.createReactRootID(),a=new _(e.type);a.construct(e),a.mountComponent(r,t,n),this._instance=a}};var x=c.injection.injectEventPluginOrder;c.injection.injectEventPluginOrder=function(){x.apply(this,arguments),s()};var k=c.injection.injectEventPluginsByName;c.injection.injectEventPluginsByName=function(){k.apply(this,arguments),s()},s();var D;for(D in S){var I=0===D.indexOf("top")?D.charAt(3).toLowerCase()+D.substr(4):D;R.SimulateNative[I]=i(D)}t.exports=R},{100:100,108:108,130:130,16:16,18:18,21:21,29:29,31:31,33:33,43:43,63:63,65:65,72:72,73:73,77:77}],96:[function(e,t,n){"use strict";var r=e(37),a=e(69),s={getChildMapping:function(e){return e?a.extract(r.map(e,function(e){return e})):e},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},a=[];for(var s in e)t.hasOwnProperty(s)?a.length&&(r[s]=a,a=[]):a.push(s);var i,o={};for(var c in t){if(r.hasOwnProperty(c))for(i=0;i<r[c].length;i++){var u=r[c][i];o[r[c][i]]=n(u)}o[c]=n(c)}for(i=0;i<a.length;i++)o[a[i]]=n(a[i]);return o}};t.exports=s},{37:37,69:69}],97:[function(e,t,n){"use strict";function r(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete o.animationend.animation,"TransitionEvent"in window||delete o.transitionend.transition;for(var n in o){var r=o[n];for(var a in r)if(a in t){c.push(r[a]);break}}}function a(e,t,n){e.addEventListener(t,n,!1)}function s(e,t,n){e.removeEventListener(t,n,!1)}var i=e(22),o={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},c=[];i.canUseDOM&&r();var u={addEndEventListener:function(e,t){return 0===c.length?void window.setTimeout(t,0):void c.forEach(function(n){a(e,n,t)})},removeEndEventListener:function(e,t){0!==c.length&&c.forEach(function(n){s(e,n,t)})}};t.exports=u},{22:22}],98:[function(e,t,n){"use strict";var r=e(31),a=e(96),s=e(29),i=e(122),o=e(129),c=r.createClass({displayName:"ReactTransitionGroup",propTypes:{component:r.PropTypes.any,childFactory:r.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:o.thatReturnsArgument}},getInitialState:function(){return{children:a.getChildMapping(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidMount:function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},componentWillReceiveProps:function(e){var t=a.getChildMapping(e.children),n=this.state.children;this.setState({children:a.mergeChildMappings(n,t)});var r;for(r in t){var s=n&&n.hasOwnProperty(r);!t[r]||s||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(r in n){var i=t&&t.hasOwnProperty(r);!n[r]||i||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performAppear:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)},_handleDoneAppearing:function(e){var t=this.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e];var n=a.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performEnter:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)},_handleDoneEntering:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var n=a.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performLeave:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)},_handleDoneLeaving:function(e){var t=this.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n=a.getChildMapping(this.props.children);if(n&&n.hasOwnProperty(e))this.performEnter(e);else{var r=s({},this.state.children);delete r[e],this.setState({children:r})}},render:function(){var e=[];for(var t in this.state.children){var n=this.state.children[t];n&&e.push(i(this.props.childFactory(n),{ref:t,key:t}))}return r.createElement(this.props.component,this.props,e)}});t.exports=c},{122:122,129:129,29:29,31:31,96:96}],99:[function(e,t,n){"use strict";function r(e){e!==s.currentlyMountingInstance&&u.enqueueUpdate(e)}function a(e,t){p(null==i.current,"%s(...): Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state.",t);var n=c.get(e);return n?n===s.currentlyUnmountingInstance?null:n:(m(!t,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op.",t,t),null)}var s=e(74),i=e(45),o=e(63),c=e(73),u=e(100),l=e(29),p=e(150),m=e(171),d={enqueueCallback:function(e,t){p("function"==typeof t,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable.");var n=a(e);return n&&n!==s.currentlyMountingInstance?(n._pendingCallbacks?n._pendingCallbacks.push(t):n._pendingCallbacks=[t],void r(n)):null},enqueueCallbackInternal:function(e,t){p("function"==typeof t,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."),e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=a(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=a(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){var n=a(e,"setState");if(n){var s=n._pendingStateQueue||(n._pendingStateQueue=[]);s.push(t),r(n)}},enqueueSetProps:function(e,t){var n=a(e,"setProps");if(n){p(n._isTopLevel,"setProps(...): You called `setProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created.");var s=n._pendingElement||n._currentElement,i=l({},s.props,t);n._pendingElement=o.cloneAndReplaceProps(s,i),r(n)}},enqueueReplaceProps:function(e,t){var n=a(e,"replaceProps");if(n){p(n._isTopLevel,"replaceProps(...): You called `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created.");var s=n._pendingElement||n._currentElement;n._pendingElement=o.cloneAndReplaceProps(s,t),r(n)}},enqueueElementInternal:function(e,t){e._pendingElement=t,r(e)}};t.exports=d},{100:100,150:150,171:171,29:29,45:45,63:63,73:73,74:74}],100:[function(e,t,n){"use strict";function r(){g(k.ReactReconcileTransaction&&S,"ReactUpdates: must inject a reconcile transaction class and batching strategy")}function a(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=l.getPooled(),this.reconcileTransaction=k.ReactReconcileTransaction.getPooled()}function s(e,t,n,a,s){r(),S.batchedUpdates(e,t,n,a,s)}function i(e,t){return e._mountOrder-t._mountOrder}function o(e){var t=e.dirtyComponentsLength;g(t===b.length,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",t,b.length),b.sort(i);for(var n=0;t>n;n++){var r=b[n],a=r._pendingCallbacks;if(r._pendingCallbacks=null,h.performUpdateIfNecessary(r,e.reconcileTransaction),a)for(var s=0;s<a.length;s++)e.callbackQueue.enqueue(a[s],r.getPublicInstance())}}function c(e){return r(),y(null==m.current,"enqueueUpdate(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."),S.isBatchingUpdates?void b.push(e):void S.batchedUpdates(c,e)}function u(e,t){g(S.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),E.enqueue(e,t),C=!0}var l=e(7),p=e(30),m=e(45),d=e(82),h=e(89),f=e(116),v=e(29),g=e(150),y=e(171),b=[],E=l.getPooled(),C=!1,S=null,R={initialize:function(){this.dirtyComponentsLength=b.length},close:function(){this.dirtyComponentsLength!==b.length?(b.splice(0,this.dirtyComponentsLength),_()):b.length=0}},N={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},w=[R,N];v(a.prototype,f.Mixin,{getTransactionWrappers:function(){return w},destructor:function(){this.dirtyComponentsLength=null,l.release(this.callbackQueue),this.callbackQueue=null,k.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return f.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),p.addPoolingTo(a);var _=function(){for(;b.length||C;){if(b.length){var e=a.getPooled();e.perform(o,null,e),a.release(e)}if(C){C=!1;var t=E;E=l.getPooled(),t.notifyAll(),l.release(t)}}};_=d.measure("ReactUpdates","flushBatchedUpdates",_);var x={injectReconcileTransaction:function(e){g(e,"ReactUpdates: must provide a reconcile transaction class"),k.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){g(e,"ReactUpdates: must provide a batching strategy"),g("function"==typeof e.batchedUpdates,"ReactUpdates: must provide a batchedUpdates() function"),g("boolean"==typeof e.isBatchingUpdates,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"),S=e}},k={ReactReconcileTransaction:null,batchedUpdates:s,enqueueUpdate:c,flushBatchedUpdates:_,injection:x,asap:u};t.exports=k},{116:116,150:150,171:171,29:29,30:30,45:45,7:7,82:82,89:89}],101:[function(e,t,n){"use strict";var r=e(11),a=r.injection.MUST_USE_ATTRIBUTE,s={Properties:{clipPath:a,cx:a,cy:a,d:a,dx:a,dy:a,fill:a,fillOpacity:a,fontFamily:a,fontSize:a,fx:a,fy:a,gradientTransform:a,gradientUnits:a,markerEnd:a,markerMid:a,markerStart:a,offset:a,opacity:a,patternContentUnits:a,patternUnits:a,points:a,preserveAspectRatio:a,r:a,rx:a,ry:a,spreadMethod:a,stopColor:a,stopOpacity:a,stroke:a,strokeDasharray:a,strokeLinecap:a,strokeOpacity:a,strokeWidth:a,textAnchor:a,transform:a,version:a,viewBox:a,x1:a,x2:a,x:a,y1:a,y2:a,y:a},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=s},{11:11}],102:[function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&o.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function a(e){if(y||null==f||f!==u())return null;var t=r(f);if(!g||!m(g,t)){g=t;var n=c.getPooled(h.select,v,e);return n.type="select",n.target=f,i.accumulateTwoPhaseDispatches(n),n}}var s=e(16),i=e(21),o=e(71),c=e(108),u=e(136),l=e(153),p=e(157),m=e(166),d=s.topLevelTypes,h={select:{phasedRegistrationNames:{bubbled:p({onSelect:null}),captured:p({onSelectCapture:null})},dependencies:[d.topBlur,d.topContextMenu,d.topFocus,d.topKeyDown,d.topMouseDown,d.topMouseUp,d.topSelectionChange]}},f=null,v=null,g=null,y=!1,b={eventTypes:h,extractEvents:function(e,t,n,r){switch(e){case d.topFocus:(l(t)||"true"===t.contentEditable)&&(f=t,v=n,g=null);break;case d.topBlur:f=null,v=null,g=null;break;case d.topMouseDown:y=!0;break;case d.topContextMenu:case d.topMouseUp:return y=!1,a(r);case d.topSelectionChange:case d.topKeyDown:case d.topKeyUp:return a(r)}}};t.exports=b},{108:108,136:136,153:153,157:157,16:16,166:166,21:21,71:71}],103:[function(e,t,n){"use strict";var r=Math.pow(2,53),a={createReactRootIndex:function(){return Math.ceil(Math.random()*r)}};t.exports=a},{}],104:[function(e,t,n){"use strict";var r=e(16),a=e(20),s=e(21),i=e(105),o=e(108),c=e(109),u=e(111),l=e(112),p=e(107),m=e(113),d=e(114),h=e(115),f=e(137),v=e(150),g=e(157),y=e(171),b=r.topLevelTypes,E={blur:{phasedRegistrationNames:{bubbled:g({onBlur:!0}),captured:g({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:g({onClick:!0}),captured:g({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:g({onContextMenu:!0}),captured:g({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:g({onCopy:!0}),captured:g({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:g({onCut:!0}),captured:g({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:g({onDoubleClick:!0}),captured:g({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:g({onDrag:!0}),captured:g({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:g({onDragEnd:!0}),captured:g({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:g({onDragEnter:!0}),captured:g({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:g({onDragExit:!0}),captured:g({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:g({onDragLeave:!0}),captured:g({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:g({onDragOver:!0}),captured:g({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:g({onDragStart:!0}),captured:g({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:g({onDrop:!0}),captured:g({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:g({onFocus:!0}),captured:g({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:g({onInput:!0}),captured:g({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:g({onKeyDown:!0}),captured:g({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:g({onKeyPress:!0}),captured:g({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:g({onKeyUp:!0}),captured:g({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:g({onLoad:!0}),captured:g({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:g({onError:!0}),captured:g({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:g({onMouseDown:!0}),captured:g({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:g({onMouseMove:!0}),captured:g({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:g({onMouseOut:!0}),captured:g({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:g({onMouseOver:!0}),captured:g({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:g({onMouseUp:!0}),captured:g({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:g({onPaste:!0}),captured:g({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:g({onReset:!0}),captured:g({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:g({onScroll:!0}),captured:g({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:g({onSubmit:!0}),captured:g({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:g({onTouchCancel:!0}),captured:g({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:g({onTouchEnd:!0}),captured:g({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:g({onTouchMove:!0}),captured:g({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:g({onTouchStart:!0}),captured:g({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:g({onWheel:!0}),captured:g({onWheelCapture:!0})}}},C={topBlur:E.blur,topClick:E.click,topContextMenu:E.contextMenu,topCopy:E.copy,topCut:E.cut,topDoubleClick:E.doubleClick,topDrag:E.drag,topDragEnd:E.dragEnd,topDragEnter:E.dragEnter,topDragExit:E.dragExit,topDragLeave:E.dragLeave,topDragOver:E.dragOver,topDragStart:E.dragStart,topDrop:E.drop,topError:E.error,topFocus:E.focus,topInput:E.input,topKeyDown:E.keyDown,topKeyPress:E.keyPress,topKeyUp:E.keyUp,topLoad:E.load,topMouseDown:E.mouseDown,topMouseMove:E.mouseMove,topMouseOut:E.mouseOut,topMouseOver:E.mouseOver,topMouseUp:E.mouseUp,topPaste:E.paste,topReset:E.reset,topScroll:E.scroll,topSubmit:E.submit,topTouchCancel:E.touchCancel,topTouchEnd:E.touchEnd,topTouchMove:E.touchMove,topTouchStart:E.touchStart,topWheel:E.wheel};for(var S in C)C[S].dependencies=[S];var R={eventTypes:E,executeDispatch:function(e,t,n){var r=a.executeDispatch(e,t,n);y("boolean"!=typeof r,"Returning `false` from an event handler is deprecated and will be ignored in a future release. Instead, manually call e.stopPropagation() or e.preventDefault(), as appropriate."),r===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,r){var a=C[e];if(!a)return null;var g;switch(e){case b.topInput:case b.topLoad:case b.topError:case b.topReset:case b.topSubmit:g=o;break;case b.topKeyPress:if(0===f(r))return null;case b.topKeyDown:case b.topKeyUp:g=u;break;case b.topBlur:case b.topFocus:g=c;break;case b.topClick:if(2===r.button)return null;case b.topContextMenu:case b.topDoubleClick:case b.topMouseDown:case b.topMouseMove:case b.topMouseOut:case b.topMouseOver:case b.topMouseUp:g=l;break;case b.topDrag:case b.topDragEnd:case b.topDragEnter:case b.topDragExit:case b.topDragLeave:case b.topDragOver:case b.topDragStart:case b.topDrop:g=p;break;case b.topTouchCancel:case b.topTouchEnd:case b.topTouchMove:case b.topTouchStart:g=m;break;case b.topScroll:g=d;break;case b.topWheel:g=h;break;case b.topCopy:case b.topCut:case b.topPaste:g=i}v(g,"SimpleEventPlugin: Unhandled event type, `%s`.",e);var y=g.getPooled(a,n,r);return s.accumulateTwoPhaseDispatches(y),y}};t.exports=R},{105:105,107:107,108:108,109:109,111:111,112:112,113:113,114:114,115:115,137:137,150:150,157:157,16:16,171:171,20:20,21:21}],105:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(108),s={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};a.augmentClass(r,s),t.exports=r},{108:108}],106:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(108),s={data:null};a.augmentClass(r,s),t.exports=r},{108:108}],107:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(112),s={dataTransfer:null};a.augmentClass(r,s),t.exports=r},{112:112}],108:[function(e,t,n){"use strict";function r(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];s?this[a]=s(n):this[a]=n[a]}var o=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;o?this.isDefaultPrevented=i.thatReturnsTrue:this.isDefaultPrevented=i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse}var a=e(30),s=e(29),i=e(129),o=e(140),c={type:null,target:o,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};s(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=i.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=i.thatReturnsTrue},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),r.Interface=c,r.augmentClass=function(e,t){var n=this,r=Object.create(n.prototype);s(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=s({},n.Interface,t),e.augmentClass=n.augmentClass,a.addPoolingTo(e,a.threeArgumentPooler)},a.addPoolingTo(r,a.threeArgumentPooler),t.exports=r},{129:129,140:140,29:29,30:30}],109:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(114),s={relatedTarget:null};a.augmentClass(r,s),t.exports=r},{114:114}],110:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(108),s={data:null};a.augmentClass(r,s),t.exports=r},{108:108}],111:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(114),s=e(137),i=e(138),o=e(139),c={key:i,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:o,charCode:function(e){return"keypress"===e.type?s(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?s(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};a.augmentClass(r,c),t.exports=r},{114:114,137:137,138:138,139:139}],112:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(114),s=e(117),i=e(139),o={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:i,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+s.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+s.currentScrollTop}};a.augmentClass(r,o),t.exports=r},{114:114,117:117,139:139}],113:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(114),s=e(139),i={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:s};a.augmentClass(r,i),t.exports=r},{114:114,139:139}],114:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(108),s=e(140),i={view:function(e){if(e.view)return e.view;var t=s(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};a.augmentClass(r,i),t.exports=r},{108:108,140:140}],115:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(112),s={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};a.augmentClass(r,s),t.exports=r},{112:112}],116:[function(e,t,n){"use strict";var r=e(150),a={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,a,s,i,o,c){r(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction.");var u,l;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),l=e.call(t,n,a,s,i,o,c),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(p){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=s.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===s.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(a){}}}},closeAll:function(e){r(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open.");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var a,i=t[n],o=this.wrapperInitData[n];try{a=!0,o!==s.OBSERVED_ERROR&&i.close&&i.close.call(this,o),a=!1}finally{if(a)try{this.closeAll(n+1)}catch(c){}}}this.wrapperInitData.length=0}},s={Mixin:a,OBSERVED_ERROR:{}};t.exports=s},{150:150}],117:[function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{}],118:[function(e,t,n){"use strict";function r(e,t){if(a(null!=t,"accumulateInto(...): Accumulated items must not be null or undefined."),null==e)return t;var n=Array.isArray(e),r=Array.isArray(t);return n&&r?(e.push.apply(e,t),e):n?(e.push(t),e):r?[e].concat(t):[e,t]}var a=e(150);t.exports=r},{150:150}],119:[function(e,t,n){"use strict";function r(e){for(var t=1,n=0,r=0;r<e.length;r++)t=(t+e.charCodeAt(r))%a,n=(n+t)%a;return t|n<<16}var a=65521;t.exports=r},{}],120:[function(e,t,n){function r(e){return e.replace(a,function(e,t){return t.toUpperCase()})}var a=/-(.)/g;t.exports=r},{}],121:[function(e,t,n){"use strict";function r(e){return a(e.replace(s,"ms-"))}var a=e(120),s=/^-ms-/;t.exports=r},{120:120}],122:[function(e,t,n){"use strict";function r(e,t){o(!e.ref,"You are calling cloneWithProps() on a child with a ref. This is dangerous because you're creating a new child which will not be added as a ref to its parent.");var n=s.mergeProps(t,e.props);return!n.hasOwnProperty(c)&&e.props.hasOwnProperty(c)&&(n.children=e.props.children),a.createElement(e.type,n)}var a=e(63),s=e(83),i=e(157),o=e(171),c=i({children:null});t.exports=r},{157:157,171:171,63:63,83:83}],123:[function(e,t,n){function r(e,t){return e&&t?e===t?!0:a(e)?!1:a(t)?r(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var a=e(154);t.exports=r},{154:154}],124:[function(e,t,n){function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function a(e){return r(e)?Array.isArray(e)?e.slice():s(e):[e]}var s=e(168);t.exports=a},{168:168}],125:[function(e,t,n){"use strict";function r(e){var t=s.createFactory(e),n=a.createClass({tagName:e.toUpperCase(),
displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){i(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName)},render:function(){return t(this.props)}});return n}var a=e(38),s=e(63),i=e(150);t.exports=r},{150:150,38:38,63:63}],126:[function(e,t,n){function r(e){var t=e.match(l);return t&&t[1].toLowerCase()}function a(e,t){var n=u;c(!!u,"createNodesFromMarkup dummy not initialized");var a=r(e),s=a&&o(a);if(s){n.innerHTML=s[1]+e+s[2];for(var l=s[0];l--;)n=n.lastChild}else n.innerHTML=e;var p=n.getElementsByTagName("script");p.length&&(c(t,"createNodesFromMarkup(...): Unexpected <script> element rendered."),i(p).forEach(t));for(var m=i(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return m}var s=e(22),i=e(124),o=e(142),c=e(150),u=s.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;t.exports=a},{124:124,142:142,150:150,22:22}],127:[function(e,t,n){"use strict";function r(e){return a(s,"React.addons.classSet will be deprecated in a future version. See http://fb.me/react-addons-classset"),s=!0,"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}).join(" "):Array.prototype.join.call(arguments," ")}var a=e(171),s=!1;t.exports=r},{171:171}],128:[function(e,t,n){"use strict";function r(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||s.hasOwnProperty(e)&&s[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var a=e(5),s=a.isUnitlessNumber;t.exports=r},{5:5}],129:[function(e,t,n){function r(e){return function(){return e}}function a(){}a.thatReturns=r,a.thatReturnsFalse=r(!1),a.thatReturnsTrue=r(!0),a.thatReturnsNull=r(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},t.exports=a},{}],130:[function(e,t,n){"use strict";var r={};Object.freeze(r),t.exports=r},{}],131:[function(e,t,n){"use strict";function r(e){return s[e]}function a(e){return(""+e).replace(i,r)}var s={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},i=/[&><"']/g;t.exports=a},{}],132:[function(e,t,n){"use strict";function r(e){var t=a.current;return null!==t&&(u(t._warnedAboutRefsInRender,"%s is accessing getDOMNode or findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",t.getName()||"A component"),t._warnedAboutRefsInRender=!0),null==e?null:c(e)?e:s.has(e)?i.getNodeFromInstance(e):(o(null==e.render||"function"!=typeof e.render,"Component (with keys: %s) contains `render` method but is not mounted in the DOM",Object.keys(e)),void o(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(e)))}var a=e(45),s=e(73),i=e(77),o=e(150),c=e(152),u=e(171);t.exports=r},{150:150,152:152,171:171,45:45,73:73,77:77}],133:[function(e,t,n){"use strict";function r(e,t,n){var r=e,a=!r.hasOwnProperty(n);i(a,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),a&&null!=t&&(r[n]=t)}function a(e){if(null==e)return e;var t={};return s(e,r,t),t}var s=e(169),i=e(171);t.exports=a},{169:169,171:171}],134:[function(e,t,n){"use strict";function r(e){try{e.focus()}catch(t){}}t.exports=r},{}],135:[function(e,t,n){"use strict";var r=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=r},{}],136:[function(e,t,n){function r(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=r},{}],137:[function(e,t,n){"use strict";function r(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=r},{}],138:[function(e,t,n){"use strict";function r(e){if(e.key){var t=s[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=a(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?i[e.keyCode]||"Unidentified":""}var a=e(137),s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},{137:137}],139:[function(e,t,n){"use strict";function r(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=s[e];return r?!!n[r]:!1}function a(e){return r}var s={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=a},{}],140:[function(e,t,n){"use strict";function r(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}t.exports=r},{}],141:[function(e,t,n){"use strict";function r(e){var t=e&&(a&&e[a]||e[s]);return"function"==typeof t?t:void 0}var a="function"==typeof Symbol&&Symbol.iterator,s="@@iterator";t.exports=r},{}],142:[function(e,t,n){function r(e){return s(!!i,"Markup wrapping node not initialized"),m.hasOwnProperty(e)||(e="*"),o.hasOwnProperty(e)||("*"===e?i.innerHTML="<link />":i.innerHTML="<"+e+"></"+e+">",o[e]=!i.firstChild),o[e]?m[e]:null}var a=e(22),s=e(150),i=a.canUseDOM?document.createElement("div"):null,o={circle:!0,clipPath:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},c=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],p=[1,"<svg>","</svg>"],m={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:c,option:c,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:l,th:l,circle:p,clipPath:p,defs:p,ellipse:p,g:p,line:p,linearGradient:p,path:p,polygon:p,polyline:p,radialGradient:p,rect:p,stop:p,text:p};t.exports=r},{150:150,22:22}],143:[function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function a(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function s(e,t){for(var n=r(e),s=0,i=0;n;){if(3===n.nodeType){if(i=s+n.textContent.length,t>=s&&i>=t)return{node:n,offset:t-s};s=i}n=r(a(n))}}t.exports=s},{}],144:[function(e,t,n){"use strict";function r(e){return e?e.nodeType===a?e.documentElement:e.firstChild:null}var a=9;t.exports=r},{}],145:[function(e,t,n){"use strict";function r(){return!s&&a.canUseDOM&&(s="textContent"in document.documentElement?"textContent":"innerText"),s}var a=e(22),s=null;t.exports=r},{22:22}],146:[function(e,t,n){"use strict";function r(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=r},{}],147:[function(e,t,n){function r(e){return e.replace(a,"-$1").toLowerCase()}var a=/([A-Z])/g;t.exports=r},{}],148:[function(e,t,n){"use strict";function r(e){return a(e).replace(s,"-ms-")}var a=e(147),s=/^ms-/;t.exports=r},{147:147}],149:[function(e,t,n){"use strict";function r(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function a(e,t){var n;if((null===e||e===!1)&&(e=i.emptyElement),"object"==typeof e){var a=e;l(a&&("function"==typeof a.type||"string"==typeof a.type),"Only functions or strings can be mounted as React components."),n=t===a.type&&"string"==typeof a.type?o.createInternalComponent(a):r(a.type)?new a.type(a):new p}else"string"==typeof e||"number"==typeof e?n=o.createInstanceForText(e):u(!1,"Encountered invalid React node of type %s",typeof e);return l("function"==typeof n.construct&&"function"==typeof n.mountComponent&&"function"==typeof n.receiveComponent&&"function"==typeof n.unmountComponent,"Only React Components can be mounted."),n.construct(e),n._mountIndex=0,n._mountImage=null,n._isOwnerNecessary=!1,n._warnedAboutRefsInRender=!1,Object.preventExtensions&&Object.preventExtensions(n),n}var s=e(43),i=e(65),o=e(80),c=e(29),u=e(150),l=e(171),p=function(){};c(p.prototype,s.Mixin,{_instantiateReactComponent:a}),t.exports=a},{150:150,171:171,29:29,43:43,65:65,80:80}],150:[function(e,t,n){"use strict";var r=function(e,t,n,r,a,s,i,o){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,s,i,o],l=0;c=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return u[l++]}))}throw c.framesToPop=1,c}};t.exports=r},{}],151:[function(e,t,n){"use strict";function r(e,t){if(!s.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r="function"==typeof i[n]}return!r&&a&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var a,s=e(22);s.canUseDOM&&(a=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},{22:22}],152:[function(e,t,n){function r(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=r},{}],153:[function(e,t,n){"use strict";function r(e){return e&&("INPUT"===e.nodeName&&a[e.type]||"TEXTAREA"===e.nodeName)}var a={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=r},{}],154:[function(e,t,n){function r(e){return a(e)&&3==e.nodeType}var a=e(152);t.exports=r},{152:152}],155:[function(e,t,n){"use strict";function r(e){e||(e="");var t,n=arguments.length;if(n>1)for(var r=1;n>r;r++)t=arguments[r],t&&(e=(e?e+" ":"")+t);return e}t.exports=r},{}],156:[function(e,t,n){"use strict";var r=e(150),a=function(e){var t,n={};r(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};t.exports=a},{150:150}],157:[function(e,t,n){var r=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=r},{}],158:[function(e,t,n){"use strict";function r(e,t,n){if(!e)return null;var r={};for(var s in e)a.call(e,s)&&(r[s]=t.call(n,e[s],s,e));return r}var a=Object.prototype.hasOwnProperty;t.exports=r},{}],159:[function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=r},{}],160:[function(e,t,n){"use strict";function r(e){return s(a.isValidElement(e),"onlyChild must be passed a children with exactly one child."),e}var a=e(63),s=e(150);t.exports=r},{150:150,63:63}],161:[function(e,t,n){"use strict";var r,a=e(22);a.canUseDOM&&(r=window.performance||window.msPerformance||window.webkitPerformance),t.exports=r||{}},{22:22}],162:[function(e,t,n){var r=e(161);r&&r.now||(r=Date);var a=r.now.bind(r);t.exports=a},{161:161}],163:[function(e,t,n){"use strict";function r(e){return'"'+a(e)+'"'}var a=e(131);t.exports=r},{131:131}],164:[function(e,t,n){"use strict";var r=e(22),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,i=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(i=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),r.canUseDOM){var o=document.createElement("div");o.innerHTML=" ",""===o.innerHTML&&(i=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),a.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML="\ufeff"+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=i},{22:22}],165:[function(e,t,n){"use strict";var r=e(22),a=e(131),s=e(164),i=function(e,t){e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(i=function(e,t){s(e,a(t))})),t.exports=i},{131:131,164:164,22:22}],166:[function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=r},{}],167:[function(e,t,n){"use strict";function r(e,t){if(null!=e&&null!=t){var n=typeof e,r=typeof t;if("string"===n||"number"===n)return"string"===r||"number"===r;if("object"===r&&e.type===t.type&&e.key===t.key){var s=e._owner===t._owner,i=null,o=null,c=null;return s||(null!=e._owner&&null!=e._owner.getPublicInstance()&&null!=e._owner.getPublicInstance().constructor&&(i=e._owner.getPublicInstance().constructor.displayName),null!=t._owner&&null!=t._owner.getPublicInstance()&&null!=t._owner.getPublicInstance().constructor&&(o=t._owner.getPublicInstance().constructor.displayName),null!=t.type&&null!=t.type.displayName&&(c=t.type.displayName),null!=t.type&&"string"==typeof t.type&&(c=t.type),("string"!=typeof t.type||"input"===t.type||"textarea"===t.type)&&(null!=e._owner&&e._owner._isOwnerNecessary===!1||null!=t._owner&&t._owner._isOwnerNecessary===!1)&&(null!=e._owner&&(e._owner._isOwnerNecessary=!0),null!=t._owner&&(t._owner._isOwnerNecessary=!0),a(!1,"<%s /> is being rendered by both %s and %s using the same key (%s) in the same place. Currently, this means that they don't preserve state. This behavior should be very rare so we're considering deprecating it. Please contact the React team and explain your use case so that we can take that into consideration.",c||"Unknown Component",i||"[Unknown]",o||"[Unknown]",e.key))),s}}return!1}var a=e(171);t.exports=r},{171:171}],168:[function(e,t,n){function r(e){var t=e.length;if(a(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e),"toArray: Array-like object expected"),a("number"==typeof t,"toArray: Object needs a length property"),a(0===t||t-1 in e,"toArray: Object should have keys for indices"),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var r=Array(t),s=0;t>s;s++)r[s]=e[s];return r}var a=e(150);t.exports=r},{150:150}],169:[function(e,t,n){"use strict";function r(e){return g[e]}function a(e,t){return e&&null!=e.key?i(e.key):t.toString(36)}function s(e){return(""+e).replace(y,r)}function i(e){return"$"+s(e)}function o(e,t,n,r,s){var c=typeof e;if(("undefined"===c||"boolean"===c)&&(e=null),null===e||"string"===c||"number"===c||u.isValidElement(e))return r(s,e,""===t?f+a(e,0):t,n),1;var p,g,y,E=0;if(Array.isArray(e))for(var C=0;C<e.length;C++)p=e[C],g=(""!==t?t+v:f)+a(p,C),y=n+E,E+=o(p,g,y,r,s);else{var S=m(e);if(S){var R,N=S.call(e);if(S!==e.entries)for(var w=0;!(R=N.next()).done;)p=R.value,g=(""!==t?t+v:f)+a(p,w++),y=n+E,E+=o(p,g,y,r,s);else for(h(b,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead."),b=!0;!(R=N.next()).done;){var _=R.value;_&&(p=_[1],g=(""!==t?t+v:f)+i(_[0])+v+a(p,0),y=n+E,E+=o(p,g,y,r,s))}}else if("object"===c){d(1!==e.nodeType,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components.");var x=l.extract(e);for(var k in x)x.hasOwnProperty(k)&&(p=x[k],g=(""!==t?t+v:f)+i(k)+v+a(p,0),y=n+E,E+=o(p,g,y,r,s))}}return E}function c(e,t,n){return null==e?0:o(e,"",0,t,n)}var u=e(63),l=e(69),p=e(72),m=e(141),d=e(150),h=e(171),f=p.SEPARATOR,v=":",g={"=":"=0",".":"=1",":":"=2"},y=/[=.:]/g,b=!1;t.exports=c},{141:141,150:150,171:171,63:63,69:69,72:72}],170:[function(e,t,n){"use strict";function r(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?i(new e.constructor,e):e}function a(e,t,n){c(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e);var r=t[n];c(Array.isArray(r),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",n,r)}function s(e,t){if(c("object"==typeof t,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",v.join(", "),d),u.call(t,d))return c(1===Object.keys(t).length,"Cannot have more than one key in an object with %s",d),t[d];var n=r(e);if(u.call(t,h)){var o=t[h];c(o&&"object"==typeof o,"update(): %s expects a spec of type 'object'; got %s",h,o),c(n&&"object"==typeof n,"update(): %s expects a target of type 'object'; got %s",h,n),i(n,t[h])}u.call(t,l)&&(a(e,t,l),t[l].forEach(function(e){n.push(e)})),u.call(t,p)&&(a(e,t,p),t[p].forEach(function(e){n.unshift(e)})),u.call(t,m)&&(c(Array.isArray(e),"Expected %s target to be an array; got %s",m,e),c(Array.isArray(t[m]),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",m,t[m]),t[m].forEach(function(e){c(Array.isArray(e),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",m,t[m]),n.splice.apply(n,e)})),u.call(t,f)&&(c("function"==typeof t[f],"update(): expected spec of %s to be a function; got %s.",f,t[f]),n=t[f](n));for(var y in t)g.hasOwnProperty(y)&&g[y]||(n[y]=s(e[y],t[y]));return n}var i=e(29),o=e(157),c=e(150),u={}.hasOwnProperty,l=o({$push:null}),p=o({$unshift:null}),m=o({$splice:null}),d=o({$set:null}),h=o({$merge:null}),f=o({$apply:null}),v=[l,p,m,d,h,f],g={};v.forEach(function(e){g[e]=!0}),t.exports=s},{150:150,157:157,29:29}],171:[function(e,t,n){"use strict";var r=e(129),a=r;a=function(e,t){for(var n=[],r=2,a=arguments.length;a>r;r++)n.push(arguments[r]);if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(0!==t.indexOf("Failed Composite propType: ")&&!e){var s=0,i="Warning: "+t.replace(/%s/g,function(){return n[s++]});console.warn(i);try{throw new Error(i)}catch(o){}}},t.exports=a},{129:129}]},{},[1])(1)}),function(e){function t(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(e[n]);return t}function n(e,t){if(je&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(We)){for(var n=[],a=t;a;a=a.source)a.stack&&n.unshift(a.stack);n.unshift(e.stack);var s=n.join("\n"+We+"\n");e.stack=r(s)}}function r(e){for(var t=e.split("\n"),n=[],r=0,i=t.length;i>r;r++){var o=t[r];a(o)||s(o)||!o||n.push(o)}return n.join("\n")}function a(e){var t=o(e);if(!t)return!1;var n=t[0],r=t[1];return n===qe&&r>=Be&&Wr>=r}function s(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function i(){if(je)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=o(n);if(!r)return;return qe=r[0],r[1]}}function o(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function c(e){var t=[];if(!Nt(e))return t;Rt.nonEnumArgs&&e.length&&wt(e)&&(e=kt.call(e));var n=Rt.enumPrototypes&&"function"==typeof e,r=Rt.enumErrorProps&&(e===yt||e instanceof Error);for(var a in e)n&&"prototype"==a||r&&("message"==a||"name"==a)||t.push(a);if(Rt.nonEnumShadows&&e!==bt){var s=e.constructor,i=-1,o=at;if(e===(s&&s.prototype))var c=e===Et?ht:e===yt?ut:ft.call(e),u=St[c];for(;++i<o;)a=rt[i],u&&u[a]||!vt.call(e,a)||t.push(a)}return t}function u(e,t,n){for(var r=-1,a=n(e),s=a.length;++r<s;){var i=a[r];if(t(e[i],i,e)===!1)break}return e}function l(e,t){return u(e,t,c)}function p(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function m(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;var a=typeof e,s=typeof t;if(e===e&&(null==e||null==t||"function"!=a&&"object"!=a&&"function"!=s&&"object"!=s))return!1;var i=ft.call(e),o=ft.call(t);if(i==st&&(i=mt),o==st&&(o=mt),i!=o)return!1;switch(i){case ot:case ct:return+e==+t;case pt:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case dt:case ht:return e==String(t)}var c=i==it;if(!c){if(i!=mt||!Rt.nodeClass&&(p(e)||p(t)))return!1;var u=!Rt.argsObject&&wt(e)?Object:e.constructor,d=!Rt.argsObject&&wt(t)?Object:t.constructor;if(!(u==d||vt.call(e,"constructor")&&vt.call(t,"constructor")||Ue(u)&&u instanceof u&&Ue(d)&&d instanceof d||!("constructor"in e&&"constructor"in t)))return!1}n||(n=[]),r||(r=[]);for(var h=n.length;h--;)if(n[h]==e)return r[h]==t;var f=0,v=!0;if(n.push(e),r.push(t),c){if(h=e.length,f=t.length,v=f==h)for(;f--;){var g=t[f];if(!(v=m(e[f],g,n,r)))break}}else l(t,function(t,a,s){return vt.call(s,a)?(f++,v=vt.call(e,a)&&m(e[a],t,n,r)):void 0}),v&&l(e,function(e,t,n){return vt.call(n,t)?v=--f>-1:void 0});return n.pop(),r.pop(),v}function d(e,t){for(var n=new Array(e),r=0;e>r;r++)n[r]=t();return n}function h(){try{return _t.apply(this,arguments)}catch(e){return Tt.e=e,Tt}}function f(e){if(!Ue(e))throw new TypeError("fn must be a function");return _t=e,h}function v(e){throw e}function g(e,t){this.id=e,this.value=t}function y(e,t){this.scheduler=e,this.disposable=t,this.isDisposed=!1}function b(e,t){t.isDisposed||(t.isDisposed=!0,t.disposable.dispose())}function E(e){this._s=e}function C(e){this._s=e,this._l=e.length,this._i=0}function S(e){this._a=e}function R(e){this._a=e,this._l=x(e),this._i=0}function N(e){return"number"==typeof e&&ke.isFinite(e)}function w(t){var n,r=t[Ye];if(!r&&"string"==typeof t)return n=new E(t),n[Ye]();if(!r&&t.length!==e)return n=new S(t),n[Ye]();if(!r)throw new TypeError("Object is not iterable");return t[Ye]()}function _(e){var t=+e;return 0===t?t:isNaN(t)?t:0>t?-1:1}function x(e){var t=+e.length;return isNaN(t)?0:0!==t&&N(t)?(t=_(t)*Math.floor(Math.abs(t)),0>=t?0:t>Ln?Ln:t):t}function k(e,t){this.observer=e,this.parent=t}function D(e,t){return Kt(e)||(e=Zt),new Un(t,e)}function I(e,t){this.observer=e,this.parent=t}function M(e,t){this.observer=e,this.parent=t}function T(e,t){return new Fr(function(n){var r=new Bt,a=new Wt;return a.setDisposable(r),r.setDisposable(e.subscribe(function(e){n.onNext(e)},function(e){try{var r=t(e)}catch(s){return n.onError(s)}Le(r)&&(r=Dn(r));var i=new Bt;a.setDisposable(i),i.setDisposable(r.subscribe(n))},function(e){n.onCompleted(e)})),a},e)}function A(){return!1}function P(e,t){var n=this;return new Fr(function(r){var a=0,s=e.length;return n.subscribe(function(n){if(s>a){var i=e[a++],o=f(t)(n,i);if(o===Tt)return r.onError(o.e);r.onNext(o)}else r.onCompleted()},function(e){r.onError(e)},function(){r.onCompleted()})},n)}function A(){return!1}function O(){return[]}function A(){return!1}function L(){return[]}function F(e,t,n){this.o=e,this.keyFn=t,this.comparer=n,this.hasCurrentKey=!1,this.currentKey=null,this.isStopped=!1}function U(e,t){this.o=e,this.accumulator=t.accumulator,this.hasSeed=t.hasSeed,this.seed=t.seed,this.hasAccumulation=!1,this.accumulation=null,this.hasValue=!1,this.isStopped=!1}function j(e,t,n){var r=nt(t,n,3);return e.map(function(t,n){var a=r(t,n,e);return Le(a)&&(a=Dn(a)),(et(a)||Ze(a))&&(a=Fn(a)),a}).concatAll()}function $(e,t,n){for(var r=0,a=e.length;a>r;r++)if(n(e[r],t))return r;return-1}function q(e){this.comparer=e,this.set=[]}function B(e,t,n){return new Fr(function(r){var a=!1,s=null,i=[];return e.subscribe(function(e){var o,c;try{c=t(e)}catch(u){return void r.onError(u)}if(o=0,a)try{o=n(c,s)}catch(l){return void r.onError(l)}else a=!0,s=c;o>0&&(s=c,i=[]),o>=0&&i.push(e)},function(e){r.onError(e)},function(){r.onNext(i),r.onCompleted()})},e)}function W(e){if(0===e.length)throw new He;return e[0]}function H(t,n,r,a){var s=nt(n,r,3);return new Fr(function(n){var r=0;return t.subscribe(function(e){var i;try{i=s(e,r,t)}catch(o){return void n.onError(o)}i?(n.onNext(a?r:e),n.onCompleted()):r++},function(e){n.onError(e)},function(){n.onNext(a?-1:e),n.onCompleted()})},t)}function V(e,t){return Array.isArray(e)?z.call(t,e):Q(e)?gr(e.call(t)):Y(e)?gr(e):X(e)?J(e):Le(e)?K(e):typeof e===fr?e:Nt(e)||Array.isArray(e)?z.call(t,e):e}function z(e){var t=this;return function(n){function r(e,r){if(!a)try{if(e=V(e,t),typeof e!==fr)return o[r]=e,--i||n(null,o);e.call(t,function(e,t){if(!a){if(e)return a=!0,n(e);o[r]=t,--i||n(null,o)}})}catch(s){a=!0,n(s)}}var a,s=Object.keys(e),i=s.length,o=new e.constructor;if(!i)return void rn.schedule(function(){n(null,o)});for(var c=0,u=s.length;u>c;c++)r(e[s[c]],s[c])}}function J(e){return function(t){var n,r=!1;e.subscribe(function(e){n=e,r=!0},t,function(){r&&t(null,n)})}}function K(e){return function(t){e.then(function(e){t(null,e)},t)}}function X(e){return e&&typeof e.subscribe===fr}function Q(e){return e&&e.constructor&&"GeneratorFunction"===e.constructor.name}function Y(e){return e&&typeof e.next===fr&&typeof e[vr]===fr}function G(e){e&&rn.schedule(function(){throw e})}function Z(e,t,n,r){var a=new qr;return r.push(ee(a,t,n)),e.apply(t,r),a.asObservable()}function ee(e,t,n){return function(){for(var r=arguments.length,a=new Array(r),s=0;r>s;s++)a[s]=arguments[s];if(Ue(n)){if(a=f(n).apply(t,a),a===Tt)return e.onError(a.e);e.onNext(a)}else a.length<=1?e.onNext(a[0]):e.onNext(a);e.onCompleted()}}function te(e,t,n,r){var a=new qr;return r.push(ne(a,t,n)),e.apply(t,r),a.asObservable()}function ne(e,t,n){return function(){var r=arguments[0];if(r)return e.onError(r);for(var a=arguments.length,s=[],i=1;a>i;i++)s[i-1]=arguments[i];if(Ue(n)){var s=f(n).apply(t,s);if(s===Tt)return e.onError(s.e);e.onNext(s)}else s.length<=1?e.onNext(s[0]):e.onNext(s);e.onCompleted()}}function re(e,t,n){this._e=e,this._n=t,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function ae(e,t,n){var r=new Ot,a=Object.prototype.toString;if("[object NodeList]"===a.call(e)||"[object HTMLCollection]"===a.call(e))for(var s=0,i=e.length;i>s;s++)r.add(ae(e.item(s),t,n));else e&&r.add(new re(e,t,n));return r}function se(e,t,n){return new Fr(function(r){function a(e,t){if(u[t]=e,i[t]=!0,o||(o=i.every(Me))){if(s)return r.onError(s);var a=f(n).apply(null,u);if(a===Tt)return r.onError(a.e);r.onNext(a)}c&&u[1]&&r.onCompleted()}var s,i=[!1,!1],o=!1,c=!1,u=new Array(2);return new Ot(e.subscribe(function(e){a(e,0)},function(e){u[1]?r.onError(e):s=e},function(){c=!0,u[1]&&r.onCompleted()}),t.subscribe(function(e){a(e,1)},function(e){r.onError(e)},function(){c=!0,a(!0,1)}))},e)}function ie(e,t){return e.groupJoin(this,t,An,function(e,t){return t})}function oe(e){var t=this;return new Fr(function(n){var r=new $r,a=new Ot,s=new Ht(a);return n.onNext(Mt(r,s)),a.add(t.subscribe(function(e){r.onNext(e)},function(e){r.onError(e),n.onError(e)},function(){r.onCompleted(),n.onCompleted()})),Le(e)&&(e=Dn(e)),a.add(e.subscribe(function(e){r.onCompleted(),r=new $r,n.onNext(Mt(r,s))},function(e){r.onError(e),n.onError(e)},function(){r.onCompleted(),n.onCompleted()})),s},t)}function ce(e){var t=this;return new Fr(function(n){function r(){var t;try{t=e()}catch(s){return void n.onError(s)}Le(t)&&(t=Dn(t));var c=new Bt;a.setDisposable(c),c.setDisposable(t.take(1).subscribe(Ie,function(e){o.onError(e),n.onError(e)},function(){o.onCompleted(),o=new $r,n.onNext(Mt(o,i)),r()}))}var a=new Wt,s=new Ot(a),i=new Ht(s),o=new $r;return n.onNext(Mt(o,i)),s.add(t.subscribe(function(e){o.onNext(e)},function(e){o.onError(e),n.onError(e)},function(){o.onCompleted(),n.onCompleted()})),r(),i},t)}function ue(e,t){return new Mr(e,t)}function le(e){this.patterns=e}function pe(e,t){this.expression=e,this.selector=t}function me(e,t,n){var r=e.get(t);if(!r){var a=new Or(t,n);return e.set(t,a),a}return r}function de(e,t,n){this.joinObserverArray=e,this.onNext=t,this.onCompleted=n,this.joinObservers=new Pr;for(var r=0,a=this.joinObserverArray.length;a>r;r++){var s=this.joinObserverArray[r];this.joinObservers.set(s,s)}}function he(e,t){return new Fr(function(n){return t.scheduleWithAbsolute(e,function(){n.onNext(0),n.onCompleted()})})}function fe(e,t,n){return new Fr(function(r){var a=e,s=Jt(t);return n.scheduleRecursiveWithAbsoluteAndState(0,a,function(e,t){if(s>0){var i=n.now();a+=s,i>=a&&(a=i+s)}r.onNext(e),t(e+1,a)})})}function ve(e,t){return new Fr(function(n){return t.scheduleWithRelative(Jt(e),function(){n.onNext(0),n.onCompleted()})})}function ge(e,t,n){return e===t?new Fr(function(e){return n.schedulePeriodicWithState(0,t,function(t){return e.onNext(t),t+1})}):Mn(function(){return fe(n.now()+e,t,n)})}function ye(e,t,n){return new Fr(function(r){var a,s=!1,i=new Wt,o=null,c=[],u=!1;return a=e.materialize().timestamp(n).subscribe(function(e){var a,l;"E"===e.value.kind?(c=[],c.push(e),o=e.value.exception,l=!u):(c.push({value:e.value,timestamp:e.timestamp+t}),l=!s,s=!0),l&&(null!==o?r.onError(o):(a=new Bt,i.setDisposable(a),a.setDisposable(n.scheduleRecursiveWithRelative(t,function(e){var t,a,i,l;if(null===o){u=!0;do i=null,c.length>0&&c[0].timestamp-n.now()<=0&&(i=c.shift().value),null!==i&&i.accept(r);while(null!==i);l=!1,a=0,c.length>0?(l=!0,a=Math.max(0,c[0].timestamp-n.now())):s=!1,t=o,u=!1,null!==t?r.onError(t):l&&e(a)}}))))}),new Ot(a,i)},e)}function be(e,t,n){return Mn(function(){return ye(e,t-n.now(),n)})}function Ee(e,t){return new Fr(function(n){function r(){i&&(i=!1,n.onNext(a)),s&&n.onCompleted()}var a,s=!1,i=!1,o=new Bt;return o.setDisposable(e.subscribe(function(e){i=!0,a=e},function(e){n.onError(e)},function(){s=!0,o.dispose()})),new Ot(o,t.subscribe(r,function(e){n.onError(e)},r))},e)}var Ce={"function":!0,object:!0},Se=Ce[typeof exports]&&exports&&!exports.nodeType&&exports,Re=Ce[typeof self]&&self.Object&&self,Ne=Ce[typeof window]&&window&&window.Object&&window,we=Ce[typeof module]&&module&&!module.nodeType&&module,_e=we&&we.exports===Se&&Se,xe=Se&&we&&"object"==typeof global&&global&&global.Object&&global,ke=ke=xe||Ne!==(this&&this.window)&&Ne||Re||this,De={internals:{},config:{Promise:ke.Promise},helpers:{}},Ie=De.helpers.noop=function(){},Me=(De.helpers.notDefined=function(e){return"undefined"==typeof e},De.helpers.identity=function(e){return e}),Te=(De.helpers.pluck=function(e){return function(t){return t[e]}},De.helpers.just=function(e){return function(){return e}},De.helpers.defaultNow=Date.now),Ae=De.helpers.defaultComparer=function(e,t){return xt(e,t)},Pe=De.helpers.defaultSubComparer=function(e,t){return e>t?1:t>e?-1:0},Oe=(De.helpers.defaultKeySerializer=function(e){return e.toString()},De.helpers.defaultError=function(e){throw e}),Le=De.helpers.isPromise=function(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then},Fe=(De.helpers.asArray=function(){return Array.prototype.slice.call(arguments)},De.helpers.not=function(e){return!e}),Ue=De.helpers.isFunction=function(){var e=function(e){return"function"==typeof e||!1};return e(/x/)&&(e=function(e){return"function"==typeof e&&"[object Function]"==ft.call(e)}),e}();De.config.longStackSupport=!1;var je=!1;try{throw new Error}catch($e){je=!!$e.stack}var qe,Be=i(),We="From previous event:",He=De.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};He.prototype=Error.prototype;var Ve=De.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};Ve.prototype=Error.prototype;var ze=De.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};ze.prototype=Error.prototype;var Je=De.NotSupportedError=function(e){this.message=e||"This operation is not supported",Error.call(this)};Je.prototype=Error.prototype;var Ke=De.NotImplementedError=function(e){this.message=e||"This operation is not implemented",
Error.call(this)};Ke.prototype=Error.prototype;var Xe=De.helpers.notImplemented=function(){throw new Ke},Qe=De.helpers.notSupported=function(){throw new Je},Ye="function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_";ke.Set&&"function"==typeof(new ke.Set)["@@iterator"]&&(Ye="@@iterator");var Ge=De.doneEnumerator={done:!0,value:e},Ze=De.helpers.isIterable=function(t){return t[Ye]!==e},et=De.helpers.isArrayLike=function(t){return t&&t.length!==e};De.helpers.iterator=Ye;var tt,nt=De.internals.bindCallback=function(e,t,n){if("undefined"==typeof t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}},rt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],at=rt.length,st="[object Arguments]",it="[object Array]",ot="[object Boolean]",ct="[object Date]",ut="[object Error]",lt="[object Function]",pt="[object Number]",mt="[object Object]",dt="[object RegExp]",ht="[object String]",ft=Object.prototype.toString,vt=Object.prototype.hasOwnProperty,gt=ft.call(arguments)==st,yt=Error.prototype,bt=Object.prototype,Et=String.prototype,Ct=bt.propertyIsEnumerable;try{tt=!(ft.call(document)==mt&&!({toString:0}+""))}catch($e){tt=!0}var St={};St[it]=St[ct]=St[pt]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},St[ot]=St[ht]={constructor:!0,toString:!0,valueOf:!0},St[ut]=St[lt]=St[dt]={constructor:!0,toString:!0},St[mt]={constructor:!0};var Rt={};!function(){var e=function(){this.x=1},t=[];e.prototype={valueOf:1,y:1};for(var n in new e)t.push(n);for(n in arguments);Rt.enumErrorProps=Ct.call(yt,"message")||Ct.call(yt,"name"),Rt.enumPrototypes=Ct.call(e,"prototype"),Rt.nonEnumArgs=0!=n,Rt.nonEnumShadows=!/valueOf/.test(t)}(1);var Nt=De.internals.isObject=function(e){var t=typeof e;return e&&("function"==t||"object"==t)||!1},wt=function(e){return e&&"object"==typeof e?ft.call(e)==st:!1};gt||(wt=function(e){return e&&"object"==typeof e?vt.call(e,"callee"):!1});var _t,xt=De.internals.isEqual=function(e,t){return m(e,t,[],[])},kt=({}.hasOwnProperty,Array.prototype.slice),Dt=this.inherits=De.internals.inherits=function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},It=De.internals.addProperties=function(e){for(var t=[],n=1,r=arguments.length;r>n;n++)t.push(arguments[n]);for(var a=0,s=t.length;s>a;a++){var i=t[a];for(var o in i)e[o]=i[o]}},Mt=De.internals.addRef=function(e,t){return new Fr(function(n){return new Ot(t.getDisposable(),e.subscribe(n))})},Tt={e:{}};g.prototype.compareTo=function(e){var t=this.value.compareTo(e.value);return 0===t&&(t=this.id-e.id),t};var At=De.internals.PriorityQueue=function(e){this.items=new Array(e),this.length=0},Pt=At.prototype;Pt.isHigherPriority=function(e,t){return this.items[e].compareTo(this.items[t])<0},Pt.percolate=function(e){if(!(e>=this.length||0>e)){var t=e-1>>1;if(!(0>t||t===e)&&this.isHigherPriority(e,t)){var n=this.items[e];this.items[e]=this.items[t],this.items[t]=n,this.percolate(t)}}},Pt.heapify=function(e){if(+e||(e=0),!(e>=this.length||0>e)){var t=2*e+1,n=2*e+2,r=e;if(t<this.length&&this.isHigherPriority(t,r)&&(r=t),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==e){var a=this.items[e];this.items[e]=this.items[r],this.items[r]=a,this.heapify(r)}}},Pt.peek=function(){return this.items[0].value},Pt.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=e,this.heapify()},Pt.dequeue=function(){var e=this.peek();return this.removeAt(0),e},Pt.enqueue=function(e){var t=this.length++;this.items[t]=new g(At.count++,e),this.percolate(t)},Pt.remove=function(e){for(var t=0;t<this.length;t++)if(this.items[t].value===e)return this.removeAt(t),!0;return!1},At.count=0;var Ot=De.CompositeDisposable=function(){var e,t,n=[];if(Array.isArray(arguments[0]))n=arguments[0],t=n.length;else for(t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];for(e=0;t>e;e++)if(!$t(n[e]))throw new TypeError("Not a disposable");this.disposables=n,this.isDisposed=!1,this.length=n.length},Lt=Ot.prototype;Lt.add=function(e){this.isDisposed?e.dispose():(this.disposables.push(e),this.length++)},Lt.remove=function(e){var t=!1;if(!this.isDisposed){var n=this.disposables.indexOf(e);-1!==n&&(t=!0,this.disposables.splice(n,1),this.length--,e.dispose())}return t},Lt.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),n=0;e>n;n++)t[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;e>n;n++)t[n].dispose()}};var Ft=De.Disposable=function(e){this.isDisposed=!1,this.action=e||Ie};Ft.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Ut=Ft.create=function(e){return new Ft(e)},jt=Ft.empty={dispose:Ie},$t=Ft.isDisposable=function(e){return e&&Ue(e.dispose)},qt=Ft.checkDisposed=function(e){if(e.isDisposed)throw new Ve},Bt=De.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};Bt.prototype.getDisposable=function(){return this.current},Bt.prototype.setDisposable=function(e){if(this.current)throw new Error("Disposable has already been assigned");var t=this.isDisposed;!t&&(this.current=e),t&&e&&e.dispose()},Bt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null}e&&e.dispose()};var Wt=De.SerialDisposable=function(){this.isDisposed=!1,this.current=null};Wt.prototype.getDisposable=function(){return this.current},Wt.prototype.setDisposable=function(e){var t=this.isDisposed;if(!t){var n=this.current;this.current=e}n&&n.dispose(),t&&e&&e.dispose()},Wt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null}e&&e.dispose()};var Ht=De.RefCountDisposable=function(){function e(e){this.disposable=e,this.disposable.count++,this.isInnerDisposed=!1}function t(e){this.underlyingDisposable=e,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return e.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},t.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},t.prototype.getDisposable=function(){return this.isDisposed?jt:new e(this)},t}();y.prototype.dispose=function(){this.scheduler.scheduleWithState(this,b)};var Vt=De.internals.ScheduledItem=function(e,t,n,r,a){this.scheduler=e,this.state=t,this.action=n,this.dueTime=r,this.comparer=a||Pe,this.disposable=new Bt};Vt.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},Vt.prototype.compareTo=function(e){return this.comparer(this.dueTime,e.dueTime)},Vt.prototype.isCancelled=function(){return this.disposable.isDisposed},Vt.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var zt=De.Scheduler=function(){function e(e,t,n,r){this.now=e,this._schedule=t,this._scheduleRelative=n,this._scheduleAbsolute=r}function t(e,t){return t(),jt}e.isScheduler=function(t){return t instanceof e};var n=e.prototype;return n.schedule=function(e){return this._schedule(e,t)},n.scheduleWithState=function(e,t){return this._schedule(e,t)},n.scheduleWithRelative=function(e,n){return this._scheduleRelative(n,e,t)},n.scheduleWithRelativeAndState=function(e,t,n){return this._scheduleRelative(e,t,n)},n.scheduleWithAbsolute=function(e,n){return this._scheduleAbsolute(n,e,t)},n.scheduleWithAbsoluteAndState=function(e,t,n){return this._scheduleAbsolute(e,t,n)},e.now=Te,e.normalize=function(e){return 0>e&&(e=0),e},e}(),Jt=zt.normalize,Kt=zt.isScheduler;!function(e){function t(e,t){function n(t){function r(e,t){return i?s.remove(c):o=!0,a(t,n),jt}var i=!1,o=!1,c=e.scheduleWithState(t,r);o||(s.add(c),i=!0)}var r=t[0],a=t[1],s=new Ot;return a(r,n),s}function n(e,t,n){function r(t,a){function o(e,t){return c?i.remove(l):u=!0,s(t,r),jt}var c=!1,u=!1,l=e[n](t,a,o);u||(i.add(l),c=!0)}var a=t[0],s=t[1],i=new Ot;return s(a,r),i}function r(e,t){return n(e,t,"scheduleWithRelativeAndState")}function a(e,t){return n(e,t,"scheduleWithAbsoluteAndState")}function s(e,t){e(function(n){t(e,n)})}e.scheduleRecursive=function(e){return this.scheduleRecursiveWithState(e,s)},e.scheduleRecursiveWithState=function(e,n){return this.scheduleWithState([e,n],t)},e.scheduleRecursiveWithRelative=function(e,t){return this.scheduleRecursiveWithRelativeAndState(t,e,s)},e.scheduleRecursiveWithRelativeAndState=function(e,t,n){return this._scheduleRelative([e,n],t,r)},e.scheduleRecursiveWithAbsolute=function(e,t){return this.scheduleRecursiveWithAbsoluteAndState(t,e,s)},e.scheduleRecursiveWithAbsoluteAndState=function(e,t,n){return this._scheduleAbsolute([e,n],t,a)}}(zt.prototype),function(e){zt.prototype.schedulePeriodic=function(e,t){return this.schedulePeriodicWithState(null,e,t)},zt.prototype.schedulePeriodicWithState=function(e,t,n){if("undefined"==typeof ke.setInterval)throw new Je;t=Jt(t);var r=e,a=ke.setInterval(function(){r=n(r)},t);return Ut(function(){ke.clearInterval(a)})}}(zt.prototype),function(e){e.catchError=e["catch"]=function(e){return new an(this,e)}}(zt.prototype);var Xt,Qt,Yt=De.internals.SchedulePeriodicRecursive=function(){function e(e,t){t(0,this._period);try{this._state=this._action(this._state)}catch(n){throw this._cancel.dispose(),n}}function t(e,t,n,r){this._scheduler=e,this._state=t,this._period=n,this._action=r}return t.prototype.start=function(){var t=new Bt;return this._cancel=t,t.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,e.bind(this))),t},t}(),Gt=zt.immediate=function(){function e(e,t){return t(this,e)}return new zt(Te,e,Qe,Qe)}(),Zt=zt.currentThread=function(){function e(){for(;n.length>0;){var e=n.shift();!e.isCancelled()&&e.invoke()}}function t(t,r){var a=new Vt(this,t,r,this.now());if(n)n.push(a);else{n=[a];var s=f(e)();if(n=null,s===Tt)return v(s.e)}return a.disposable}var n,r=new zt(Te,t,Qe,Qe);return r.scheduleRequired=function(){return!n},r}(),en=function(){var e,t=Ie;if(ke.setTimeout)e=ke.setTimeout,t=ke.clearTimeout;else{if(!ke.WScript)throw new Je;e=function(e,t){ke.WScript.Sleep(t),e()}}return{setTimeout:e,clearTimeout:t}}(),tn=en.setTimeout,nn=en.clearTimeout;!function(){function e(t){if(s)tn(function(){e(t)},0);else{var n=a[t];if(n){s=!0;var r=f(n)();if(Qt(t),s=!1,r===Tt)return v(r.e)}}}function t(){if(!ke.postMessage||ke.importScripts)return!1;var e=!1,t=ke.onmessage;return ke.onmessage=function(){e=!0},ke.postMessage("","*"),ke.onmessage=t,e}function n(t){"string"==typeof t.data&&t.data.substring(0,c.length)===c&&e(t.data.substring(c.length))}var r=1,a={},s=!1;Qt=function(e){delete a[e]};var i=RegExp("^"+String(ft).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),o="function"==typeof(o=xe&&_e&&xe.setImmediate)&&!i.test(o)&&o;if(Ue(o))Xt=function(t){var n=r++;return a[n]=t,o(function(){e(n)}),n};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))Xt=function(t){var n=r++;return a[n]=t,process.nextTick(function(){e(n)}),n};else if(t()){var c="ms.rx.schedule"+Math.random();ke.addEventListener?ke.addEventListener("message",n,!1):ke.attachEvent?ke.attachEvent("onmessage",n):ke.onmessage=n,Xt=function(e){var t=r++;return a[t]=e,ke.postMessage(c+currentId,"*"),t}}else if(ke.MessageChannel){var u=new ke.MessageChannel;u.port1.onmessage=function(t){e(t.data)},Xt=function(e){var t=r++;return a[t]=e,u.port2.postMessage(t),t}}else Xt="document"in ke&&"onreadystatechange"in ke.document.createElement("script")?function(t){var n=ke.document.createElement("script"),s=r++;return a[s]=t,n.onreadystatechange=function(){e(s),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},ke.document.documentElement.appendChild(n),s}:function(t){var n=r++;return a[n]=t,tn(function(){e(n)},0),n}}();var rn=zt.timeout=zt["default"]=function(){function e(e,t){var n=this,r=new Bt,a=Xt(function(){!r.isDisposed&&r.setDisposable(t(n,e))});return new Ot(r,Ut(function(){Qt(a)}))}function t(e,t,n){var r=this,a=zt.normalize(t),s=new Bt;if(0===a)return r.scheduleWithState(e,n);var i=tn(function(){!s.isDisposed&&s.setDisposable(n(r,e))},a);return new Ot(s,Ut(function(){nn(i)}))}function n(e,t,n){return this.scheduleWithRelativeAndState(e,t-this.now(),n)}return new zt(Te,e,t,n)}(),an=function(e){function t(e,t){return this._scheduler.scheduleWithState(e,this._wrap(t))}function n(e,t,n){return this._scheduler.scheduleWithRelativeAndState(e,t,this._wrap(n))}function r(e,t,n){return this._scheduler.scheduleWithAbsoluteAndState(e,t,this._wrap(n))}function a(a,s){this._scheduler=a,this._handler=s,this._recursiveOriginal=null,this._recursiveWrapper=null,e.call(this,this._scheduler.now.bind(this._scheduler),t,n,r)}return Dt(a,e),a.prototype._clone=function(e){return new a(e,this._handler)},a.prototype._wrap=function(e){var t=this;return function(n,r){try{return e(t._getRecursiveWrapper(n),r)}catch(a){if(!t._handler(a))throw a;return jt}}},a.prototype._getRecursiveWrapper=function(e){if(this._recursiveOriginal!==e){this._recursiveOriginal=e;var t=this._clone(e);t._recursiveOriginal=e,t._recursiveWrapper=t,this._recursiveWrapper=t}return this._recursiveWrapper},a.prototype.schedulePeriodicWithState=function(e,t,n){var r=this,a=!1,s=new Bt;return s.setDisposable(this._scheduler.schedulePeriodicWithState(e,t,function(e){if(a)return null;try{return n(e)}catch(t){if(a=!0,!r._handler(t))throw t;return s.dispose(),null}})),s},a}(zt),sn=De.Notification=function(){function e(e,t,n,r,a,s){this.kind=e,this.value=t,this.exception=n,this._accept=r,this._acceptObservable=a,this.toString=s}return e.prototype.accept=function(e,t,n){return e&&"object"==typeof e?this._acceptObservable(e):this._accept(e,t,n)},e.prototype.toObservable=function(e){var t=this;return Kt(e)||(e=Gt),new Fr(function(n){return e.scheduleWithState(t,function(e,t){t._acceptObservable(n),"N"===t.kind&&n.onCompleted()})})},e}(),on=sn.createOnNext=function(){function e(e){return e(this.value)}function t(e){return e.onNext(this.value)}function n(){return"OnNext("+this.value+")"}return function(r){return new sn("N",r,null,e,t,n)}}(),cn=sn.createOnError=function(){function e(e,t){return t(this.exception)}function t(e){return e.onError(this.exception)}function n(){return"OnError("+this.exception+")"}return function(r){return new sn("E",null,r,e,t,n)}}(),un=sn.createOnCompleted=function(){function e(e,t,n){return n()}function t(e){return e.onCompleted()}function n(){return"OnCompleted()"}return function(){return new sn("C",null,null,e,t,n)}}(),ln=De.Observer=function(){};ln.prototype.toNotifier=function(){var e=this;return function(t){return t.accept(e)}},ln.prototype.asObserver=function(){var e=this;return new hn(function(t){e.onNext(t)},function(t){e.onError(t)},function(){e.onCompleted()})},ln.prototype.checked=function(){return new fn(this)};var pn=ln.create=function(e,t,n){return e||(e=Ie),t||(t=Oe),n||(n=Ie),new hn(e,t,n)};ln.fromNotifier=function(e,t){var n=nt(e,t,1);return new hn(function(e){return n(on(e))},function(e){return n(cn(e))},function(){return n(un())})},ln.prototype.notifyOn=function(e){return new gn(e,this)},ln.prototype.makeSafe=function(e){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,e)};var mn,dn=De.internals.AbstractObserver=function(e){function t(){this.isStopped=!1,e.call(this)}return Dt(t,e),t.prototype.next=Xe,t.prototype.error=Xe,t.prototype.completed=Xe,t.prototype.onNext=function(e){this.isStopped||this.next(e)},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.error(e))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.error(e),!0)},t}(ln),hn=De.AnonymousObserver=function(e){function t(t,n,r){e.call(this),this._onNext=t,this._onError=n,this._onCompleted=r}return Dt(t,e),t.prototype.next=function(e){this._onNext(e)},t.prototype.error=function(e){this._onError(e)},t.prototype.completed=function(){this._onCompleted()},t}(dn),fn=function(e){function t(t){e.call(this),this._observer=t,this._state=0}Dt(t,e);var n=t.prototype;return n.onNext=function(e){this.checkAccess();var t=f(this._observer.onNext).call(this._observer,e);this._state=0,t===Tt&&v(t.e)},n.onError=function(e){this.checkAccess();var t=f(this._observer.onError).call(this._observer,e);this._state=2,t===Tt&&v(t.e)},n.onCompleted=function(){this.checkAccess();var e=f(this._observer.onCompleted).call(this._observer);this._state=2,e===Tt&&v(e.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},t}(ln),vn=De.internals.ScheduledObserver=function(e){function t(t,n){e.call(this),this.scheduler=t,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new Wt}return Dt(t,e),t.prototype.next=function(e){var t=this;this.queue.push(function(){t.observer.onNext(e)})},t.prototype.error=function(e){var t=this;this.queue.push(function(){t.observer.onError(e)})},t.prototype.completed=function(){var e=this;this.queue.push(function(){e.observer.onCompleted()})},t.prototype.ensureActive=function(){var e=!1;!this.hasFaulted&&this.queue.length>0&&(e=!this.isAcquired,this.isAcquired=!0),e&&this.disposable.setDisposable(this.scheduler.scheduleRecursiveWithState(this,function(e,t){var n;if(!(e.queue.length>0))return void(e.isAcquired=!1);n=e.queue.shift();var r=f(n)();return r===Tt?(e.queue=[],e.hasFaulted=!0,v(r.e)):void t(e)}))},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.disposable.dispose()},t}(dn),gn=function(e){function t(t,n,r){e.call(this,t,n),this._cancel=r}return Dt(t,e),t.prototype.next=function(t){e.prototype.next.call(this,t),this.ensureActive()},t.prototype.error=function(t){e.prototype.error.call(this,t),this.ensureActive()},t.prototype.completed=function(){e.prototype.completed.call(this),this.ensureActive()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},t}(vn),yn=De.Observable=function(){function e(e,t){return function(r){var a=r.onError;return r.onError=function(t){n(t,e),a.call(r,t)},t.call(e,r)}}function t(t){if(De.config.longStackSupport&&je){var n=f(v)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=e(this,t)}else this._subscribe=t}return mn=t.prototype,mn.isObservable=function(e){return e&&Ue(e.subscribe)},mn.subscribe=mn.forEach=function(e,t,n){return this._subscribe("object"==typeof e?e:pn(e,t,n))},mn.subscribeOnNext=function(e,t){return this._subscribe(pn("undefined"!=typeof t?function(n){e.call(t,n)}:e))},mn.subscribeOnError=function(e,t){return this._subscribe(pn(null,"undefined"!=typeof t?function(n){e.call(t,n)}:e))},mn.subscribeOnCompleted=function(e,t){return this._subscribe(pn(null,null,"undefined"!=typeof t?function(){e.call(t)}:e))},t}(),bn=De.ObservableBase=function(e){function t(e){return e&&Ue(e.dispose)?e:Ue(e)?Ut(e):jt}function n(e,n){var r=n[0],a=n[1],s=f(a.subscribeCore).call(a,r);return s!==Tt||r.fail(Tt.e)?void r.setDisposable(t(s)):v(Tt.e)}function r(e){var t=new Ur(e),r=[t,this];return Zt.scheduleRequired()?Zt.scheduleWithState(r,n):n(null,r),t}function a(){e.call(this,r)}return Dt(a,e),a.prototype.subscribeCore=Xe,a}(yn),En=function(e){function t(t,n,r,a){this.resultSelector=De.helpers.isFunction(r)?r:null,this.selector=De.internals.bindCallback(De.helpers.isFunction(n)?n:function(){return n},a,3),this.source=t,e.call(this)}function n(e,t,n,r){this.i=0,this.selector=t,this.resultSelector=n,this.source=r,this.isStopped=!1,this.o=e}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this.selector,this.resultSelector,this))},n.prototype._wrapResult=function(e,t,n){return this.resultSelector?e.map(function(e,r){return this.resultSelector(t,e,n,r)},this):e},n.prototype.onNext=function(e){if(!this.isStopped){var t=this.i++,n=f(this.selector)(e,t,this.source);if(n===Tt)return this.o.onError(n.e);De.helpers.isPromise(n)&&(n=De.Observable.fromPromise(n)),(De.helpers.isArrayLike(n)||De.helpers.isIterable(n))&&(n=De.Observable.from(n)),this.o.onNext(this._wrapResult(n,e,t))}},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},t}(bn),Cn=De.internals.Enumerable=function(){},Sn=function(e){function t(t){this.sources=t,e.call(this)}function n(e,t,n){this.o=e,this.s=t,this.e=n,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){var t,r=new Wt,a=Gt.scheduleRecursiveWithState(this.sources[Ye](),function(a,s){if(!t){var i=f(a.next).call(a);if(i===Tt)return e.onError(i.e);if(i.done)return e.onCompleted();var o=i.value;Le(o)&&(o=Dn(o));var c=new Bt;r.setDisposable(c),c.setDisposable(o.subscribe(new n(e,s,a)))}});return new Ot(r,a,Ut(function(){t=!0}))},n.prototype.onNext=function(e){this.isStopped||this.o.onNext(e)},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.s(this.e))},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(bn);Cn.prototype.concat=function(){return new Sn(this)};var Rn=function(e){function t(t){this.sources=t,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t,n=this.sources[Ye](),r=new Wt,a=Gt.scheduleRecursiveWithState(null,function(a,s){if(!t){var i=f(n.next).call(n);if(i===Tt)return e.onError(i.e);if(i.done)return null!==a?e.onError(a):e.onCompleted();var o=i.value;Le(o)&&(o=Dn(o));var c=new Bt;r.setDisposable(c),c.setDisposable(o.subscribe(function(t){e.onNext(t)},s,function(){e.onCompleted()}))}});return new Ot(r,a,Ut(function(){t=!0}))},t}(bn);Cn.prototype.catchError=function(){return new Rn(this)},Cn.prototype.catchErrorWhen=function(e){var t=this;return new Fr(function(n){var r,a,s=new $r,i=new $r,o=e(s),c=o.subscribe(i),u=t[Ye](),l=new Wt,p=Gt.scheduleRecursive(function(e){if(!r){var t=f(u.next).call(u);if(t===Tt)return n.onError(t.e);if(t.done)return void(a?n.onError(a):n.onCompleted());var o=t.value;Le(o)&&(o=Dn(o));var c=new Bt,p=new Bt;l.setDisposable(new Ot(p,c)),c.setDisposable(o.subscribe(function(e){n.onNext(e)},function(t){p.setDisposable(i.subscribe(e,function(e){n.onError(e)},function(){n.onCompleted()})),s.onNext(t)},function(){n.onCompleted()}))}});return new Ot(c,l,p,Ut(function(){r=!0}))})};var Nn=function(e){function t(e,t){this.v=e,this.c=null==t?-1:t}function n(e){this.v=e.v,this.l=e.c}return Dt(t,e),t.prototype[Ye]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?Ge:(this.l>0&&this.l--,{done:!1,value:this.v})},t}(Cn),wn=Cn.repeat=function(e,t){return new Nn(e,t)},_n=function(e){function t(e,t,n){this.s=e,this.fn=t?nt(t,n,3):null}function n(e){this.i=-1,this.s=e.s,this.l=this.s.length,this.fn=e.fn}return Dt(t,e),t.prototype[Ye]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:Ge},t}(Cn),xn=Cn.of=function(e,t,n){return new _n(e,t,n)};mn.observeOn=function(e){var t=this;return new Fr(function(n){return t.subscribe(new gn(e,n))},t)},mn.subscribeOn=function(e){var t=this;return new Fr(function(n){var r=new Bt,a=new Wt;return a.setDisposable(r),r.setDisposable(e.schedule(function(){a.setDisposable(new y(e,t.subscribe(n)))})),a},t)};var kn=function(e){function t(t){this.p=t,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.p.then(function(t){e.onNext(t),e.onCompleted()},function(t){e.onError(t)}),jt},t}(bn),Dn=yn.fromPromise=function(e){return new kn(e)};mn.toPromise=function(e){if(e||(e=De.config.Promise),!e)throw new Je("Promise type not provided nor in Rx.config.Promise");var t=this;return new e(function(e,n){var r,a=!1;t.subscribe(function(e){r=e,a=!0},n,function(){a&&e(r)})})};var In=function(e){function t(t){this.source=t,e.call(this)}function n(e){this.o=e,this.a=[],this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e))},n.prototype.onNext=function(e){this.isStopped||this.a.push(e)},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onNext(this.a),this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(bn);mn.toArray=function(){return new In(this)},yn.create=function(e,t){return new Fr(e,t)};var Mn=yn.defer=function(e){return new Fr(function(t){var n;try{n=e()}catch(r){return Kn(r).subscribe(t)}return Le(n)&&(n=Dn(n)),n.subscribe(t)})},Tn=function(e){function t(t){this.scheduler=t,e.call(this)}function n(e,t){this.observer=e,this.parent=t}function r(e,t){t.onCompleted()}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new n(e,this);return t.run()},n.prototype.run=function(){return this.parent.scheduler.scheduleWithState(this.observer,r)},t}(bn),An=yn.empty=function(e){return Kt(e)||(e=Gt),new Tn(e)},Pn=function(e){function t(t,n,r){this.iterable=t,this.mapper=n,this.scheduler=r,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new On(e,this);return t.run()},t}(bn),On=function(){function e(e,t){this.o=e,this.parent=t}return e.prototype.run=function(){function e(e,t){var s=f(n.next).call(n);if(s===Tt)return r.onError(s.e);if(s.done)return r.onCompleted();var i=s.value;return Ue(a)&&(i=f(a)(i,e),i===Tt)?r.onError(i.e):(r.onNext(i),void t(e+1))}var t=Object(this.parent.iterable),n=w(t),r=this.o,a=this.parent.mapper;return this.parent.scheduler.scheduleRecursiveWithState(0,e)},e}(),Ln=Math.pow(2,53)-1;E.prototype[Ye]=function(){return new C(this._s)},C.prototype[Ye]=function(){return this},C.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:Ge},S.prototype[Ye]=function(){return new R(this._a)},R.prototype[Ye]=function(){return this},R.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:Ge};var Fn=yn.from=function(e,t,n,r){if(null==e)throw new Error("iterable cannot be null.");if(t&&!Ue(t))throw new Error("mapFn when provided must be a function");if(t)var a=nt(t,n,2);return Kt(r)||(r=Zt),new Pn(e,a,r)},Un=function(e){function t(t,n){this.args=t,this.scheduler=n,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new k(e,this);return t.run()},t}(bn);k.prototype.run=function(){function e(e,a){r>e?(t.onNext(n[e]),a(e+1)):t.onCompleted()}var t=this.observer,n=this.parent.args,r=n.length;return this.parent.scheduler.scheduleRecursiveWithState(0,e)};var jn=yn.fromArray=function(e,t){return Kt(t)||(t=Zt),new Un(e,t)};yn.generate=function(e,t,n,r,a){return Kt(a)||(a=Zt),new Fr(function(s){var i=!0;return a.scheduleRecursiveWithState(e,function(e,a){var o,c;try{i?i=!1:e=n(e),o=t(e),o&&(c=r(e))}catch(u){return s.onError(u)}o?(s.onNext(c),a(e)):s.onCompleted()})})},yn.of=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];return new Un(t,Zt)},yn.ofWithScheduler=function(e){for(var t=arguments.length,n=new Array(t-1),r=1;t>r;r++)n[r-1]=arguments[r];return new Un(n,e)},yn.ofArrayChanges=function(e){if(!Array.isArray(e))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new Fr(function(t){function n(e){for(var n=0,r=e.length;r>n;n++)t.onNext(e[n])}return Array.observe(e,n),function(){Array.unobserve(e,n)}})},yn.ofObjectChanges=function(e){if(null==e)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new Fr(function(t){function n(e){for(var n=0,r=e.length;r>n;n++)t.onNext(e[n])}return Object.observe(e,n),function(){Object.unobserve(e,n)}})};var $n=function(e){function t(){e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){return jt},t}(bn),qn=yn.never=function(){return new $n},Bn=function(e){function t(t,n){this.obj=t,this.keys=Object.keys(t),this.scheduler=n,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new I(e,this);return t.run()},t}(bn);I.prototype.run=function(){function e(e,s){if(a>e){var i=r[e];t.onNext([i,n[i]]),s(e+1)}else t.onCompleted()}var t=this.observer,n=this.parent.obj,r=this.parent.keys,a=r.length;return this.parent.scheduler.scheduleRecursiveWithState(0,e)},yn.pairs=function(e,t){return t||(t=Zt),new Bn(e,t)};var Wn=function(e){function t(t,n,r){this.start=t,this.rangeCount=n,this.scheduler=r,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new Hn(e,this);return t.run()},t}(bn),Hn=function(){function e(e,t){this.observer=e,this.parent=t}return e.prototype.run=function(){function e(e,a){n>e?(r.onNext(t+e),a(e+1)):r.onCompleted()}var t=this.parent.start,n=this.parent.rangeCount,r=this.observer;return this.parent.scheduler.scheduleRecursiveWithState(0,e)},e}();yn.range=function(e,t,n){return Kt(n)||(n=Zt),new Wn(e,t,n)};var Vn=function(e){function t(t,n,r){this.value=t,this.repeatCount=null==n?-1:n,this.scheduler=r,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new M(e,this);return t.run()},t}(bn);M.prototype.run=function(){function e(e,r){return(-1===e||e>0)&&(t.onNext(n),e>0&&e--),0===e?t.onCompleted():void r(e)}var t=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursiveWithState(this.parent.repeatCount,e)},yn.repeat=function(e,t,n){return Kt(n)||(n=Zt),new Vn(e,t,n)};var zn=function(e){function t(t,n){this.value=t,this.scheduler=n,e.call(this)}function n(e,t){this.observer=e,this.parent=t}function r(e,t){var n=t[0],r=t[1];r.onNext(n),r.onCompleted()}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new n(e,this);return t.run()},n.prototype.run=function(){return this.parent.scheduler.scheduleWithState([this.parent.value,this.observer],r)},t}(bn),Jn=(yn["return"]=yn.just=function(e,t){return Kt(t)||(t=Gt),new zn(e,t)},function(e){function t(t,n){this.error=t,this.scheduler=n,e.call(this)}function n(e,t){this.o=e,this.p=t}function r(e,t){var n=t[0],r=t[1];r.onError(n)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new n(e,this);return t.run()},n.prototype.run=function(){return this.p.scheduler.scheduleWithState([this.p.error,this.o],r)},t}(bn)),Kn=yn["throw"]=yn.throwError=function(e,t){return Kt(t)||(t=Gt),new Jn(e,t)};yn.using=function(e,t){return new Fr(function(n){var r,a,s=jt;try{r=e(),r&&(s=r),a=t(r)}catch(i){return new Ot(Kn(i).subscribe(n),s)}return new Ot(a.subscribe(n),s)})},mn.amb=function(e){var t=this;return new Fr(function(n){function r(){s||(s=i,u.dispose())}function a(){s||(s=o,c.dispose())}var s,i="L",o="R",c=new Bt,u=new Bt;return Le(e)&&(e=Dn(e)),c.setDisposable(t.subscribe(function(e){r(),s===i&&n.onNext(e)},function(e){r(),s===i&&n.onError(e)},function(){r(),s===i&&n.onCompleted()})),u.setDisposable(e.subscribe(function(e){a(),s===o&&n.onNext(e)},function(e){a(),s===o&&n.onError(e)},function(){a(),s===o&&n.onCompleted()})),new Ot(c,u)})},yn.amb=function(){function e(e,t){return e.amb(t)}var t=qn(),n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(var r=0,a=arguments.length;a>r;r++)n.push(arguments[r]);
for(var r=0,a=n.length;a>r;r++)t=e(t,n[r]);return t},mn["catch"]=mn.catchError=function(e){return"function"==typeof e?T(this,e):Xn([this,e])};var Xn=yn.catchError=yn["catch"]=function(){var e=[];if(Array.isArray(arguments[0]))e=arguments[0];else for(var t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);return xn(e).catchError()};mn.combineLatest=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];return Array.isArray(t[0])?t[0].unshift(this):t.unshift(this),Qn.apply(this,t)};var Qn=yn.combineLatest=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t.pop();return Array.isArray(t[0])&&(t=t[0]),new Fr(function(e){function n(t){if(o[t]=!0,c||(c=o.every(Me))){try{var n=r.apply(null,l)}catch(a){return e.onError(a)}e.onNext(n)}else u.filter(function(e,n){return n!==t}).every(Me)&&e.onCompleted()}function a(t){u[t]=!0,u.every(Me)&&e.onCompleted()}for(var s=t.length,i=function(){return!1},o=d(s,i),c=!1,u=d(s,i),l=new Array(s),p=new Array(s),m=0;s>m;m++)!function(r){var s=t[r],i=new Bt;Le(s)&&(s=Dn(s)),i.setDisposable(s.subscribe(function(e){l[r]=e,n(r)},function(t){e.onError(t)},function(){a(r)})),p[r]=i}(m);return new Ot(p)},this)};mn.concat=function(){for(var e=[],t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);return e.unshift(this),Gn.apply(null,e)};var Yn=function(e){function t(t){this.sources=t,e.call(this)}function n(e,t){this.sources=e,this.o=t}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new n(this.sources,e);return t.run()},n.prototype.run=function(){var e,t=new Wt,n=this.sources,r=n.length,a=this.o,s=Gt.scheduleRecursiveWithState(0,function(s,i){if(!e){if(s===r)return a.onCompleted();var o=n[s];Le(o)&&(o=Dn(o));var c=new Bt;t.setDisposable(c),c.setDisposable(o.subscribe(function(e){a.onNext(e)},function(e){a.onError(e)},function(){i(s+1)}))}});return new Ot(t,s,Ut(function(){e=!0}))},t}(bn),Gn=yn.concat=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{e=new Array(arguments.length);for(var t=0,n=arguments.length;n>t;t++)e[t]=arguments[t]}return new Yn(e)};mn.concatAll=mn.concatObservable=function(){return this.merge(1)};var Zn=function(e){function t(t,n){this.source=t,this.maxConcurrent=n,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new Ot;return t.add(this.source.subscribe(new er(e,this.maxConcurrent,t))),t},t}(bn),er=function(){function e(e,t,n){this.o=e,this.max=t,this.g=n,this.done=!1,this.q=[],this.activeCount=0,this.isStopped=!1}function t(e,t){this.parent=e,this.sad=t,this.isStopped=!1}return e.prototype.handleSubscribe=function(e){var n=new Bt;this.g.add(n),Le(e)&&(e=Dn(e)),n.setDisposable(e.subscribe(new t(this,n)))},e.prototype.onNext=function(e){this.isStopped||(this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(e)):this.q.push(e))},e.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,0===this.activeCount&&this.o.onCompleted())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t.prototype.onNext=function(e){this.isStopped||this.parent.o.onNext(e)},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.parent.o.onError(e))},t.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var e=this.parent;e.g.remove(this.sad),e.q.length>0?e.handleSubscribe(e.q.shift()):(e.activeCount--,e.done&&0===e.activeCount&&e.o.onCompleted())}},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(e),!0)},e}();mn.merge=function(e){return"number"!=typeof e?tr(this,e):new Zn(this,e)};var tr=yn.merge=function(){var e,t,n=[],r=arguments.length;if(arguments[0])if(Kt(arguments[0]))for(e=arguments[0],t=1;r>t;t++)n.push(arguments[t]);else for(e=Gt,t=0;r>t;t++)n.push(arguments[t]);else for(e=Gt,t=1;r>t;t++)n.push(arguments[t]);return Array.isArray(n[0])&&(n=n[0]),D(e,n).mergeAll()},nr=function(e){function t(t){this.source=t,e.call(this)}function n(e,t){this.o=e,this.g=t,this.isStopped=!1,this.done=!1}function r(e,t){this.parent=e,this.sad=t,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new Ot,r=new Bt;return t.add(r),r.setDisposable(this.source.subscribe(new n(e,t))),t},n.prototype.onNext=function(e){if(!this.isStopped){var t=new Bt;this.g.add(t),Le(e)&&(e=Dn(e)),t.setDisposable(e.subscribe(new r(this,t)))}},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,1===this.g.length&&this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},r.prototype.onNext=function(e){this.isStopped||this.parent.o.onNext(e)},r.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.parent.o.onError(e))},r.prototype.onCompleted=function(){if(!this.isStopped){var e=this.parent;this.isStopped=!0,e.g.remove(this.sad),e.done&&1===e.g.length&&e.o.onCompleted()}},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(e),!0)},t}(bn);mn.mergeAll=mn.mergeObservable=function(){return new nr(this)};var rr=De.CompositeError=function(e){this.name="NotImplementedError",this.innerErrors=e,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};rr.prototype=Error.prototype,yn.mergeDelayError=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{var t=arguments.length;e=new Array(t);for(var n=0;t>n;n++)e[n]=arguments[n]}var r=D(null,e);return new Fr(function(e){function t(){0===i.length?e.onCompleted():1===i.length?e.onError(i[0]):e.onError(new rr(i))}var n=new Ot,a=new Bt,s=!1,i=[];return n.add(a),a.setDisposable(r.subscribe(function(r){var a=new Bt;n.add(a),Le(r)&&(r=Dn(r)),a.setDisposable(r.subscribe(function(t){e.onNext(t)},function(e){i.push(e),n.remove(a),s&&1===n.length&&t()},function(){n.remove(a),s&&1===n.length&&t()}))},function(e){i.push(e),s=!0,1===n.length&&t()},function(){s=!0,1===n.length&&t()})),n})},mn.onErrorResumeNext=function(e){if(!e)throw new Error("Second observable is required");return ar([this,e])};var ar=yn.onErrorResumeNext=function(){var e=[];if(Array.isArray(arguments[0]))e=arguments[0];else for(var t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);return new Fr(function(t){var n=0,r=new Wt,a=Gt.scheduleRecursive(function(a){var s,i;n<e.length?(s=e[n++],Le(s)&&(s=Dn(s)),i=new Bt,r.setDisposable(i),i.setDisposable(s.subscribe(t.onNext.bind(t),a,a))):t.onCompleted()});return new Ot(r,a)})};mn.skipUntil=function(e){var t=this;return new Fr(function(n){var r=!1,a=new Ot(t.subscribe(function(e){r&&n.onNext(e)},function(e){n.onError(e)},function(){r&&n.onCompleted()}));Le(e)&&(e=Dn(e));var s=new Bt;return a.add(s),s.setDisposable(e.subscribe(function(){r=!0,s.dispose()},function(e){n.onError(e)},function(){s.dispose()})),a},t)};var sr=function(e){function t(t){this.source=t,e.call(this)}function n(e,t){this.o=e,this.inner=t,this.stopped=!1,this.latest=0,this.hasLatest=!1,this.isStopped=!1}function r(e,t){this.parent=e,this.id=t,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){var t=new Wt,r=this.source.subscribe(new n(e,t));return new Ot(r,t)},n.prototype.onNext=function(e){if(!this.isStopped){var t=new Bt,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(t),Le(e)&&(e=Dn(e)),t.setDisposable(e.subscribe(new r(this,n)))}},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.stopped=!0,!this.hasLatest&&this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},r.prototype.onNext=function(e){this.isStopped||this.parent.latest===this.id&&this.parent.o.onNext(e)},r.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.parent.latest===this.id&&this.parent.o.onError(e))},r.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.isStopped&&this.parent.o.onCompleted()))},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(e),!0)},t}(bn);mn["switch"]=mn.switchLatest=function(){return new sr(this)};var ir=function(e){function t(t,n){this.source=t,this.other=Le(n)?Dn(n):n,e.call(this)}function n(e){this.o=e,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return new Ot(this.source.subscribe(e),this.other.subscribe(new n(e)))},n.prototype.onNext=function(e){this.isStopped||this.o.onCompleted()},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){!this.isStopped&&(this.isStopped=!0)},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(bn);mn.takeUntil=function(e){return new ir(this,e)},mn.withLatestFrom=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t.pop(),a=this;return Array.isArray(t[0])&&(t=t[0]),new Fr(function(e){for(var n=t.length,s=d(n,A),i=!1,o=new Array(n),c=new Array(n+1),u=0;n>u;u++)!function(n){var r=t[n],a=new Bt;Le(r)&&(r=Dn(r)),a.setDisposable(r.subscribe(function(e){o[n]=e,s[n]=!0,i=s.every(Me)},function(t){e.onError(t)},Ie)),c[n]=a}(u);var l=new Bt;return l.setDisposable(a.subscribe(function(t){var n=[t].concat(o);if(i){var a=f(r).apply(null,n);return a===Tt?e.onError(a.e):void e.onNext(a)}},function(t){e.onError(t)},function(){e.onCompleted()})),c[n]=l,new Ot(c)},this)},mn.zip=function(){if(Array.isArray(arguments[0]))return P.apply(this,arguments);for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=this,a=t.pop();return t.unshift(r),new Fr(function(e){for(var n=t.length,s=d(n,O),i=d(n,A),o=new Array(n),c=0;n>c;c++)!function(n){var c=t[n],u=new Bt;Le(c)&&(c=Dn(c)),u.setDisposable(c.subscribe(function(t){if(s[n].push(t),s.every(function(e){return e.length>0})){var o=s.map(function(e){return e.shift()}),c=f(a).apply(r,o);if(c===Tt)return e.onError(c.e);e.onNext(c)}else i.filter(function(e,t){return t!==n}).every(Me)&&e.onCompleted()},function(t){e.onError(t)},function(){i[n]=!0,i.every(Me)&&e.onCompleted()})),o[n]=u}(c);return new Ot(o)},r)},yn.zip=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t.shift();return r.zip.apply(r,t)},yn.zipArray=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{var t=arguments.length;e=new Array(t);for(var n=0;t>n;n++)e[n]=arguments[n]}return new Fr(function(t){for(var n=e.length,r=d(n,L),a=d(n,A),s=new Array(n),i=0;n>i;i++)!function(n){s[n]=new Bt,s[n].setDisposable(e[n].subscribe(function(e){if(r[n].push(e),r.every(function(e){return e.length>0})){var s=r.map(function(e){return e.shift()});t.onNext(s)}else if(a.filter(function(e,t){return t!==n}).every(Me))return t.onCompleted()},function(e){t.onError(e)},function(){a[n]=!0,a.every(Me)&&t.onCompleted()}))}(i);return new Ot(s)})},mn.asObservable=function(){var e=this;return new Fr(function(t){return e.subscribe(t)},e)},mn.bufferWithCount=function(e,t){return"number"!=typeof t&&(t=e),this.windowWithCount(e,t).selectMany(function(e){return e.toArray()}).where(function(e){return e.length>0})},mn.dematerialize=function(){var e=this;return new Fr(function(t){return e.subscribe(function(e){return e.accept(t)},function(e){t.onError(e)},function(){t.onCompleted()})},this)};var or=function(e){function t(t,n,r){this.source=t,this.keyFn=n,this.comparer=r,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new F(e,this.keyFn,this.comparer))},t}(bn);F.prototype.onNext=function(e){if(!this.isStopped){var t=e;return Ue(this.keyFn)&&(t=f(this.keyFn)(e),t===Tt)?this.o.onError(t.e):this.hasCurrentKey&&(comparerEquals=f(this.comparer)(this.currentKey,t),comparerEquals===Tt)?this.o.onError(comparerEquals.e):void(this.hasCurrentKey&&comparerEquals||(this.hasCurrentKey=!0,this.currentKey=t,this.o.onNext(e)))}},F.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},F.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},F.prototype.dispose=function(){this.isStopped=!0},F.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},mn.distinctUntilChanged=function(e,t){return t||(t=Ae),new or(this,e,t)};var cr=function(e){function t(t,n,r,a){this.source=t,this._oN=n,this._oE=r,this._oC=a,e.call(this)}function n(e,t){this.o=e,this.t=!t._oN||Ue(t._oN)?pn(t._oN||Ie,t._oE||Ie,t._oC||Ie):t._oN,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this))},n.prototype.onNext=function(e){if(!this.isStopped){var t=f(this.t.onNext).call(this.t,e);t===Tt&&this.o.onError(t.e),this.o.onNext(e)}},n.prototype.onError=function(e){if(!this.isStopped){this.isStopped=!0;var t=f(this.t.onError).call(this.t,e);if(t===Tt)return this.o.onError(t.e);this.o.onError(e)}},n.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var e=f(this.t.onCompleted).call(this.t);if(e===Tt)return this.o.onError(e.e);this.o.onCompleted()}},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(bn);mn["do"]=mn.tap=mn.doAction=function(e,t,n){return new cr(this,e,t,n)},mn.doOnNext=mn.tapOnNext=function(e,t){return this.tap("undefined"!=typeof t?function(n){e.call(t,n)}:e)},mn.doOnError=mn.tapOnError=function(e,t){return this.tap(Ie,"undefined"!=typeof t?function(n){e.call(t,n)}:e)},mn.doOnCompleted=mn.tapOnCompleted=function(e,t){return this.tap(Ie,null,"undefined"!=typeof t?function(){e.call(t)}:e)},mn["finally"]=mn.ensure=function(e){var t=this;return new Fr(function(n){var r=f(t.subscribe).call(t,n);return r===Tt?(e(),v(r.e)):Ut(function(){var t=f(r.dispose).call(r);e(),t===Tt&&v(t.e)})},this)};var ur=function(e){function t(t){this.source=t,e.call(this)}function n(e){this.o=e,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e))},n.prototype.onNext=Ie,n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(e),!0)},t}(bn);mn.ignoreElements=function(){return new ur(this)},mn.materialize=function(){var e=this;return new Fr(function(t){return e.subscribe(function(e){t.onNext(on(e))},function(e){t.onNext(cn(e)),t.onCompleted()},function(){t.onNext(un()),t.onCompleted()})},e)},mn.repeat=function(e){return wn(this,e).concat()},mn.retry=function(e){return wn(this,e).catchError()},mn.retryWhen=function(e){return wn(this).catchErrorWhen(e)};var lr=function(e){function t(t,n,r,a){this.source=t,this.accumulator=n,this.hasSeed=r,this.seed=a,e.call(this)}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new U(e,this))},t}(bn);U.prototype={onNext:function(e){return this.isStopped?void 0:(!this.hasValue&&(this.hasValue=!0),this.hasAccumulation?this.accumulation=f(this.accumulator)(this.accumulation,e):(this.accumulation=this.hasSeed?f(this.accumulator)(this.seed,e):e,this.hasAccumulation=!0),this.accumulation===Tt?this.o.onError(this.accumulation.e):void this.o.onNext(this.accumulation))},onError:function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},onCompleted:function(){this.isStopped||(this.isStopped=!0,!this.hasValue&&this.hasSeed&&this.o.onNext(this.seed),this.o.onCompleted())},dispose:function(){this.isStopped=!0},fail:function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)}},mn.scan=function(){var e,t=!1,n=arguments[0];return 2===arguments.length&&(t=!0,e=arguments[1]),new lr(this,n,t,e)},mn.skipLast=function(e){if(0>e)throw new ze;var t=this;return new Fr(function(n){var r=[];return t.subscribe(function(t){r.push(t),r.length>e&&n.onNext(r.shift())},function(e){n.onError(e)},function(){n.onCompleted()})},t)},mn.startWith=function(){var e,t=0;arguments.length&&Kt(arguments[0])?(e=arguments[0],t=1):e=Gt;for(var n=[],r=t,a=arguments.length;a>r;r++)n.push(arguments[r]);return xn([jn(n,e),this]).concat()},mn.takeLast=function(e){if(0>e)throw new ze;var t=this;return new Fr(function(n){var r=[];return t.subscribe(function(t){r.push(t),r.length>e&&r.shift()},function(e){n.onError(e)},function(){for(;r.length>0;)n.onNext(r.shift());n.onCompleted()})},t)},mn.takeLastBuffer=function(e){var t=this;return new Fr(function(n){var r=[];return t.subscribe(function(t){r.push(t),r.length>e&&r.shift()},function(e){n.onError(e)},function(){n.onNext(r),n.onCompleted()})},t)},mn.windowWithCount=function(e,t){var n=this;if(+e||(e=0),Math.abs(e)===1/0&&(e=0),0>=e)throw new ze;if(null==t&&(t=e),+t||(t=0),Math.abs(t)===1/0&&(t=0),0>=t)throw new ze;return new Fr(function(r){function a(){var e=new $r;c.push(e),r.onNext(Mt(e,i))}var s=new Bt,i=new Ht(s),o=0,c=[];return a(),s.setDisposable(n.subscribe(function(n){for(var r=0,s=c.length;s>r;r++)c[r].onNext(n);var i=o-e+1;i>=0&&i%t===0&&c.shift().onCompleted(),++o%t===0&&a()},function(e){for(;c.length>0;)c.shift().onError(e);r.onError(e)},function(){for(;c.length>0;)c.shift().onCompleted();r.onCompleted()})),i},n)},mn.selectConcat=mn.concatMap=function(e,t,n){return Ue(e)&&Ue(t)?this.concatMap(function(n,r){var a=e(n,r);return Le(a)&&(a=Dn(a)),(et(a)||Ze(a))&&(a=Fn(a)),a.map(function(e,a){return t(n,e,r,a)})}):Ue(e)?j(this,e,n):j(this,function(){return e})},mn.concatMapObserver=mn.selectConcatObserver=function(e,t,n,r){var a=this,s=nt(e,r,2),i=nt(t,r,1),o=nt(n,r,0);return new Fr(function(e){var t=0;return a.subscribe(function(n){var r;try{r=s(n,t++)}catch(a){return void e.onError(a)}Le(r)&&(r=Dn(r)),e.onNext(r)},function(t){var n;try{n=i(t)}catch(r){return void e.onError(r)}Le(n)&&(n=Dn(n)),e.onNext(n),e.onCompleted()},function(){var t;try{t=o()}catch(n){return void e.onError(n)}Le(t)&&(t=Dn(t)),e.onNext(t),e.onCompleted()})},this).concatAll()},mn.defaultIfEmpty=function(t){var n=this;return t===e&&(t=null),new Fr(function(e){var r=!1;return n.subscribe(function(t){r=!0,e.onNext(t)},function(t){e.onError(t)},function(){!r&&e.onNext(t),e.onCompleted()})},n)},q.prototype.push=function(e){var t=-1===$(this.set,e,this.comparer);return t&&this.set.push(e),t},mn.distinct=function(e,t){var n=this;return t||(t=Ae),new Fr(function(r){var a=new q(t);return n.subscribe(function(t){var n=t;if(e)try{n=e(t)}catch(s){return void r.onError(s)}a.push(n)&&r.onNext(t)},function(e){r.onError(e)},function(){r.onCompleted()})},this)},mn.groupBy=function(e,t,n){return this.groupByUntil(e,t,qn,n)},mn.groupByUntil=function(e,t,n,r){var a=this;return t||(t=Me),r||(r=Ae),new Fr(function(s){function i(e){return function(t){t.onError(e)}}var o=new Ir(0,r),c=new Ot,u=new Ht(c);return c.add(a.subscribe(function(r){var a;try{a=e(r)}catch(l){return o.getValues().forEach(i(l)),void s.onError(l)}var p=!1,m=o.tryGetValue(a);if(m||(m=new $r,o.set(a,m),p=!0),p){var d=new jr(a,m,u),h=new jr(a,m);try{duration=n(h)}catch(l){return o.getValues().forEach(i(l)),void s.onError(l)}s.onNext(d);var f=new Bt;c.add(f);var v=function(){o.remove(a)&&m.onCompleted(),c.remove(f)};f.setDisposable(duration.take(1).subscribe(Ie,function(e){o.getValues().forEach(i(e)),s.onError(e)},v))}var g;try{g=t(r)}catch(l){return o.getValues().forEach(i(l)),void s.onError(l)}m.onNext(g)},function(e){o.getValues().forEach(i(e)),s.onError(e)},function(){o.getValues().forEach(function(e){e.onCompleted()}),s.onCompleted()})),u},a)};var pr=function(e){function t(t,n,r){this.source=t,this.selector=nt(n,r,3),e.call(this)}function n(e,t){return function(n,r,a){return e.call(this,t.selector(n,r,a),r,a)}}function r(e,t,n){this.o=e,this.selector=t,this.source=n,this.i=0,this.isStopped=!1}return Dt(t,e),t.prototype.internalMap=function(e,r){return new t(this.source,n(e,this),r)},t.prototype.subscribeCore=function(e){return this.source.subscribe(new r(e,this.selector,this))},r.prototype.onNext=function(e){if(!this.isStopped){var t=f(this.selector)(e,this.i++,this.source);return t===Tt?this.o.onError(t.e):void this.o.onNext(t)}},r.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},r.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(bn);mn.map=mn.select=function(e,t){var n="function"==typeof e?e:function(){return e};return this instanceof pr?this.internalMap(n,t):new pr(this,n,t)},mn.pluck=function(){var t=arguments,n=arguments.length;if(0===n)throw new Error("List of properties cannot be empty.");return this.map(function(r){for(var a=r,s=0;n>s;s++){var i=a[t[s]];if("undefined"==typeof i)return e;a=i}return a})},mn.flatMap=mn.selectMany=function(e,t,n){return new En(this,e,t,n).mergeAll()},mn.flatMapObserver=mn.selectManyObserver=function(e,t,n,r){var a=this;return new Fr(function(s){var i=0;return a.subscribe(function(t){var n;try{n=e.call(r,t,i++)}catch(a){return void s.onError(a)}Le(n)&&(n=Dn(n)),s.onNext(n)},function(e){var n;try{n=t.call(r,e)}catch(a){return void s.onError(a)}Le(n)&&(n=Dn(n)),s.onNext(n),s.onCompleted()},function(){var e;try{e=n.call(r)}catch(t){return void s.onError(t)}Le(e)&&(e=Dn(e)),s.onNext(e),s.onCompleted()})},a).mergeAll()},De.Observable.prototype.flatMapLatest=function(e,t,n){return new En(this,e,t,n).switchLatest()};var mr=function(e){function t(t,n){this.source=t,this.skipCount=n,e.call(this)}function n(e,t){this.c=t,this.r=t,this.o=e,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this.skipCount))},n.prototype.onNext=function(e){this.isStopped||(this.r<=0?this.o.onNext(e):this.r--)},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(bn);mn.skip=function(e){if(0>e)throw new ze;return new mr(this,e)},mn.skipWhile=function(e,t){var n=this,r=nt(e,t,3);return new Fr(function(e){var t=0,a=!1;return n.subscribe(function(s){if(!a)try{a=!r(s,t++,n)}catch(i){return void e.onError(i)}a&&e.onNext(s)},function(t){e.onError(t)},function(){e.onCompleted()})},n)},mn.take=function(e,t){if(0>e)throw new ze;if(0===e)return An(t);var n=this;return new Fr(function(t){var r=e;return n.subscribe(function(e){r-->0&&(t.onNext(e),0>=r&&t.onCompleted())},function(e){t.onError(e)},function(){t.onCompleted()})},n)},mn.takeWhile=function(e,t){var n=this,r=nt(e,t,3);return new Fr(function(e){var t=0,a=!0;return n.subscribe(function(s){if(a){try{a=r(s,t++,n)}catch(i){return void e.onError(i)}a?e.onNext(s):e.onCompleted()}},function(t){e.onError(t)},function(){e.onCompleted()})},n)};var dr=function(e){function t(t,n,r){this.source=t,this.predicate=nt(n,r,3),e.call(this)}function n(e,t){return function(n,r,a){return t.predicate(n,r,a)&&e.call(this,n,r,a)}}function r(e,t,n){this.o=e,this.predicate=t,this.source=n,this.i=0,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new r(e,this.predicate,this))},t.prototype.internalFilter=function(e,r){return new t(this.source,n(e,this),r)},r.prototype.onNext=function(e){if(!this.isStopped){var t=f(this.predicate)(e,this.i++,this.source);return t===Tt?this.o.onError(t.e):void(t&&this.o.onNext(e))}},r.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},r.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(bn);mn.filter=mn.where=function(e,t){return this instanceof dr?this.internalFilter(e,t):new dr(this,e,t)};var hr=function(e){function t(t,n,r,a){this.source=t,this.acc=n,this.hasSeed=r,this.seed=a,e.call(this)}function n(e,t){this.o=e,this.acc=t.acc,this.hasSeed=t.hasSeed,this.seed=t.seed,this.hasAccumulation=!1,this.result=null,this.hasValue=!1,this.isStopped=!1}return Dt(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this))},n.prototype.onNext=function(e){this.isStopped||(!this.hasValue&&(this.hasValue=!0),this.hasAccumulation?this.result=f(this.acc)(this.result,e):(this.result=this.hasSeed?f(this.acc)(this.seed,e):e,this.hasAccumulation=!0),this.result===Tt&&this.o.onError(this.result.e))},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.hasValue&&this.o.onNext(this.result),!this.hasValue&&this.hasSeed&&this.o.onNext(this.seed),!this.hasValue&&!this.hasSeed&&this.o.onError(new He),this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},t}(bn);mn.reduce=function(e){var t=!1;if(2===arguments.length){t=!0;var n=arguments[1]}return new hr(this,e,t,n)},mn.some=function(e,t){var n=this;return e?n.filter(e,t).some():new Fr(function(e){return n.subscribe(function(){e.onNext(!0),e.onCompleted()},function(t){e.onError(t)},function(){e.onNext(!1),e.onCompleted()})},n)},mn.any=function(){return this.some.apply(this,arguments)},mn.isEmpty=function(){return this.any().map(Fe)},mn.every=function(e,t){return this.filter(function(t){return!e(t)},t).some().map(Fe)},mn.all=function(){return this.every.apply(this,arguments)},mn.includes=function(e,t){function n(e,t){return 0===e&&0===t||e===t||isNaN(e)&&isNaN(t)}var r=this;return new Fr(function(a){var s=0,i=+t||0;return Math.abs(i)===1/0&&(i=0),0>i?(a.onNext(!1),a.onCompleted(),jt):r.subscribe(function(t){s++>=i&&n(t,e)&&(a.onNext(!0),a.onCompleted())},function(e){a.onError(e)},function(){a.onNext(!1),a.onCompleted()})},this)},mn.contains=function(e,t){mn.includes(e,t)},mn.count=function(e,t){return e?this.filter(e,t).count():this.reduce(function(e){return e+1},0)},mn.indexOf=function(e,t){var n=this;return new Fr(function(r){var a=0,s=+t||0;return Math.abs(s)===1/0&&(s=0),0>s?(r.onNext(-1),r.onCompleted(),jt):n.subscribe(function(t){a>=s&&t===e&&(r.onNext(a),r.onCompleted()),a++},function(e){r.onError(e)},function(){r.onNext(-1),r.onCompleted()})},n)},mn.sum=function(e,t){return e&&Ue(e)?this.map(e,t).sum():this.reduce(function(e,t){return e+t},0)},mn.minBy=function(e,t){return t||(t=Pe),B(this,e,function(e,n){return-1*t(e,n)})},mn.min=function(e){return this.minBy(Me,e).map(function(e){return W(e)})},mn.maxBy=function(e,t){return t||(t=Pe),B(this,e,t)},mn.max=function(e){return this.maxBy(Me,e).map(function(e){return W(e)})},mn.average=function(e,t){return e&&Ue(e)?this.map(e,t).average():this.reduce(function(e,t){return{sum:e.sum+t,count:e.count+1}},{sum:0,count:0}).map(function(e){if(0===e.count)throw new He;return e.sum/e.count})},mn.sequenceEqual=function(e,t){var n=this;return t||(t=Ae),new Fr(function(r){var a=!1,s=!1,i=[],o=[],c=n.subscribe(function(e){var n,a;if(o.length>0){a=o.shift();try{n=t(a,e)}catch(c){return void r.onError(c)}n||(r.onNext(!1),r.onCompleted())}else s?(r.onNext(!1),r.onCompleted()):i.push(e)},function(e){r.onError(e)},function(){a=!0,0===i.length&&(o.length>0?(r.onNext(!1),r.onCompleted()):s&&(r.onNext(!0),r.onCompleted()))});(et(e)||Ze(e))&&(e=Fn(e)),Le(e)&&(e=Dn(e));var u=e.subscribe(function(e){var n;if(i.length>0){var s=i.shift();try{n=t(s,e)}catch(c){return void r.onError(c)}n||(r.onNext(!1),r.onCompleted())}else a?(r.onNext(!1),r.onCompleted()):o.push(e)},function(e){r.onError(e)},function(){s=!0,0===o.length&&(i.length>0?(r.onNext(!1),r.onCompleted()):a&&(r.onNext(!0),r.onCompleted()))});return new Ot(c,u)},n)},mn.elementAt=function(t,n){if(0>t)throw new ze;var r=this;return new Fr(function(a){var s=t;return r.subscribe(function(e){0===s--&&(a.onNext(e),a.onCompleted())},function(e){a.onError(e)},function(){n===e?a.onError(new ze):(a.onNext(n),a.onCompleted())})},r)},mn.single=function(e,t){if(Ue(e))return this.filter(e,t).single();var n=this;return new Fr(function(e){var t,r=!1;return n.subscribe(function(n){r?e.onError(new Error("Sequence contains more than one element")):(t=n,r=!0)},function(t){e.onError(t)},function(){e.onNext(t),e.onCompleted()})},n)},mn.first=function(){var t={},n=this;if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Ue(t.predicate)){var r=t.predicate;t.predicate=nt(r,t.thisArg,3)}return new Fr(function(r){var a=0;return n.subscribe(function(e){if(t.predicate){var s=f(t.predicate)(e,a++,n);if(s===Tt)return r.onError(s.e);s&&(r.onNext(e),r.onCompleted())}else t.predicate||(r.onNext(e),r.onCompleted())},function(e){r.onError(e)},function(){t.defaultValue===e?r.onError(new He):(r.onNext(t.defaultValue),r.onCompleted())})},n)},mn.last=function(){var t={},n=this;if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Ue(t.predicate)){var r=t.predicate;t.predicate=nt(r,t.thisArg,3)}return new Fr(function(r){var a,s=!1,i=0;return n.subscribe(function(e){if(t.predicate){var o=f(t.predicate)(e,i++,n);if(o===Tt)return r.onError(o.e);o&&(s=!0,a=e)}else t.predicate||(s=!0,a=e)},function(e){r.onError(e)},function(){s?(r.onNext(a),r.onCompleted()):t.defaultValue===e?r.onError(new He):(r.onNext(t.defaultValue),r.onCompleted())})},n)},mn.find=function(e,t){return H(this,e,t,!1)},mn.findIndex=function(e,t){return H(this,e,t,!0)},mn.toSet=function(){if("undefined"==typeof ke.Set)throw new TypeError;var e=this;return new Fr(function(t){var n=new ke.Set;return e.subscribe(function(e){n.add(e)},function(e){t.onError(e)},function(){t.onNext(n),t.onCompleted()})},e)},mn.toMap=function(e,t){if("undefined"==typeof ke.Map)throw new TypeError;var n=this;return new Fr(function(r){var a=new ke.Map;return n.subscribe(function(n){var s;try{s=e(n)}catch(i){return void r.onError(i)}var o=n;if(t)try{o=t(n)}catch(i){return void r.onError(i)}a.set(s,o)},function(e){r.onError(e)},function(){r.onNext(a),r.onCompleted()})},n)};var fr="function",vr="throw",Nt=De.internals.isObject,gr=De.spawn=function(e){var t=Q(e);return function(n){function r(e,t){rn.schedule(n.bind(s,e,t))}function a(e,t){var n;if(arguments.length>2)for(var t=[],o=1,c=arguments.length;c>o;o++)t.push(arguments[o]);if(e)try{n=i[vr](e)}catch(u){return r(u)}if(!e)try{n=i.next(t)}catch(u){return r(u)}if(n.done)return r(null,n.value);if(n.value=V(n.value,s),typeof n.value!==fr)a(new TypeError("Rx.spawn only supports a function, Promise, Observable, Object or Array."));else{var l=!1;try{n.value.call(s,function(){l||(l=!0,a.apply(s,arguments))})}catch(u){rn.schedule(function(){l||(l=!0,a.call(s,u))})}}}var s=this,i=e;if(t){for(var o=[],c=0,u=arguments.length;u>c;c++)o.push(arguments[c]);var u=o.length,l=u&&typeof o[u-1]===fr;n=l?o.pop():G,i=e.apply(this,o)}else n=n||G;a()}};yn.start=function(e,t,n){return yr(e,t,n)()};var yr=yn.toAsync=function(e,t,n){return Kt(n)||(n=rn),function(){var r=arguments,a=new qr;
return n.schedule(function(){var n;try{n=e.apply(t,r)}catch(s){return void a.onError(s)}a.onNext(n),a.onCompleted()}),a.asObservable()}};yn.fromCallback=function(e,t,n){return function(){for(var r=arguments.length,a=new Array(r),s=0;r>s;s++)a[s]=arguments[s];return Z(e,t,n,a)}},yn.fromNodeCallback=function(e,t,n){return function(){for(var r=arguments.length,a=new Array(r),s=0;r>s;s++)a[s]=arguments[s];return te(e,t,n,a)}},re.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},De.config.useNativeEvents=!1,yn.fromEvent=function(e,t,n){function r(e){return function(){var t=arguments[0];return Ue(n)&&(t=f(n).apply(null,arguments),t===Tt)?e.onError(t.e):void e.onNext(t)}}return e.addListener?br(function(n){e.addListener(t,n)},function(n){e.removeListener(t,n)},n):De.config.useNativeEvents||"function"!=typeof e.on||"function"!=typeof e.off?new Fr(function(n){return ae(e,t,r(n))}).publish().refCount():br(function(n){e.on(t,n)},function(n){e.off(t,n)},n)};var br=yn.fromEventPattern=function(e,t,n){return new Fr(function(r){function a(){var e=arguments[0];return Ue(n)&&(e=f(n).apply(null,arguments),e===Tt)?r.onError(e.e):void r.onNext(e)}var s=e(a);return Ut(function(){Ue(t)&&t(a,s)})}).publish().refCount()};yn.startAsync=function(e){var t;try{t=e()}catch(n){return Kn(n)}return Dn(t)};var Er=function(e){function t(e){var t=this.source.publish(),n=t.subscribe(e),r=jt,a=this.pauser.distinctUntilChanged().subscribe(function(e){e?r=t.connect():(r.dispose(),r=jt)});return new Ot(n,r,a)}function n(n,r){this.source=n,this.controller=new $r,r&&r.subscribe?this.pauser=this.controller.merge(r):this.pauser=this.controller,e.call(this,t,n)}return Dt(n,e),n.prototype.pause=function(){this.controller.onNext(!1)},n.prototype.resume=function(){this.controller.onNext(!0)},n}(yn);mn.pausable=function(e){return new Er(this,e)};var Cr=function(t){function n(t){function n(){for(;a.length>0;)t.onNext(a.shift())}var r,a=[],s=se(this.source,this.pauser.startWith(!1).distinctUntilChanged(),function(e,t){return{data:e,shouldFire:t}}).subscribe(function(s){r!==e&&s.shouldFire!=r?(r=s.shouldFire,s.shouldFire&&n()):(r=s.shouldFire,s.shouldFire?t.onNext(s.data):a.push(s.data))},function(e){n(),t.onError(e)},function(){n(),t.onCompleted()});return s}function r(e,r){this.source=e,this.controller=new $r,r&&r.subscribe?this.pauser=this.controller.merge(r):this.pauser=this.controller,t.call(this,n,e)}return Dt(r,t),r.prototype.pause=function(){this.controller.onNext(!1)},r.prototype.resume=function(){this.controller.onNext(!0)},r}(yn);mn.pausableBuffered=function(e){return new Cr(this,e)};var Sr=function(e){function t(e){return this.source.subscribe(e)}function n(n,r,a){e.call(this,t,n),this.subject=new Rr(r,a),this.source=n.multicast(this.subject).refCount()}return Dt(n,e),n.prototype.request=function(e){return this.subject.request(null==e?-1:e)},n}(yn),Rr=function(e){function t(e){return this.subject.subscribe(e)}function n(n,r){null==n&&(n=!0),e.call(this,t),this.subject=new $r,this.enableQueue=n,this.queue=n?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=r||Zt}return Dt(n,e),It(n.prototype,ln,{onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(sn.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(e){this.hasFailed=!0,this.error=e,this.enableQueue&&0!==this.queue.length?this.queue.push(sn.createOnError(e)):(this.subject.onError(e),this.disposeCurrentRequest())},onNext:function(e){this.requestedCount<=0?this.enableQueue&&this.queue.push(sn.createOnNext(e)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(e))},_processRequest:function(e){if(this.enableQueue)for(;this.queue.length>0&&(e>0||"N"!==this.queue[0].kind);){var t=this.queue.shift();t.accept(this.subject),"N"===t.kind?e--:(this.disposeCurrentRequest(),this.queue=[])}return e},request:function(e){this.disposeCurrentRequest();var t=this;return this.requestedDisposable=this.scheduler.scheduleWithState(e,function(e,n){var r=t._processRequest(n),a=t.hasCompleted||t.hasFailed;return!a&&r>0?(t.requestedCount=r,Ut(function(){t.requestedCount=0})):void 0}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),n}(yn);mn.controlled=function(e,t){return e&&Kt(e)&&(t=e,e=!0),null==e&&(e=!0),new Sr(this,e,t)};var Nr=function(e){function t(e){this.subscription=this.source.subscribe(new r(e,this,this.subscription));var t=this;return rn.schedule(function(){t.source.request(1)}),this.subscription}function n(n){e.call(this,t,n),this.source=n}Dt(n,e);var r=function(e){function t(t,n,r){e.call(this),this.observer=t,this.observable=n,this.cancel=r}Dt(t,e);var n=t.prototype;return n.completed=function(){this.observer.onCompleted(),this.dispose()},n.error=function(e){this.observer.onError(e),this.dispose()},n.next=function(e){this.observer.onNext(e);var t=this;rn.schedule(function(){t.observable.source.request(1)})},n.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),e.prototype.dispose.call(this)},t}(dn);return n}(yn);Sr.prototype.stopAndWait=function(){return new Nr(this)};var wr=function(e){function t(e){this.subscription=this.source.subscribe(new r(e,this,this.subscription));var t=this;return rn.schedule(function(){t.source.request(t.windowSize)}),this.subscription}function n(n,r){e.call(this,t,n),this.source=n,this.windowSize=r}Dt(n,e);var r=function(e){function t(e,t,n){this.observer=e,this.observable=t,this.cancel=n,this.received=0}Dt(t,e);var n=t.prototype;return n.completed=function(){this.observer.onCompleted(),this.dispose()},n.error=function(e){this.observer.onError(e),this.dispose()},n.next=function(e){if(this.observer.onNext(e),this.received=++this.received%this.observable.windowSize,0===this.received){var t=this;rn.schedule(function(){t.observable.source.request(t.observable.windowSize)})}},n.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),e.prototype.dispose.call(this)},t}(dn);return n}(yn);Sr.prototype.windowed=function(e){return new wr(this,e)},mn.pipe=function(e){function t(){n.resume()}var n=this.pausableBuffered();return e.addListener("drain",t),n.subscribe(function(t){!e.write(String(t))&&n.pause()},function(t){e.emit("error",t)},function(){!e._isStdio&&e.end(),e.removeListener("drain",t)}),n.resume(),e},mn.multicast=function(e,t){var n=this;return"function"==typeof e?new Fr(function(r){var a=n.multicast(e());return new Ot(t(a).subscribe(r),a.connect())},n):new Dr(n,e)},mn.publish=function(e){return e&&Ue(e)?this.multicast(function(){return new $r},e):this.multicast(new $r)},mn.share=function(){return this.publish().refCount()},mn.publishLast=function(e){return e&&Ue(e)?this.multicast(function(){return new qr},e):this.multicast(new qr)},mn.publishValue=function(e,t){return 2===arguments.length?this.multicast(function(){return new xr(t)},e):this.multicast(new xr(e))},mn.shareValue=function(e){return this.publishValue(e).refCount()},mn.replay=function(e,t,n,r){return e&&Ue(e)?this.multicast(function(){return new kr(t,n,r)},e):this.multicast(new kr(t,n,r))},mn.shareReplay=function(e,t,n){return this.replay(null,e,t,n).refCount()};var _r=function(e,t){this.subject=e,this.observer=t};_r.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var e=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(e,1),this.observer=null}};var xr=De.BehaviorSubject=function(e){function n(e){return qt(this),this.isStopped?(this.hasError?e.onError(this.error):e.onCompleted(),jt):(this.observers.push(e),e.onNext(this.value),new _r(this,e))}function r(t){e.call(this,n),this.value=t,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return Dt(r,e),It(r.prototype,ln,{getValue:function(){if(qt(this),this.hasError)throw this.error;return this.value},hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(qt(this),!this.isStopped){this.isStopped=!0;for(var e=0,n=t(this.observers),r=n.length;r>e;e++)n[e].onCompleted();this.observers.length=0}},onError:function(e){if(qt(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=e;for(var n=0,r=t(this.observers),a=r.length;a>n;n++)r[n].onError(e);this.observers.length=0}},onNext:function(e){if(qt(this),!this.isStopped){this.value=e;for(var n=0,r=t(this.observers),a=r.length;a>n;n++)r[n].onNext(e)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.exception=null}}),r}(yn),kr=De.ReplaySubject=function(e){function n(e,t){return Ut(function(){t.dispose(),!e.isDisposed&&e.observers.splice(e.observers.indexOf(t),1)})}function r(e){var t=new vn(this.scheduler,e),r=n(this,t);qt(this),this._trim(this.scheduler.now()),this.observers.push(t);for(var a=0,s=this.q.length;s>a;a++)t.onNext(this.q[a].value);return this.hasError?t.onError(this.error):this.isStopped&&t.onCompleted(),t.ensureActive(),r}function a(t,n,a){this.bufferSize=null==t?s:t,this.windowSize=null==n?s:n,this.scheduler=a||Zt,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,e.call(this,r)}var s=Math.pow(2,53)-1;return Dt(a,e),It(a.prototype,ln.prototype,{hasObservers:function(){return this.observers.length>0},_trim:function(e){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&e-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(e){if(qt(this),!this.isStopped){var n=this.scheduler.now();this.q.push({interval:n,value:e}),this._trim(n);for(var r=0,a=t(this.observers),s=a.length;s>r;r++){var i=a[r];i.onNext(e),i.ensureActive()}}},onError:function(e){if(qt(this),!this.isStopped){this.isStopped=!0,this.error=e,this.hasError=!0;var n=this.scheduler.now();this._trim(n);for(var r=0,a=t(this.observers),s=a.length;s>r;r++){var i=a[r];i.onError(e),i.ensureActive()}this.observers.length=0}},onCompleted:function(){if(qt(this),!this.isStopped){this.isStopped=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=t(this.observers),a=r.length;a>n;n++){var s=r[n];s.onCompleted(),s.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),a}(yn),Dr=De.ConnectableObservable=function(e){function t(t,n){var r,a=!1,s=t.asObservable();this.connect=function(){return a||(a=!0,r=new Ot(s.subscribe(n),Ut(function(){a=!1}))),r},e.call(this,function(e){return n.subscribe(e)})}return Dt(t,e),t.prototype.refCount=function(){var e,t=0,n=this;return new Fr(function(r){var a=1===++t,s=n.subscribe(r);return a&&(e=n.connect()),function(){s.dispose(),0===--t&&e.dispose()}})},t}(yn);mn.singleInstance=function(){function e(){return r||(r=!0,t=n["finally"](function(){r=!1}).publish().refCount()),t}var t,n=this,r=!1;return new Fr(function(t){return e().subscribe(t)})};var Ir=function(){function t(e){if(0===(1&e))return 2===e;for(var t=Math.sqrt(e),n=3;t>=n;){if(e%n===0)return!1;n+=2}return!0}function n(e){var n,r,a;for(n=0;n<o.length;++n)if(r=o[n],r>=e)return r;for(a=1|e;a<o[o.length-1];){if(t(a))return a;a+=2}return e}function r(e){var t=757602046;if(!e.length)return t;for(var n=0,r=e.length;r>n;n++){var a=e.charCodeAt(n);t=(t<<5)-t+a,t&=t}return t}function a(e){var t=668265261;return e=61^e^e>>>16,e+=e<<3,e^=e>>>4,e*=t,e^=e>>>15}function s(){return{key:null,value:null,next:0,hashCode:0}}function i(e,t){if(0>e)throw new ze;e>0&&this._initialize(e),this.comparer=t||Ae,this.freeCount=0,this.size=0,this.freeList=-1}var o=[1,3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143,4194301,8388593,16777213,33554393,67108859,134217689,268435399,536870909,1073741789,2147483647],c="no such key",u="duplicate key",l=function(){var e=0;return function(t){if(null==t)throw new Error(c);if("string"==typeof t)return r(t);if("number"==typeof t)return a(t);if("boolean"==typeof t)return t===!0?1:0;if(t instanceof Date)return a(t.valueOf());if(t instanceof RegExp)return r(t.toString());if("function"==typeof t.valueOf){var n=t.valueOf();if("number"==typeof n)return a(n);if("string"==typeof n)return r(n)}if(t.hashCode)return t.hashCode();var s=17*e++;return t.hashCode=function(){return s},s}}(),p=i.prototype;return p._initialize=function(e){var t,r=n(e);for(this.buckets=new Array(r),this.entries=new Array(r),t=0;r>t;t++)this.buckets[t]=-1,this.entries[t]=s();this.freeList=-1},p.add=function(e,t){this._insert(e,t,!0)},p._insert=function(e,t,n){this.buckets||this._initialize(0);for(var r,a=2147483647&l(e),s=a%this.buckets.length,i=this.buckets[s];i>=0;i=this.entries[i].next)if(this.entries[i].hashCode===a&&this.comparer(this.entries[i].key,e)){if(n)throw new Error(u);return void(this.entries[i].value=t)}this.freeCount>0?(r=this.freeList,this.freeList=this.entries[r].next,--this.freeCount):(this.size===this.entries.length&&(this._resize(),s=a%this.buckets.length),r=this.size,++this.size),this.entries[r].hashCode=a,this.entries[r].next=this.buckets[s],this.entries[r].key=e,this.entries[r].value=t,this.buckets[s]=r},p._resize=function(){var e=n(2*this.size),t=new Array(e);for(a=0;a<t.length;++a)t[a]=-1;var r=new Array(e);for(a=0;a<this.size;++a)r[a]=this.entries[a];for(var a=this.size;e>a;++a)r[a]=s();for(var i=0;i<this.size;++i){var o=r[i].hashCode%e;r[i].next=t[o],t[o]=i}this.buckets=t,this.entries=r},p.remove=function(e){if(this.buckets)for(var t=2147483647&l(e),n=t%this.buckets.length,r=-1,a=this.buckets[n];a>=0;a=this.entries[a].next){if(this.entries[a].hashCode===t&&this.comparer(this.entries[a].key,e))return 0>r?this.buckets[n]=this.entries[a].next:this.entries[r].next=this.entries[a].next,this.entries[a].hashCode=-1,this.entries[a].next=this.freeList,this.entries[a].key=null,this.entries[a].value=null,this.freeList=a,++this.freeCount,!0;r=a}return!1},p.clear=function(){var e,t;if(!(this.size<=0)){for(e=0,t=this.buckets.length;t>e;++e)this.buckets[e]=-1;for(e=0;e<this.size;++e)this.entries[e]=s();this.freeList=-1,this.size=0}},p._findEntry=function(e){if(this.buckets)for(var t=2147483647&l(e),n=this.buckets[t%this.buckets.length];n>=0;n=this.entries[n].next)if(this.entries[n].hashCode===t&&this.comparer(this.entries[n].key,e))return n;return-1},p.count=function(){return this.size-this.freeCount},p.tryGetValue=function(t){var n=this._findEntry(t);return n>=0?this.entries[n].value:e},p.getValues=function(){var e=0,t=[];if(this.entries)for(var n=0;n<this.size;n++)this.entries[n].hashCode>=0&&(t[e++]=this.entries[n].value);return t},p.get=function(e){var t=this._findEntry(e);if(t>=0)return this.entries[t].value;throw new Error(c)},p.set=function(e,t){this._insert(e,t,!1)},p.containskey=function(e){return this._findEntry(e)>=0},i}();mn.join=function(e,t,n,r){var a=this;return new Fr(function(s){var i=new Ot,o=!1,c=!1,u=0,l=0,p=new Ir,m=new Ir;return i.add(a.subscribe(function(e){var n=u++,a=new Bt;p.add(n,e),i.add(a);var c,l=function(){p.remove(n)&&0===p.count()&&o&&s.onCompleted(),i.remove(a)};try{c=t(e)}catch(d){return void s.onError(d)}a.setDisposable(c.take(1).subscribe(Ie,s.onError.bind(s),l)),m.getValues().forEach(function(t){var n;try{n=r(e,t)}catch(a){return void s.onError(a)}s.onNext(n)})},s.onError.bind(s),function(){o=!0,(c||0===p.count())&&s.onCompleted()})),i.add(e.subscribe(function(e){var t=l++,a=new Bt;m.add(t,e),i.add(a);var o,u=function(){m.remove(t)&&0===m.count()&&c&&s.onCompleted(),i.remove(a)};try{o=n(e)}catch(d){return void s.onError(d)}a.setDisposable(o.take(1).subscribe(Ie,s.onError.bind(s),u)),p.getValues().forEach(function(t){var n;try{n=r(t,e)}catch(a){return void s.onError(a)}s.onNext(n)})},s.onError.bind(s),function(){c=!0,(o||0===m.count())&&s.onCompleted()})),i},a)},mn.groupJoin=function(e,t,n,r){var a=this;return new Fr(function(s){function i(e){return function(t){t.onError(e)}}var o=new Ot,c=new Ht(o),u=new Ir,l=new Ir,p=0,m=0;return o.add(a.subscribe(function(e){var n=new $r,a=p++;u.add(a,n);var m;try{m=r(e,Mt(n,c))}catch(d){return u.getValues().forEach(i(d)),void s.onError(d)}s.onNext(m),l.getValues().forEach(function(e){n.onNext(e)});var h=new Bt;o.add(h);var f,v=function(){u.remove(a)&&n.onCompleted(),o.remove(h)};try{f=t(e)}catch(d){return u.getValues().forEach(i(d)),void s.onError(d)}h.setDisposable(f.take(1).subscribe(Ie,function(e){u.getValues().forEach(i(e)),s.onError(e)},v))},function(e){u.getValues().forEach(i(e)),s.onError(e)},s.onCompleted.bind(s))),o.add(e.subscribe(function(e){var t=m++;l.add(t,e);var r=new Bt;o.add(r);var a,c=function(){l.remove(t),o.remove(r)};try{a=n(e)}catch(p){return u.getValues().forEach(i(p)),void s.onError(p)}r.setDisposable(a.take(1).subscribe(Ie,function(e){u.getValues().forEach(i(e)),s.onError(e)},c)),u.getValues().forEach(function(t){t.onNext(e)})},function(e){u.getValues().forEach(i(e)),s.onError(e)})),c},a)},mn.buffer=function(e,t){return this.window.apply(this,arguments).selectMany(function(e){return e.toArray()})},mn.window=function(e,t){return 1===arguments.length&&"function"!=typeof arguments[0]?oe.call(this,e):"function"==typeof e?ce.call(this,e):ie.call(this,e,t)},mn.pairwise=function(){var e=this;return new Fr(function(t){var n,r=!1;return e.subscribe(function(e){r?t.onNext([n,e]):r=!0,n=e},t.onError.bind(t),t.onCompleted.bind(t))},e)},mn.partition=function(e,t){return[this.filter(e,t),this.filter(function(n,r,a){return!e.call(t,n,r,a)})]};var Mr=function(e){function t(e,t){this.c=e,this.s=t}return Dt(t,e),t.prototype[Ye]=function(){var e=this;return{next:function(){return e.c()?{done:!1,value:e.s}:{done:!0,value:void 0}}}},t}(Cn);mn.letBind=mn.let=function(e){return e(this)},yn["if"]=yn.ifThen=function(e,t,n){return Mn(function(){return n||(n=An()),Le(t)&&(t=Dn(t)),Le(n)&&(n=Dn(n)),"function"==typeof n.now&&(n=An(n)),e()?t:n})},yn["for"]=yn.forIn=function(e,t,n){return xn(e,t,n).concat()};var Tr=yn["while"]=yn.whileDo=function(e,t){return Le(t)&&(t=Dn(t)),ue(e,t).concat()};mn.doWhile=function(e){return Gn([this,Tr(e,this)])},yn["case"]=yn.switchCase=function(e,t,n){return Mn(function(){Le(n)&&(n=Dn(n)),n||(n=An()),"function"==typeof n.now&&(n=An(n));var r=t[e()];return Le(r)&&(r=Dn(r)),r||n})},mn.expand=function(e,t){Kt(t)||(t=Gt);var n=this;return new Fr(function(r){var a=[],s=new Wt,i=new Ot(s),o=0,c=!1,u=function(){var n=!1;a.length>0&&(n=!c,c=!0),n&&s.setDisposable(t.scheduleRecursive(function(t){var n;if(!(a.length>0))return void(c=!1);n=a.shift();var s=new Bt;i.add(s),s.setDisposable(n.subscribe(function(t){r.onNext(t);var n=null;try{n=e(t)}catch(s){r.onError(s)}a.push(n),o++,u()},r.onError.bind(r),function(){i.remove(s),o--,0===o&&r.onCompleted()})),t()}))};return a.push(n),o++,u(),i},this)},yn.forkJoin=function(){var e=[];if(Array.isArray(arguments[0]))e=arguments[0];else for(var t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);return new Fr(function(t){var n=e.length;if(0===n)return t.onCompleted(),jt;for(var r=new Ot,a=!1,s=new Array(n),i=new Array(n),o=new Array(n),c=0;n>c;c++)!function(c){var u=e[c];Le(u)&&(u=Dn(u)),r.add(u.subscribe(function(e){a||(s[c]=!0,o[c]=e)},function(e){a=!0,t.onError(e),r.dispose()},function(){if(!a){if(!s[c])return void t.onCompleted();i[c]=!0;for(var e=0;n>e;e++)if(!i[e])return;a=!0,t.onNext(o),t.onCompleted()}}))}(c);return r})},mn.forkJoin=function(e,t){var n=this;return new Fr(function(r){var a,s,i=!1,o=!1,c=!1,u=!1,l=new Bt,p=new Bt;return Le(e)&&(e=Dn(e)),l.setDisposable(n.subscribe(function(e){c=!0,a=e},function(e){p.dispose(),r.onError(e)},function(){if(i=!0,o)if(c)if(u){var e;try{e=t(a,s)}catch(n){return void r.onError(n)}r.onNext(e),r.onCompleted()}else r.onCompleted();else r.onCompleted()})),p.setDisposable(e.subscribe(function(e){u=!0,s=e},function(e){l.dispose(),r.onError(e)},function(){if(o=!0,i)if(c)if(u){var e;try{e=t(a,s)}catch(n){return void r.onError(n)}r.onNext(e),r.onCompleted()}else r.onCompleted();else r.onCompleted()})),new Ot(l,p)},n)},mn.manySelect=mn.extend=function(e,t){Kt(t)||(t=Gt);var n=this;return Mn(function(){var r;return n.map(function(e){var t=new Ar(e);return r&&r.onNext(e),r=t,t}).tap(Ie,function(e){r&&r.onError(e)},function(){r&&r.onCompleted()}).observeOn(t).map(e)},n)};var Ar=function(e){function t(e){var t=this,n=new Ot;return n.add(Zt.schedule(function(){e.onNext(t.head),n.add(t.tail.mergeAll().subscribe(e))})),n}function n(n){e.call(this,t),this.head=n,this.tail=new qr}return Dt(n,e),It(n.prototype,ln,{onCompleted:function(){this.onNext(yn.empty())},onError:function(e){this.onNext(yn.throwError(e))},onNext:function(e){this.tail.onNext(e),this.tail.onCompleted()}}),n}(yn),Pr=ke.Map||function(){function t(){this._keys=[],this._values=[]}return t.prototype.get=function(t){var n=this._keys.indexOf(t);return-1!==n?this._values[n]:e},t.prototype.set=function(e,t){var n=this._keys.indexOf(e);-1!==n&&(this._values[n]=t),this._values[this._keys.push(e)-1]=t},t.prototype.forEach=function(e,t){for(var n=0,r=this._keys.length;r>n;n++)e.call(t,this._values[n],this._keys[n])},t}();le.prototype.and=function(e){return new le(this.patterns.concat(e))},le.prototype.thenDo=function(e){return new pe(this,e)},pe.prototype.activate=function(e,t,n){for(var r=this,a=[],s=0,i=this.expression.patterns.length;i>s;s++)a.push(me(e,this.expression.patterns[s],t.onError.bind(t)));var o=new de(a,function(){var e;try{e=r.selector.apply(r,arguments)}catch(n){return void t.onError(n)}t.onNext(e)},function(){for(var e=0,t=a.length;t>e;e++)a[e].removeActivePlan(o);n(o)});for(s=0,i=a.length;i>s;s++)a[s].addActivePlan(o);return o},de.prototype.dequeue=function(){this.joinObservers.forEach(function(e){e.queue.shift()})},de.prototype.match=function(){var e,t,n=!0;for(e=0,t=this.joinObserverArray.length;t>e;e++)if(0===this.joinObserverArray[e].queue.length){n=!1;break}if(n){var r=[],a=!1;for(e=0,t=this.joinObserverArray.length;t>e;e++)r.push(this.joinObserverArray[e].queue[0]),"C"===this.joinObserverArray[e].queue[0].kind&&(a=!0);if(a)this.onCompleted();else{this.dequeue();var s=[];for(e=0,t=r.length;e<r.length;e++)s.push(r[e].value);this.onNext.apply(this,s)}}};var Or=function(e){function t(t,n){e.call(this),this.source=t,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new Bt,this.isDisposed=!1}Dt(t,e);var n=t.prototype;return n.next=function(e){if(!this.isDisposed){if("E"===e.kind)return this.onError(e.exception);this.queue.push(e);for(var t=this.activePlans.slice(0),n=0,r=t.length;r>n;n++)t[n].match()}},n.error=Ie,n.completed=Ie,n.addActivePlan=function(e){this.activePlans.push(e)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(e){this.activePlans.splice(this.activePlans.indexOf(e),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){e.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},t}(dn);mn.and=function(e){return new le([this,e])},mn.thenDo=function(e){return new le([this]).thenDo(e)},yn.when=function(){var e,t=arguments.length;if(Array.isArray(arguments[0]))e=arguments[0];else{e=new Array(t);for(var n=0;t>n;n++)e[n]=arguments[n]}return new Fr(function(t){var n=[],r=new Pr,a=pn(function(e){t.onNext(e)},function(e){r.forEach(function(t){t.onError(e)}),t.onError(e)},function(e){t.onCompleted()});try{for(var s=0,i=e.length;i>s;s++)n.push(e[s].activate(r,a,function(e){var r=n.indexOf(e);n.splice(r,1),0===n.length&&t.onCompleted()}))}catch(o){Kn(o).subscribe(t)}var c=new Ot;return r.forEach(function(e){e.subscribe(),c.add(e)}),c})};var Lr=yn.interval=function(e,t){return ge(e,e,Kt(t)?t:rn)};yn.timer=function(t,n,r){var a;return Kt(r)||(r=rn),n!==e&&"number"==typeof n?a=n:Kt(n)&&(r=n),t instanceof Date&&a===e?he(t.getTime(),r):t instanceof Date&&a!==e?(a=n,fe(t.getTime(),a,r)):a===e?ve(t,r):ge(t,a,r)};mn.delay=function(e,t){return Kt(t)||(t=rn),e instanceof Date?be(this,e.getTime(),t):ye(this,e,t)},mn.debounce=mn.throttleWithTimeout=function(e,t){Kt(t)||(t=rn);var n=this;return new Fr(function(r){var a,s=new Wt,i=!1,o=0,c=n.subscribe(function(n){i=!0,a=n,o++;var c=o,u=new Bt;s.setDisposable(u),u.setDisposable(t.scheduleWithRelative(e,function(){i&&o===c&&r.onNext(a),i=!1}))},function(e){s.dispose(),r.onError(e),i=!1,o++},function(){s.dispose(),i&&r.onNext(a),r.onCompleted(),i=!1,o++});return new Ot(c,s)},this)},mn.throttle=function(e,t){return this.debounce(e,t)},mn.windowWithTime=function(e,t,n){var r,a=this;return null==t&&(r=e),Kt(n)||(n=rn),"number"==typeof t?r=t:Kt(t)&&(r=e,n=t),new Fr(function(t){function s(){var e=new Bt,a=!1,i=!1;p.setDisposable(e),u===c?(a=!0,i=!0):c>u?a=!0:i=!0;var d=a?u:c,h=d-m;m=d,a&&(u+=r),i&&(c+=r),e.setDisposable(n.scheduleWithRelative(h,function(){if(i){var e=new $r;l.push(e),t.onNext(Mt(e,o))}a&&l.shift().onCompleted(),s()}))}var i,o,c=r,u=e,l=[],p=new Wt,m=0;return i=new Ot(p),o=new Ht(i),l.push(new $r),t.onNext(Mt(l[0],o)),s(),i.add(a.subscribe(function(e){for(var t=0,n=l.length;n>t;t++)l[t].onNext(e)},function(e){for(var n=0,r=l.length;r>n;n++)l[n].onError(e);t.onError(e)},function(){for(var e=0,n=l.length;n>e;e++)l[e].onCompleted();t.onCompleted()})),o},a)},mn.windowWithTimeOrCount=function(e,t,n){var r=this;return Kt(n)||(n=rn),new Fr(function(a){function s(t){var r=new Bt;i.setDisposable(r),r.setDisposable(n.scheduleWithRelative(e,function(){if(t===l){u=0;var e=++l;p.onCompleted(),p=new $r,a.onNext(Mt(p,c)),s(e)}}))}var i=new Wt,o=new Ot(i),c=new Ht(o),u=0,l=0,p=new $r;return a.onNext(Mt(p,c)),s(0),o.add(r.subscribe(function(e){var n=0,r=!1;p.onNext(e),++u===t&&(r=!0,u=0,n=++l,p.onCompleted(),p=new $r,a.onNext(Mt(p,c))),r&&s(n)},function(e){p.onError(e),a.onError(e)},function(){p.onCompleted(),a.onCompleted()})),c},r)},mn.bufferWithTime=function(e,t,n){return this.windowWithTime.apply(this,arguments).selectMany(function(e){return e.toArray()})},mn.bufferWithTimeOrCount=function(e,t,n){return this.windowWithTimeOrCount(e,t,n).selectMany(function(e){return e.toArray()})},mn.timeInterval=function(e){var t=this;return Kt(e)||(e=rn),Mn(function(){var n=e.now();return t.map(function(t){var r=e.now(),a=r-n;return n=r,{value:t,interval:a}})})},mn.timestamp=function(e){return Kt(e)||(e=rn),this.map(function(t){return{value:t,timestamp:e.now()}})},mn.sample=mn.throttleLatest=function(e,t){return Kt(t)||(t=rn),"number"==typeof e?Ee(this,Lr(e,t)):Ee(this,e)},mn.timeout=function(e,t,n){(null==t||"string"==typeof t)&&(t=Kn(new Error(t||"Timeout"))),Kt(n)||(n=rn);var r=this,a=e instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new Fr(function(s){function i(){var r=o;p.setDisposable(n[a](e,function(){o===r&&(Le(t)&&(t=Dn(t)),u.setDisposable(t.subscribe(s)))}))}var o=0,c=new Bt,u=new Wt,l=!1,p=new Wt;return u.setDisposable(c),i(),c.setDisposable(r.subscribe(function(e){l||(o++,s.onNext(e),i())},function(e){l||(o++,s.onError(e))},function(){l||(o++,s.onCompleted())})),new Ot(u,p)},r)},yn.generateWithAbsoluteTime=function(e,t,n,r,a,s){return Kt(s)||(s=rn),new Fr(function(i){var o=!0,c=!1;return s.scheduleRecursiveWithAbsoluteAndState(e,s.now(),function(e,s){c&&i.onNext(e);try{if(o?o=!1:e=n(e),c=t(e))var u=r(e),l=a(e)}catch(p){return void i.onError(p)}c?s(u,l):i.onCompleted()})})},yn.generateWithRelativeTime=function(e,t,n,r,a,s){return Kt(s)||(s=rn),new Fr(function(i){var o=!0,c=!1;return s.scheduleRecursiveWithRelativeAndState(e,0,function(e,s){c&&i.onNext(e);try{if(o?o=!1:e=n(e),c=t(e))var u=r(e),l=a(e)}catch(p){return void i.onError(p)}c?s(u,l):i.onCompleted()})})},mn.delaySubscription=function(e,t){var n=e instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative",r=this;return Kt(t)||(t=rn),new Fr(function(a){var s=new Wt;return s.setDisposable(t[n](e,function(){s.setDisposable(r.subscribe(a))})),s},this)},mn.delayWithSelector=function(e,t){var n,r,a=this;return Ue(e)?r=e:(n=e,r=t),new Fr(function(e){function t(){c.setDisposable(a.subscribe(function(t){var n=f(r)(t);if(n===Tt)return e.onError(n.e);var a=new Bt;i.add(a),a.setDisposable(n.subscribe(function(){e.onNext(t),i.remove(a),s()},function(t){e.onError(t)},function(){e.onNext(t),i.remove(a),s()}))},function(t){e.onError(t)},function(){o=!0,c.dispose(),s()}))}function s(){o&&0===i.length&&e.onCompleted()}var i=new Ot,o=!1,c=new Wt;return n?c.setDisposable(n.subscribe(t,function(t){e.onError(t)},t)):t(),new Ot(c,i)},this)},mn.timeoutWithSelector=function(e,t,n){1===arguments.length&&(t=e,e=qn()),n||(n=Kn(new Error("Timeout")));var r=this;return new Fr(function(a){function s(e){function t(){return l===r}var r=l,s=new Bt;c.setDisposable(s),s.setDisposable(e.subscribe(function(){t()&&o.setDisposable(n.subscribe(a)),s.dispose()},function(e){t()&&a.onError(e)},function(){t()&&o.setDisposable(n.subscribe(a))}))}function i(){var e=!p;return e&&l++,e}var o=new Wt,c=new Wt,u=new Bt;o.setDisposable(u);var l=0,p=!1;return s(e),u.setDisposable(r.subscribe(function(e){if(i()){a.onNext(e);var n;try{n=t(e)}catch(r){return void a.onError(r)}s(Le(n)?Dn(n):n)}},function(e){i()&&a.onError(e)},function(){i()&&a.onCompleted()})),new Ot(o,c)},r)},mn.debounceWithSelector=function(e){var t=this;return new Fr(function(n){var r,a=!1,s=new Wt,i=0,o=t.subscribe(function(t){var o;try{o=e(t)}catch(c){return void n.onError(c)}Le(o)&&(o=Dn(o)),a=!0,r=t,i++;var u=i,l=new Bt;s.setDisposable(l),l.setDisposable(o.subscribe(function(){a&&i===u&&n.onNext(r),a=!1,l.dispose()},n.onError.bind(n),function(){a&&i===u&&n.onNext(r),a=!1,l.dispose()}))},function(e){s.dispose(),n.onError(e),a=!1,i++},function(){s.dispose(),a&&n.onNext(r),n.onCompleted(),a=!1,i++});return new Ot(o,s)},t)},mn.throttleWithSelector=function(e){return this.debounceWithSelector(e)},mn.skipLastWithTime=function(e,t){Kt(t)||(t=rn);var n=this;return new Fr(function(r){var a=[];return n.subscribe(function(n){var s=t.now();for(a.push({interval:s,value:n});a.length>0&&s-a[0].interval>=e;)r.onNext(a.shift().value)},function(e){r.onError(e)},function(){for(var n=t.now();a.length>0&&n-a[0].interval>=e;)r.onNext(a.shift().value);r.onCompleted()})},n)},mn.takeLastWithTime=function(e,t){var n=this;return Kt(t)||(t=rn),new Fr(function(r){var a=[];return n.subscribe(function(n){var r=t.now();for(a.push({interval:r,value:n});a.length>0&&r-a[0].interval>=e;)a.shift()},function(e){r.onError(e)},function(){for(var n=t.now();a.length>0;){var s=a.shift();n-s.interval<=e&&r.onNext(s.value)}r.onCompleted()})},n)},mn.takeLastBufferWithTime=function(e,t){var n=this;return Kt(t)||(t=rn),new Fr(function(r){var a=[];return n.subscribe(function(n){var r=t.now();for(a.push({interval:r,value:n});a.length>0&&r-a[0].interval>=e;)a.shift()},function(e){r.onError(e)},function(){for(var n=t.now(),s=[];a.length>0;){var i=a.shift();n-i.interval<=e&&s.push(i.value)}r.onNext(s),r.onCompleted()})},n)},mn.takeWithTime=function(e,t){var n=this;return Kt(t)||(t=rn),new Fr(function(r){return new Ot(t.scheduleWithRelative(e,function(){r.onCompleted()}),n.subscribe(r))},n)},mn.skipWithTime=function(e,t){var n=this;return Kt(t)||(t=rn),new Fr(function(r){var a=!1;return new Ot(t.scheduleWithRelative(e,function(){a=!0}),n.subscribe(function(e){a&&r.onNext(e)},r.onError.bind(r),r.onCompleted.bind(r)))},n)},mn.skipUntilWithTime=function(e,t){Kt(t)||(t=rn);var n=this,r=e instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new Fr(function(a){var s=!1;return new Ot(t[r](e,function(){s=!0}),n.subscribe(function(e){s&&a.onNext(e)},function(e){a.onError(e)},function(){a.onCompleted()}))},n)},mn.takeUntilWithTime=function(e,t){Kt(t)||(t=rn);var n=this,r=e instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new Fr(function(a){return new Ot(t[r](e,function(){a.onCompleted()}),n.subscribe(a))},n)},mn.throttleFirst=function(e,t){Kt(t)||(t=rn);var n=+e||0;if(0>=n)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new Fr(function(e){var a=0;return r.subscribe(function(r){var s=t.now();
(0===a||s-a>=n)&&(a=s,e.onNext(r))},function(t){e.onError(t)},function(){e.onCompleted()})},r)},mn.transduce=function(e){function t(e){return{"@@transducer/init":function(){return e},"@@transducer/step":function(e,t){return e.onNext(t)},"@@transducer/result":function(e){return e.onCompleted()}}}var n=this;return new Fr(function(r){var a=e(t(r));return n.subscribe(function(e){var t=f(a["@@transducer/step"]).call(a,r,e);t===Tt&&r.onError(t.e)},function(e){r.onError(e)},function(){a["@@transducer/result"](r)})},n)},mn.switchFirst=function(){var e=this;return new Fr(function(t){var n=!1,r=!1,a=new Bt,s=new Ot;return s.add(a),a.setDisposable(e.subscribe(function(e){if(!n){n=!0,Le(e)&&(e=Dn(e));var a=new Bt;s.add(a),a.setDisposable(e.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){s.remove(a),n=!1,r&&1===s.length&&t.onCompleted()}))}},function(e){t.onError(e)},function(){r=!0,!n&&1===s.length&&t.onCompleted()})),s},this)},mn.flatMapFirst=mn.selectManyFirst=function(e,t,n){return new En(this,e,t,n).switchFirst()},De.Observable.prototype.flatMapWithMaxConcurrent=function(e,t,n,r){return new En(this,t,n,r).merge(e)};De.VirtualTimeScheduler=function(e){function t(){return this.toDateTimeOffset(this.clock)}function n(e,t){return this.scheduleAbsoluteWithState(e,this.clock,t)}function r(e,t,n){return this.scheduleRelativeWithState(e,this.toRelative(t),n)}function a(e,t,n){return this.scheduleRelativeWithState(e,this.toRelative(t-this.now()),n)}function s(e,t){return t(),jt}function i(s,i){this.clock=s,this.comparer=i,this.isEnabled=!1,this.queue=new At(1024),e.call(this,t,n,r,a)}Dt(i,e);var o=i.prototype;return o.add=Xe,o.toDateTimeOffset=Xe,o.toRelative=Xe,o.schedulePeriodicWithState=function(e,t,n){var r=new Yt(this,e,t,n);return r.start()},o.scheduleRelativeWithState=function(e,t,n){var r=this.add(this.clock,t);return this.scheduleAbsoluteWithState(e,r,n)},o.scheduleRelative=function(e,t){return this.scheduleRelativeWithState(t,e,s)},o.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var e=this.getNext();null!==e?(this.comparer(e.dueTime,this.clock)>0&&(this.clock=e.dueTime),e.invoke()):this.isEnabled=!1}while(this.isEnabled)}},o.stop=function(){this.isEnabled=!1},o.advanceTo=function(e){var t=this.comparer(this.clock,e);if(this.comparer(this.clock,e)>0)throw new ze;if(0!==t&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,e)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=e}},o.advanceBy=function(e){var t=this.add(this.clock,e),n=this.comparer(this.clock,t);if(n>0)throw new ze;0!==n&&this.advanceTo(t)},o.sleep=function(e){var t=this.add(this.clock,e);if(this.comparer(this.clock,t)>=0)throw new ze;this.clock=t},o.getNext=function(){for(;this.queue.length>0;){var e=this.queue.peek();if(!e.isCancelled())return e;this.queue.dequeue()}return null},o.scheduleAbsolute=function(e,t){return this.scheduleAbsoluteWithState(t,e,s)},o.scheduleAbsoluteWithState=function(e,t,n){function r(e,t){return a.queue.remove(s),n(e,t)}var a=this,s=new Vt(this,e,r,t,this.comparer);return this.queue.enqueue(s),s.disposable},i}(zt);De.HistoricalScheduler=function(e){function t(t,n){var r=null==t?0:t,a=n||Pe;e.call(this,r,a)}Dt(t,e);var n=t.prototype;return n.add=function(e,t){return e+t},n.toDateTimeOffset=function(e){return new Date(e).getTime()},n.toRelative=function(e){return e},t}(De.VirtualTimeScheduler);var Fr=De.AnonymousObservable=function(e){function t(e){return e&&Ue(e.dispose)?e:Ue(e)?Ut(e):jt}function n(e,n){var r=n[0],a=n[1],s=f(a)(r);return s!==Tt||r.fail(Tt.e)?void r.setDisposable(t(s)):v(Tt.e)}function r(t,r){function a(e){var r=new Ur(e),a=[r,t];return Zt.scheduleRequired()?Zt.scheduleWithState(a,n):n(null,a),r}this.source=r,e.call(this,a)}return Dt(r,e),r}(yn),Ur=function(e){function t(t){e.call(this),this.observer=t,this.m=new Bt}Dt(t,e);var n=t.prototype;return n.next=function(e){var t=f(this.observer.onNext).call(this.observer,e);t===Tt&&(this.dispose(),v(t.e))},n.error=function(e){var t=f(this.observer.onError).call(this.observer,e);this.dispose(),t===Tt&&v(t.e)},n.completed=function(){var e=f(this.observer.onCompleted).call(this.observer);this.dispose(),e===Tt&&v(e.e)},n.setDisposable=function(e){this.m.setDisposable(e)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){e.prototype.dispose.call(this),this.m.dispose()},t}(dn),jr=function(e){function t(e){return this.underlyingObservable.subscribe(e)}function n(n,r,a){e.call(this,t),this.key=n,this.underlyingObservable=a?new Fr(function(e){return new Ot(a.getDisposable(),r.subscribe(e))}):r}return Dt(n,e),n}(yn),$r=De.Subject=function(e){function n(e){return qt(this),this.isStopped?this.hasError?(e.onError(this.error),jt):(e.onCompleted(),jt):(this.observers.push(e),new _r(this,e))}function r(){e.call(this,n),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Dt(r,e),It(r.prototype,ln.prototype,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(qt(this),!this.isStopped){this.isStopped=!0;for(var e=0,n=t(this.observers),r=n.length;r>e;e++)n[e].onCompleted();this.observers.length=0}},onError:function(e){if(qt(this),!this.isStopped){this.isStopped=!0,this.error=e,this.hasError=!0;for(var n=0,r=t(this.observers),a=r.length;a>n;n++)r[n].onError(e);this.observers.length=0}},onNext:function(e){if(qt(this),!this.isStopped)for(var n=0,r=t(this.observers),a=r.length;a>n;n++)r[n].onNext(e)},dispose:function(){this.isDisposed=!0,this.observers=null}}),r.create=function(e,t){return new Br(e,t)},r}(yn),qr=De.AsyncSubject=function(e){function n(e){return qt(this),this.isStopped?(this.hasError?e.onError(this.error):this.hasValue?(e.onNext(this.value),e.onCompleted()):e.onCompleted(),jt):(this.observers.push(e),new _r(this,e))}function r(){e.call(this,n),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Dt(r,e),It(r.prototype,ln,{hasObservers:function(){return qt(this),this.observers.length>0},onCompleted:function(){var e,n;if(qt(this),!this.isStopped){this.isStopped=!0;var r=t(this.observers),n=r.length;if(this.hasValue)for(e=0;n>e;e++){var a=r[e];a.onNext(this.value),a.onCompleted()}else for(e=0;n>e;e++)r[e].onCompleted();this.observers.length=0}},onError:function(e){if(qt(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=e;for(var n=0,r=t(this.observers),a=r.length;a>n;n++)r[n].onError(e);this.observers.length=0}},onNext:function(e){qt(this),this.isStopped||(this.value=e,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.exception=null,this.value=null}}),r}(yn),Br=De.AnonymousSubject=function(e){function t(e){return this.observable.subscribe(e)}function n(n,r){this.observer=n,this.observable=r,e.call(this,t)}return Dt(n,e),It(n.prototype,ln.prototype,{onCompleted:function(){this.observer.onCompleted()},onError:function(e){this.observer.onError(e)},onNext:function(e){this.observer.onNext(e)}}),n}(yn);De.Pauser=function(e){function t(){e.call(this)}return Dt(t,e),t.prototype.pause=function(){this.onNext(!1)},t.prototype.resume=function(){this.onNext(!0)},t}($r),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ke.Rx=De,define(function(){return De})):Se&&we?_e?(we.exports=De).Rx=De:Se.Rx=De:ke.Rx=De;var Wr=i()}.call(this);var user={};user["delete"]=function(e){Popup.show({title:"Удаление пользователя",content:"Вы уверены, что хотите удалить пользователя?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.ajax({url:"/api/v1/users/"+e+"/",type:"DELETE",success:function(){window.location.href="/admin/s_users"}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})};var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({
showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null
}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);
c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){
e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",
value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var commentsStream=new Rx.Subject,CommentsCounter=React.createClass({displayName:"CommentsCounter",getInitialState:function(){return{count:this.props.count||0}},recount:function(e){var t=0;for(var n in e.comments)"deleted"!=e.comments[n].status&&t++;this.setState({count:t})},componentWillMount:function(){var e=this,t=this.props.entity,n=this.props.entity_id;commentsStream.filter(function(e){return"update"==e.action&&e.entity==t&&e.entity_id==n}).subscribe(function(t){e.recount(t)})},render:function(){return React.createElement("div",null,React.createElement("span",{className:"fa fa-comments-o"}),this.state.count)}}),CommentForm=React.createClass({displayName:"CommentForm",getDefaultProps:function(){return{comment:{}}},getInitialState:function(){return{text:"",disabled:!0,stream:new Rx.Subject,media:[]}},onSuccess:function(e){this.setState({text:""}),this.props.stream.onNext({action:"save",comment:this.props.comment,new_comment:e.comment}),this.props.stream.onNext({action:"quote",comment:null}),this.props.stream.onNext({action:"edit",comment:null}),this.state.stream.onNext({action:"clearMedia"}),this.updateSubmitDisabled()},onChange:function(e){this.state.text=e.target.value,this.setState({text:this.state.text}),this.state.stream.onNext({action:"updateSubmitDisabled"})},onKeyDown:function(e){if("Enter"==e.key&&e.ctrlKey&&this.state.text.trim()&&!this.state.disabled){var t=this.refs.form;e.target=t.getDOMNode(),t.onSubmit(e)}},updateSubmitDisabled:function(){var e=this.refs.mediaUploader?this.refs.mediaUploader.state.opened:!1,t=this.refs.mediaHolder?0==this.refs.mediaHolder.state.count&&!this.state.text:!1;this.state.disabled=e||t,this.isMounted()&&this.setState({disabled:this.state.disabled})},componentWillMount:function(){this.state.text=this.props.comment.text},componentDidMount:function(){var e=this;this.state.stream.filter(function(t){return"updateSubmitDisabled"==t.action&&e.isMounted()}).subscribe(e.updateSubmitDisabled),this.updateSubmitDisabled()},render:function(){if(!current_user.is_authorized)return null;var e=this.props.entity||this.props.comment.entity,t=this.props.entity_id||this.props.comment.entity_id;
if(!(e&&t||this.props.quote_for||this.props.comment))return null;var n=this.props.quote_for?"/comment/quote":"/comment";return n+=this.props.comment.id?"/edit/"+this.props.comment.id:"/new",React.createElement("li",{className:"comment form"},React.createElement(UserIcon,{user:current_user}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"text"},React.createElement(AJAXForm,{ref:"form",className:"custom-form",action:n,method:"post",onSuccess:this.onSuccess},React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"hidden",name:"entity_name",value:this.props.entity}),React.createElement("input",{type:"hidden",name:"entity_id",value:this.props.entity_id}),React.createElement("input",{type:"hidden",name:"quote_for",value:this.props.quote_for}),React.createElement(TextArea,{ref:"comment",focus:!!this.props.quote_for,name:"comment",autosize:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,placeholder:"Оставить комментарий",value:this.state.text}),React.createElement("div",{className:"right-buttons"},React.createElement(MediaUploader,{ref:"mediaUploader",stream:this.state.stream,holder:this}),React.createElement("button",{type:"submit",disabled:this.state.disabled,className:"button send",title:"Отправить"},React.createElement("span",{className:"fa fa-send"}))),React.createElement(MediaHolder,{ref:"mediaHolder",files:this.props.comment.files,stream:this.state.stream,holder:this}))))),this.props.quotes)}}),Comments=React.createClass({displayName:"Comments",getInitialState:function(){return{all_comments:{},comments:[],quotes:[],stream:new Rx.Subject}},componentWillMount:function(){var e=this;$.getJSON("/comment/"+this.props.entity+"/"+this.props.entity_id+"/json/all",function(t){var n=[],r={};for(var a in t.data){var s=t.data[a].quote_for_id;s?(r[s]=r[s]||[],r[s].unshift(t.data[a])):n.push(t.data[a]),e.state.all_comments[t.data[a].id]=t.data[a]}e.setState({comments:n,quotes:r})}),commentsStream.filter(function(t){return t.sender!=e&&t.entity==e.props.entity&&t.entity_id==e.props.entity_id}).subscribe(function(t){e.state.stream.onNext(t)}),this.state.stream.subscribe(function(t){t.entity=e.props.entity,t.entity_id=e.props.entity_id,t.sender=e,commentsStream.onNext(t)}),this.state.stream.filter(function(e){return"save"==e.action}).subscribe(function(t){var n=t.comment,r=t.new_comment,a=r.quote_for_id;n.id?(a?e.state.quotes[a]&&(e.state.quotes[a][e.state.quotes[a].indexOf(n)]=r):e.state.comments[e.state.comments.indexOf(n)]=r,e.state.all_comments[n.id]=r):(e.state.all_comments[r.id]=r,a?(e.state.quotes[a]=e.state.quotes[a]||[],e.state.quotes[a].push(r)):e.state.comments.unshift(r)),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})}),this.state.stream.filter(function(e){return"delete"==e.action}).subscribe(function(t){function n(e){e&&(a[e.id].length||"deleted"!=e.status||(delete i[e.id],a[e.quote_for_id].splice(a[e.quote_for_id].indexOf(e),1),e.quote_for_id||s.splice(s.indexOf(e),1),n(i[e.quote_for_id])))}var r=t.comment,a=e.state.quotes,s=e.state.comments,i=e.state.all_comments,o=r.quote_for_id,c=o?a[o]:s,u=c.indexOf(r);c.splice(u,1),delete i[r.id],n(i[r.quote_for_id]),e.setState({comments:e.state.comments,quotes:e.state.quotes}),e.state.stream.onNext({action:"update",comments:e.state.all_comments})})},render:function(){var e=(this.props.className||"")+" comments",t=this;return React.createElement("div",null,React.createElement("ul",{className:e},React.createElement(CommentForm,{entity:this.props.entity,entity_id:this.props.entity_id,stream:this.state.stream,root:this}),this.state.comments.map(function(e,n){return React.createElement(Comment,{entity:t.props.entity,entity_id:t.props.entity_id,key:"comment_"+e.id,comment:e,stream:t.state.stream,root:t})})))}}),Quotes=React.createClass({displayName:"Quotes",render:function(){var e=this,t=this.props.comments||[];return React.createElement("ul",{className:"quotes"},t.map(function(t,n){return React.createElement(Comment,{entity:e.props.entity,entity_id:e.props.entity_id,key:"quote_"+n,comment:t,stream:e.props.stream,root:e.props.root})}),this.props.quoteForm)}}),Comment=React.createClass({displayName:"Comment",getInitialState:function(){return{showForm:null}},showQuoteForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"quote",comment:this})},showEditForm:function(e){e.preventDefault(),this.props.stream.onNext({action:"edit",comment:this})},deleteComment:function(e){e.preventDefault();var t=this;Popup.show({title:"Удалить комментарий",content:"Вы уверены,что хотите удалить комментарий?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(e){$.ajax({url:"/comment/"+t.props.comment.id,type:"DELETE",success:function(n){n.comment?t.props.stream.onNext({action:"save",comment:t.props.comment,new_comment:n.comment}):t.props.stream.onNext({action:"delete",comment:t.props.comment}),e.onClose()}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},componentWillMount:function(){var e=this;this.props.stream.filter(function(e){return"quote"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({some:null}),e==t.comment&&e.setState({showForm:"quote"}))}),this.props.stream.filter(function(e){return"edit"==e.action}).subscribe(function(t){e.isMounted()&&(e.state.showForm&&e.setState({showForm:null}),e==t.comment&&e.setState({showForm:"edit"}))})},componentDidMount:function(){$(this.getDOMNode()).find("a.image").fancybox({}),$(window).trigger("resize")},onImageLoad:function(e){mediaFill(e.target)},render:function(){var e=this,t=this.props.comment,n=this.props.root,r=null,a=null,s=null,i=null,o=null,c=null,u=null,l=markup(t.text);if("quote"==this.state.showForm&&(o=React.createElement(CommentForm,{entity:t.entity,entity_id:t.entity_id,stream:this.props.stream,quote_for:t.id,root:n})),u=React.createElement(Quotes,{quoteForm:o,comments:n.state.quotes[t.id],entity:this.props.entity,entity_id:this.props.entity_id,stream:this.props.stream,root:n}),"edit"==this.state.showForm&&(c=React.createElement(CommentForm,{quotes:u,comment:t,stream:this.props.stream,root:n})),c||(current_user.is_authorized&&"deleted"!=t.status&&(current_user.id!=t.author.id?r=React.createElement("a",{href:"#",className:"answer-button",onClick:this.showQuoteForm},"Ответить"):(a=React.createElement("a",{href:"#",className:"delete-button",onClick:this.deleteComment},"Удалить"),s=React.createElement("a",{href:"#",className:"edit-button",onClick:this.showEditForm},"Редактировать"))),t.files.length&&(i=React.createElement("div",{ref:"mediaHolder",className:"media-holder  count-"+t.files.length},t.files.map(function(n){return React.createElement("div",{key:"comment_"+t.id+"_id_"+n.id,className:"media approved",style:{backgroundImage:'url("'+n.url+'")'}},React.createElement("a",{href:n.origin,"data-fancybox-group":"comment_"+t.id,className:"image"},React.createElement("img",{src:n.url,alt:"",onLoad:e.onImageLoad})))}))),"deleted"==t.status&&(l='<span class="system-message" >'+t.text+"</span>",i=null)),c)return c;var p=niceDateFormat(t.datetime),m=niceDateFormat(t.modify_datetime);return React.createElement("li",{className:"comment"},React.createElement(UserIcon,{user:t.author}),React.createElement("div",{className:"message frame"},React.createElement("div",{className:"fa fa-caret-left arrow"}),React.createElement("div",{className:"header"},React.createElement("a",{href:"/user/profile/"+t.author.id},t.author.full_name),React.createElement("span",{className:"datetime"},"modified"==t.status?"Изменено "+m.toLowerCase():p),React.createElement(LikesCounter,{title:"Понравилось",count:t.votes_count||0,entity:"comment",entity_id:t.id,my:t.my_vote}),a,s,r),React.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:l}}),i,React.createElement("div",{className:"footer"})),u)}});$(document).ready(function(){$(".comments-counter").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommentsCounter,{entity:e,entity_id:t,count:n}),$(this)[0])}),$(".comments-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id");React.render(React.createElement(Comments,{entity:e,entity_id:t}),$(this)[0])})});var communityStream=new Rx.Subject,CommunityMembersCounter=React.createClass({displayName:"CommunityMembersCounter",getInitialState:function(){return{count:this.props.count||0}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e="учасников",t=this.state.count%10;return 1==t&&(e="учасник"),t>1&&5>t&&(e="учасника"),this.state.count%100>10&&this.state.count%100<20&&(e="учасников"),React.createElement("div",{className:"members-counter"},React.createElement("span",null,this.state.count," ",e))}}),CommunitySubscriptionButton=React.createClass({displayName:"CommunitySubscriptionButton",getInitialState:function(){return{subscribed:this.props.subscribed,status:this.props.status}},onJoin:function(){if(!this.state.subscribed){var e=this;$.post("/community/subscription/"+this.props.community_id,{subscription:"subscribe"},"json").done(function(t){"ok"==t.status&&("private"==t.community.type?(Popup.show({content:"Ваша заявка принята на рассмотрение."}),e.setState({subscribed:t.subscribed,status:"waiting"})):e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({subscribed:t.subscribed})))})}},onLeave:function(){if(this.state.subscribed||"waiting"==this.state.status){var e=this;"waiting"==this.state.status?$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(t){"ok"==t.status&&(communityStream.onNext({action:"updateMembersCount",community:t.community,count:t.community.count_members}),e.setState({status:void 0,subscribed:t.subscribed}))}):Popup.show({title:"Покинуть группу",content:"Вы уверены,что хотите покинуть группу?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.post("/community/subscription/"+e.props.community_id,{subscription:"unsubscribe"},"json").done(function(n){"ok"==n.status&&(e.props.reload?window.location.reload():(communityStream.onNext({action:"updateMembersCount",community:n.community,count:n.community.count_members}),e.setState({subscribed:n.subscribed}),t.onClose()))})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})}},componentWillMount:function(){var e=this;communityStream.filter(function(t){return"updateMembersCount"==t.action&&t.community.id==e.props.community_id}).subscribe(function(t){e.setState({count:t.count})})},render:function(){var e=this.state.status,t=this.state.subscribed&&"rejected"!=e?"waiting"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Отменить заявку"):"accepted"==e?React.createElement("button",{className:"community-leave",onClick:this.onLeave},"Покинуть"):null:React.createElement("button",{className:"community-join",onClick:this.onJoin},"Присоединиться");return t}}),CommunityMember=React.createClass({displayName:"CommunityMember",getInitialState:function(){return{user:{id:this.props.member_id,full_name:this.props.member_name,photo:this.props.member_photo,description:this.props.member_description,status:this.props.member_status}}},sendRequest:function(e){var t=this;$.post("/community/"+this.props.community_id+"/"+e+"/member/"+this.state.user.id,"json").done(function(e){"ok"==e.status&&(t.state.user.status=e.user.status,t.setState({user:t.state.user}))})},onAccept:function(){this.sendRequest("accept")},onReject:function(){this.sendRequest("reject")},onDelete:function(){var e=this;Popup.show({title:"Удалить пользователя",content:"Вы уверены,что хотите удалить пользователя из группы?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){e.sendRequest("reject"),t.onClose()}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})},render:function(){var e=this.state.user.description,t=this.props.community_owner_id==current_user.id;return t||"waiting"!=this.state.user.status?"rejected"==this.state.user.status?null:(t&&("waiting"==this.state.user.status?e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",onClick:this.onAccept},"Принять"),React.createElement("a",{className:"button reject",onClick:this.onReject},"Отклонить")):"accepted"==this.state.user.status&&(e=React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button delete",onClick:this.onDelete},"Удалить")))),e=e?React.createElement("div",{className:"description"},e):null,React.createElement("div",{className:"member user-frame"},React.createElement(UserIcon,{user:this.state.user}),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"/user/profile/"+this.state.user.id},this.state.user.full_name)),e))):null}});$(document).ready(function(){$(".members-counter-component").each(function(){var e=$(this).attr("data-community-id"),t=parseInt($(this).attr("data-count"))||0;React.render(React.createElement(CommunityMembersCounter,{community_id:e,count:t}),$(this)[0])}),$(".community-subscription-component").each(function(){var e=$(this).attr("data-community-id"),t=Boolean("True"==$(this).attr("data-subscribed")),n=$(this).attr("data-status"),r="True"==$(this).attr("data-reload")?!0:!1;React.render(React.createElement(CommunitySubscriptionButton,{community_id:e,subscribed:t,status:n,reload:r}),$(this)[0])}),$(".community-member-component").each(function(){var e=$(this).attr("data-community-id"),t=$(this).attr("data-community-owner-id"),n=$(this).attr("data-member-id"),r=$(this).attr("data-member-name"),a=$(this).attr("data-member-photo"),s=$(this).attr("data-member-status"),i=$(this).attr("data-member-description");React.render(React.createElement(CommunityMember,{community_id:e,community_owner_id:t,member_id:n,member_name:r,member_photo:a,member_status:s,member_description:i}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=200&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}})},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{
className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=200&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}})},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",
success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{
type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({
displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({
content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{
className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",
getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){
this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var FieldError=React.createClass({displayName:"FieldError",getInitialState:function(){return this.props.registerError(this),{text:""}},render:function(){return this.state.text?React.createElement("div",{className:"error-wrapper"},React.createElement("div",{className:"error"},this.state.text)):!1}}),Input=React.createClass({displayName:"Input",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("input",React.__spread({},this.props,{onChange:this.onChange})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),Select=React.createClass({displayName:"Select",onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("select",React.__spread({},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),TextArea=React.createClass({displayName:"TextArea",updateHeight:function(){if(this.props.autosize){var e=this.refs.textarea.getDOMNode();e.style.height=0,e.style.height=e.offsetHeight+(e.scrollHeight-e.offsetHeight)+"px"}},onChange:function(e){this.refs.error.setState({text:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)},componentDidMount:function(e){this.updateHeight(),tinymceInit(),this.props.focus&&this.refs.textarea.getDOMNode().focus()},componentDidUpdate:function(){this.updateHeight()},render:function(){return React.createElement("div",{className:"field-wrapper"},React.createElement("textarea",React.__spread({ref:"textarea"},this.props,{onChange:this.onChange}),this.props.children),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),ImageLoader=React.createClass({displayName:"ImageLoader",getInitialState:function(){return{value:this.props.value}},onChange:function(e){this.refs.error.setState({text:""});var t=this,n=this.refs.image.getDOMNode();if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(e){t.setState({value:e.target.result})},r.readAsDataURL(n.files[0])}"function"==typeof this.props.onChange&&this.props.onChange(e)},render:function(){var e=this.state.value?{backgroundImage:'url("'+this.state.value+'")'}:{};return React.createElement("div",{className:"field-wrapper"},React.createElement("div",{className:"image-loader"},React.createElement("input",{onChange:this.onChange,type:"file",ref:"image",name:this.props.name||"image"}),React.createElement("div",{className:"image-preview",style:e})),React.createElement(FieldError,{ref:"error",registerError:this.props.registerError}))}}),AJAXForm=React.createClass({displayName:"AJAXForm",getInitialState:function(){return{errors:{},data:{},processing:!1}},registerError:function(e,t){function n(n){e&&(r.fields[e]=r.fields[e]||{},r.fields[e][t]=n)}var r=this;return r.fields=r.fields||{},n},showErrors:function(e){for(var t in e)for(var n in e[t]){var r=this.fields[t]&&this.fields[t][n];r&&r.setState({text:e[t][n][0].message})}},onSubmit:function(e){if(e.preventDefault(),this.state.processing)return!1;this.state.processing=!0;var t=this,n=e.target;$.ajax({type:n.getAttribute("method")||"POST",url:n.getAttribute("action")||"",data:new FormData(n),cache:!1,contentType:!1,processData:!1,success:function(e){t.showErrors(e.errors),"function"==typeof t.props.onDone&&t.props.onDone(e),"ok"==e.status&&"function"==typeof t.props.onSuccess&&t.props.onSuccess(e),t.isMounted()&&t.setState({processing:!1})},error:function(){t.isMounted()&&t.setState({processing:!1})}})},childrenWithErrors:function(e,t){var n=this,r={};return t=t||e,"string"==typeof t.props.children?t.props.children:React.Children.map(t.props.children,function(t){if(!React.isValidElement(t))return t;var a=t.props.name;r[a]=r[a]||0;var s=r[a]++,i=void 0;t.props.children&&(i=n.childrenWithErrors(e,t));var o=React.cloneElement(t,{registerError:n.registerError(a,s)},i);return o})},render:function(){return this.children=this.childrenWithErrors(this),React.createElement("form",React.__spread({},this.props,{onSubmit:this.onSubmit}),this.children)}}),SearchUsers=React.createClass({displayName:"SearchUsers",componentDidMount:function(e){var t=this.refs.input.getDOMNode();this.onInputChangeObservable=Rx.Observable.fromEvent(t,"keydown").debounce(200),this.onChangeObserver=this.onInputChangeObservable.subscribe(function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;t?$.ajax({url:"/admin/users_search_json?sEcho=3&iColumns=12&sColumns=%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C&iDisplayStart=0&iDisplayLength=21&mDataProp_0=0&sSearch_0=&bRegex_0=false&bSearchable_0=true&bSortable_0=true&mDataProp_1=1&sSearch_1=&bRegex_1=false&bSearchable_1=true&bSortable_1=true&mDataProp_2=2&sSearch_2=&bRegex_2=false&bSearchable_2=true&bSortable_2=true&mDataProp_3=3&sSearch_3=&bRegex_3=false&bSearchable_3=true&bSortable_3=true&mDataProp_4=4&sSearch_4=&bRegex_4=false&bSearchable_4=true&bSortable_4=true&mDataProp_5=5&sSearch_5=&bRegex_5=false&bSearchable_5=true&bSortable_5=true&mDataProp_6=6&sSearch_6=&bRegex_6=false&bSearchable_6=true&bSortable_6=true&mDataProp_7=7&sSearch_7=&bRegex_7=false&bSearchable_7=true&bSortable_7=true&mDataProp_8=8&sSearch_8=&bRegex_8=false&bSearchable_8=true&bSortable_8=true&mDataProp_9=9&sSearch_9=&bRegex_9=false&bSearchable_9=true&bSortable_9=true&mDataProp_10=10&sSearch_10=&bRegex_10=false&bSearchable_10=true&bSortable_10=true&mDataProp_11=11&sSearch_11=&bRegex_11=false&bSearchable_11=true&bSortable_11=true&sSearch="+t+"&bRegex=false&iSortCol_0=0&sSortDir_0=asc&iSortingCols=1&_=1440505648017",success:function(e){n.setState({userList:[]}),n.setState({userList:e.aaData})}}):n.setState({userList:[]})}.bind(this))},componentWillUnmount:function(){this.onChangeObserver.dispose()},getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});e.target.value},render:function(){var e=this,t=e.state.userList;return React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{ref:"input",type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Введите данные пользователя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list user-list"},t.map(function(e){return React.createElement(SearchUser,{userIn:e})})))}}),SearchUser=React.createClass({displayName:"SearchUser",clickedUser:function(e){e.preventDefault();var t=this;document.location.href="/user/profile/"+t.props.userIn[0]},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{onClick:e.clickedUser},React.createElement("div",{className:"user-frame frame"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:t[11],className:"media-object foto-small"})),React.createElement("div",{className:"info"},React.createElement("div",{className:"name"},React.createElement("a",{href:"#",onClick:e.clickedUser},t[1])),React.createElement("div",{className:"description",title:t[10]},t[10]))))}}),ManageUsers=React.createClass({displayName:"ManageUsers",getInitialState:function(){return{userName:"",userList:[]}},userNameChange:function(e){this.setState({userName:e.target.value});var t=e.target.value,n=this;console.log(t),$.ajax({url:"/admin/company-structure/get-users/"+n.props.dep_id+"/"+t+"/",success:function(e){n.setState({userList:[]});e.users;n.setState({userList:e.users}),console.log(n.state.userList)}})},render:function(){var e=this,t=e.state.userList;return console.log(t),console.log(e.props.dep_id),React.createElement("div",null,React.createElement("div",{className:"input-group fio"},React.createElement("span",{className:"input-group-addon",id:"basic-addon1"},React.createElement("i",{className:"fa fa-search"})),React.createElement("input",{type:"text",className:"form-control",value:this.state.userName,onChange:this.userNameChange,placeholder:"Фамилия или имя","aria-describedby":"basic-addon1"})),React.createElement("ul",{className:"media-list"},t.map(function(t){return React.createElement(UserInSearch,{userIn:t,dep_id:e.props.dep_id})})))}}),UserInSearch=React.createClass({displayName:"UserInSearch",clickedUser:function(){var e=this;$.ajax({url:"/admin/company-structure/set-user-dep/"+e.props.dep_id+"/"+e.props.userIn.u_id+"/",success:function(e){"ok"==e.status&&location.reload()}})},render:function(){var e=this,t=e.props.userIn;return React.createElement("li",{className:"media btn btn-default user-in-search",onClick:e.clickedUser},React.createElement("div",{className:"media-left"},React.createElement("img",{src:t.src_foto,className:"media-object foto-small"})),React.createElement("div",{className:"media-body"},React.createElement("h4",{className:"media-heading"},t.full_name),t.dep_name))}}),TagField=React.createClass({displayName:"TagField",getInitialState:function(){return{value:"",tags:this.props.tags||[]}},onKeyPress:function(e){"Enter"==e.key&&e.preventDefault(),"Enter"==e.key&&this.state.value.trim()&&(e.preventDefault(),this.state.tags.push(this.state.value),this.setState({value:"",tags:this.state.tags}))},onChange:function(e){this.setState({value:e.target.value})},focusInput:function(){this.refs.input.getDOMNode().focus()},render:function(){var e=this;return React.createElement("div",{className:"tag-field",onClick:this.focusInput},this.state.tags.map(function(t,n){return React.createElement(Tag,{value:t,key:"tag_"+n,name:e.props.name||"tag"})}),React.createElement("div",{className:"value-wrapper"},React.createElement("span",null,this.state.value),React.createElement("input",{ref:"input",type:"text",value:this.state.value,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onChange:this.onChange})))}}),Tag=React.createClass({displayName:"Tag",getInitialState:function(){return{deleted:!1}},onClick:function(e){e.stopPropagation()},onDelete:function(e){e.stopPropagation(),this.setState({deleted:!0})},render:function(){return this.state.deleted||!this.props.value.trim()?null:React.createElement("div",{className:"tag",onClick:this.onClick},React.createElement("input",{type:"hidden",name:this.props.name,value:this.props.value.trim()}),React.createElement("span",{className:"fa fa-tag"}),this.props.value,React.createElement("span",{className:"fa fa-times delete",onClick:this.onDelete}))}}),MediaUploader=React.createClass({displayName:"MediaUploader",getInitialState:function(){return{content:null,opened:!1}},close:function(){this.state.opened=!1,this.setState({content:null,opened:this.state.opened}),this.props.stream.onNext({action:"updateSubmitDisabled"})},showUploader:function(e){this.state.opened=!0,this.setState({opened:this.state.opened,content:React.createElement(FileUploader,{stream:this.props.stream,holder:this.props.holder,type:e,close:this.close})}),this.props.stream.onNext({action:"updateSubmitDisabled"})},onClick:function(e){this.state.content?React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.setState({content:null}):this.setState({content:React.createElement(SelectMediaButtons,{showUploader:this.showUploader})})},onInsideClick:function(e){e.stopPropagation()},onOutsideClick:function(){React.addons.TestUtils.isElementOfType(this.state.content,SelectMediaButtons)&&this.close()},componentDidMount:function(){window.addEventListener("click",this.onOutsideClick)},componentWillUnmount:function(){window.removeEventListener("click",this.onOutsideClick)},render:function(){return React.createElement("div",{className:"media-uploader "+(this.state.content?"opened":""),onClick:this.onInsideClick},React.createElement("div",{className:"options"},this.state.content,React.createElement("div",{className:"arrow fa fa-caret-down"})),React.createElement("button",{type:"button",onClick:this.onClick,className:"button icon toggle"},React.createElement("span",{className:"fa fa-paperclip"})))}}),SelectMediaButtons=React.createClass({displayName:"SelectMediaButtons",onClick:function(e){var t=this;return function(n){t.props.showUploader(e)}},render:function(){return React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",onClick:this.onClick("image")},React.createElement("span",{className:"fa fa-picture-o"})," Картинку"))}}),Media=React.createClass({displayName:"Media",getInitialState:function(){return{id:null,file:this.props.file,src:null,status:"active",fromFile:null,url:null}},cancel:function(){"approved"==this.state.status&&(this.props.holder.state.count-=1,this.props.holder.setState({count:this.props.holder.state.count})),this.state.status=this.state.file?"deleted":"canceled",this.setState({status:this.state.status}),this.props.stream.onNext({action:"updateSubmitDisabled"})},approve:function(){this.props.holder.state.count++,this.props.holder.setState({count:this.props.holder.state.count}),this.state.status="approved",this.setState({status:this.state.status})},onInputFileChange:function(){var e=this,t=this.refs.fileInput.getDOMNode();if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(n){e.setState({src:n.target.result,url:null}),e.props.stream.onNext({action:"updatePreview",src:n.target.result,filename:t.value.split("\\").pop()})},n.readAsDataURL(t.files[0])}},onImageLoad:function(e){mediaFill(e.target)},componentDidMount:function(){$(window).trigger("resize")},componentDidUpdate:function(){this.refs.mediaImage&&mediaFill(this.refs.mediaImage.getDOMNode())},componentWillMount:function(){var e=this,t=this.props.stream.filter(function(){return"active"==e.state.status});this.state.file&&(this.state.id=this.state.file.id,this.state.url=this.state.file.url,this.state.status="approved"),t.filter(function(e){return"selectMediaFile"==e.action}).subscribe(function(){e.refs.fileInput.getDOMNode().click()}),t.filter(function(e){return"selectMediaUrl"==e.action}).subscribe(function(t){e.props.stream.onNext({action:"updatePreview",src:t.url}),e.refs.fileInput.getDOMNode().value="",e.setState({src:null,url:t.url})}),t.filter(function(e){return"mediaApprove"==e.action}).subscribe(function(){e.approve()}),t.filter(function(e){return"mediaCancel"==e.action}).subscribe(function(){e.cancel()})},render:function(){console.log(this.props.type);var e=this.state.url||this.state.src,t=e?React.createElement("div",{className:"image"},React.createElement("img",{ref:"mediaImage",src:e,alt:"",onLoad:this.onImageLoad})):"",n=React.createElement("input",{type:"hidden",name:"url",value:this.state.url}),r=React.createElement("input",{type:"hidden",name:"file.type",value:this.props.type}),a=React.createElement("input",{ref:"fileInput",type:"file",name:"upload",onChange:this.onInputFileChange});if("approved"==this.state.status?a=this.state.src?a:"":"deleted"==this.state.status&&(a=""),"canceled"==this.state.status)return null;var s=React.createElement("div",null,React.createElement("button",{type:"button",className:"cancel",onClick:this.cancel},React.createElement("span",{className:"fa fa-times"})),React.createElement("input",{type:"hidden",name:"file.id",value:this.state.id}),React.createElement("input",{type:"hidden",name:"file.status",value:this.state.status}),t,r,n,a);return"approved"==this.state.status||"active"==this.state.status?React.createElement("div",{className:"media "+this.state.status,style:e?{backgroundImage:'url("'+e+'")'}:{}},s):React.createElement("span",{className:"media "+this.state.status},s)}}),MediaHolder=React.createClass({displayName:"MediaHolder",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{media:[],key:0,count:0}},createMedia:function(e,t){this.state.key+=1;var n=this.state.media;n.push(React.createElement(Media,{holder:this,key:"media_"+this.state.key,type:e,file:t,stream:this.props.stream})),this.setState({media:this.state.media,key:this.state.key})},componentWillMount:function(){var e=this;e.props.files.map(function(t){e.createMedia(t.type,t),e.state.count++}),this.props.stream.filter(function(e){return"createMedia"==e.action}).subscribe(function(t){e.createMedia(t.type)}),this.props.stream.filter(function(e){return"clearMedia"==e.action}).subscribe(function(){e.isMounted()&&e.setState({media:[],key:0,count:0})})},render:function(){return React.createElement("div",{className:"media-holder count-"+this.state.count},this.state.media.map(function(e){return e}))}}),FileUploader=React.createClass({displayName:"FileUploader",getInitialState:function(){return{inputChangeStream:new Rx.Subject,preview:null,disabled:!0}},onCancel:function(){this.props.stream.onNext({action:"mediaCancel"}),this.props.close()},onApprove:function(){this.props.stream.onNext({action:"mediaApprove"}),this.props.close()},onUploadClick:function(){this.setState({disabled:!0}),this.props.stream.onNext({action:"selectMediaFile"})},onUrlChange:function(e){this.setState({disabled:!0}),this.state.inputChangeStream.onNext(e.target.value)},urlChangeHandler:function(e){this.props.stream.onNext({action:"selectMediaUrl",url:e})},onImageLoad:function(){this.setState({disabled:!1})},getTitle:function(){var e="Загрузка";switch(this.props.type){case"image":e+=" картинки";break;case"video":e+=" видео";break;case"audio":e+=" аудио"}return e},updatePreview:function(e){this.setState({preview:e.src}),this.refs.urlField.getDOMNode().value=e.filename||e.src},componentDidMount:function(){var e=this;this.state.inputChangeStream.debounce(500).subscribe(this.urlChangeHandler),this.props.stream.onNext({action:"createMedia",type:this.props.type}),this.props.stream.filter(function(t){return"updatePreview"==t.action&&e.isMounted()}).subscribe(e.updatePreview)},render:function(){var e=this.state.preview?React.createElement("div",{className:"wrapper"},React.createElement("img",{src:this.state.preview,onLoad:this.onImageLoad,alt:""})):"",t="image"==this.props.type?React.createElement("button",{type:"button",onClick:this.onUploadClick,className:"button download"},React.createElement("span",{className:"fa fa-download"})):null;return React.createElement("div",{className:"file-uploader"},React.createElement("h3",{className:"title"},this.getTitle()),React.createElement("div",{className:"preview"},e),React.createElement("div",{className:"url-wrapper"},React.createElement("input",{type:"text",ref:"urlField",name:"url",placeholder:"Введите адрес",onChange:this.onUrlChange}),t),React.createElement("div",{className:"buttons"},React.createElement("button",{type:"button",disabled:this.state.disabled,className:"button",onClick:this.onApprove},"Добавить"),React.createElement("button",{type:"button",onClick:this.onCancel,className:"button cancel"},"Отмена")))}}),popupStream=new Rx.Subject,PopupHolder=React.createClass({displayName:"PopupHolder",getInitialState:function(){return{popups:[],counter:0}},componentDidMount:function(){var e=this;popupStream.filter(function(e){return"show"==e.action}).subscribe(function(t){var n=e.state.counter++;e.state.popups.push(React.createElement(Popup,React.__spread({key:"popup_"+n,id:n},t.data))),e.setState({popups:e.state.popups})}),popupStream.filter(function(e){return"close"==e.action}).subscribe(function(t){for(var n in e.state.popups)if(e.state.popups[n].props.id==t.popup.props.id)break;delete e.state.popups[n],e.setState({popups:e.state.popups})})},render:function(){return React.createElement("div",null," ",this.state.popups.map(function(e){return e})," ")}}),Popup=React.createClass({displayName:"Popup",statics:{show:function(e){popupStream.onNext({action:"show",data:e})}},getDefaultProps:function(){return{flash:!1,closeButton:!0,title:"",buttons:[],outsideClickClose:!1}},onClose:function(){popupStream.onNext({action:"close",popup:this})},closeButton:function(){return this.props.closeButton?React.createElement("button",{className:"close",onClick:this.onClose}):null},title:function(){return this.props.title?React.createElement("h3",{className:"title"},this.props.title):""},buttons:function(){var e=this,t=this.props.buttons.map(function(t,n){var r="function"==typeof t.action?function(){t.action(e)}:null;return React.createElement("button",{key:"popup_button_"+e.props.id+"_"+n,className:"button "+t.className,onClick:r},t.name)});return t&&(t=React.createElement("div",{className:"buttons"},t)),t},render:function(){var e="popup-wrapper"+(this.props.hidden?" hidden":""),t="popup-window"+(this.props.closeButton?" has-close-button":"")+(this.props.title?"":" no-title");return React.createElement("table",{className:e},React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{className:t},this.closeButton(),this.title(),React.createElement("div",{className:"content"},this.props.content),this.buttons()))))}});$(document).ready(function(){React.render(React.createElement(PopupHolder,null),document.getElementById("popup"))});var UserIcon=React.createClass({displayName:"UserIcon",render:function(){function e(){window.location.href="/user/profile/"+t.id}var t=this.props.user,n=t.photo_s?{backgroundImage:"url("+t.photo_s+")"}:{};return React.createElement("div",{className:"user-icon",onClick:e,style:n,title:t.full_name})}}),LikesCounter=React.createClass({displayName:"LikesCounter",getInitialState:function(){return{stream:new Rx.Subject,processing:!1,count:this.props.count||0,active:!!this.props.my,my:this.props.my||!1,hover:!1}},onClick:function(){this.state.stream.onNext({action:"click"})},componentWillMount:function(){var e=this;this.state.stream.filter(function(e){return"click"==e.action}).debounce(300).subscribe(function(t){$.post("/vote/like",{entity:e.props.entity,entity_id:e.props.entity_id,value:!e.state.active},"json").done(function(t){"ok"==t.status&&e.setState({active:"0"!=t.vote.value,count:t.count})}).error(function(){e.state.processing=!1})})},render:function(){return React.createElement("div",{className:"likes-counter "+(this.state.active?"active":""),onClick:this.onClick},React.createElement("span",{className:"fa icon"}),React.createElement("span",null,this.state.count))}});$(document).ready(function(){$(".likes-counter-component").each(function(){var e=$(this).attr("data-entity"),t=$(this).attr("data-entity-id"),n=parseInt($(this).attr("data-count"))||0,r=Boolean("1"==$(this).attr("data-my-vote"));React.render(React.createElement(LikesCounter,{entity:e,entity_id:t,count:n,my:r}),$(this)[0])})});var smiles={"/static/images/smiles/tango/smile.png":[":-)",":)"],"/static/images/smiles/tango/laugh.png":[":-D",":d",":D",":-d"],"/static/images/smiles/tango/tongue.png":[":-P",":p",":P",":-p"],"/static/images/smiles/tango/wink.png":[";-)",";)"],"/static/images/smiles/tango/sad.png":[":-(",":("],"/static/images/smiles/tango/confused.png":[":-S",":s",":-s",":S"],"/static/images/smiles/tango/neutral.png":[":-|",":|"],"/static/images/smiles/tango/crying.png":[":'("],"/static/images/smiles/tango/embarrassed.png":[":-$",":$"],"/static/images/smiles/tango/glasses-cool.png":["(H)","(h)"],"/static/images/smiles/tango/angry.png":[":-@",":@"],"/static/images/smiles/tango/angel.png":["(A)","(a)"],"/static/images/smiles/tango/devil.png":["(6)"],"/static/images/smiles/tango/quiet.png":[":-#",":#"],"/static/images/smiles/tango/teeth.png":["8o|"],"/static/images/smiles/tango/glasses-nerdy.png":["8-|"],"/static/images/smiles/tango/sarcastic.png":["^o)"],"/static/images/smiles/tango/secret.png":[":-*"],"/static/images/smiles/tango/sick.png":["+o("],"/static/images/smiles/tango/dont-know.png":[":^)"],"/static/images/smiles/tango/thinking.png":["*-)"],"/static/images/smiles/tango/party.png":["<:o)"],"/static/images/smiles/tango/eyeroll.png":["8-)"],"/static/images/smiles/tango/sleepy.png":["|-)"],"/static/images/smiles/tango/coffee.png":["(C)","(c)"],"/static/images/smiles/tango/good.png":["(Y)","(y)"],"/static/images/smiles/tango/bad.png":["(N)","(n)"],"/static/images/smiles/tango/beer.png":["(B)","(b)"],"/static/images/smiles/tango/drink.png":["(D)","(d)"],"/static/images/smiles/tango/girl.png":["(X)","(x)"],"/static/images/smiles/tango/boy.png":["(Z)","(z)"],"/static/images/smiles/tango/hug-left.png":["({)"],"/static/images/smiles/tango/hug-right.png":["(})"],"/static/images/smiles/tango/vampire.png":[":-[",":["],"/static/images/smiles/tango/cake.png":["(^)"],"/static/images/smiles/tango/love.png":["(L)","(l)"],"/static/images/smiles/tango/love-over.png":["(U)","(u)"],"/static/images/smiles/tango/kiss.png":["(K)","(k)"],"/static/images/smiles/tango/present.png":["(G)","(g)"],"/static/images/smiles/tango/rose.png":["(F)","(f)"],"/static/images/smiles/tango/rose-dead.png":["(W)","(w)"],"/static/images/smiles/tango/camera.png":["(P)","(p)"],"/static/images/smiles/tango/film.png":["(~)"],"/static/images/smiles/tango/cat.png":["(@)"],"/static/images/smiles/tango/dog.png":["(&)"],"/static/images/smiles/tango/phone.png":["(T)","(t)"],"/static/images/smiles/tango/mobile.png":["(mp)"],"/static/images/smiles/tango/lamp.png":["(I)","(i)"],"/static/images/smiles/tango/musical-note.png":["(8)"],"/static/images/smiles/tango/moon.png":["(S)"],"/static/images/smiles/tango/star.png":["(*)"],"/static/images/smiles/tango/mail.png":["(E)","(e)"],"/static/images/smiles/tango/clock.png":["(O)","(o)"],"/static/images/smiles/tango/msn.png":["(M)","(m)"],"/static/images/smiles/tango/snail.png":["(sn)"],"/static/images/smiles/tango/turtle.png":["(tu)"],"/static/images/smiles/tango/sheep.png":["(bah)"],"/static/images/smiles/tango/plate.png":["(pl)"],"/static/images/smiles/tango/bowl.png":["(||)"],"/static/images/smiles/tango/pizza.png":["(pi)"],"/static/images/smiles/tango/soccerball.png":["(so)"],"/static/images/smiles/tango/car.png":["(au)"],"/static/images/smiles/tango/airplane.png":["(ap)"],"/static/images/smiles/tango/umbrella.png":["(um)"],"/static/images/smiles/tango/island.png":["(ip)"],"/static/images/smiles/tango/rain.png":["(st)"],"/static/images/smiles/tango/thunder.png":["(li)"],"/static/images/smiles/tango/coins.png":["(mo)"],"/static/images/smiles/tango/computer.png":["(co)"],
"/static/images/smiles/tango/console.png":["(xx)"],"/static/images/smiles/tango/question.png":["(?)"],"/static/images/smiles/tango/brb.png":["(brb)"],"/static/images/smiles/tango/cigarette.png":["(ci)"],"/static/images/smiles/tango/handcuffs.png":["(%)"],"/static/images/smiles/tango/highfive.png":["(h5)"],"/static/images/smiles/tango/fingers-crossed.png":["(yn)"],"/static/images/smiles/tango/foot-in-mouth.png":[":-!",":!"],"/static/images/smiles/tango/sun.png":["(#)"],"/static/images/smiles/tango/rainbow.png":["(R)","(r)"],"/static/images/smiles/tango/shock.png":[":-O",":o",":O",":-o"]},news={};news["delete"]=function(e){Popup.show({title:"Удалить новость",content:"Вы уверены,что хотите удалить новость?",closeButton:!1,buttons:[{name:"Да",className:"left",action:function(t){$.ajax({url:"/news/"+e,type:"DELETE",success:function(){window.location.href="/"}})}},{name:"Нет",className:"right",action:function(e){e.onClose()}}]})};var base_url=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");String.prototype.format=String.prototype.f=function(){var e=arguments;return this.replace(/\{(\d+)\}/g,function(t,n){return e[n]?e[n]:t})},$(window).load(function(){tinymceInit()});var _MS_PER_DAY=864e5;if($(window).resize(function(){$(".media-holder .approved img").each(function(){mediaFill($(this))})}),$(window).load(function(){$(window).trigger("resize")}),$(document).on("click",".company-structure .workers-toggle a",function(e){e.preventDefault(),$(this).closest(".workers").toggleClass("show")}),$(document).on("selectstart",".company-structure .structure",function(e){e.preventDefault()}),$(document).ready(function(){var e=$(".company-structure .structure");$(".company-structure .structure").removeClass("loading"),e.scrollLeft((e.find(".level-0").outerWidth()-e.parent().width())/2)}),$(document).on("mousedown",".company-structure .structure",function(e){function t(e){$("body").removeClass("dragging"),clearTimeout(o),n.off("mouseup mousemove")}if(1==e.which||2==e.which){var n=$(this),r=e.clientX-$(this).offset().left,a=e.clientY-$(this).offset().top,s=$(document).scrollTop(),i=$(this).scrollLeft(),o=setTimeout(function(){$("body").addClass("dragging"),n.on("mousemove",function(e){var t=e.clientX-$(this).offset().left,n=e.clientY-$(this).offset().top,o=t-r,c=a-n;$(document).scrollTop(s+c+2),$(this).scrollLeft(i-o)})},10);$(this).on("mouseup",t),$(window).on("mouseup",t)}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.JSXTransformer=e()}}(function(){var define,module,exports;return function e(t,n,r){function a(i,o){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!o&&c)return c(i,!0);if(s)return s(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return a(n?n:e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(_dereq_,module,exports){"use strict";function transformReact(e,t){return t=t||{},t.sourceMap&&(t.sourceMap=supportsAccessors),ReactTools.transformWithDetails(e,t)}function exec(source,options){return eval(transformReact(source,options).code)}function createSourceCodeErrorMessage(e,t){var n=e.split("\n");if(!t.lineNumber||t.lineNumber>n.length)return"";var r=n[t.lineNumber-1],a=0;r=r.replace(/^\s+/,function(e){return a=e.length,""});var s=30,i=t.column-a;i>s&&(r="... "+r.slice(i-s),i=4+s),r.length-i>s&&(r=r.slice(0,i+s)+" ...");var o="\n\n"+r+"\n";return o+=new Array(i-1).join(" ")+"^"}function transformCode(e,t,n){try{var r=transformReact(e,n)}catch(a){throw a.message+="\n    at ",t?("fileName"in a&&(a.fileName=t),a.message+=t+":"+a.lineNumber+":"+a.columnNumber):a.message+=location.href,a.message+=createSourceCodeErrorMessage(e,a),a}if(!r.sourceMap)return r.code;var s;return null==t?(s="Inline JSX script",inlineScriptCount++,inlineScriptCount>1&&(s+=" ("+inlineScriptCount+")")):dummyAnchor&&(dummyAnchor.href=t,s=dummyAnchor.pathname.substr(1)),r.code+"\n"+inlineSourceMap(r.sourceMap,e,s)}function run(e,t,n){var r=document.createElement("script");r.text=transformCode(e,t,n),headEl.appendChild(r)}function load(e,t,n){var r;return r=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,r.open("GET",e,!0),"overrideMimeType"in r&&r.overrideMimeType("text/plain"),r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)throw n(),new Error("Could not load "+e);t(r.responseText)}},r.send(null)}function loadScripts(e){function t(){var e,t;for(t=0;r>t;t++)if(e=n[t],e.loaded&&!e.executed)e.executed=!0,run(e.content,e.url,e.options);else if(!e.loaded&&!e.error&&!e.async)break}var n=[],r=e.length;e.forEach(function(e,r){var a={sourceMap:!0};/;harmony=true(;|$)/.test(e.type)&&(a.harmony=!0),/;stripTypes=true(;|$)/.test(e.type)&&(a.stripTypes=!0);var s=e.hasAttribute("async");e.src?(n[r]={async:s,error:!1,executed:!1,content:null,loaded:!1,url:e.src,options:a},load(e.src,function(e){n[r].loaded=!0,n[r].content=e,t()},function(){n[r].error=!0,t()})):n[r]={async:s,error:!1,executed:!1,content:e.innerHTML,loaded:!0,url:null,options:a}}),t()}function runScripts(){for(var e=document.getElementsByTagName("script"),t=[],n=0;n<e.length;n++)/^text\/jsx(;|$)/.test(e.item(n).type)&&t.push(e.item(n));t.length<1||(console.warn("You are using the in-browser JSX transformer. Be sure to precompile your JSX for production - http://facebook.github.io/react/docs/tooling-integration.html#jsx"),loadScripts(t))}var ReactTools=_dereq_("../main"),inlineSourceMap=_dereq_("./inline-source-map"),headEl,dummyAnchor,inlineScriptCount=0,supportsAccessors=Object.prototype.hasOwnProperty("__defineGetter__");"undefined"!=typeof window&&null!==window&&(headEl=document.getElementsByTagName("head")[0],dummyAnchor=document.createElement("a"),window.addEventListener?window.addEventListener("DOMContentLoaded",runScripts,!1):window.attachEvent("onload",runScripts)),module.exports={transform:transformReact,exec:exec}},{"../main":2,"./inline-source-map":41}],2:[function(e,t,n){"use strict";function r(e){e=e||{};var t={};return t.harmony=e.harmony,t.stripTypes=e.stripTypes,t.sourceMap=e.sourceMap,t.filename=e.sourceFilename,e.es6module&&(t.sourceType="module"),e.nonStrictEs6module&&(t.sourceType="nonStrictModule"),t.es3="es3"===e.target,t.es5=!t.es3,t}function a(e,t){var n=["react"];t.harmony&&n.push("harmony"),t.es3&&n.push("es3"),t.stripTypes&&(e=i(o.visitorList,e,t).code);var r=s.getVisitorsBySet(n);return i(r,e,t)}var s=e("./vendor/fbtransform/visitors"),i=e("jstransform").transform,o=e("jstransform/visitors/type-syntax"),c=e("./vendor/inline-source-map");t.exports={transform:function(e,t){t=r(t);var n=a(e,t),s=n.code;if(t.sourceMap){var i=c(n.sourceMap,e,t.filename);s+="\n"+i}return s},transformWithDetails:function(e,t){t=r(t);var n=a(e,t),s={};return s.code=n.code,t.sourceMap&&(s.sourceMap=n.sourceMap.toJSON()),t.filename&&(s.sourceMap.sources=[t.filename]),s}}},{"./vendor/fbtransform/visitors":40,"./vendor/inline-source-map":41,jstransform:22,"jstransform/visitors/type-syntax":36}],3:[function(e,t,n){function r(e,t){var n=this;if(!(n instanceof r))return new r(e,t);var a,s=typeof e;if("number"===s)a=+e;else if("string"===s)a=r.byteLength(e,t);else{if("object"!==s||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&L(e.data)&&(e=e.data),a=+e.length}if(a>F)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+F.toString(16)+" bytes");0>a?a=0:a>>>=0,r.TYPED_ARRAY_SUPPORT?n=r._augment(new Uint8Array(a)):(n.length=a,n._isBuffer=!0);var i;if(r.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)n._set(e);else if(_(e))if(r.isBuffer(e))for(i=0;a>i;i++)n[i]=e.readUInt8(i);else for(i=0;a>i;i++)n[i]=(e[i]%256+256)%256;else if("string"===s)n.write(e,0,t);else if("number"===s&&!r.TYPED_ARRAY_SUPPORT)for(i=0;a>i;i++)n[i]=0;return a>0&&a<=r.poolSize&&(n.parent=U),n}function a(e,t){if(!(this instanceof a))return new a(e,t);var n=new r(e,t);return delete n.parent,n}function s(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r),r>a&&(r=a)):r=a;var s=t.length;if(s%2!==0)throw new Error("Invalid hex string");r>s/2&&(r=s/2);for(var i=0;r>i;i++){var o=parseInt(t.substr(2*i,2),16);if(isNaN(o))throw new Error("Invalid hex string");e[n+i]=o}return i}function i(e,t,n,r){var a=T(k(t,e.length-n),e,n,r);return a}function o(e,t,n,r){var a=T(D(t),e,n,r);return a}function c(e,t,n,r){return o(e,t,n,r)}function u(e,t,n,r){var a=T(M(t),e,n,r);return a}function l(e,t,n,r){var a=T(I(t,e.length-n),e,n,r);return a}function p(e,t,n){return 0===t&&n===e.length?P.fromByteArray(e):P.fromByteArray(e.slice(t,n))}function m(e,t,n){var r="",a="";n=Math.min(e.length,n);for(var s=t;n>s;s++)e[s]<=127?(r+=A(a)+String.fromCharCode(e[s]),a=""):a+="%"+e[s].toString(16);return r+A(a)}function d(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;n>a;a++)r+=String.fromCharCode(127&e[a]);return r}function h(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;n>a;a++)r+=String.fromCharCode(e[a]);return r}function f(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var a="",s=t;n>s;s++)a+=x(e[s]);return a}function v(e,t,n){for(var r=e.slice(t,n),a="",s=0;s<r.length;s+=2)a+=String.fromCharCode(r[s]+256*r[s+1]);return a}function g(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function y(e,t,n,a,s,i){if(!r.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>s||i>t)throw new RangeError("value is out of bounds");if(n+a>e.length)throw new RangeError("index out of range")}function b(e,t,n,r){0>t&&(t=65535+t+1);for(var a=0,s=Math.min(e.length-n,2);s>a;a++)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function E(e,t,n,r){0>t&&(t=4294967295+t+1);for(var a=0,s=Math.min(e.length-n,4);s>a;a++)e[n+a]=t>>>8*(r?a:3-a)&255}function C(e,t,n,r,a,s){if(t>a||s>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function S(e,t,n,r,a){return a||C(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),O.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,a){return a||C(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),O.write(e,t,n,r,52,8),n+8}function N(e){if(e=w(e).replace($,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function w(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function _(e){return L(e)||r.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function x(e){return 16>e?"0"+e.toString(16):e.toString(16)}function k(e,t){t=t||1/0;for(var n,r=e.length,a=null,s=[],i=0;r>i;i++){if(n=e.charCodeAt(i),n>55295&&57344>n){if(!a){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&s.push(239,191,189);continue}a=n;continue}if(56320>n){(t-=3)>-1&&s.push(239,191,189),a=n;continue}n=a-55296<<10|n-56320|65536,a=null}else a&&((t-=3)>-1&&s.push(239,191,189),a=null);if(128>n){if((t-=1)<0)break;s.push(n)}else if(2048>n){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(2097152>n))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function D(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function I(e,t){for(var n,r,a,s=[],i=0;i<e.length&&!((t-=2)<0);i++)n=e.charCodeAt(i),r=n>>8,a=n%256,s.push(a),s.push(r);return s}function M(e){return P.toByteArray(N(e))}function T(e,t,n,r){for(var a=0;r>a&&!(a+n>=t.length||a>=e.length);a++)t[a+n]=e[a];return a}function A(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}var P=e("base64-js"),O=e("ieee754"),L=e("is-array");n.Buffer=r,n.SlowBuffer=a,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var F=1073741823,U={};r.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.compare=function(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,a=t.length,s=0,i=Math.min(n,a);i>s&&e[s]===t[s];s++);return s!==i&&(n=e[s],a=t[s]),a>n?-1:n>a?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!L(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new r(0);if(1===e.length)return e[0];var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var a=new r(t),s=0;for(n=0;n<e.length;n++){var i=e[n];i.copy(a,s),s+=i.length}return a},r.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":n=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;case"hex":n=e.length>>>1;break;case"utf8":case"utf-8":n=k(e).length;break;case"base64":n=M(e).length;break;default:n=e.length}return n},r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(e,t,n){var r=!1;if(t>>>=0,n=void 0===n||n===1/0?this.length:n>>>0,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return f(this,t,n);case"utf8":case"utf-8":return m(this,t,n);case"ascii":return d(this,t,n);case"binary":return h(this,t,n);case"base64":return p(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},r.prototype.compare=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:r.compare(this,e)},r.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,a=0;n+a<e.length;a++)if(e[n+a]===t[-1===r?0:a-r]){if(-1===r&&(r=a),a-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(r.isBuffer(e))return n(this,e,t);if("number"==typeof e)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.write=function(e,t,n,r){if(isFinite(t))isFinite(n)||(r=n,n=void 0);else{var a=r;r=t,t=n,n=a}if(t=Number(t)||0,0>n||0>t||t>this.length)throw new RangeError("attempt to write outside buffer bounds");var p=this.length-t;n?(n=Number(n),n>p&&(n=p)):n=p,r=String(r||"utf8").toLowerCase();var m;switch(r){case"hex":m=s(this,e,t,n);break;case"utf8":case"utf-8":m=i(this,e,t,n);break;case"ascii":m=o(this,e,t,n);break;case"binary":m=c(this,e,t,n);break;case"base64":m=u(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=l(this,e,t,n);break;default:throw new TypeError("Unknown encoding: "+r)}return m},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var a;if(r.TYPED_ARRAY_SUPPORT)a=r._augment(this.subarray(e,t));else{var s=t-e;a=new r(s,void 0);for(var i=0;s>i;i++)a[i]=this[i+e]}return a.length&&(a.parent=this.parent||this),a},r.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||g(e,t,this.length);for(var r=this[e],a=1,s=0;++s<t&&(a*=256);)r+=this[e+s]*a;return r},r.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||g(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},r.prototype.readUInt8=function(e,t){return t||g(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return t||g(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return t||g(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return t||g(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return t||g(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||g(e,t,this.length);for(var r=this[e],a=1,s=0;++s<t&&(a*=256);)r+=this[e+s]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},r.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||g(e,t,this.length);for(var r=t,a=1,s=this[e+--r];r>0&&(a*=256);)s+=this[e+--r]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*t)),s},r.prototype.readInt8=function(e,t){return t||g(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){t||g(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){t||g(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return t||g(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return t||g(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return t||g(e,4,this.length),O.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return t||g(e,4,this.length),O.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return t||g(e,8,this.length),O.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return t||g(e,8,this.length),O.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||y(this,e,t,n,Math.pow(2,8*n),0);var a=1,s=0;for(this[t]=255&e;++s<n&&(a*=256);)this[t+s]=e/a>>>0&255;return t+n},r.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||y(this,e,t,n,Math.pow(2,8*n),0);var a=n-1,s=1;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=e/s>>>0&255;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,1,255,0),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):b(this,e,t,!0),t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):b(this,e,t,!1),t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):E(this,e,t,!0),t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):E(this,e,t,!1),t+4},r.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||y(this,e,t,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var a=0,s=1,i=0>e?1:0;for(this[t]=255&e;++a<n&&(s*=256);)this[t+a]=(e/s>>0)-i&255;return t+n},r.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||y(this,e,t,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var a=n-1,s=1,i=0>e?1:0;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=(e/s>>0)-i&255;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,1,127,-128),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):b(this,e,t,!0),t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):b(this,e,t,!1),t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):E(this,e,t,!0),t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):E(this,e,t,!1),t+4},r.prototype.writeFloatLE=function(e,t,n){return S(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return S(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,a){if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&n>a&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var s=a-n;if(1e3>s||!r.TYPED_ARRAY_SUPPORT)for(var i=0;s>i;i++)e[i+t]=this[i+n];else e._set(this.subarray(n,n+s),t);return s},r.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var a=k(e.toString()),s=a.length;for(r=t;n>r;r++)this[r]=a[r%s]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var j=r.prototype;r._augment=function(e){return e.constructor=r,e._isBuffer=!0,e._set=e.set,e.get=j.get,e.set=j.set,e.write=j.write,e.toString=j.toString,e.toLocaleString=j.toString,e.toJSON=j.toJSON,e.equals=j.equals,e.compare=j.compare,e.indexOf=j.indexOf,e.copy=j.copy,e.slice=j.slice,e.readUIntLE=j.readUIntLE,e.readUIntBE=j.readUIntBE,e.readUInt8=j.readUInt8,e.readUInt16LE=j.readUInt16LE,e.readUInt16BE=j.readUInt16BE,e.readUInt32LE=j.readUInt32LE,e.readUInt32BE=j.readUInt32BE,e.readIntLE=j.readIntLE,e.readIntBE=j.readIntBE,e.readInt8=j.readInt8,e.readInt16LE=j.readInt16LE,e.readInt16BE=j.readInt16BE,e.readInt32LE=j.readInt32LE,e.readInt32BE=j.readInt32BE,e.readFloatLE=j.readFloatLE,e.readFloatBE=j.readFloatBE,e.readDoubleLE=j.readDoubleLE,e.readDoubleBE=j.readDoubleBE,e.writeUInt8=j.writeUInt8,e.writeUIntLE=j.writeUIntLE,e.writeUIntBE=j.writeUIntBE,e.writeUInt16LE=j.writeUInt16LE,e.writeUInt16BE=j.writeUInt16BE,e.writeUInt32LE=j.writeUInt32LE,e.writeUInt32BE=j.writeUInt32BE,e.writeIntLE=j.writeIntLE,e.writeIntBE=j.writeIntBE,e.writeInt8=j.writeInt8,e.writeInt16LE=j.writeInt16LE,e.writeInt16BE=j.writeInt16BE,e.writeInt32LE=j.writeInt32LE,e.writeInt32BE=j.writeInt32BE,e.writeFloatLE=j.writeFloatLE,e.writeFloatBE=j.writeFloatBE,e.writeDoubleLE=j.writeDoubleLE,e.writeDoubleBE=j.writeDoubleBE,e.fill=j.fill,e.inspect=j.inspect,e.toArrayBuffer=j.toArrayBuffer,e};var $=/[^+\/0-9A-z\-]/g},{"base64-js":4,ieee754:5,"is-array":6}],4:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===i||t===p?62:t===o||t===m?63:c>t?-1:c+10>t?t-c+26+26:l+26>t?t-l:u+26>t?t-u+26:void 0}function n(e){function n(e){u[p++]=e}var r,a,i,o,c,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;c="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,u=new s(3*e.length/4-c),i=c>0?e.length-4:e.length;var p=0;for(r=0,a=0;i>r;r+=4,a+=3)o=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&o)>>16),n((65280&o)>>8),n(255&o);return 2===c?(o=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&o)):1===c&&(o=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(o>>8&255),n(255&o)),u}function a(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var a,s,i,o=e.length%3,c="";for(a=0,i=e.length-o;i>a;a+=3)s=(e[a]<<16)+(e[a+1]<<8)+e[a+2],c+=n(s);switch(o){case 1:s=e[e.length-1],c+=t(s>>2),c+=t(s<<4&63),c+="==";break;case 2:s=(e[e.length-2]<<8)+e[e.length-1],c+=t(s>>10),c+=t(s>>4&63),c+=t(s<<2&63),c+="="}return c}var s="undefined"!=typeof Uint8Array?Uint8Array:Array,i="+".charCodeAt(0),o="/".charCodeAt(0),c="0".charCodeAt(0),u="a".charCodeAt(0),l="A".charCodeAt(0),p="-".charCodeAt(0),m="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=a}("undefined"==typeof n?this.base64js={}:n)},{}],5:[function(e,t,n){n.read=function(e,t,n,r,a){var s,i,o=8*a-r-1,c=(1<<o)-1,u=c>>1,l=-7,p=n?a-1:0,m=n?-1:1,d=e[t+p];for(p+=m,s=d&(1<<-l)-1,d>>=-l,l+=o;l>0;s=256*s+e[t+p],p+=m,l-=8);for(i=s&(1<<-l)-1,s>>=-l,l+=r;l>0;i=256*i+e[t+p],p+=m,l-=8);if(0===s)s=1-u;else{if(s===c)return i?NaN:(d?-1:1)*(1/0);i+=Math.pow(2,r),s-=u}return(d?-1:1)*i*Math.pow(2,s-r)},n.write=function(e,t,n,r,a,s){var i,o,c,u=8*s-a-1,l=(1<<u)-1,p=l>>1,m=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,h=r?1:-1,f=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),t+=i+p>=1?m/c:m*Math.pow(2,1-p),t*c>=2&&(i++,c/=2),i+p>=l?(o=0,i=l):i+p>=1?(o=(t*c-1)*Math.pow(2,a),i+=p):(o=t*Math.pow(2,p-1)*Math.pow(2,a),i=0));a>=8;e[n+d]=255&o,d+=h,o/=256,a-=8);for(i=i<<a|o,u+=a;u>0;e[n+d]=255&i,d+=h,i/=256,u-=8);e[n+d-h]|=128*f}},{}],6:[function(e,t,n){var r=Array.isArray,a=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==a.call(e)}},{}],7:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return a.exec(e).slice(1)};n.resolve=function(){for(var n="",a=!1,s=arguments.length-1;s>=-1&&!a;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(n=i+"/"+n,a="/"===i.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!a).join("/"),(a?"/":"")+n||"."},n.normalize=function(e){var a=n.isAbsolute(e),s="/"===i(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!a).join("/"),e||a||(e="."),e&&s&&(e+="/"),(a?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var a=r(e.split("/")),s=r(t.split("/")),i=Math.min(a.length,s.length),o=i,c=0;i>c;c++)if(a[c]!==s[c]){o=c;break}for(var u=[],c=o;c<a.length;c++)u.push("..");return u=u.concat(s.slice(o)),u.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=s(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=s(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return s(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:8}],8:[function(e,t,n){function r(){if(!o){o=!0;for(var e,t=i.length;t;){e=i,i=[];for(var n=-1;++n<t;)e[n]();t=i.length}o=!1}}function a(){}var s=t.exports={},i=[],o=!1;s.nextTick=function(e){i.push(e),o||setTimeout(r,0)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],9:[function(e,t,n){!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof n?n:e.esprima={})}(this,function(e){"use strict";function t(e,t){if(!e)throw new Error("ASSERT: "+t)}function n(){this.$data={}}function r(e){return e>=48&&57>=e}function a(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function s(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&" ᠎             　\ufeff".indexOf(String.fromCharCode(e))>0}function o(e){return 10===e||13===e||8232===e||8233===e}function c(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&er.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function u(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&er.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function l(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function p(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function m(e){return"eval"===e||"arguments"===e}function d(e){if(sr&&p(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function h(e,n,r,a,s){var i;t("number"==typeof r,"Comment must have valid position"),mr.lastCommentStart>=r||(mr.lastCommentStart=r,i={type:e,value:n},dr.range&&(i.range=[r,a]),dr.loc&&(i.loc=s),dr.comments.push(i),dr.attachComment&&(dr.leadingComments.push(i),dr.trailingComments.push(i)))}function f(){var e,t,n,r;for(e=ir-2,t={start:{line:or,column:ir-cr-2}};ur>ir;)if(n=ar.charCodeAt(ir),++ir,o(n))return dr.comments&&(r=ar.slice(e+2,ir-1),t.end={line:or,column:ir-cr-1},h("Line",r,e,ir-1,t)),13===n&&10===ar.charCodeAt(ir)&&++ir,++or,void(cr=ir);dr.comments&&(r=ar.slice(e+2,ir),t.end={line:or,column:ir-cr},h("Line",r,e,ir,t))}function v(){var e,t,n,r;for(dr.comments&&(e=ir-2,t={start:{line:or,column:ir-cr-2}});ur>ir;)if(n=ar.charCodeAt(ir),o(n))13===n&&10===ar.charCodeAt(ir+1)&&++ir,++or,++ir,cr=ir,ir>=ur&&J({},Zn.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===ar.charCodeAt(ir+1))return++ir,++ir,void(dr.comments&&(r=ar.slice(e+2,ir-2),
t.end={line:or,column:ir-cr},h("Block",r,e,ir,t)));++ir}else++ir;J({},Zn.UnexpectedToken,"ILLEGAL")}function g(){for(var e;ur>ir;)if(e=ar.charCodeAt(ir),i(e))++ir;else if(o(e))++ir,13===e&&10===ar.charCodeAt(ir)&&++ir,++or,cr=ir;else{if(47!==e)break;if(e=ar.charCodeAt(ir+1),47===e)++ir,++ir,f();else{if(42!==e)break;++ir,++ir,v()}}}function y(e){var t,n,r,s=0;for(n="u"===e?4:2,t=0;n>t;++t){if(!(ur>ir&&a(ar[ir])))return"";r=ar[ir++],s=16*s+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(s)}function b(){var e,t,n,r;for(e=ar[ir],t=0,"}"===e&&J({},Zn.UnexpectedToken,"ILLEGAL");ur>ir&&(e=ar[ir++],a(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&J({},Zn.UnexpectedToken,"ILLEGAL"),65535>=t?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function E(){var e,t;for(e=ar.charCodeAt(ir++),t=String.fromCharCode(e),92===e&&(117!==ar.charCodeAt(ir)&&J({},Zn.UnexpectedToken,"ILLEGAL"),++ir,e=y("u"),e&&"\\"!==e&&c(e.charCodeAt(0))||J({},Zn.UnexpectedToken,"ILLEGAL"),t=e);ur>ir&&(e=ar.charCodeAt(ir),u(e));)++ir,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==ar.charCodeAt(ir)&&J({},Zn.UnexpectedToken,"ILLEGAL"),++ir,e=y("u"),e&&"\\"!==e&&u(e.charCodeAt(0))||J({},Zn.UnexpectedToken,"ILLEGAL"),t+=e);return t}function C(){var e,t;for(e=ir++;ur>ir;){if(t=ar.charCodeAt(ir),92===t)return ir=e,E();if(!u(t))break;++ir}return ar.slice(e,ir)}function S(){var e,t,n;return e=ir,t=92===ar.charCodeAt(ir)?E():C(),n=1===t.length?Kn.Identifier:d(t)?Kn.Keyword:"null"===t?Kn.NullLiteral:"true"===t||"false"===t?Kn.BooleanLiteral:Kn.Identifier,{type:n,value:t,lineNumber:or,lineStart:cr,range:[e,ir]}}function R(){var e,t,n,r,a=ir,s=ar.charCodeAt(ir),i=ar[ir];if(mr.inJSXTag||mr.inJSXChild)switch(s){case 60:case 62:return++ir,{type:Kn.Punctuator,value:String.fromCharCode(s),lineNumber:or,lineStart:cr,range:[a,ir]}}switch(s){case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ir,dr.tokenize&&(40===s?dr.openParenToken=dr.tokens.length:123===s&&(dr.openCurlyToken=dr.tokens.length)),{type:Kn.Punctuator,value:String.fromCharCode(s),lineNumber:or,lineStart:cr,range:[a,ir]};default:if(e=ar.charCodeAt(ir+1),61===e)switch(s){case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 94:case 124:return ir+=2,{type:Kn.Punctuator,value:String.fromCharCode(s)+String.fromCharCode(e),lineNumber:or,lineStart:cr,range:[a,ir]};case 33:case 61:return ir+=2,61===ar.charCodeAt(ir)&&++ir,{type:Kn.Punctuator,value:ar.slice(a,ir),lineNumber:or,lineStart:cr,range:[a,ir]}}}return t=ar[ir+1],n=ar[ir+2],r=ar[ir+3],">"===i&&">"===t&&">"===n&&"="===r?(ir+=4,{type:Kn.Punctuator,value:">>>=",lineNumber:or,lineStart:cr,range:[a,ir]}):">"!==i||">"!==t||">"!==n||mr.inType?"<"===i&&"<"===t&&"="===n?(ir+=3,{type:Kn.Punctuator,value:"<<=",lineNumber:or,lineStart:cr,range:[a,ir]}):">"===i&&">"===t&&"="===n?(ir+=3,{type:Kn.Punctuator,value:">>=",lineNumber:or,lineStart:cr,range:[a,ir]}):"."===i&&"."===t&&"."===n?(ir+=3,{type:Kn.Punctuator,value:"...",lineNumber:or,lineStart:cr,range:[a,ir]}):i===t&&"+-<>&|".indexOf(i)>=0&&!mr.inType?(ir+=2,{type:Kn.Punctuator,value:i+t,lineNumber:or,lineStart:cr,range:[a,ir]}):"="===i&&">"===t?(ir+=2,{type:Kn.Punctuator,value:"=>",lineNumber:or,lineStart:cr,range:[a,ir]}):"<>=!+-*%&|^/".indexOf(i)>=0?(++ir,{type:Kn.Punctuator,value:i,lineNumber:or,lineStart:cr,range:[a,ir]}):"."===i?(++ir,{type:Kn.Punctuator,value:i,lineNumber:or,lineStart:cr,range:[a,ir]}):void J({},Zn.UnexpectedToken,"ILLEGAL"):(ir+=3,{type:Kn.Punctuator,value:">>>",lineNumber:or,lineStart:cr,range:[a,ir]})}function N(e){for(var t="";ur>ir&&a(ar[ir]);)t+=ar[ir++];return 0===t.length&&J({},Zn.UnexpectedToken,"ILLEGAL"),c(ar.charCodeAt(ir))&&J({},Zn.UnexpectedToken,"ILLEGAL"),{type:Kn.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:or,lineStart:cr,range:[e,ir]}}function w(e){var t,n;for(n="";ur>ir&&(t=ar[ir],"0"===t||"1"===t);)n+=ar[ir++];return 0===n.length&&J({},Zn.UnexpectedToken,"ILLEGAL"),ur>ir&&(t=ar.charCodeAt(ir),(c(t)||r(t))&&J({},Zn.UnexpectedToken,"ILLEGAL")),{type:Kn.NumericLiteral,value:parseInt(n,2),lineNumber:or,lineStart:cr,range:[e,ir]}}function _(e,t){var n,a;for(s(e)?(a=!0,n="0"+ar[ir++]):(a=!1,++ir,n="");ur>ir&&s(ar[ir]);)n+=ar[ir++];return a||0!==n.length||J({},Zn.UnexpectedToken,"ILLEGAL"),(c(ar.charCodeAt(ir))||r(ar.charCodeAt(ir)))&&J({},Zn.UnexpectedToken,"ILLEGAL"),{type:Kn.NumericLiteral,value:parseInt(n,8),octal:a,lineNumber:or,lineStart:cr,range:[t,ir]}}function x(){var e,n,a;if(a=ar[ir],t(r(a.charCodeAt(0))||"."===a,"Numeric literal must start with a decimal digit or a decimal point"),n=ir,e="","."!==a){if(e=ar[ir++],a=ar[ir],"0"===e){if("x"===a||"X"===a)return++ir,N(n);if("b"===a||"B"===a)return++ir,w(n);if("o"===a||"O"===a||s(a))return _(a,n);a&&r(a.charCodeAt(0))&&J({},Zn.UnexpectedToken,"ILLEGAL")}for(;r(ar.charCodeAt(ir));)e+=ar[ir++];a=ar[ir]}if("."===a){for(e+=ar[ir++];r(ar.charCodeAt(ir));)e+=ar[ir++];a=ar[ir]}if("e"===a||"E"===a)if(e+=ar[ir++],a=ar[ir],("+"===a||"-"===a)&&(e+=ar[ir++]),r(ar.charCodeAt(ir)))for(;r(ar.charCodeAt(ir));)e+=ar[ir++];else J({},Zn.UnexpectedToken,"ILLEGAL");return c(ar.charCodeAt(ir))&&J({},Zn.UnexpectedToken,"ILLEGAL"),{type:Kn.NumericLiteral,value:parseFloat(e),lineNumber:or,lineStart:cr,range:[n,ir]}}function k(){var e,n,r,a,i,c,u="",l=!1;for(e=ar[ir],t("'"===e||'"'===e,"String literal must starts with a quote"),n=ir,++ir;ur>ir;){if(r=ar[ir++],r===e){e="";break}if("\\"===r)if(r=ar[ir++],r&&o(r.charCodeAt(0)))++or,"\r"===r&&"\n"===ar[ir]&&++ir,cr=ir;else switch(r){case"n":u+="\n";break;case"r":u+="\r";break;case"t":u+="	";break;case"u":case"x":"{"===ar[ir]?(++ir,u+=b()):(c=ir,i=y(r),i?u+=i:(ir=c,u+=r));break;case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="";break;default:s(r)?(a="01234567".indexOf(r),0!==a&&(l=!0),ur>ir&&s(ar[ir])&&(l=!0,a=8*a+"01234567".indexOf(ar[ir++]),"0123".indexOf(r)>=0&&ur>ir&&s(ar[ir])&&(a=8*a+"01234567".indexOf(ar[ir++]))),u+=String.fromCharCode(a)):u+=r}else{if(o(r.charCodeAt(0)))break;u+=r}}return""!==e&&J({},Zn.UnexpectedToken,"ILLEGAL"),{type:Kn.StringLiteral,value:u,octal:l,lineNumber:or,lineStart:cr,range:[n,ir]}}function D(){var e,t,n,r,a,i,c,u,l="";for(n=!1,r=!1,t=ir,++ir;ur>ir;){if(e=ar[ir++],"`"===e){r=!0,n=!0;break}if("$"===e){if("{"===ar[ir]){++ir,n=!0;break}l+=e}else if("\\"===e)if(e=ar[ir++],o(e.charCodeAt(0)))++or,"\r"===e&&"\n"===ar[ir]&&++ir,cr=ir;else switch(e){case"n":l+="\n";break;case"r":l+="\r";break;case"t":l+="	";break;case"u":case"x":"{"===ar[ir]?(++ir,l+=b()):(a=ir,i=y(e),i?l+=i:(ir=a,l+=e));break;case"b":l+="\b";break;case"f":l+="\f";break;case"v":l+="";break;default:s(e)?(c="01234567".indexOf(e),0!==c&&(u=!0),ur>ir&&s(ar[ir])&&(u=!0,c=8*c+"01234567".indexOf(ar[ir++]),"0123".indexOf(e)>=0&&ur>ir&&s(ar[ir])&&(c=8*c+"01234567".indexOf(ar[ir++]))),l+=String.fromCharCode(c)):l+=e}else o(e.charCodeAt(0))?(++or,"\r"===e&&"\n"===ar[ir]&&++ir,cr=ir,l+="\n"):l+=e}return n||J({},Zn.UnexpectedToken,"ILLEGAL"),{type:Kn.Template,value:{cooked:l,raw:ar.slice(t+1,ir-(r?1:2))},tail:r,octal:u,lineNumber:or,lineStart:cr,range:[t,ir]}}function I(e){var t,n;return pr=null,g(),t=e.head?"`":"}",ar[ir]!==t&&J({},Zn.UnexpectedToken,"ILLEGAL"),n=D(),j(),n}function M(e,t){var n,r=e;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void J({},Zn.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{n=new RegExp(r)}catch(a){J({},Zn.InvalidRegExp)}try{return new RegExp(e,t)}catch(s){return null}}function T(){var e,n,r,a,s;for(e=ar[ir],t("/"===e,"Regular expression literal must start with a slash"),n=ar[ir++],r=!1,a=!1;ur>ir;)if(e=ar[ir++],n+=e,"\\"===e)e=ar[ir++],o(e.charCodeAt(0))&&J({},Zn.UnterminatedRegExp),n+=e;else if(o(e.charCodeAt(0)))J({},Zn.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){a=!0;break}"["===e&&(r=!0)}return a||J({},Zn.UnterminatedRegExp),s=n.substr(1,n.length-2),{value:s,literal:n}}function A(){var e,t,n,r;for(t="",n="";ur>ir&&(e=ar[ir],u(e.charCodeAt(0)));)if(++ir,"\\"===e&&ur>ir)if(e=ar[ir],"u"===e){if(++ir,r=ir,e=y("u"))for(n+=e,t+="\\u";ir>r;++r)t+=ar[r];else ir=r,n+="u",t+="\\u";K({},Zn.UnexpectedToken,"ILLEGAL")}else t+="\\",K({},Zn.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function P(){var e,t,n,r;return pr=null,g(),e=ir,t=T(),n=A(),r=M(t.value,n.value),dr.tokenize?{type:Kn.RegularExpression,value:r,regex:{pattern:t.value,flags:n.value},lineNumber:or,lineStart:cr,range:[e,ir]}:{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},range:[e,ir]}}function O(e){return e.type===Kn.Identifier||e.type===Kn.Keyword||e.type===Kn.BooleanLiteral||e.type===Kn.NullLiteral}function L(){var e,t;if(e=dr.tokens[dr.tokens.length-1],!e)return P();if("Punctuator"===e.type){if(")"===e.value)return t=dr.tokens[dr.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?R():P();if("}"===e.value){if(dr.tokens[dr.openCurlyToken-3]&&"Keyword"===dr.tokens[dr.openCurlyToken-3].type){if(t=dr.tokens[dr.openCurlyToken-4],!t)return R()}else{if(!dr.tokens[dr.openCurlyToken-4]||"Keyword"!==dr.tokens[dr.openCurlyToken-4].type)return R();if(t=dr.tokens[dr.openCurlyToken-5],!t)return P()}return Qn.indexOf(t.value)>=0?R():P()}return P()}return"Keyword"===e.type&&"this"!==e.value?P():R()}function F(){var e;return mr.inJSXChild||g(),ir>=ur?{type:Kn.EOF,lineNumber:or,lineStart:cr,range:[ir,ir]}:mr.inJSXChild?gn():(e=ar.charCodeAt(ir),40===e||41===e||58===e?R():39===e||34===e?mr.inJSXTag?vn():k():mr.inJSXTag&&pn(e)?dn():96===e?D():c(e)?S():46===e?r(ar.charCodeAt(ir+1))?x():R():r(e)?x():dr.tokenize&&47===e?L():R())}function U(){var e;return e=pr,ir=e.range[1],or=e.lineNumber,cr=e.lineStart,pr=F(),ir=e.range[1],or=e.lineNumber,cr=e.lineStart,e}function j(){var e,t,n;e=ir,t=or,n=cr,pr=F(),ir=e,or=t,cr=n}function $(){var e,t,n,r,a;return e="function"==typeof dr.advance?dr.advance:F,t=ir,n=or,r=cr,null===pr&&(pr=e()),ir=pr.range[1],or=pr.lineNumber,cr=pr.lineStart,a=e(),ir=t,or=n,cr=r,a}function q(e){ir=e.range[0],or=e.lineNumber,cr=e.lineStart,pr=e}function B(){return dr.loc||dr.range?(g(),{offset:ir,line:or,col:ir-cr}):void 0}function W(){return dr.loc||dr.range?{offset:ir,line:or,col:ir-cr}:void 0}function H(e){var t,n,r=dr.bottomRightStack,a=r[r.length-1];if(!(e.type===Yn.Program&&e.body.length>0)){if(dr.trailingComments.length>0?dr.trailingComments[0].range[0]>=e.range[1]?(n=dr.trailingComments,dr.trailingComments=[]):dr.trailingComments.length=0:a&&a.trailingComments&&a.trailingComments[0].range[0]>=e.range[1]&&(n=a.trailingComments,delete a.trailingComments),a)for(;a&&a.range[0]>=e.range[0];)t=a,a=r.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):dr.leadingComments.length>0&&dr.leadingComments[dr.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=dr.leadingComments,dr.leadingComments=[]),n&&(e.trailingComments=n),r.push(e)}}function V(e,t){return dr.range&&(t.range=[e.offset,ir]),dr.loc&&(t.loc={start:{line:e.line,column:e.col},end:{line:or,column:ir-cr}},t=lr.postProcess(t)),dr.attachComment&&H(t),t}function z(){var e,t,n,r;return e=ir,t=or,n=cr,g(),r=or!==t,ir=e,or=t,cr=n,r}function J(e,n){var r,a=Array.prototype.slice.call(arguments,2),s=n.replace(/%(\d)/g,function(e,n){return t(n<a.length,"Message reference must be in range"),a[n]});throw"number"==typeof e.lineNumber?(r=new Error("Line "+e.lineNumber+": "+s),r.index=e.range[0],r.lineNumber=e.lineNumber,r.column=e.range[0]-cr+1):(r=new Error("Line "+or+": "+s),r.index=ir,r.lineNumber=or,r.column=ir-cr+1),r.description=s,r}function K(){try{J.apply(null,arguments)}catch(e){if(!dr.errors)throw e;dr.errors.push(e)}}function X(e){if(e.type===Kn.EOF&&J(e,Zn.UnexpectedEOS),e.type===Kn.NumericLiteral&&J(e,Zn.UnexpectedNumber),(e.type===Kn.StringLiteral||e.type===Kn.JSXText)&&J(e,Zn.UnexpectedString),e.type===Kn.Identifier&&J(e,Zn.UnexpectedIdentifier),e.type===Kn.Keyword){if(l(e.value))J(e,Zn.UnexpectedReserved);else if(sr&&p(e.value))return void K(e,Zn.StrictReservedWord);J(e,Zn.UnexpectedToken,e.value)}e.type===Kn.Template&&J(e,Zn.UnexpectedTemplate,e.value.raw),J(e,Zn.UnexpectedToken,e.value)}function Q(e){var t=U();(t.type!==Kn.Punctuator||t.value!==e)&&X(t)}function Y(e,t){var n=U();(n.type!==(t?Kn.Identifier:Kn.Keyword)||n.value!==e)&&X(n)}function G(e){return Y(e,!0)}function Z(e){return pr.type===Kn.Punctuator&&pr.value===e}function ee(e,t){var n=t?Kn.Identifier:Kn.Keyword;return pr.type===n&&pr.value===e}function te(e){return ee(e,!0)}function ne(){var e;return pr.type!==Kn.Punctuator?!1:(e=pr.value,"="===e||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}function re(){return mr.yieldAllowed&&ee("yield",!sr)}function ae(){var e=pr,t=!1;return te("async")&&(U(),t=!z(),q(e)),t}function se(){return mr.awaitAllowed&&te("await")}function ie(){var e,t=ir,n=or,r=cr,a=pr;return 59===ar.charCodeAt(ir)?void U():(e=or,g(),or!==e?(ir=t,or=n,cr=r,void(pr=a)):Z(";")?void U():void(pr.type===Kn.EOF||Z("}")||X(pr)))}function oe(e){return e.type===Yn.Identifier||e.type===Yn.MemberExpression}function ce(e){return oe(e)||e.type===Yn.ObjectPattern||e.type===Yn.ArrayPattern}function ue(){var e,t=[],n=[],r=null,a=!0,s=B();for(Q("[");!Z("]");)"for"===pr.value&&pr.type===Kn.Keyword?(a||J({},Zn.ComprehensionError),ee("for"),e=It({ignoreBody:!0}),e.of=e.type===Yn.ForOfStatement,e.type=Yn.ComprehensionBlock,e.left.kind&&J({},Zn.ComprehensionError),n.push(e)):"if"===pr.value&&pr.type===Kn.Keyword?(a||J({},Zn.ComprehensionError),Y("if"),Q("("),r=$e(),Q(")")):","===pr.value&&pr.type===Kn.Punctuator?(a=!1,U(),t.push(null)):(e=Re(),t.push(e),e&&e.type===Yn.SpreadElement?Z("]")||J({},Zn.ElementAfterSpreadElement):Z("]")||ee("for")||ee("if")||(Q(","),a=!1));return Q("]"),r&&!n.length&&J({},Zn.ComprehensionRequiresBlock),n.length?(1!==t.length&&J({},Zn.ComprehensionError),V(s,lr.createComprehensionExpression(r,n,t[0]))):V(s,lr.createArrayExpression(t))}function le(e){var t,n,r,a,s,i,o=B();return t=sr,n=mr.yieldAllowed,mr.yieldAllowed=e.generator,r=mr.awaitAllowed,mr.awaitAllowed=e.async,a=e.params||[],s=e.defaults||[],i=Bt(),e.name&&sr&&m(a[0].name)&&K(e.name,Zn.StrictParamName),sr=t,mr.yieldAllowed=n,mr.awaitAllowed=r,V(o,lr.createFunctionExpression(null,a,s,i,e.rest||null,e.generator,i.type!==Yn.BlockStatement,e.async,e.returnType,e.typeParameters))}function pe(e){var t,n,r;return t=sr,sr=!0,n=zt(),n.stricted&&K(n.stricted,n.message),r=le({params:n.params,defaults:n.defaults,rest:n.rest,generator:e.generator,async:e.async,returnType:n.returnType,typeParameters:e.typeParameters}),sr=t,r}function me(){var e,t,n=B(),r=U();return r.type===Kn.StringLiteral||r.type===Kn.NumericLiteral?(sr&&r.octal&&K(r,Zn.StrictOctalLiteral),V(n,lr.createLiteral(r))):r.type===Kn.Punctuator&&"["===r.value?(n=B(),e=je(),t=V(n,e),Q("]"),t):V(n,lr.createIdentifier(r.value))}function de(){var e,t,n,r,a,s,i,o=B();return e=pr,a="["===e.value&&e.type===Kn.Punctuator,e.type===Kn.Identifier||a||ae()?(n=me(),Z(":")?(U(),V(o,lr.createProperty("init",n,je(),!1,!1,a))):Z("(")||Z("<")?(Z("<")&&(i=We()),V(o,lr.createProperty("init",n,pe({generator:!1,async:!1,typeParameters:i}),!0,!1,a))):"get"===e.value?(a="["===pr.value,t=me(),Q("("),Q(")"),Z(":")&&(s=ct()),V(o,lr.createProperty("get",t,le({generator:!1,async:!1,returnType:s}),!1,!1,a))):"set"===e.value?(a="["===pr.value,t=me(),Q("("),e=pr,r=[lt()],Q(")"),Z(":")&&(s=ct()),V(o,lr.createProperty("set",t,le({params:r,generator:!1,async:!1,name:e,returnType:s}),!1,!1,a))):"async"===e.value?(a="["===pr.value,t=me(),Z("<")&&(i=We()),V(o,lr.createProperty("init",t,pe({generator:!1,async:!0,typeParameters:i}),!0,!1,a))):(a&&X(pr),V(o,lr.createProperty("init",n,n,!1,!0,!1)))):e.type===Kn.EOF||e.type===Kn.Punctuator?(Z("*")||X(e),U(),a=pr.type===Kn.Punctuator&&"["===pr.value,n=me(),Z("<")&&(i=We()),Z("(")||X(U()),V(o,lr.createProperty("init",n,pe({generator:!0,typeParameters:i}),!0,!1,a))):(t=me(),Z(":")?(U(),V(o,lr.createProperty("init",t,je(),!1,!1,!1))):Z("(")||Z("<")?(Z("<")&&(i=We()),V(o,lr.createProperty("init",t,pe({generator:!1,typeParameters:i}),!0,!1,!1))):void X(U()))}function he(){var e=B();return Q("..."),V(e,lr.createSpreadProperty(je()))}function fe(e){var t=String;return e.type===Yn.Identifier?e.name:t(e.value)}function ve(){var e,t,r,a,s=[],i=new n,o=B(),c=String;for(Q("{");!Z("}");)Z("...")?e=he():(e=de(),t=e.key.type===Yn.Identifier?e.key.name:c(e.key.value),r="init"===e.kind?Gn.Data:"get"===e.kind?Gn.Get:Gn.Set,i.has(t)?(a=i.get(t),a===Gn.Data?sr&&r===Gn.Data?K({},Zn.StrictDuplicateProperty):r!==Gn.Data&&K({},Zn.AccessorDataProperty):r===Gn.Data?K({},Zn.AccessorDataProperty):a&r&&K({},Zn.AccessorGetSet),i.set(t,a|r)):i.set(t,r)),s.push(e),Z("}")||Q(",");return Q("}"),V(o,lr.createObjectExpression(s))}function ge(e){var t=B(),n=I(e);return sr&&n.octal&&J(n,Zn.StrictOctalLiteral),V(t,lr.createTemplateElement({raw:n.value.raw,cooked:n.value.cooked},n.tail))}function ye(){var e,t,n,r=B();for(e=ge({head:!0}),t=[e],n=[];!e.tail;)n.push($e()),e=ge({head:!1}),t.push(e);return V(r,lr.createTemplateLiteral(t,n))}function be(){var e,t,n;return Q("("),++mr.parenthesizedCount,t=B(),e=$e(),Z(":")&&(n=ct(),e=V(t,lr.createTypeCast(e,n))),Q(")"),e}function Ee(){var e;return ae()&&(e=$(),e.type===Kn.Keyword&&"function"===e.value)?!0:!1}function Ce(){var e,t,n,r;if(t=pr.type,t===Kn.Identifier)return e=B(),V(e,lr.createIdentifier(U().value));if(t===Kn.StringLiteral||t===Kn.NumericLiteral)return sr&&pr.octal&&K(pr,Zn.StrictOctalLiteral),e=B(),V(e,lr.createLiteral(U()));if(t===Kn.Keyword){if(ee("this"))return e=B(),U(),V(e,lr.createThisExpression());if(ee("function"))return Kt();if(ee("class"))return rn();if(ee("super"))return e=B(),U(),V(e,lr.createIdentifier("super"))}return t===Kn.BooleanLiteral?(e=B(),n=U(),n.value="true"===n.value,V(e,lr.createLiteral(n))):t===Kn.NullLiteral?(e=B(),n=U(),n.value=null,V(e,lr.createLiteral(n))):Z("[")?ue():Z("{")?ve():Z("(")?be():Z("/")||Z("/=")?(e=B(),r=lr.createLiteral(P()),j(),V(e,r)):t===Kn.Template?ye():Z("<")?Mn():void X(U())}function Se(){var e,t=[];if(Q("("),!Z(")"))for(;ur>ir&&(e=Re(),t.push(e),!Z(")"));)e.type===Yn.SpreadElement&&J({},Zn.ElementAfterSpreadElement),Q(",");return Q(")"),t}function Re(){if(Z("...")){var e=B();return U(),V(e,lr.createSpreadElement(je()))}return je()}function Ne(){var e=B(),t=U();return O(t)||X(t),V(e,lr.createIdentifier(t.value))}function we(){return Q("."),Ne()}function _e(){var e;return Q("["),e=$e(),Q("]"),e}function xe(){var e,t,n=B();return Y("new"),e=De(),t=Z("(")?Se():[],V(n,lr.createNewExpression(e,t))}function ke(){var e,t,n=B();for(e=ee("new")?xe():Ce();Z(".")||Z("[")||Z("(")||pr.type===Kn.Template;)Z("(")?(t=Se(),e=V(n,lr.createCallExpression(e,t))):e=Z("[")?V(n,lr.createMemberExpression("[",e,_e())):Z(".")?V(n,lr.createMemberExpression(".",e,we())):V(n,lr.createTaggedTemplateExpression(e,ye()));return e}function De(){var e,t=B();for(e=ee("new")?xe():Ce();Z(".")||Z("[")||pr.type===Kn.Template;)e=Z("[")?V(t,lr.createMemberExpression("[",e,_e())):Z(".")?V(t,lr.createMemberExpression(".",e,we())):V(t,lr.createTaggedTemplateExpression(e,ye()));return e}function Ie(){var e,t=B(),n=ke();return pr.type!==Kn.Punctuator?n:(!Z("++")&&!Z("--")||z()||(sr&&n.type===Yn.Identifier&&m(n.name)&&K({},Zn.StrictLHSPostfix),oe(n)||J({},Zn.InvalidLHSInAssignment),e=U(),n=V(t,lr.createPostfixExpression(e.value,n))),n)}function Me(){var e,t,n;return pr.type!==Kn.Punctuator&&pr.type!==Kn.Keyword?Ie():Z("++")||Z("--")?(e=B(),t=U(),n=Me(),sr&&n.type===Yn.Identifier&&m(n.name)&&K({},Zn.StrictLHSPrefix),oe(n)||J({},Zn.InvalidLHSInAssignment),V(e,lr.createUnaryExpression(t.value,n))):Z("+")||Z("-")||Z("~")||Z("!")?(e=B(),t=U(),n=Me(),V(e,lr.createUnaryExpression(t.value,n))):ee("delete")||ee("void")||ee("typeof")?(e=B(),t=U(),n=Me(),n=V(e,lr.createUnaryExpression(t.value,n)),sr&&"delete"===n.operator&&n.argument.type===Yn.Identifier&&K({},Zn.StrictDelete),n):Ie()}function Te(e,t){var n=0;if(e.type!==Kn.Punctuator&&e.type!==Kn.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function Ae(){var e,t,n,r,a,s,i,o,c,u,l;if(r=mr.allowIn,mr.allowIn=!0,u=B(),o=Me(),t=pr,n=Te(t,r),0===n)return o;for(t.prec=n,U(),l=[u,B()],s=Me(),a=[o,t,s];(n=Te(pr,r))>0;){for(;a.length>2&&n<=a[a.length-2].prec;)s=a.pop(),i=a.pop().value,o=a.pop(),e=lr.createBinaryExpression(i,o,s),l.pop(),u=l.pop(),V(u,e),a.push(e),l.push(u);t=U(),t.prec=n,a.push(t),l.push(B()),e=Me(),a.push(e)}for(mr.allowIn=r,c=a.length-1,e=a[c],l.pop();c>1;)e=lr.createBinaryExpression(a[c-1].value,a[c-2],e),c-=2,u=l.pop(),V(u,e);return e}function Pe(){var e,t,n,r,a=B();return e=Ae(),Z("?")&&(U(),t=mr.allowIn,mr.allowIn=!0,n=je(),mr.allowIn=t,Q(":"),r=je(),e=V(a,lr.createConditionalExpression(e,n,r))),e}function Oe(e){var t,n,r,a;if(e.type===Yn.ObjectExpression)for(e.type=Yn.ObjectPattern,t=0,n=e.properties.length;n>t;t+=1)r=e.properties[t],r.type===Yn.SpreadProperty?(n-1>t&&J({},Zn.PropertyAfterSpreadProperty),Oe(r.argument)):("init"!==r.kind&&J({},Zn.InvalidLHSInAssignment),Oe(r.value));else if(e.type===Yn.ArrayExpression)for(e.type=Yn.ArrayPattern,t=0,n=e.elements.length;n>t;t+=1)a=e.elements[t],a&&Oe(a);else e.type===Yn.Identifier?m(e.name)&&J({},Zn.InvalidLHSInAssignment):e.type===Yn.SpreadElement?(Oe(e.argument),e.argument.type===Yn.ObjectPattern&&J({},Zn.ObjectPatternAsSpread)):e.type!==Yn.MemberExpression&&e.type!==Yn.CallExpression&&e.type!==Yn.NewExpression&&J({},Zn.InvalidLHSInAssignment)}function Le(e,t){var n,r,a,s;if(t.type===Yn.ObjectExpression)for(t.type=Yn.ObjectPattern,n=0,r=t.properties.length;r>n;n+=1)a=t.properties[n],a.type===Yn.SpreadProperty?(r-1>n&&J({},Zn.PropertyAfterSpreadProperty),Le(e,a.argument)):("init"!==a.kind&&J({},Zn.InvalidLHSInFormalsList),Le(e,a.value));else if(t.type===Yn.ArrayExpression)for(t.type=Yn.ArrayPattern,n=0,r=t.elements.length;r>n;n+=1)s=t.elements[n],s&&Le(e,s);else t.type===Yn.Identifier?Ht(e,t,t.name):t.type===Yn.SpreadElement?(t.argument.type!==Yn.Identifier&&J({},Zn.InvalidLHSInFormalsList),Ht(e,t.argument,t.argument.name)):J({},Zn.InvalidLHSInFormalsList)}function Fe(e){var r,a,s,i,o,c,u,l;for(i=[],o=[],c=0,l=null,u={paramSet:new n},r=0,a=e.length;a>r;r+=1)if(s=e[r],s.type===Yn.Identifier)i.push(s),o.push(null),Ht(u,s,s.name);else if(s.type===Yn.ObjectExpression||s.type===Yn.ArrayExpression)Le(u,s),i.push(s),o.push(null);else if(s.type===Yn.SpreadElement)t(r===a-1,"It is guaranteed that SpreadElement is last element by parseExpression"),s.argument.type!==Yn.Identifier&&J({},Zn.InvalidLHSInFormalsList),Le(u,s.argument),l=s.argument;else{if(s.type!==Yn.AssignmentExpression)return null;i.push(s.left),o.push(s.right),++c,Ht(u,s.left,s.left.name)}return u.message===Zn.StrictParamDupe&&J(sr?u.stricted:u.firstRestricted,u.message),0===c&&(o=[]),{params:i,defaults:o,rest:l,stricted:u.stricted,firstRestricted:u.firstRestricted,message:u.message}}function Ue(e,t){var n,r,a,s;return Q("=>"),n=sr,r=mr.yieldAllowed,mr.yieldAllowed=!1,a=mr.awaitAllowed,mr.awaitAllowed=!!e.async,s=Bt(),sr&&e.firstRestricted&&J(e.firstRestricted,e.message),sr&&e.stricted&&K(e.stricted,e.message),sr=n,mr.yieldAllowed=r,mr.awaitAllowed=a,V(t,lr.createArrowFunctionExpression(e.params,e.defaults,s,e.rest,s.type!==Yn.BlockStatement,!!e.async))}function je(){var e,t,n,r,a,s=!1,i=pr,o=!1;if(re())return Xt();if(se())return Qt();if(a=mr.parenthesizedCount,e=B(),Ee())return Kt();if(ae()&&(o=!0,U()),Z("(")){if(n=$(),n.type===Kn.Punctuator&&")"===n.value||"..."===n.value)return r=zt(),Z("=>")||X(U()),r.async=o,Ue(r,e);s=!0}return n=pr,o&&!Z("(")&&n.type!==Kn.Identifier&&(o=!1,q(i)),t=Pe(),Z("=>")&&(mr.parenthesizedCount===a||mr.parenthesizedCount===a+1)&&(t.type===Yn.Identifier?r=Fe([t]):t.type===Yn.AssignmentExpression||t.type===Yn.ArrayExpression||t.type===Yn.ObjectExpression?(s||X(U()),r=Fe([t])):t.type===Yn.SequenceExpression&&(r=Fe(t.expressions)),r)?(r.async=o,Ue(r,e)):(o&&(o=!1,q(i),t=Pe()),ne()&&(sr&&t.type===Yn.Identifier&&m(t.name)&&K(n,Zn.StrictLHSAssignment),!Z("=")||t.type!==Yn.ObjectExpression&&t.type!==Yn.ArrayExpression?oe(t)||J({},Zn.InvalidLHSInAssignment):Oe(t),t=V(e,lr.createAssignmentExpression(U().value,t,je()))),t)}function $e(){var e,t,n,r,a;if(e=B(),t=je(),n=[t],Z(",")){for(;ur>ir&&Z(",");)if(U(),t=Re(),n.push(t),t.type===Yn.SpreadElement){a=!0,Z(")")||J({},Zn.ElementAfterSpreadElement);break}r=V(e,lr.createSequenceExpression(n))}return a&&"=>"!==$().value&&J({},Zn.IllegalSpread),r||t}function qe(){for(var e,t=[];ur>ir&&!Z("}")&&(e=sn(),"undefined"!=typeof e);)t.push(e);return t}function Be(){var e,t=B();return Q("{"),e=qe(),Q("}"),V(t,lr.createBlockStatement(e))}function We(){var e=B(),t=[];for(Q("<");!Z(">");)t.push(lt()),Z(">")||Q(",");return Q(">"),V(e,lr.createTypeParameterDeclaration(t))}function He(){var e=B(),t=mr.inType,n=[];for(mr.inType=!0,Q("<");!Z(">");)n.push(ot()),Z(">")||Q(",");return Q(">"),mr.inType=t,V(e,lr.createTypeParameterInstantiation(n))}function Ve(e,t){var n,r,a;return Q("["),n=me(),Q(":"),r=ot(),Q("]"),Q(":"),a=ot(),V(e,lr.createObjectTypeIndexer(n,r,a,t))}function ze(e){var t,n=[],r=null,a=null;for(Z("<")&&(a=We()),Q("(");pr.type===Kn.Identifier;)n.push(et()),Z(")")||Q(",");return Z("...")&&(U(),r=et()),Q(")"),Q(":"),t=ot(),V(e,lr.createFunctionTypeAnnotation(n,t,r,a))}function Je(e,t,n){var r,a=!1;return r=ze(e),V(e,lr.createObjectTypeProperty(n,r,a,t))}function Ke(e,t){var n=B();return V(e,lr.createObjectTypeCallProperty(ze(n),t))}function Xe(e){var t,n,r,a,s,i,o=[],c=[],u=!1,l=[];for(Q("{");!Z("}");)t=B(),i=sr?ee("static"):te("static"),e&&i&&(a=U(),s=!0),Z("[")?c.push(Ve(t,s)):Z("(")||Z("<")?o.push(Ke(t,e)):(s&&Z(":")?(n=V(t,lr.createIdentifier(a)),K(a,Zn.StrictReservedWord)):n=me(),Z("<")||Z("(")?l.push(Je(t,s,n)):(Z("?")&&(U(),u=!0),Q(":"),r=ot(),l.push(V(t,lr.createObjectTypeProperty(n,r,u,s))))),Z(";")?U():Z("}")||X(pr);return Q("}"),lr.createObjectTypeAnnotation(l,c,o)}function Qe(){var e,t=B(),n=null;for(e=ut();Z(".");)Q("."),e=V(t,lr.createQualifiedTypeIdentifier(e,ut()));return Z("<")&&(n=He()),V(t,lr.createGenericTypeAnnotation(e,n))}function Ye(){var e=B();return Y("void"),V(e,lr.createVoidTypeAnnotation())}function Ge(){var e,t=B();return Y("typeof"),e=nt(),V(t,lr.createTypeofTypeAnnotation(e))}function Ze(){var e=B(),t=[];for(Q("[");ur>ir&&!Z("]")&&(t.push(ot()),!Z("]"));)Q(",");return Q("]"),V(e,lr.createTupleTypeAnnotation(t))}function et(){var e,t,n=B(),r=!1;return e=ut(),Z("?")&&(U(),r=!0),Q(":"),t=ot(),V(n,lr.createFunctionTypeParam(e,t,r))}function tt(){for(var e={params:[],rest:null};pr.type===Kn.Identifier;)e.params.push(et()),Z(")")||Q(",");return Z("...")&&(U(),e.rest=et()),e}function nt(){var e,t,n,r,a=null,s=null,i=B(),o=null,c=!1;switch(pr.type){case Kn.Identifier:switch(pr.value){case"any":return U(),V(i,lr.createAnyTypeAnnotation());case"bool":case"boolean":return U(),V(i,lr.createBooleanTypeAnnotation());case"number":return U(),V(i,lr.createNumberTypeAnnotation());case"string":return U(),V(i,lr.createStringTypeAnnotation())}return V(i,Qe());case Kn.Punctuator:switch(pr.value){case"{":return V(i,Xe());case"[":return Ze();case"<":return t=We(),Q("("),e=tt(),a=e.params,o=e.rest,Q(")"),Q("=>"),s=ot(),V(i,lr.createFunctionTypeAnnotation(a,s,o,t));case"(":return U(),Z(")")||Z("...")||(pr.type===Kn.Identifier?(n=$(),c="?"!==n.value&&":"!==n.value):c=!0),c?(r=ot(),Q(")"),Z("=>")&&J({},Zn.ConfusedAboutFunctionType),r):(e=tt(),a=e.params,o=e.rest,Q(")"),Q("=>"),s=ot(),V(i,lr.createFunctionTypeAnnotation(a,s,o,null)))}break;case Kn.Keyword:switch(pr.value){case"void":return V(i,Ye());case"typeof":return V(i,Ge())}break;case Kn.StringLiteral:return n=U(),n.octal&&J(n,Zn.StrictOctalLiteral),V(i,lr.createStringLiteralTypeAnnotation(n))}X(pr)}function rt(){var e=B(),t=nt();return Z("[")?(Q("["),Q("]"),V(e,lr.createArrayTypeAnnotation(t))):t}function at(){var e=B();return Z("?")?(U(),V(e,lr.createNullableTypeAnnotation(at()))):rt()}function st(){var e,t,n=B();for(e=at(),t=[e];Z("&");)U(),t.push(at());return 1===t.length?e:V(n,lr.createIntersectionTypeAnnotation(t))}function it(){var e,t,n=B();for(e=st(),t=[e];Z("|");)U(),t.push(st());return 1===t.length?e:V(n,lr.createUnionTypeAnnotation(t))}function ot(){var e,t=mr.inType;return mr.inType=!0,e=it(),mr.inType=t,e}function ct(){var e,t=B();return Q(":"),e=ot(),V(t,lr.createTypeAnnotation(e))}function ut(){var e=B(),t=U();return t.type!==Kn.Identifier&&X(t),V(e,lr.createIdentifier(t.value))}function lt(e,t){var n=B(),r=ut(),a=!1;return t&&Z("?")&&(Q("?"),a=!0),(e||Z(":"))&&(r.typeAnnotation=ct(),r=V(n,r)),a&&(r.optional=!0,r=V(n,r)),r}function pt(e){var t,n=B(),r=null,a=B();return Z("{")?(t=ve(),Oe(t),Z(":")&&(t.typeAnnotation=ct(),V(a,t))):Z("[")?(t=ue(),Oe(t),Z(":")&&(t.typeAnnotation=ct(),V(a,t))):(t=mr.allowKeyword?Ne():lt(),sr&&m(t.name)&&K({},Zn.StrictVarName)),"const"===e?(Z("=")||J({},Zn.NoUninitializedConst),Q("="),r=je()):Z("=")&&(U(),r=je()),V(n,lr.createVariableDeclarator(t,r))}function mt(e){var t=[];do{if(t.push(pt(e)),!Z(","))break;U()}while(ur>ir);return t}function dt(){var e,t=B();return Y("var"),e=mt(),ie(),V(t,lr.createVariableDeclaration(e,"var"))}function ht(e){var t,n=B();return Y(e),t=mt(e),ie(),V(n,lr.createVariableDeclaration(t,e))}function ft(){var e,t=B();return pr.type!==Kn.StringLiteral&&J({},Zn.InvalidModuleSpecifier),e=lr.createModuleSpecifier(pr),U(),V(t,e)}function vt(){var e=B();return Q("*"),V(e,lr.createExportBatchSpecifier())}function gt(){var e,t=null,n=B();return ee("default")?(U(),e=V(n,lr.createIdentifier("default"))):e=ut(),te("as")&&(U(),t=Ne()),V(n,lr.createExportSpecifier(e,t))}function yt(){var e,t,n,r=null,a=null,s=[],i=B();if(Y("export"),ee("default")){if(U(),ee("function")||ee("class")){if(e=$(),O(e))return t=sn(),V(i,lr.createExportDeclaration(!0,t,[t.id],null));switch(pr.value){case"class":return V(i,lr.createExportDeclaration(!0,rn(),[],null));case"function":return V(i,lr.createExportDeclaration(!0,Kt(),[],null))}}return te("from")&&J({},Zn.UnexpectedToken,pr.value),r=Z("{")?ve():Z("[")?ue():je(),ie(),V(i,lr.createExportDeclaration(!0,r,[],null))}if(pr.type===Kn.Keyword||te("type"))switch(pr.value){case"type":case"let":case"const":case"var":case"class":case"function":return V(i,lr.createExportDeclaration(!1,sn(),s,null))}if(Z("*"))return s.push(vt()),te("from")||J({},pr.value?Zn.UnexpectedToken:Zn.MissingFromClause,pr.value),U(),a=ft(),ie(),V(i,lr.createExportDeclaration(!1,null,s,a));if(Q("{"),!Z("}"))do n=n||ee("default"),s.push(gt());while(Z(",")&&U());return Q("}"),te("from")?(U(),a=ft(),ie()):n?J({},pr.value?Zn.UnexpectedToken:Zn.MissingFromClause,pr.value):ie(),V(i,lr.createExportDeclaration(!1,r,s,a))}function bt(){var e,t=null,n=B();return e=Ne(),te("as")&&(U(),t=ut()),V(n,lr.createImportSpecifier(e,t))}function Et(){var e=[];if(Q("{"),!Z("}"))do e.push(bt());while(Z(",")&&U());return Q("}"),e}function Ct(){var e,t=B();return e=Ne(),V(t,lr.createImportDefaultSpecifier(e))}function St(){var e,t=B();return Q("*"),te("as")||J({},Zn.NoAsAfterImportNamespace),U(),e=Ne(),V(t,lr.createImportNamespaceSpecifier(e))}function Rt(){var e,t,n,r=B(),a=!1;return Y("import"),te("type")&&(n=$(),(n.type===Kn.Identifier&&"from"!==n.value||n.type===Kn.Punctuator&&("{"===n.value||"*"===n.value))&&(a=!0,U())),e=[],pr.type===Kn.StringLiteral?(t=ft(),ie(),V(r,lr.createImportDeclaration(e,t,a))):(!ee("default")&&O(pr)&&(e.push(Ct()),Z(",")&&U()),Z("*")?e.push(St()):Z("{")&&(e=e.concat(Et())),te("from")||J({},pr.value?Zn.UnexpectedToken:Zn.MissingFromClause,pr.value),
U(),t=ft(),ie(),V(r,lr.createImportDeclaration(e,t,a)))}function Nt(){var e=B();return Q(";"),V(e,lr.createEmptyStatement())}function wt(){var e=B(),t=$e();return ie(),V(e,lr.createExpressionStatement(t))}function _t(){var e,t,n,r=B();return Y("if"),Q("("),e=$e(),Q(")"),t=qt(),ee("else")?(U(),n=qt()):n=null,V(r,lr.createIfStatement(e,t,n))}function xt(){var e,t,n,r=B();return Y("do"),n=mr.inIteration,mr.inIteration=!0,e=qt(),mr.inIteration=n,Y("while"),Q("("),t=$e(),Q(")"),Z(";")&&U(),V(r,lr.createDoWhileStatement(e,t))}function kt(){var e,t,n,r=B();return Y("while"),Q("("),e=$e(),Q(")"),n=mr.inIteration,mr.inIteration=!0,t=qt(),mr.inIteration=n,V(r,lr.createWhileStatement(e,t))}function Dt(){var e=B(),t=U(),n=mt();return V(e,lr.createVariableDeclaration(n,t.value))}function It(e){var t,n,r,a,s,i,o,c,u=B();return t=n=r=null,Y("for"),te("each")&&J({},Zn.EachNotAllowed),Q("("),Z(";")?U():(ee("var")||ee("let")||ee("const")?(mr.allowIn=!1,t=Dt(),mr.allowIn=!0,1===t.declarations.length&&(ee("in")||te("of"))&&(o=pr,("in"!==o.value&&"var"===t.kind||!t.declarations[0].init)&&(U(),a=t,s=$e(),t=null))):(mr.allowIn=!1,t=$e(),mr.allowIn=!0,te("of")?(o=U(),a=t,s=$e(),t=null):ee("in")&&(ce(t)||J({},Zn.InvalidLHSInForIn),o=U(),a=t,s=$e(),t=null)),"undefined"==typeof a&&Q(";")),"undefined"==typeof a&&(Z(";")||(n=$e()),Q(";"),Z(")")||(r=$e())),Q(")"),c=mr.inIteration,mr.inIteration=!0,void 0!==e&&e.ignoreBody||(i=qt()),mr.inIteration=c,"undefined"==typeof a?V(u,lr.createForStatement(t,n,r,i)):"in"===o.value?V(u,lr.createForInStatement(a,s,i)):V(u,lr.createForOfStatement(a,s,i))}function Mt(){var e=null,t=B();return Y("continue"),59===ar.charCodeAt(ir)?(U(),mr.inIteration||J({},Zn.IllegalContinue),V(t,lr.createContinueStatement(null))):z()?(mr.inIteration||J({},Zn.IllegalContinue),V(t,lr.createContinueStatement(null))):(pr.type===Kn.Identifier&&(e=ut(),mr.labelSet.has(e.name)||J({},Zn.UnknownLabel,e.name)),ie(),null!==e||mr.inIteration||J({},Zn.IllegalContinue),V(t,lr.createContinueStatement(e)))}function Tt(){var e=null,t=B();return Y("break"),59===ar.charCodeAt(ir)?(U(),mr.inIteration||mr.inSwitch||J({},Zn.IllegalBreak),V(t,lr.createBreakStatement(null))):z()?(mr.inIteration||mr.inSwitch||J({},Zn.IllegalBreak),V(t,lr.createBreakStatement(null))):(pr.type===Kn.Identifier&&(e=ut(),mr.labelSet.has(e.name)||J({},Zn.UnknownLabel,e.name)),ie(),null!==e||mr.inIteration||mr.inSwitch||J({},Zn.IllegalBreak),V(t,lr.createBreakStatement(e)))}function At(){var e=null,t=B();return Y("return"),mr.inFunctionBody||K({},Zn.IllegalReturn),32===ar.charCodeAt(ir)&&c(ar.charCodeAt(ir+1))?(e=$e(),ie(),V(t,lr.createReturnStatement(e))):z()?V(t,lr.createReturnStatement(null)):(Z(";")||Z("}")||pr.type===Kn.EOF||(e=$e()),ie(),V(t,lr.createReturnStatement(e)))}function Pt(){var e,t,n=B();return sr&&K({},Zn.StrictModeWith),Y("with"),Q("("),e=$e(),Q(")"),t=qt(),V(n,lr.createWithStatement(e,t))}function Ot(){var e,t,n=[],r=B();for(ee("default")?(U(),e=null):(Y("case"),e=$e()),Q(":");ur>ir&&!(Z("}")||ee("default")||ee("case"))&&(t=sn(),"undefined"!=typeof t);)n.push(t);return V(r,lr.createSwitchCase(e,n))}function Lt(){var e,t,n,r,a,s=B();if(Y("switch"),Q("("),e=$e(),Q(")"),Q("{"),t=[],Z("}"))return U(),V(s,lr.createSwitchStatement(e,t));for(r=mr.inSwitch,mr.inSwitch=!0,a=!1;ur>ir&&!Z("}");)n=Ot(),null===n.test&&(a&&J({},Zn.MultipleDefaultsInSwitch),a=!0),t.push(n);return mr.inSwitch=r,Q("}"),V(s,lr.createSwitchStatement(e,t))}function Ft(){var e,t=B();return Y("throw"),z()&&J({},Zn.NewlineAfterThrow),e=$e(),ie(),V(t,lr.createThrowStatement(e))}function Ut(){var e,t,n=B();return Y("catch"),Q("("),Z(")")&&X(pr),e=$e(),sr&&e.type===Yn.Identifier&&m(e.name)&&K({},Zn.StrictCatchVariable),Q(")"),t=Be(),V(n,lr.createCatchClause(e,t))}function jt(){var e,t=[],n=null,r=B();return Y("try"),e=Be(),ee("catch")&&t.push(Ut()),ee("finally")&&(U(),n=Be()),0!==t.length||n||J({},Zn.NoCatchOrFinally),V(r,lr.createTryStatement(e,[],t,n))}function $t(){var e=B();return Y("debugger"),ie(),V(e,lr.createDebuggerStatement())}function qt(){var e,t,n,r=pr.type;if(r===Kn.EOF&&X(pr),r===Kn.Punctuator)switch(pr.value){case";":return Nt();case"{":return Be();case"(":return wt()}if(r===Kn.Keyword)switch(pr.value){case"break":return Tt();case"continue":return Mt();case"debugger":return $t();case"do":return xt();case"for":return It();case"function":return Jt();case"class":return an();case"if":return _t();case"return":return At();case"switch":return Lt();case"throw":return Ft();case"try":return jt();case"var":return dt();case"while":return kt();case"with":return Pt()}return Ee()?Jt():(e=B(),t=$e(),t.type===Yn.Identifier&&Z(":")?(U(),mr.labelSet.has(t.name)&&J({},Zn.Redeclaration,"Label",t.name),mr.labelSet.set(t.name,!0),n=qt(),mr.labelSet["delete"](t.name),V(e,lr.createLabeledStatement(t,n))):(ie(),V(e,lr.createExpressionStatement(t))))}function Bt(){return Z("{")?Wt():je()}function Wt(){var e,t,r,a,s,i,o,c,u,l=[],p=B();for(Q("{");ur>ir&&pr.type===Kn.StringLiteral&&(t=pr,e=sn(),l.push(e),e.expression.type===Yn.Literal);)r=ar.slice(t.range[0]+1,t.range[1]-1),"use strict"===r?(sr=!0,a&&K(a,Zn.StrictOctalLiteral)):!a&&t.octal&&(a=t);for(s=mr.labelSet,i=mr.inIteration,o=mr.inSwitch,c=mr.inFunctionBody,u=mr.parenthesizedCount,mr.labelSet=new n,mr.inIteration=!1,mr.inSwitch=!1,mr.inFunctionBody=!0,mr.parenthesizedCount=0;ur>ir&&!Z("}")&&(e=sn(),"undefined"!=typeof e);)l.push(e);return Q("}"),mr.labelSet=s,mr.inIteration=i,mr.inSwitch=o,mr.inFunctionBody=c,mr.parenthesizedCount=u,V(p,lr.createBlockStatement(l))}function Ht(e,t,n){sr?(m(n)&&(e.stricted=t,e.message=Zn.StrictParamName),e.paramSet.has(n)&&(e.stricted=t,e.message=Zn.StrictParamDupe)):e.firstRestricted||(m(n)?(e.firstRestricted=t,e.message=Zn.StrictParamName):p(n)?(e.firstRestricted=t,e.message=Zn.StrictReservedWord):e.paramSet.has(n)&&(e.firstRestricted=t,e.message=Zn.StrictParamDupe)),e.paramSet.set(n,!0)}function Vt(e){var t,n,r,a,s;return n=pr,"..."===n.value&&(n=U(),r=!0),Z("[")?(t=B(),a=ue(),Le(e,a),Z(":")&&(a.typeAnnotation=ct(),V(t,a))):Z("{")?(t=B(),r&&J({},Zn.ObjectPatternAsRestParameter),a=ve(),Le(e,a),Z(":")&&(a.typeAnnotation=ct(),V(t,a))):(a=r?lt(!1,!1):lt(!1,!0),Ht(e,n,n.value)),Z("=")&&(r&&K(pr,Zn.DefaultRestParameter),U(),s=je(),++e.defaultCount),r?(Z(")")||J({},Zn.ParameterAfterRestParameter),e.rest=a,!1):(e.params.push(a),e.defaults.push(s),!Z(")"))}function zt(e){var t,r=B();if(t={params:[],defaultCount:0,defaults:[],rest:null,firstRestricted:e},Q("("),!Z(")"))for(t.paramSet=new n;ur>ir&&Vt(t);)Q(",");return Q(")"),0===t.defaultCount&&(t.defaults=[]),Z(":")&&(t.returnType=ct()),V(r,t)}function Jt(){var e,t,n,r,a,s,i,o,c,u,l,d,h=B();return o=!1,ae()&&(U(),o=!0),Y("function"),i=!1,Z("*")&&(U(),i=!0),n=pr,e=ut(),Z("<")&&(d=We()),sr?m(n.value)&&K(n,Zn.StrictFunctionName):m(n.value)?(a=n,s=Zn.StrictFunctionName):p(n.value)&&(a=n,s=Zn.StrictReservedWord),r=zt(a),a=r.firstRestricted,r.message&&(s=r.message),c=sr,u=mr.yieldAllowed,mr.yieldAllowed=i,l=mr.awaitAllowed,mr.awaitAllowed=o,t=Wt(),sr&&a&&J(a,s),sr&&r.stricted&&K(r.stricted,s),sr=c,mr.yieldAllowed=u,mr.awaitAllowed=l,V(h,lr.createFunctionDeclaration(e,r.params,r.defaults,t,r.rest,i,!1,o,r.returnType,d))}function Kt(){var e,t,n,r,a,s,i,o,c,u,l,d=null,h=B();return i=!1,ae()&&(U(),i=!0),Y("function"),s=!1,Z("*")&&(U(),s=!0),Z("(")||(Z("<")||(e=pr,d=ut(),sr?m(e.value)&&K(e,Zn.StrictFunctionName):m(e.value)?(t=e,n=Zn.StrictFunctionName):p(e.value)&&(t=e,n=Zn.StrictReservedWord)),Z("<")&&(l=We())),r=zt(t),t=r.firstRestricted,r.message&&(n=r.message),o=sr,c=mr.yieldAllowed,mr.yieldAllowed=s,u=mr.awaitAllowed,mr.awaitAllowed=i,a=Wt(),sr&&t&&J(t,n),sr&&r.stricted&&K(r.stricted,n),sr=o,mr.yieldAllowed=c,mr.awaitAllowed=u,V(h,lr.createFunctionExpression(d,r.params,r.defaults,a,r.rest,s,!1,i,r.returnType,l))}function Xt(){var e,t,n=B();return Y("yield",!sr),e=!1,Z("*")&&(U(),e=!0),t=je(),V(n,lr.createYieldExpression(t,e))}function Qt(){var e,t=B();return G("await"),e=je(),V(t,lr.createAwaitExpression(e))}function Yt(e){return"get"===e.kind||"set"===e.kind||e.value.generator}function Gt(e,t,n,r){var a,s,i,o,c,u,l;return i=t?rr["static"]:rr.prototype,n?lr.createMethodDefinition(i,"",e,pe({generator:!0}),r):(u="Identifier"===e.type&&e.name,"get"!==u||Z("(")?"set"!==u||Z("(")?(Z("<")&&(c=We()),o="async"===u&&!Z("("),o&&(e=me()),lr.createMethodDefinition(i,"",e,pe({generator:!1,async:o,typeParameters:c}),r)):(e=me(),Q("("),a=pr,s=[lt()],Q(")"),Z(":")&&(l=ct()),lr.createMethodDefinition(i,"set",e,le({params:s,generator:!1,name:a,returnType:l}),r)):(e=me(),Q("("),Q(")"),Z(":")&&(l=ct()),lr.createMethodDefinition(i,"get",e,le({generator:!1,returnType:l}),r)))}function Zt(e,t,n){var r;return r=ct(),Q(";"),lr.createClassProperty(e,r,t,n)}function en(){var e,t,n=!1,r=!1,a=B(),s=!1;return Z(";")?void U():("static"===pr.value&&(U(),s=!0),Z("*")&&(U(),r=!0),t=pr,(te("get")||te("set"))&&(t=$()),t.type===Kn.Punctuator&&"["===t.value&&(n=!0),e=me(),r||":"!==pr.value?V(a,Gt(e,s,r,n)):V(a,Zt(e,n,s)))}function tn(){var e,t,r,a=[],s={},i=B();for(s[rr["static"]]=new n,s[rr.prototype]=new n,Q("{");ur>ir&&!Z("}");)e=en(s),"undefined"!=typeof e&&(a.push(e),t=!e.computed&&fe(e.key),t!==!1&&(r=e["static"]?rr["static"]:rr.prototype,e.type===Yn.MethodDefinition&&("constructor"!==t||e["static"]||(Yt(e)&&J(e,Zn.IllegalClassConstructorProperty),s[rr.prototype].has("constructor")&&J(e.key,Zn.IllegalDuplicateClassProperty)),s[r].set(t,!0))));return Q("}"),V(i,lr.createClassBody(a))}function nn(){var e,t,n,r=[];for(sr?Y("implements"):G("implements");ur>ir&&(t=B(),e=ut(),n=Z("<")?He():null,r.push(V(t,lr.createClassImplements(e,n))),Z(","));)Q(",");return r}function rn(){var e,t,n,r,a,s,i=null,o=B();return Y("class"),s=sr?ee("implements"):te("implements"),ee("extends")||s||Z("{")||(e=ut()),Z("<")&&(a=We()),ee("extends")&&(Y("extends"),n=mr.yieldAllowed,mr.yieldAllowed=!1,i=ke(),Z("<")&&(r=He()),mr.yieldAllowed=n),(sr?ee("implements"):te("implements"))&&(t=nn()),V(o,lr.createClassExpression(e,i,tn(),a,r,t))}function an(){var e,t,n,r,a,s=null,i=B();return Y("class"),e=ut(),Z("<")&&(a=We()),ee("extends")&&(Y("extends"),n=mr.yieldAllowed,mr.yieldAllowed=!1,s=ke(),Z("<")&&(r=He()),mr.yieldAllowed=n),(sr?ee("implements"):te("implements"))&&(t=nn()),V(i,lr.createClassDeclaration(e,s,tn(),a,r,t))}function sn(){var e;if(pr.type===Kn.Keyword)switch(pr.value){case"const":case"let":return ht(pr.value);case"function":return Jt();case"export":return K({},Zn.IllegalExportDeclaration),yt();case"import":return K({},Zn.IllegalImportDeclaration),Rt();case"interface":return $().type===Kn.Identifier?On():qt();default:return qt()}if(te("type")&&$().type===Kn.Identifier)return Tn();if(te("interface")&&$().type===Kn.Identifier)return On();if(te("declare"))if(e=$(),e.type===Kn.Keyword)switch(e.value){case"class":return Ln();case"function":return Fn();case"var":return Un()}else if(e.type===Kn.Identifier&&"module"===e.value)return jn();return pr.type!==Kn.EOF?qt():void 0}function on(){var e="module"===dr.sourceType||"nonStrictModule"===dr.sourceType;if(e&&pr.type===Kn.Keyword)switch(pr.value){case"export":return yt();case"import":return Rt()}return sn()}function cn(){for(var e,t,n,r,a=[];ur>ir&&(t=pr,t.type===Kn.StringLiteral)&&(e=on(),a.push(e),e.expression.type===Yn.Literal);)n=ar.slice(t.range[0]+1,t.range[1]-1),"use strict"===n?(sr=!0,r&&K(r,Zn.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;ur>ir&&(e=on(),"undefined"!=typeof e);)a.push(e);return a}function un(){var e,t=B();return sr="module"===dr.sourceType,j(),e=cn(),V(t,lr.createProgram(e))}function ln(e){return e.type===Yn.JSXIdentifier?e.name:e.type===Yn.JSXNamespacedName?e.namespace.name+":"+e.name.name:e.type===Yn.JSXMemberExpression?ln(e.object)+"."+ln(e.property):void X(e)}function pn(e){return 92!==e&&c(e)}function mn(e){return 92!==e&&(45===e||u(e))}function dn(){var e,t,n="";for(t=ir;ur>ir&&(e=ar.charCodeAt(ir),mn(e));)n+=ar[ir++];return{type:Kn.JSXIdentifier,value:n,lineNumber:or,lineStart:cr,range:[t,ir]}}function hn(){var e,n,r="",a=ir,s=0;for(e=ar[ir],t("&"===e,"Entity must start with an ampersand"),ir++;ur>ir&&s++<10&&(e=ar[ir++],";"!==e);)r+=e;if(";"===e)if("#"===r[0]){if(n="x"===r[1]?+("0"+r.substr(1)):+r.substr(1).replace(er.LeadingZeros,""),!isNaN(n))return String.fromCharCode(n)}else if(nr[r])return nr[r];return ir=a+1,"&"}function fn(e){var t,n,r="";for(n=ir;ur>ir&&(t=ar[ir],-1===e.indexOf(t));)"&"===t?r+=hn():(ir++,"\r"===t&&"\n"===ar[ir]&&(r+=t,t=ar[ir],ir++),o(t.charCodeAt(0))&&(++or,cr=ir),r+=t);return{type:Kn.JSXText,value:r,lineNumber:or,lineStart:cr,range:[n,ir]}}function vn(){var e,n,r;return n=ar[ir],t("'"===n||'"'===n,"String literal must starts with a quote"),r=ir,++ir,e=fn([n]),n!==ar[ir]&&J({},Zn.UnexpectedToken,"ILLEGAL"),++ir,e.range=[r,ir],e}function gn(){var e=ar.charCodeAt(ir);return 60!==e&&62!==e&&123!==e&&125!==e?fn(["<",">","{","}"]):R()}function yn(){var e,t=B();return pr.type!==Kn.JSXIdentifier&&X(pr),e=U(),V(t,lr.createJSXIdentifier(e.value))}function bn(){var e,t,n=B();return e=yn(),Q(":"),t=yn(),V(n,lr.createJSXNamespacedName(e,t))}function En(){for(var e=B(),t=yn();Z(".");)U(),t=V(e,lr.createJSXMemberExpression(t,yn()));return t}function Cn(){return":"===$().value?bn():"."===$().value?En():yn()}function Sn(){return":"===$().value?bn():yn()}function Rn(){var e,t;return Z("{")?(e=wn(),e.expression.type===Yn.JSXEmptyExpression&&J(e,"JSX attributes must only be assigned a non-empty expression")):Z("<")?e=Mn():pr.type===Kn.JSXText?(t=B(),e=V(t,lr.createLiteral(U()))):J({},Zn.InvalidJSXAttributeValue),e}function Nn(){for(var e=W();"}"!==ar.charAt(ir);)ir++;return V(e,lr.createJSXEmptyExpression())}function wn(){var e,t,n,r=B();return t=mr.inJSXChild,n=mr.inJSXTag,mr.inJSXChild=!1,mr.inJSXTag=!1,Q("{"),e=Z("}")?Nn():$e(),mr.inJSXChild=t,mr.inJSXTag=n,Q("}"),V(r,lr.createJSXExpressionContainer(e))}function _n(){var e,t,n,r=B();return t=mr.inJSXChild,n=mr.inJSXTag,mr.inJSXChild=!1,mr.inJSXTag=!1,Q("{"),Q("..."),e=je(),mr.inJSXChild=t,mr.inJSXTag=n,Q("}"),V(r,lr.createJSXSpreadAttribute(e))}function xn(){var e,t;return Z("{")?_n():(t=B(),e=Sn(),Z("=")?(U(),V(t,lr.createJSXAttribute(e,Rn()))):V(t,lr.createJSXAttribute(e)))}function kn(){var e,t;return Z("{")?e=wn():pr.type===Kn.JSXText?(t=W(),e=V(t,lr.createLiteral(U()))):Z("<")?e=Mn():X(pr),e}function Dn(){var e,t,n,r=B();return t=mr.inJSXChild,n=mr.inJSXTag,mr.inJSXChild=!1,mr.inJSXTag=!0,Q("<"),Q("/"),e=Cn(),mr.inJSXChild=t,mr.inJSXTag=n,Q(">"),V(r,lr.createJSXClosingElement(e))}function In(){var e,t,n,r=[],a=!1,s=B();for(t=mr.inJSXChild,n=mr.inJSXTag,mr.inJSXChild=!1,mr.inJSXTag=!0,Q("<"),e=Cn();ur>ir&&"/"!==pr.value&&">"!==pr.value;)r.push(xn());return mr.inJSXTag=n,"/"===pr.value?(Q("/"),mr.inJSXChild=t,Q(">"),a=!0):(mr.inJSXChild=!0,Q(">")),V(s,lr.createJSXOpeningElement(e,r,a))}function Mn(){var e,t,n,r=null,a=[],s=B();if(t=mr.inJSXChild,n=mr.inJSXTag,e=In(),!e.selfClosing){for(;ur>ir&&(mr.inJSXChild=!1,"<"!==pr.value||"/"!==$().value);)mr.inJSXChild=!0,a.push(kn());mr.inJSXChild=t,mr.inJSXTag=n,r=Dn(),ln(r.name)!==ln(e.name)&&J({},Zn.ExpectedJSXClosingTag,ln(e.name))}return!t&&Z("<")&&J(pr,Zn.AdjacentJSXElements),V(s,lr.createJSXElement(e,r,a))}function Tn(){var e,t,n=B(),r=null;return G("type"),e=ut(),Z("<")&&(r=We()),Q("="),t=ot(),ie(),V(n,lr.createTypeAlias(e,r,t))}function An(){var e,t=B(),n=null;return e=ut(),Z("<")&&(n=He()),V(t,lr.createInterfaceExtends(e,n))}function Pn(e,t){var n,r,a,s=[],i=null;if(a=ut(),Z("<")&&(i=We()),ee("extends"))for(Y("extends");ur>ir&&(s.push(An()),Z(","));)Q(",");return r=B(),n=V(r,Xe(t)),V(e,lr.createInterface(a,i,n,s))}function On(){var e=B();return sr?Y("interface"):G("interface"),Pn(e,!1)}function Ln(){var e,t=B();return G("declare"),Y("class"),e=Pn(t,!0),e.type=Yn.DeclareClass,e}function Fn(){var e,t,n,r,a,s,i,o,c=B(),u=null;return G("declare"),Y("function"),t=B(),e=ut(),o=B(),Z("<")&&(u=We()),Q("("),s=tt(),n=s.params,a=s.rest,Q(")"),Q(":"),r=ot(),i=V(o,lr.createFunctionTypeAnnotation(n,r,a,u)),e.typeAnnotation=V(o,lr.createTypeAnnotation(i)),V(t,e),ie(),V(c,lr.createDeclareFunction(e))}function Un(){var e,t=B();return G("declare"),Y("var"),e=lt(),ie(),V(t,lr.createDeclareVariable(e))}function jn(){var e,t,n,r,a=[],s=B();for(G("declare"),G("module"),pr.type===Kn.StringLiteral?(sr&&pr.octal&&K(pr,Zn.StrictOctalLiteral),n=B(),t=V(n,lr.createLiteral(U()))):t=ut(),e=B(),Q("{");ur>ir&&!Z("}");)switch(r=$(),r.value){case"class":a.push(Ln());break;case"function":a.push(Fn());break;case"var":a.push(Un());break;default:X(pr)}return Q("}"),V(s,lr.createDeclareModule(t,V(e,lr.createBlockStatement(a))))}function $n(){var e,t,n,r,a;return mr.inJSXChild||g(),e={start:{line:or,column:ir-cr}},t=dr.advance(),e.end={line:or,column:ir-cr},t.type!==Kn.EOF&&(n=[t.range[0],t.range[1]],r=ar.slice(t.range[0],t.range[1]),a={type:Xn[t.type],value:r,range:n,loc:e},t.regex&&(a.regex={pattern:t.regex.pattern,flags:t.regex.flags}),dr.tokens.push(a)),t}function qn(){var e,t,n,r;return g(),e=ir,t={start:{line:or,column:ir-cr}},n=dr.scanRegExp(),t.end={line:or,column:ir-cr},dr.tokenize||(dr.tokens.length>0&&(r=dr.tokens[dr.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"===r.value||"/="===r.value)&&dr.tokens.pop()),dr.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,ir],loc:t})),n}function Bn(){var e,t,n,r=[];for(e=0;e<dr.tokens.length;++e)t=dr.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),dr.range&&(n.range=t.range),dr.loc&&(n.loc=t.loc),r.push(n);dr.tokens=r}function Wn(){"undefined"!=typeof dr.tokens&&(dr.advance=F,dr.scanRegExp=P,F=$n,P=qn)}function Hn(){"function"==typeof dr.scanRegExp&&(F=dr.advance,P=dr.scanRegExp)}function Vn(e,t){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}function zn(e,t){var r,a,s;r=String,"string"==typeof e||e instanceof String||(e=r(e)),lr=tr,ar=e,ir=0,or=ar.length>0?1:0,cr=0,ur=ar.length,pr=null,mr={allowKeyword:!0,allowIn:!0,labelSet:new n,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},dr={},t=t||{},t.tokens=!0,dr.tokens=[],dr.tokenize=!0,dr.openParenToken=-1,dr.openCurlyToken=-1,dr.range="boolean"==typeof t.range&&t.range,dr.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.comment&&t.comment&&(dr.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(dr.errors=[]),Wn();try{if(j(),pr.type===Kn.EOF)return dr.tokens;for(a=U();pr.type!==Kn.EOF;)try{a=U()}catch(i){if(a=pr,dr.errors){dr.errors.push(i);break}throw i}Bn(),s=dr.tokens,"undefined"!=typeof dr.comments&&(s.comments=dr.comments),"undefined"!=typeof dr.errors&&(s.errors=dr.errors)}catch(o){throw o}finally{Hn(),dr={}}return s}function Jn(e,t){var r,a;a=String,"string"==typeof e||e instanceof String||(e=a(e)),lr=tr,ar=e,ir=0,or=ar.length>0?1:0,cr=0,ur=ar.length,pr=null,mr={allowKeyword:!1,allowIn:!0,labelSet:new n,parenthesizedCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,inJSXChild:!1,inJSXTag:!1,inType:!1,lastCommentStart:-1,yieldAllowed:!1,awaitAllowed:!1},dr={},"undefined"!=typeof t&&(dr.range="boolean"==typeof t.range&&t.range,dr.loc="boolean"==typeof t.loc&&t.loc,dr.attachComment="boolean"==typeof t.attachComment&&t.attachComment,dr.loc&&null!==t.source&&void 0!==t.source&&(lr=Vn(lr,{postProcess:function(e){return e.loc.source=a(t.source),e}})),dr.sourceType=t.sourceType,"boolean"==typeof t.tokens&&t.tokens&&(dr.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(dr.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(dr.errors=[]),dr.attachComment&&(dr.range=!0,dr.comments=[],dr.bottomRightStack=[],dr.trailingComments=[],dr.leadingComments=[])),Wn();try{r=un(),"undefined"!=typeof dr.comments&&(r.comments=dr.comments),"undefined"!=typeof dr.tokens&&(Bn(),r.tokens=dr.tokens),"undefined"!=typeof dr.errors&&(r.errors=dr.errors)}catch(s){throw s}finally{Hn(),dr={}}return r}var Kn,Xn,Qn,Yn,Gn,Zn,er,tr,nr,rr,ar,sr,ir,or,cr,ur,lr,pr,mr,dr;Kn={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10,JSXIdentifier:11,JSXText:12},Xn={},Xn[Kn.BooleanLiteral]="Boolean",Xn[Kn.EOF]="<end>",Xn[Kn.Identifier]="Identifier",Xn[Kn.Keyword]="Keyword",Xn[Kn.NullLiteral]="Null",Xn[Kn.NumericLiteral]="Numeric",Xn[Kn.Punctuator]="Punctuator",Xn[Kn.StringLiteral]="String",Xn[Kn.JSXIdentifier]="JSXIdentifier",Xn[Kn.JSXText]="JSXText",Xn[Kn.RegularExpression]="RegularExpression",Qn=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],Yn={AnyTypeAnnotation:"AnyTypeAnnotation",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrayTypeAnnotation:"ArrayTypeAnnotation",ArrowFunctionExpression:"ArrowFunctionExpression",AssignmentExpression:"AssignmentExpression",BinaryExpression:"BinaryExpression",BlockStatement:"BlockStatement",BooleanTypeAnnotation:"BooleanTypeAnnotation",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ClassImplements:"ClassImplements",ClassProperty:"ClassProperty",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DeclareClass:"DeclareClass",DeclareFunction:"DeclareFunction",DeclareModule:"DeclareModule",DeclareVariable:"DeclareVariable",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportDeclaration:"ExportDeclaration",ExportBatchSpecifier:"ExportBatchSpecifier",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",ForStatement:"ForStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",FunctionTypeAnnotation:"FunctionTypeAnnotation",FunctionTypeParam:"FunctionTypeParam",GenericTypeAnnotation:"GenericTypeAnnotation",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",InterfaceDeclaration:"InterfaceDeclaration",InterfaceExtends:"InterfaceExtends",IntersectionTypeAnnotation:"IntersectionTypeAnnotation",LabeledStatement:"LabeledStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",NullableTypeAnnotation:"NullableTypeAnnotation",NumberTypeAnnotation:"NumberTypeAnnotation",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",ObjectTypeAnnotation:"ObjectTypeAnnotation",ObjectTypeCallProperty:"ObjectTypeCallProperty",ObjectTypeIndexer:"ObjectTypeIndexer",ObjectTypeProperty:"ObjectTypeProperty",Program:"Program",Property:"Property",QualifiedTypeIdentifier:"QualifiedTypeIdentifier",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SpreadProperty:"SpreadProperty",StringLiteralTypeAnnotation:"StringLiteralTypeAnnotation",StringTypeAnnotation:"StringTypeAnnotation",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TupleTypeAnnotation:"TupleTypeAnnotation",TryStatement:"TryStatement",TypeAlias:"TypeAlias",TypeAnnotation:"TypeAnnotation",TypeCastExpression:"TypeCastExpression",TypeofTypeAnnotation:"TypeofTypeAnnotation",TypeParameterDeclaration:"TypeParameterDeclaration",TypeParameterInstantiation:"TypeParameterInstantiation",UnaryExpression:"UnaryExpression",UnionTypeAnnotation:"UnionTypeAnnotation",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",VoidTypeAnnotation:"VoidTypeAnnotation",WhileStatement:"WhileStatement",WithStatement:"WithStatement",JSXIdentifier:"JSXIdentifier",JSXNamespacedName:"JSXNamespacedName",JSXMemberExpression:"JSXMemberExpression",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXElement:"JSXElement",JSXClosingElement:"JSXClosingElement",JSXOpeningElement:"JSXOpeningElement",JSXAttribute:"JSXAttribute",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText",YieldExpression:"YieldExpression",AwaitExpression:"AwaitExpression"},Gn={Data:1,Get:2,Set:4},rr={"static":"static",prototype:"prototype"},Zn={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInFormalsList:"Invalid left-hand side in formals list",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalDuplicateClassProperty:"Illegal duplicate property in class definition",IllegalClassConstructorProperty:"Illegal constructor property in class definition",IllegalReturn:"Illegal return statement",IllegalSpread:"Illegal spread element",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",ParameterAfterRestParameter:"Rest parameter must be final parameter of an argument list",DefaultRestParameter:"Rest parameter can not have a default value",ElementAfterSpreadElement:"Spread must be the final element of an element list",PropertyAfterSpreadProperty:"A rest property must be the final property of an object literal",ObjectPatternAsRestParameter:"Invalid rest parameter",ObjectPatternAsSpread:"Invalid spread argument",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",MissingFromClause:"Missing from clause",NoAsAfterImportNamespace:"Missing as after import *",InvalidModuleSpecifier:"Invalid module specifier",IllegalImportDeclaration:"Illegal import declaration",IllegalExportDeclaration:"Illegal export declaration",NoUninitializedConst:"Const must be initialized",ComprehensionRequiresBlock:"Comprehension must have at least one block",ComprehensionError:"Comprehension Error",EachNotAllowed:"Each is not supported",InvalidJSXAttributeValue:"JSX value should be either an expression or a quoted JSX text",ExpectedJSXClosingTag:"Expected corresponding JSX closing tag for %0",AdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag",ConfusedAboutFunctionType:"Unexpected token =>. It looks like you are trying to write a function type, but you ended up writing a grouped type followed by an =>, which is a syntax error. Remember, function type parameters are named so function types look like (name1: type1, name2: type2) => returnType. You probably wrote (type1) => returnType"},er={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),LeadingZeros:new RegExp("^0+(?!$)")},n.prototype.get=function(e){return e="$"+e,this.$data[e]},n.prototype.set=function(e,t){return e="$"+e,this.$data[e]=t,this},n.prototype.has=function(e){return e="$"+e,Object.prototype.hasOwnProperty.call(this.$data,e)},n.prototype["delete"]=function(e){return e="$"+e,delete this.$data[e]},tr={name:"SyntaxTree",postProcess:function(e){return e},createArrayExpression:function(e){return{type:Yn.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,n){return{type:Yn.AssignmentExpression,operator:e,left:t,right:n}},createBinaryExpression:function(e,t,n){var r="||"===e||"&&"===e?Yn.LogicalExpression:Yn.BinaryExpression;return{type:r,operator:e,left:t,right:n}},createBlockStatement:function(e){return{type:Yn.BlockStatement,body:e}},createBreakStatement:function(e){return{type:Yn.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:Yn.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:Yn.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,n){return{type:Yn.ConditionalExpression,test:e,consequent:t,alternate:n}},createContinueStatement:function(e){return{type:Yn.ContinueStatement,label:e}},createDebuggerStatement:function(){
return{type:Yn.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:Yn.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:Yn.EmptyStatement}},createExpressionStatement:function(e){return{type:Yn.ExpressionStatement,expression:e}},createForStatement:function(e,t,n,r){return{type:Yn.ForStatement,init:e,test:t,update:n,body:r}},createForInStatement:function(e,t,n){return{type:Yn.ForInStatement,left:e,right:t,body:n,each:!1}},createForOfStatement:function(e,t,n){return{type:Yn.ForOfStatement,left:e,right:t,body:n}},createFunctionDeclaration:function(e,t,n,r,a,s,i,o,c,u){var l={type:Yn.FunctionDeclaration,id:e,params:t,defaults:n,body:r,rest:a,generator:s,expression:i,returnType:c,typeParameters:u};return o&&(l.async=!0),l},createFunctionExpression:function(e,t,n,r,a,s,i,o,c,u){var l={type:Yn.FunctionExpression,id:e,params:t,defaults:n,body:r,rest:a,generator:s,expression:i,returnType:c,typeParameters:u};return o&&(l.async=!0),l},createIdentifier:function(e){return{type:Yn.Identifier,name:e,typeAnnotation:void 0,optional:void 0}},createTypeAnnotation:function(e){return{type:Yn.TypeAnnotation,typeAnnotation:e}},createTypeCast:function(e,t){return{type:Yn.TypeCastExpression,expression:e,typeAnnotation:t}},createFunctionTypeAnnotation:function(e,t,n,r){return{type:Yn.FunctionTypeAnnotation,params:e,returnType:t,rest:n,typeParameters:r}},createFunctionTypeParam:function(e,t,n){return{type:Yn.FunctionTypeParam,name:e,typeAnnotation:t,optional:n}},createNullableTypeAnnotation:function(e){return{type:Yn.NullableTypeAnnotation,typeAnnotation:e}},createArrayTypeAnnotation:function(e){return{type:Yn.ArrayTypeAnnotation,elementType:e}},createGenericTypeAnnotation:function(e,t){return{type:Yn.GenericTypeAnnotation,id:e,typeParameters:t}},createQualifiedTypeIdentifier:function(e,t){return{type:Yn.QualifiedTypeIdentifier,qualification:e,id:t}},createTypeParameterDeclaration:function(e){return{type:Yn.TypeParameterDeclaration,params:e}},createTypeParameterInstantiation:function(e){return{type:Yn.TypeParameterInstantiation,params:e}},createAnyTypeAnnotation:function(){return{type:Yn.AnyTypeAnnotation}},createBooleanTypeAnnotation:function(){return{type:Yn.BooleanTypeAnnotation}},createNumberTypeAnnotation:function(){return{type:Yn.NumberTypeAnnotation}},createStringTypeAnnotation:function(){return{type:Yn.StringTypeAnnotation}},createStringLiteralTypeAnnotation:function(e){return{type:Yn.StringLiteralTypeAnnotation,value:e.value,raw:ar.slice(e.range[0],e.range[1])}},createVoidTypeAnnotation:function(){return{type:Yn.VoidTypeAnnotation}},createTypeofTypeAnnotation:function(e){return{type:Yn.TypeofTypeAnnotation,argument:e}},createTupleTypeAnnotation:function(e){return{type:Yn.TupleTypeAnnotation,types:e}},createObjectTypeAnnotation:function(e,t,n){return{type:Yn.ObjectTypeAnnotation,properties:e,indexers:t,callProperties:n}},createObjectTypeIndexer:function(e,t,n,r){return{type:Yn.ObjectTypeIndexer,id:e,key:t,value:n,"static":r}},createObjectTypeCallProperty:function(e,t){return{type:Yn.ObjectTypeCallProperty,value:e,"static":t}},createObjectTypeProperty:function(e,t,n,r){return{type:Yn.ObjectTypeProperty,key:e,value:t,optional:n,"static":r}},createUnionTypeAnnotation:function(e){return{type:Yn.UnionTypeAnnotation,types:e}},createIntersectionTypeAnnotation:function(e){return{type:Yn.IntersectionTypeAnnotation,types:e}},createTypeAlias:function(e,t,n){return{type:Yn.TypeAlias,id:e,typeParameters:t,right:n}},createInterface:function(e,t,n,r){return{type:Yn.InterfaceDeclaration,id:e,typeParameters:t,body:n,"extends":r}},createInterfaceExtends:function(e,t){return{type:Yn.InterfaceExtends,id:e,typeParameters:t}},createDeclareFunction:function(e){return{type:Yn.DeclareFunction,id:e}},createDeclareVariable:function(e){return{type:Yn.DeclareVariable,id:e}},createDeclareModule:function(e,t){return{type:Yn.DeclareModule,id:e,body:t}},createJSXAttribute:function(e,t){return{type:Yn.JSXAttribute,name:e,value:t||null}},createJSXSpreadAttribute:function(e){return{type:Yn.JSXSpreadAttribute,argument:e}},createJSXIdentifier:function(e){return{type:Yn.JSXIdentifier,name:e}},createJSXNamespacedName:function(e,t){return{type:Yn.JSXNamespacedName,namespace:e,name:t}},createJSXMemberExpression:function(e,t){return{type:Yn.JSXMemberExpression,object:e,property:t}},createJSXElement:function(e,t,n){return{type:Yn.JSXElement,openingElement:e,closingElement:t,children:n}},createJSXEmptyExpression:function(){return{type:Yn.JSXEmptyExpression}},createJSXExpressionContainer:function(e){return{type:Yn.JSXExpressionContainer,expression:e}},createJSXOpeningElement:function(e,t,n){return{type:Yn.JSXOpeningElement,name:e,selfClosing:n,attributes:t}},createJSXClosingElement:function(e){return{type:Yn.JSXClosingElement,name:e}},createIfStatement:function(e,t,n){return{type:Yn.IfStatement,test:e,consequent:t,alternate:n}},createLabeledStatement:function(e,t){return{type:Yn.LabeledStatement,label:e,body:t}},createLiteral:function(e){var t={type:Yn.Literal,value:e.value,raw:ar.slice(e.range[0],e.range[1])};return e.regex&&(t.regex=e.regex),t},createMemberExpression:function(e,t,n){return{type:Yn.MemberExpression,computed:"["===e,object:t,property:n}},createNewExpression:function(e,t){return{type:Yn.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:Yn.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:Yn.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:Yn.Program,body:e}},createProperty:function(e,t,n,r,a,s){return{type:Yn.Property,key:t,value:n,kind:e,method:r,shorthand:a,computed:s}},createReturnStatement:function(e){return{type:Yn.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:Yn.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:Yn.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:Yn.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:Yn.ThisExpression}},createThrowStatement:function(e){return{type:Yn.ThrowStatement,argument:e}},createTryStatement:function(e,t,n,r){return{type:Yn.TryStatement,block:e,guardedHandlers:t,handlers:n,finalizer:r}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:Yn.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:Yn.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:Yn.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:Yn.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:Yn.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:Yn.WithStatement,object:e,body:t}},createTemplateElement:function(e,t){return{type:Yn.TemplateElement,value:e,tail:t}},createTemplateLiteral:function(e,t){return{type:Yn.TemplateLiteral,quasis:e,expressions:t}},createSpreadElement:function(e){return{type:Yn.SpreadElement,argument:e}},createSpreadProperty:function(e){return{type:Yn.SpreadProperty,argument:e}},createTaggedTemplateExpression:function(e,t){return{type:Yn.TaggedTemplateExpression,tag:e,quasi:t}},createArrowFunctionExpression:function(e,t,n,r,a,s){var i={type:Yn.ArrowFunctionExpression,id:null,params:e,defaults:t,body:n,rest:r,generator:!1,expression:a};return s&&(i.async=!0),i},createMethodDefinition:function(e,t,n,r,a){return{type:Yn.MethodDefinition,key:n,value:r,kind:t,"static":e===rr["static"],computed:a}},createClassProperty:function(e,t,n,r){return{type:Yn.ClassProperty,key:e,typeAnnotation:t,computed:n,"static":r}},createClassBody:function(e){return{type:Yn.ClassBody,body:e}},createClassImplements:function(e,t){return{type:Yn.ClassImplements,id:e,typeParameters:t}},createClassExpression:function(e,t,n,r,a,s){return{type:Yn.ClassExpression,id:e,superClass:t,body:n,typeParameters:r,superTypeParameters:a,"implements":s}},createClassDeclaration:function(e,t,n,r,a,s){return{type:Yn.ClassDeclaration,id:e,superClass:t,body:n,typeParameters:r,superTypeParameters:a,"implements":s}},createModuleSpecifier:function(e){return{type:Yn.ModuleSpecifier,value:e.value,raw:ar.slice(e.range[0],e.range[1])}},createExportSpecifier:function(e,t){return{type:Yn.ExportSpecifier,id:e,name:t}},createExportBatchSpecifier:function(){return{type:Yn.ExportBatchSpecifier}},createImportDefaultSpecifier:function(e){return{type:Yn.ImportDefaultSpecifier,id:e}},createImportNamespaceSpecifier:function(e){return{type:Yn.ImportNamespaceSpecifier,id:e}},createExportDeclaration:function(e,t,n,r){return{type:Yn.ExportDeclaration,"default":!!e,declaration:t,specifiers:n,source:r}},createImportSpecifier:function(e,t){return{type:Yn.ImportSpecifier,id:e,name:t}},createImportDeclaration:function(e,t,n){return{type:Yn.ImportDeclaration,specifiers:e,source:t,isType:n}},createYieldExpression:function(e,t){return{type:Yn.YieldExpression,argument:e,delegate:t}},createAwaitExpression:function(e){return{type:Yn.AwaitExpression,argument:e}},createComprehensionExpression:function(e,t,n){return{type:Yn.ComprehensionExpression,filter:e,blocks:t,body:n}}},nr={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪","int":"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},e.version="13001.1001.0-dev-harmony-fb",e.tokenize=zn,e.parse=Jn,e.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in Yn)Yn.hasOwnProperty(e)&&(t[e]=Yn[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()})},{}],10:[function(e,t,n){var r=function(e){return e.chars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.encode=function(e){if(0===e)return"0";for(var t="";e>0;)t=this.chars[e%62]+t,e=Math.floor(e/62);return t},e.decode=function(e,t,n,r){for(t=n=(e===(/\W|_|^$/.test(e+="")||e))-1;r=e.charCodeAt(n++);)t=62*t+r-[,48,29,87][r>>5];return t},e}({});t.exports=r},{}],11:[function(e,t,n){n.SourceMapGenerator=e("./source-map/source-map-generator").SourceMapGenerator,n.SourceMapConsumer=e("./source-map/source-map-consumer").SourceMapConsumer,n.SourceNode=e("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":16,"./source-map/source-map-generator":17,"./source-map/source-node":18}],12:[function(e,t,n){if("function"!=typeof r)var r=e("amdefine")(t,e);r(function(e,t,n){function r(){this._array=[],this._set={}}var a=e("./util");r.fromArray=function(e,t){for(var n=new r,a=0,s=e.length;s>a;a++)n.add(e[a],t);return n},r.prototype.add=function(e,t){var n=this.has(e),r=this._array.length;(!n||t)&&this._array.push(e),n||(this._set[a.toSetString(e)]=r)},r.prototype.has=function(e){return Object.prototype.hasOwnProperty.call(this._set,a.toSetString(e))},r.prototype.indexOf=function(e){if(this.has(e))return this._set[a.toSetString(e)];throw new Error('"'+e+'" is not in the set.')},r.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},r.prototype.toArray=function(){return this._array.slice()},t.ArraySet=r})},{"./util":19,amdefine:20}],13:[function(e,t,n){if("function"!=typeof r)var r=e("amdefine")(t,e);r(function(e,t,n){function r(e){return 0>e?(-e<<1)+1:(e<<1)+0}function a(e){var t=1===(1&e),n=e>>1;return t?-n:n}var s=e("./base64"),i=5,o=1<<i,c=o-1,u=o;t.encode=function(e){var t,n="",a=r(e);do t=a&c,a>>>=i,a>0&&(t|=u),n+=s.encode(t);while(a>0);return n},t.decode=function(e){var t,n,r=0,o=e.length,l=0,p=0;do{if(r>=o)throw new Error("Expected more digits in base 64 VLQ value.");n=s.decode(e.charAt(r++)),t=!!(n&u),n&=c,l+=n<<p,p+=i}while(t);return{value:a(l),rest:e.slice(r)}}})},{"./base64":14,amdefine:20}],14:[function(e,t,n){if("function"!=typeof r)var r=e("amdefine")(t,e);r(function(e,t,n){var r={},a={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(e,t){r[e]=t,a[t]=e}),t.encode=function(e){if(e in a)return a[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){if(e in r)return r[e];throw new TypeError("Not a valid base 64 digit: "+e)}})},{amdefine:20}],15:[function(e,t,n){if("function"!=typeof r)var r=e("amdefine")(t,e);r(function(e,t,n){function r(e,t,n,a,s){var i=Math.floor((t-e)/2)+e,o=s(n,a[i],!0);return 0===o?a[i]:o>0?t-i>1?r(i,t,n,a,s):a[i]:i-e>1?r(e,i,n,a,s):0>e?null:a[e]}t.search=function(e,t,n){return t.length>0?r(-1,t.length,e,t,n):null}})},{amdefine:20}],16:[function(e,t,n){if("function"!=typeof r)var r=e("amdefine")(t,e);r(function(e,t,n){function r(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=a.getArg(t,"version"),r=a.getArg(t,"sources"),s=a.getArg(t,"names",[]),o=a.getArg(t,"sourceRoot",null),c=a.getArg(t,"sourcesContent",null),u=a.getArg(t,"mappings"),l=a.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);this._names=i.fromArray(s,!0),this._sources=i.fromArray(r,!0),this.sourceRoot=o,this.sourcesContent=c,this._mappings=u,this.file=l}var a=e("./util"),s=e("./binary-search"),i=e("./array-set").ArraySet,o=e("./base64-vlq");r.fromSourceMap=function(e){var t=Object.create(r.prototype);return t._names=i.fromArray(e._names.toArray(),!0),t._sources=i.fromArray(e._sources.toArray(),!0),t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file,t.__generatedMappings=e._mappings.slice().sort(a.compareByGeneratedPositions),t.__originalMappings=e._mappings.slice().sort(a.compareByOriginalPositions),t},r.prototype._version=3,Object.defineProperty(r.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return this.sourceRoot?a.join(this.sourceRoot,e):e},this)}}),r.prototype.__generatedMappings=null,Object.defineProperty(r.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),r.prototype.__originalMappings=null,Object.defineProperty(r.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),r.prototype._parseMappings=function(e,t){for(var n,r,s=1,i=0,c=0,u=0,l=0,p=0,m=/^[,;]/,d=e;d.length>0;)if(";"===d.charAt(0))s++,d=d.slice(1),i=0;else if(","===d.charAt(0))d=d.slice(1);else{if(n={},n.generatedLine=s,r=o.decode(d),n.generatedColumn=i+r.value,i=n.generatedColumn,d=r.rest,d.length>0&&!m.test(d.charAt(0))){if(r=o.decode(d),n.source=this._sources.at(l+r.value),l+=r.value,d=r.rest,0===d.length||m.test(d.charAt(0)))throw new Error("Found a source, but no line and column");if(r=o.decode(d),n.originalLine=c+r.value,c=n.originalLine,n.originalLine+=1,d=r.rest,0===d.length||m.test(d.charAt(0)))throw new Error("Found a source and line, but no column");r=o.decode(d),n.originalColumn=u+r.value,u=n.originalColumn,d=r.rest,d.length>0&&!m.test(d.charAt(0))&&(r=o.decode(d),n.name=this._names.at(p+r.value),p+=r.value,d=r.rest)}this.__generatedMappings.push(n),"number"==typeof n.originalLine&&this.__originalMappings.push(n)}this.__originalMappings.sort(a.compareByOriginalPositions)},r.prototype._findMapping=function(e,t,n,r,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return s.search(e,t,a)},r.prototype.originalPositionFor=function(e){var t={generatedLine:a.getArg(e,"line"),generatedColumn:a.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",a.compareByGeneratedPositions);if(n){var r=a.getArg(n,"source",null);return r&&this.sourceRoot&&(r=a.join(this.sourceRoot,r)),{source:r,line:a.getArg(n,"originalLine",null),column:a.getArg(n,"originalColumn",null),name:a.getArg(n,"name",null)}}return{source:null,line:null,column:null,name:null}},r.prototype.sourceContentFor=function(e){if(!this.sourcesContent)return null;if(this.sourceRoot&&(e=a.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var t;if(this.sourceRoot&&(t=a.urlParse(this.sourceRoot))){var n=e.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!t.path||"/"==t.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}throw new Error('"'+e+'" is not in the SourceMap.')},r.prototype.generatedPositionFor=function(e){var t={source:a.getArg(e,"source"),originalLine:a.getArg(e,"line"),originalColumn:a.getArg(e,"column")};this.sourceRoot&&(t.source=a.relative(this.sourceRoot,t.source));var n=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions);return n?{line:a.getArg(n,"generatedLine",null),column:a.getArg(n,"generatedColumn",null)}:{line:null,column:null}},r.GENERATED_ORDER=1,r.ORIGINAL_ORDER=2,r.prototype.eachMapping=function(e,t,n){var s,i=t||null,o=n||r.GENERATED_ORDER;switch(o){case r.GENERATED_ORDER:s=this._generatedMappings;break;case r.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;s.map(function(e){var t=e.source;return t&&c&&(t=a.join(c,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,i)},t.SourceMapConsumer=r})},{"./array-set":12,"./base64-vlq":13,"./binary-search":15,"./util":19,amdefine:20}],17:[function(e,t,n){if("function"!=typeof r)var r=e("amdefine")(t,e);r(function(e,t,n){function r(e){this._file=s.getArg(e,"file"),this._sourceRoot=s.getArg(e,"sourceRoot",null),this._sources=new i,this._names=new i,this._mappings=[],this._sourcesContents=null}var a=e("./base64-vlq"),s=e("./util"),i=e("./array-set").ArraySet;r.prototype._version=3,r.fromSourceMap=function(e){var t=e.sourceRoot,n=new r({file:e.file,sourceRoot:t});return e.eachMapping(function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};e.source&&(r.source=e.source,t&&(r.source=s.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},e.name&&(r.name=e.name)),n.addMapping(r)}),e.sources.forEach(function(t){var r=e.sourceContentFor(t);r&&n.setSourceContent(t,r)}),n},r.prototype.addMapping=function(e){var t=s.getArg(e,"generated"),n=s.getArg(e,"original",null),r=s.getArg(e,"source",null),a=s.getArg(e,"name",null);this._validateMapping(t,n,r,a),r&&!this._sources.has(r)&&this._sources.add(r),a&&!this._names.has(a)&&this._names.add(a),this._mappings.push({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:a})},r.prototype.setSourceContent=function(e,t){var n=e;this._sourceRoot&&(n=s.relative(this._sourceRoot,n)),null!==t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[s.toSetString(n)]=t):(delete this._sourcesContents[s.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},r.prototype.applySourceMap=function(e,t){t||(t=e.file);var n=this._sourceRoot;n&&(t=s.relative(n,t));var r=new i,a=new i;this._mappings.forEach(function(i){if(i.source===t&&i.originalLine){var o=e.originalPositionFor({line:i.originalLine,column:i.originalColumn});null!==o.source&&(n?i.source=s.relative(n,o.source):i.source=o.source,i.originalLine=o.line,i.originalColumn=o.column,null!==o.name&&null!==i.name&&(i.name=o.name))}var c=i.source;c&&!r.has(c)&&r.add(c);var u=i.name;u&&!a.has(u)&&a.add(u)},this),this._sources=r,this._names=a,e.sources.forEach(function(t){var r=e.sourceContentFor(t);r&&(n&&(t=s.relative(n,t)),this.setSourceContent(t,r))},this)},r.prototype._validateMapping=function(e,t,n,r){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,orginal:t,name:r}))},r.prototype._serializeMappings=function(){var e,t=0,n=1,r=0,i=0,o=0,c=0,u="";this._mappings.sort(s.compareByGeneratedPositions);for(var l=0,p=this._mappings.length;p>l;l++){if(e=this._mappings[l],e.generatedLine!==n)for(t=0;e.generatedLine!==n;)u+=";",n++;else if(l>0){if(!s.compareByGeneratedPositions(e,this._mappings[l-1]))continue;u+=","}u+=a.encode(e.generatedColumn-t),t=e.generatedColumn,e.source&&(u+=a.encode(this._sources.indexOf(e.source)-c),c=this._sources.indexOf(e.source),u+=a.encode(e.originalLine-1-i),i=e.originalLine-1,u+=a.encode(e.originalColumn-r),r=e.originalColumn,e.name&&(u+=a.encode(this._names.indexOf(e.name)-o),o=this._names.indexOf(e.name)))}return u},r.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;t&&(e=s.relative(t,e));var n=s.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},r.prototype.toJSON=function(){var e={version:this._version,file:this._file,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},r.prototype.toString=function(){return JSON.stringify(this)},t.SourceMapGenerator=r})},{"./array-set":12,"./base64-vlq":13,"./util":19,amdefine:20}],18:[function(e,t,n){if("function"!=typeof r)var r=e("amdefine")(t,e);r(function(e,t,n){function r(e,t,n,r,a){this.children=[],this.sourceContents={},this.line=void 0===e?null:e,this.column=void 0===t?null:t,this.source=void 0===n?null:n,this.name=void 0===a?null:a,null!=r&&this.add(r)}var a=e("./source-map-generator").SourceMapGenerator,s=e("./util");r.fromStringWithSourceMap=function(e,t){function n(e,t){null===e||void 0===e.source?a.add(t):a.add(new r(e.originalLine,e.originalColumn,e.source,t,e.name))}var a=new r,s=e.split("\n"),i=1,o=0,c=null;return t.eachMapping(function(e){if(null===c){for(;i<e.generatedLine;)a.add(s.shift()+"\n"),i++;if(o<e.generatedColumn){var t=s[0];a.add(t.substr(0,e.generatedColumn)),s[0]=t.substr(e.generatedColumn),o=e.generatedColumn}}else if(i<e.generatedLine){var r="";do r+=s.shift()+"\n",i++,o=0;while(i<e.generatedLine);if(o<e.generatedColumn){var t=s[0];r+=t.substr(0,e.generatedColumn),s[0]=t.substr(e.generatedColumn),o=e.generatedColumn}n(c,r)}else{var t=s[0],r=t.substr(0,e.generatedColumn-o);s[0]=t.substr(e.generatedColumn-o),o=e.generatedColumn,n(c,r)}c=e},this),n(c,s.join("\n")),t.sources.forEach(function(e){var n=t.sourceContentFor(e);n&&a.setSourceContent(e,n)}),a},r.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!(e instanceof r||"string"==typeof e))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},r.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!(e instanceof r||"string"==typeof e))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},r.prototype.walk=function(e){for(var t,n=0,a=this.children.length;a>n;n++)t=this.children[n],t instanceof r?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},r.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;r-1>n;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},r.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n instanceof r?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},r.prototype.setSourceContent=function(e,t){this.sourceContents[s.toSetString(e)]=t},r.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;n>t;t++)this.children[t]instanceof r&&this.children[t].walkSourceContents(e);for(var a=Object.keys(this.sourceContents),t=0,n=a.length;n>t;t++)e(s.fromSetString(a[t]),this.sourceContents[a[t]])},r.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},r.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new a(e),r=!1,s=null,i=null,o=null,c=null;return this.walk(function(e,a){t.code+=e,null!==a.source&&null!==a.line&&null!==a.column?((s!==a.source||i!==a.line||o!==a.column||c!==a.name)&&n.addMapping({source:a.source,original:{line:a.line,column:a.column},generated:{line:t.line,column:t.column},name:a.name}),s=a.source,i=a.line,o=a.column,c=a.name,r=!0):r&&(n.addMapping({generated:{line:t.line,column:t.column}}),s=null,r=!1),e.split("").forEach(function(e){"\n"===e?(t.line++,t.column=0):t.column++})}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:t.code,map:n}},t.SourceNode=r})},{"./source-map-generator":17,"./util":19,amdefine:20}],19:[function(e,t,n){if("function"!=typeof r)var r=e("amdefine")(t,e);r(function(e,t,n){function r(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')}function a(e){var t=e.match(d);return t?{scheme:t[1],auth:t[3],host:t[4],port:t[6],path:t[7]}:null}function s(e){var t=e.scheme+"://";return e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function i(e,t){var n;return t.match(d)||t.match(h)?t:"/"===t.charAt(0)&&(n=a(e))?(n.path=t,s(n)):e.replace(/\/$/,"")+"/"+t}function o(e){return"$"+e}function c(e){return e.substr(1)}function u(e,t){e=e.replace(/\/$/,"");var n=a(e);return"/"==t.charAt(0)&&n&&"/"==n.path?t.slice(1):0===t.indexOf(e+"/")?t.substr(e.length+1):t}function l(e,t){var n=e||"",r=t||"";return(n>r)-(r>n)}function p(e,t,n){var r;return(r=l(e.source,t.source))?r:(r=e.originalLine-t.originalLine)?r:(r=e.originalColumn-t.originalColumn,r||n?r:(r=l(e.name,t.name))?r:(r=e.generatedLine-t.generatedLine,r?r:e.generatedColumn-t.generatedColumn))}function m(e,t,n){var r;return(r=e.generatedLine-t.generatedLine)?r:(r=e.generatedColumn-t.generatedColumn,r||n?r:(r=l(e.source,t.source))?r:(r=e.originalLine-t.originalLine)?r:(r=e.originalColumn-t.originalColumn,r?r:l(e.name,t.name)))}t.getArg=r;var d=/([\w+\-.]+):\/\/((\w+:\w+)@)?([\w.]+)?(:(\d+))?(\S+)?/,h=/^data:.+\,.+/;t.urlParse=a,t.urlGenerate=s,t.join=i,t.toSetString=o,t.fromSetString=c,t.relative=u,t.compareByOriginalPositions=p,t.compareByGeneratedPositions=m})},{amdefine:20}],20:[function(e,t,n){(function(n,r){"use strict";function a(t,a){function s(e){var t,n;for(t=0;e[t];t+=1)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function i(e,t){var n;return e&&"."===e.charAt(0)&&t&&(n=t.split("/"),n=n.slice(0,n.length-1),n=n.concat(e.split("/")),s(n),e=n.join("/")),e}function o(e){return function(t){return i(t,e)}}function c(e){function t(t){h[e]=t}return t.fromText=function(e,t){throw new Error("amdefine does not implement load.fromText")},t}function u(e,n,s){var i,o,c,u;if(e)o=h[e]={},c={id:e,uri:r,exports:o},i=p(a,o,c,e);else{if(f)throw new Error("amdefine with no module ID cannot be called more than once per file.");f=!0,o=t.exports,c=t,i=p(a,o,c,t.id)}n&&(n=n.map(function(e){return i(e)})),u="function"==typeof s?s.apply(c.exports,n):s,void 0!==u&&(c.exports=u,e&&(h[e]=c.exports))}function l(e,t,n){Array.isArray(e)?(n=t,t=e,e=void 0):"string"!=typeof e&&(n=e,e=t=void 0),t&&!Array.isArray(t)&&(n=t,t=void 0),t||(t=["require","exports","module"]),e?d[e]=[e,t,n]:u(e,t,n)}var p,m,d={},h={},f=!1,v=e("path");return p=function(e,t,r,a){function s(s,i){return"string"==typeof s?m(e,t,r,s,a):(s=s.map(function(n){return m(e,t,r,n,a)}),void n.nextTick(function(){i.apply(null,s)}))}return s.toUrl=function(e){return 0===e.indexOf(".")?i(e,v.dirname(r.filename)):e},s},a=a||function(){return t.require.apply(t,arguments)},m=function(e,t,n,r,a){var s,l,f=r.indexOf("!"),v=r;if(-1===f){if(r=i(r,a),"require"===r)return p(e,t,n,a);if("exports"===r)return t;if("module"===r)return n;if(h.hasOwnProperty(r))return h[r];if(d[r])return u.apply(null,d[r]),h[r];if(e)return e(v);throw new Error("No module with ID: "+r)}return s=r.substring(0,f),r=r.substring(f+1,r.length),l=m(e,t,n,s,a),r=l.normalize?l.normalize(r,o(a)):i(r,a),h[r]?h[r]:(l.load(r,p(e,t,n,a),c(r),{}),h[r])},l.require=function(e){return h[e]?h[e]:d[e]?(u.apply(null,d[e]),h[e]):void 0},l.amd={},l}t.exports=a}).call(this,e("_process"),"/node_modules/jstransform/node_modules/source-map/node_modules/amdefine/amdefine.js")},{_process:8,path:7}],21:[function(e,t,n){function r(e){var t=e.match(i);return t?t[0].replace(o,"")||"":""}function a(e){e=e.replace(c,"").replace(u,"").replace(l," ").replace(p,"$1");for(var t="";t!=e;)t=e,e=e.replace(m,"\n$1 $2\n");e=e.trim();for(var n,r=[];n=d.exec(e);)r.push([n[1],n[2]]);return r}function s(e){for(var t=a(e),n={},r=0;r<t.length;r++)n[t[r][0]]=t[r][1];return n}var i=/^\s*(\/\*\*(.|\r?\n)*?\*\/)/,o=/^\s*/,c=/^\/\*\*?/,u=/\*+\/$/,l=/[\t ]+/g,p=/(\r?\n|^) *\*/g,m=/(?:^|\r?\n) *(@[^\r\n]*?) *\r?\n *([^@\r\n\s][^@\r\n]+?) *\r?\n/g,d=/(?:^|\r?\n) *@(\S+) *([^\r\n]*)/g;n.extract=r,n.parse=a,n.parseAsObject=s},{}],22:[function(e,t,n){"use strict";function r(e,t){if(e.type===y.Program)return!0;
var n=t.type===y.FunctionDeclaration||t.type===y.FunctionExpression||t.type===y.ArrowFunctionExpression,r=t.type===y.ArrowFunctionExpression&&e===t.body;return n&&(e.type===y.BlockStatement||r)}function a(e,t){return e.type===y.Program?!1:e.type===y.BlockStatement&&t.type===y.CatchClause}function s(e,t,n){function c(e,t,n){e.range&&h.catchup(e.range[0],n),s(e,t,n),e.range&&h.catchup(e.range[1],n)}var u=null,p=t[0];if(!Array.isArray(e)&&n.localScope.parentNode!==p){if(r(e,p)){var m=n.scopeIsStrict;if(m||e.type!==y.BlockStatement&&e.type!==y.Program||(m=e.body.length>0&&e.body[0].type===y.ExpressionStatement&&e.body[0].expression.type===y.Literal&&"use strict"===e.body[0].expression.value),e.type===y.Program)u=n.g.buffer.length,n=h.updateState(n,{scopeIsStrict:m});else{if(u=n.g.buffer.length+1,n=h.updateState(n,{localScope:{parentNode:p,parentScope:n.localScope,identifiers:{},tempVarIndex:0,tempVars:[]},scopeIsStrict:m}),v("arguments",g(e),n),p.params.length>0)for(var d,f=g(p,t.slice(1),t[0]),b=0;b<p.params.length;b++)d=p.params[b],d.type===y.Identifier&&v(d.name,f,n);if(p.rest){var f=g(p,t.slice(1),t[0]);v(p.rest.name,f,n)}if(p.type===y.FunctionExpression&&p.id){var E=g(p,t.parentNodeslice,p);v(p.id.name,E,n)}}i(e,t,n)}if(a(e,p)){if(u=n.g.buffer.length,n=h.updateState(n,{localScope:{parentNode:p,parentScope:n.localScope,identifiers:{},tempVarIndex:0,tempVars:[]}}),p.type===y.CatchClause){var f=g(p,t.slice(1),p);v(p.param.name,f,n)}o(e,t,n)}}h.analyzeAndTraverse(l,c,e,t,n),null!==u&&h.injectTempVarDeclarations(n,u)}function i(e,t,n){h.analyzeAndTraverse(c,i,e,t,n)}function o(e,t,n){h.analyzeAndTraverse(u,o,e,t,n)}function c(e,t,n){var r;switch(e.type){case y.ArrowFunctionExpression:case y.FunctionExpression:return!1;case y.ClassDeclaration:case y.ClassExpression:case y.FunctionDeclaration:return e.id&&(r=g(f(t),t.slice(),e),v(e.id.name,r,n)),!1;case y.VariableDeclarator:"var"===t[0].kind&&(r=g(f(t),t.slice(),e),v(e.id.name,r,n))}}function u(e,t,n){return e.type===y.CatchClause?!1:void 0}function l(e,t,n){for(var r=n.g.visitors,a=0;a<r.length;a++)if(r[a].test(e,t,n))return r[a](s,e,t,n)}function p(e,t){if(b[e]&&!t.disableAstCache)return b[e];var n=d.parse(e,{comment:!0,loc:!0,range:!0,sourceType:t.sourceType});return t.disableAstCache||(b[e]=n),n}function m(t,n,r){r=r||{};var a;try{a=p(n,r)}catch(i){throw i.message="Parse Error: "+i.message,i}var o=h.createState(n,a,r);if(o.g.visitors=t,r.sourceMap){var c=e("source-map").SourceMapGenerator;o.g.sourceMap=new c({file:r.filename||"transformed.js"})}s(a,[],o),h.catchup(n.length,o);var u={code:o.g.buffer,extra:o.g.extra};return r.sourceMap&&(u.sourceMap=o.g.sourceMap,u.sourceMapFilename=r.filename||"source.js"),u}var d=e("esprima-fb"),h=e("./utils"),f=h.getBoundaryNode,v=h.declareIdentInLocalScope,g=h.initScopeMetadata,y=d.Syntax,b={};n.transform=m,n.Syntax=y},{"./utils":23,"esprima-fb":9,"source-map":11}],23:[function(e,t,n){function r(e,t,n){return{localScope:{parentNode:t,parentScope:null,identifiers:{},tempVarIndex:0,tempVars:[]},superClass:null,mungeNamespace:"",methodNode:null,methodFuncNode:null,className:null,scopeIsStrict:null,indentBy:0,g:{opts:n,position:0,extra:{},buffer:"",source:e,docblock:null,tagNamespaceUsed:!1,isBolt:void 0,sourceMap:null,sourceMapFilename:"source.js",sourceLine:1,bufferLine:1,originalProgramAST:null,sourceColumn:0,bufferColumn:0}}}function a(e,t){var n=Object.create(e);return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function s(e,t,n){if(!(e<t.g.position)){var r=t.g.source.substring(t.g.position,e),a=v(r,t);if(t.g.sourceMap&&a){t.g.sourceMap.addMapping({generated:{line:t.g.bufferLine,column:t.g.bufferColumn},original:{line:t.g.sourceLine,column:t.g.sourceColumn},source:t.g.sourceMapFilename});for(var s=r.split("\n"),i=a.split("\n"),o=1;o<s.length-1;o++)t.g.sourceMap.addMapping({generated:{line:t.g.bufferLine,column:0},original:{line:t.g.sourceLine,column:0},source:t.g.sourceMapFilename}),t.g.sourceLine++,t.g.bufferLine++;s.length>1&&(t.g.sourceLine++,t.g.bufferLine++,t.g.sourceColumn=0,t.g.bufferColumn=0),t.g.sourceColumn+=s[s.length-1].length,t.g.bufferColumn+=i[i.length-1].length}t.g.buffer+=n?n(a):a,t.g.position=e}}function i(e,t){return t.g.source.substring(e.range[0],e.range[1])}function o(e){return e.replace(L," ")}function c(e){return e.replace(L,"")}function u(e,t){var n,r=t.g.source.substring(t.g.position),a=r.split("\n"),s=0,i=!1,o=!1;e:for(;void 0!==(n=a.shift());){var c=s+n.length;t:for(;c>s;s++){var u=r[s];if('"'!==u&&"'"!==u){if(!o){if(c>s+1){var l=u+n[s+1];if("//"===l){s=c+1;continue e}if("/*"===l){i=!0,s+=1;continue t}if("*/"===l){i=!1,s+=1;continue t}}if(!i&&u===e)return s+t.g.position}}else o=!o}s++,o=!1}throw new Error("`"+e+"` not found!")}function l(e,t){s(e,t,o)}function p(e,t){s(e,t,c)}function m(e){return e.replace(F,function(){return""})}function d(e,t){s(e,t,m)}function h(e,t){if(t.g.sourceMap){e<t.g.position&&(t.g.position=0,t.g.sourceLine=1,t.g.sourceColumn=0);var n=t.g.source.substring(t.g.position,e),r=n.split("\n");r.length>1&&(t.g.sourceLine+=r.length-1,t.g.sourceColumn=0),t.g.sourceColumn+=r[r.length-1].length}t.g.position=e}function f(e,t){if(t.g.sourceMap&&e){t.g.sourceMap.addMapping({generated:{line:t.g.bufferLine,column:t.g.bufferColumn},original:{line:t.g.sourceLine,column:t.g.sourceColumn},source:t.g.sourceMapFilename});var n=e.split("\n");n.length>1&&(t.g.bufferLine+=n.length-1,t.g.bufferColumn=0),t.g.bufferColumn+=n[n.length-1].length}t.g.buffer+=e}function v(e,t){var n=t.indentBy;if(0>n)for(var r=0;-n>r;r++)e=e.replace(O,"$1");else for(var r=0;n>r;r++)e=e.replace(O,"$1$2$2");return e}function g(e,t){var n=e;for(e-=1;e>0&&"\n"!=t.g.source[e];)t.g.source[e].match(/[ \t]/)||(n=e),e--;return t.g.source.substring(e+1,n)}function y(t){if(!t.g.docblock){var n=e("./docblock");t.g.docblock=n.parseAsObject(n.extract(t.g.source))}return t.g.docblock}function b(e,t,n){for(var r=t.localScope;r;){if(void 0!==r.identifiers[e])return!0;if(n&&r.parentNode===n)break;r=r.parentScope}return!1}function E(e,t){return void 0!==t.localScope.identifiers[e]}function C(e,t,n){return{boundaryNode:e,bindingPath:t,bindingNode:n}}function S(e,t,n){n.localScope.identifiers[e]={boundaryNode:t.boundaryNode,path:t.bindingPath,node:t.bindingNode,state:Object.create(n)}}function R(e,t){for(var n=t.localScope;n;){if(void 0!==n.identifiers[e])return n.identifiers[e];n=n.parentScope}}function N(e,t){return t.localScope.identifiers[e]}function w(e,t,n,r,a){if(n.type){if(e(n,r,a)===!1)return;r.unshift(n)}_(n).forEach(function(e){t(e,r,a)}),n.type&&r.shift()}function _(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&x(t,e[n]);return t.sort(function(e,t){return e[1]-t[1]}),t.map(function(e){return e[0]})}function x(e,t){if("object"==typeof t&&null!==t)if(t.range)e.push([t,t.range[0]]);else if(Array.isArray(t))for(var n=0;n<t.length;n++)x(e,t[n])}function k(e,t){return D(e,function(e){return e.type===t})}function D(e,t){function n(e){return t(e)===!0?(a=!0,!1):void 0}function r(e,n,r){a||(a=D(e,t))}var a=!1;return w(n,r,e,[]),a}function I(e){for(var t=0;t<e.length;++t)if(U[e[t].type])return e[t];throw new Error("Expected to find a node with one of the following types in path:\n"+JSON.stringify(Object.keys(U)))}function M(e){return"$__"+e}function T(e){var t="$__"+e.localScope.tempVarIndex++;return e.localScope.tempVars.push(t),t}function A(e,t){e.localScope.tempVars.length&&(e.g.buffer=e.g.buffer.slice(0,t)+"var "+e.localScope.tempVars.join(", ")+";"+e.g.buffer.slice(t),e.localScope.tempVars=[])}var P=e("esprima-fb").Syntax,O=/(^|\n)( {2}|\t)/g,L=/(\S)/g,F=/[^\n]/g,U={};U[P.ArrowFunctionExpression]=!0,U[P.FunctionExpression]=!0,U[P.FunctionDeclaration]=!0,U[P.Program]=!0,n.analyzeAndTraverse=w,n.append=f,n.catchup=s,n.catchupNewlines=d,n.catchupWhiteOut=l,n.catchupWhiteSpace=p,n.containsChildMatching=D,n.containsChildOfType=k,n.createState=r,n.declareIdentInLocalScope=S,n.getBoundaryNode=I,n.getDocblock=y,n.getLexicalBindingMetadata=R,n.getLocalBindingMetadata=N,n.getNextSyntacticCharOffset=u,n.getNodeSourceText=i,n.getOrderedChildren=_,n.getTempVar=M,n.identInLocalScope=E,n.identWithinLexicalScope=b,n.indentBefore=g,n.initScopeMetadata=C,n.injectTempVar=T,n.injectTempVarDeclarations=A,n.move=h,n.scopeTypes=U,n.updateIndent=v,n.updateState=a},{"./docblock":21,"esprima-fb":9}],24:[function(e,t,n){function r(e,t,n,r){var s=n[0].type===l.ExpressionStatement;s&&p.append("(",r),p.append("function",r),a(e,t,n,r),p.catchupWhiteSpace(t.body.range[0],r);var c=t.body.type==l.BlockStatement?o:i;n.unshift(t),c(e,t,n,r),n.shift();var u=p.containsChildMatching(t.body,function(e){return e.type===l.ThisExpression||e.type===l.Identifier&&"super"===e.name});return u&&p.append(".bind(this)",r),p.catchupWhiteSpace(t.range[1],r),s&&p.append(")",r),!1}function a(e,t,n,r){(s(t,r)||!t.params.length)&&p.append("(",r),0!==t.params.length&&(n.unshift(t),e(t.params,n,r),n.unshift()),p.append(")",r)}function s(e,t){return 1===e.params.length&&"("!==t.g.source[t.g.position]}function i(e,t,n,r){p.append("{",r),t.rest&&p.append(c.renderRestParamSetup(t,r),r),u.renderDestructuredComponents(t,p.updateState(r,{localScope:{parentNode:r.parentNode,parentScope:r.parentScope,identifiers:r.identifiers,tempVarIndex:0}})),p.append("return ",r),o(e,t,n,r),p.append(";}",r)}function o(e,t,n,r){e(t.body,n,r),p.catchup(t.body.range[1],r)}var c=e("./es6-rest-param-visitors"),u=e("./es6-destructuring-visitors"),l=e("esprima-fb").Syntax,p=e("../src/utils");r.test=function(e,t,n){return e.type===l.ArrowFunctionExpression},n.visitorList=[r]},{"../src/utils":23,"./es6-destructuring-visitors":27,"./es6-rest-param-visitors":30,"esprima-fb":9}],25:[function(e,t,n){function r(e,t,n,r){i.move(t.range[0],r),e(t,n,r),i.catchup(t.range[1],r)}function a(e,t,n,a){if(i.catchup(t.range[0],a),t.type===s.NewExpression)i.append("new (Function.prototype.bind.apply(",a),r(e,t.callee,n,a);else if(t.callee.type===s.MemberExpression){var o=i.injectTempVar(a);i.append("("+o+" = ",a),r(e,t.callee.object,n,a),i.append(")",a),t.callee.property.type===s.Identifier?(i.append(".",a),r(e,t.callee.property,n,a)):(i.append("[",a),r(e,t.callee.property,n,a),i.append("]",a)),i.append(".apply("+o,a)}else{var c=t.callee.type===s.FunctionDeclaration||t.callee.type===s.FunctionExpression;c&&i.append("(",a),r(e,t.callee,n,a),c&&i.append(")",a),i.append(".apply(null",a)}i.append(", ",a);var u=t.arguments.slice(),l=u.pop();if(u.length||t.type===s.NewExpression){for(i.append("[",a),t.type===s.NewExpression&&i.append("null"+(u.length?", ":""),a);u.length;){var p=u.shift();i.move(p.range[0],a),e(p,n,a),u.length?i.catchup(u[0].range[0],a):i.catchup(p.range[1],a)}i.append("].concat(",a),r(e,l.argument,n,a),i.append(")",a)}else r(e,l.argument,n,a);return i.append(t.type===s.NewExpression?"))":")",a),i.move(t.range[1],a),!1}var s=e("esprima-fb").Syntax,i=e("../src/utils");a.test=function(e,t,n){return(e.type===s.CallExpression||e.type===s.NewExpression)&&e.arguments.length>0&&e.arguments[e.arguments.length-1].type===s.SpreadElement},n.visitorList=[a]},{"../src/utils":23,"esprima-fb":9}],26:[function(e,t,n){"use strict";function r(){w=0,_={}}function a(e){var t=e.mungeNamespace||"";return"____Class"+t+y.encode(w++)}function s(e,t){var n=t.mungeNamespace,r=t.g.opts.minify;if(r){_[n]||(_[n]={symbolMap:{},identUUIDCounter:0});var a=_[n].symbolMap;a[e]||(a[e]=y.encode(_[n].identUUIDCounter++)),e=a[e]}return"$"+n+e}function i(e,t){var n={name:null,expression:null};return e.superClass&&(e.superClass.type===b.Identifier?n.name=e.superClass.name:(n.name=a(t),n.expression=t.g.source.substring(e.superClass.range[0],e.superClass.range[1]))),n}function o(e){return e.type===b.MethodDefinition&&e.key.type===b.Identifier&&"constructor"===e.key.name}function c(e,t){return!!t.methodFuncNode&&!E.getDocblock(t).hasOwnProperty("preventMunge")&&/^_(?!_)/.test(e.name)}function u(e,t,n,r){if(!r.g.opts.es5&&("get"===t.kind||"set"===t.kind))throw new Error("This transform does not support "+t.kind+"ter methods for ES6 classes. (line: "+t.loc.start.line+", col: "+t.loc.start.column+")");return r=E.updateState(r,{methodNode:t}),E.catchup(t.range[0],r),n.unshift(t),e(t.value,n,r),n.shift(),!1}function l(e,t,n,r){var a=n[0],i="get"===a.kind,o="set"===a.kind;if(r=E.updateState(r,{methodFuncNode:t}),"constructor"===a.key.name)E.append("function "+r.className,r);else{var u,l=!1,p=a["static"]?"":".prototype",m=r.className+p;a.key.type===b.Identifier?(u=a.key.name,c(a.key,r)&&(u=s(u,r)),i||o?u=JSON.stringify(u):C.isReservedWord(u)&&(l=!0,u=JSON.stringify(u))):a.key.type===b.Literal&&(u=JSON.stringify(a.key.value),l=!0),o||i?E.append("Object.defineProperty("+m+","+u+",{configurable:true,"+a.kind+":function",r):r.g.opts.es3?(u=l?"["+u+"]":"."+u,E.append(m+u+"=function"+(t.generator?"*":""),r)):(l||(u=JSON.stringify(u)),E.append("Object.defineProperty("+m+","+u+",{writable:true,configurable:true,value:function"+(t.generator?"*":""),r))}E.move(a.key.range[1],r),E.append("(",r);var d=t.params;if(d.length>0){E.catchupNewlines(d[0].range[0],r);for(var h=0;h<d.length;h++)E.catchup(t.params[h].range[0],r),n.unshift(t),e(d[h],n,r),n.shift()}var f=E.getNextSyntacticCharOffset(")",r);E.catchupWhiteSpace(f,r);var v=E.getNextSyntacticCharOffset("{",r);return E.catchup(v+1,r),r.scopeIsStrict||(E.append('"use strict";',r),r=E.updateState(r,{scopeIsStrict:!0})),E.move(t.body.range[0]+"{".length,r),n.unshift(t),e(t.body,n,r),n.shift(),E.catchup(t.body.range[1],r),"constructor"!==a.key.name&&((i||o||!r.g.opts.es3)&&E.append("})",r),E.append(";",r)),!1}function p(e,t,n,r){var a=t.name;c(t,r)&&(a=s(t.name,r)),E.append(a,r),E.move(t.range[1],r)}function m(e,t,n,r){var a=r.className,s=r.superClass;if(s.name){null!==s.expression&&E.append("var "+s.name+"="+s.expression+";",r);var i=s.name+"____Key",c="";E.identWithinLexicalScope(i,r)||(c="var ",S(i,R(t),r)),E.append("for("+c+i+" in "+s.name+"){if("+s.name+".hasOwnProperty("+i+")){"+a+"["+i+"]="+s.name+"["+i+"];}}",r);var u=N+s.name;E.identWithinLexicalScope(u,r)||(E.append("var "+u+"="+s.name+"===null?null:"+s.name+".prototype;",r),S(u,R(t),r)),E.append(a+".prototype=Object.create("+u+");",r),E.append(a+".prototype.constructor="+a+";",r),E.append(a+".__superConstructor__="+s.name+";",r)}t.body.body.filter(o).pop()||(E.append("function "+a+"(){",r),r.scopeIsStrict||E.append('"use strict";',r),s.name&&E.append("if("+s.name+"!==null){"+s.name+".apply(this,arguments);}",r),E.append("}",r)),E.move(t.body.range[0]+"{".length,r),e(t.body,n,r),E.catchupWhiteSpace(t.range[1],r)}function d(e,t,n,r){var a=t.id.name,s=i(t,r);return r=E.updateState(r,{mungeNamespace:a,className:a,superClass:s}),m(e,t,n,r),!1}function h(e,t,n,r){var s=t.id&&t.id.name||a(r),o=i(t,r);return E.append("(function(){",r),r=E.updateState(r,{mungeNamespace:s,className:s,superClass:o}),m(e,t,n,r),E.append("return "+s+";})()",r),!1}function f(e,t,n,r){E.append(s(t.name,r),r),E.move(t.range[1],r)}function v(e,t,n,r){var a=r.superClass.name;if(t.callee.type===b.Identifier){if(o(r.methodNode))E.append(a+".call(",r);else{var s=N+a;r.methodNode.key.type===b.Identifier?s+="."+r.methodNode.key.name:r.methodNode.key.type===b.Literal&&(s+="["+JSON.stringify(r.methodNode.key.value)+"]"),E.append(s+".call(",r)}E.move(t.callee.range[1],r)}else t.callee.type===b.MemberExpression&&(E.append(N+a,r),E.move(t.callee.object.range[1],r),t.callee.computed?E.catchup(t.callee.property.range[1]+"]".length,r):E.append("."+t.callee.property.name,r),E.append(".call(",r),E.move(t.callee.range[1],r));return E.append("this",r),t.arguments.length>0&&(E.append(",",r),E.catchupWhiteSpace(t.arguments[0].range[0],r),e(t.arguments,n,r)),E.catchupWhiteSpace(t.range[1],r),E.append(")",r),!1}function g(e,t,n,r){var a=r.superClass.name;E.append(N+a,r),E.move(t.object.range[1],r)}var y=e("base62"),b=e("esprima-fb").Syntax,E=e("../src/utils"),C=e("./reserved-words-helper"),S=E.declareIdentInLocalScope,R=E.initScopeMetadata,N="____SuperProtoOf",w=0,_={};u.test=function(e,t,n){return e.type===b.MethodDefinition},l.test=function(e,t,n){return e.type===b.FunctionExpression&&t[0].type===b.MethodDefinition},p.test=function(e,t,n){if(t[0]&&t[1]){var r=t[0],a=t[1];return r.type===b.FunctionExpression&&a.type===b.MethodDefinition&&e.type===b.Identifier}},d.test=function(e,t,n){return e.type===b.ClassDeclaration},h.test=function(e,t,n){return e.type===b.ClassExpression},f.test=function(e,t,n){if(e.type===b.Identifier&&c(e,n)){if(t[0].type===b.MemberExpression&&t[0].object!==e&&t[0].computed===!1)return!0;if(E.identWithinLexicalScope(e.name,n,n.methodFuncNode))return!0;if(t[0].type===b.Property&&t[1].type===b.ObjectExpression)return!0;if(t[0].type===b.FunctionExpression||t[0].type===b.FunctionDeclaration||t[0].type===b.ArrowFunctionExpression)for(var r=0;r<t[0].params.length;r++)if(t[0].params[r]===e)return!0}return!1},v.test=function(e,t,n){if(n.superClass&&e.type===b.CallExpression){var r=e.callee;if(r.type===b.Identifier&&"super"===r.name||r.type==b.MemberExpression&&"super"===r.object.name)return!0}return!1},g.test=function(e,t,n){return n.superClass&&e.type===b.MemberExpression&&e.object.type===b.Identifier&&"super"===e.object.name},n.resetSymbols=r,n.visitorList=[d,h,l,u,p,f,v,g]},{"../src/utils":23,"./reserved-words-helper":34,base62:10,"esprima-fb":9}],27:[function(e,t,n){function r(e,t,n,r){return v.append(v.getTempVar(r.localScope.tempVarIndex)+"=",r),v.catchupWhiteSpace(t.init.range[0],r),e(t.init,n,r),v.catchup(t.init.range[1],r),v.append(","+s(t.id,r),r),r.localScope.tempVarIndex++,!1}function a(e){return e.type===f.ObjectPattern||e.type===f.ArrayPattern}function s(e,t){for(var n=t.localScope.tempVarIndex,r=[],a=i(e),u=0;u<a.length;u++){var l=a[u];if(l)if(l.type!==f.SpreadElement)if(l.type!==f.SpreadProperty){var p=o(e,l,n,u),m=c(e,l);m.type===f.Identifier?r.push(m.name+"="+p):r.push(v.getTempVar(++t.localScope.tempVarIndex)+"="+p+","+s(m,t))}else{var d=b.renderRestExpression(v.getTempVar(n),a);r.push(l.argument.name+"="+d)}else r.push(l.argument.name+"=Array.prototype.slice.call("+v.getTempVar(n)+","+u+")")}return r.join(",")}function i(e){return e.properties||e.elements}function o(e,t,n,r){var a=v.getTempVar(n);if(e.type===f.ObjectPattern){if(g.isReservedWord(t.key.name))return a+'["'+t.key.name+'"]';if(t.key.type===f.Literal)return a+"["+JSON.stringify(t.key.value)+"]";if(t.key.type===f.Identifier)return a+"."+t.key.name}else if(e.type===f.ArrayPattern)return a+"["+r+"]"}function c(e,t){return e.type===f.ObjectPattern?t.value:t}function u(e,t,n,r){var a=t.expression;return v.append("var "+v.getTempVar(r.localScope.tempVarIndex)+"=",r),v.catchupWhiteSpace(a.right.range[0],r),e(a.right,n,r),v.catchup(a.right.range[1],r),v.append(";"+s(a.left,r)+";",r),v.catchupWhiteSpace(t.range[1],r),r.localScope.tempVarIndex++,!1}function l(e,t,n,r){return v.append(v.getTempVar(p(t,n)),r),v.catchupWhiteSpace(t.range[1],r),!0}function p(e,t){for(var n=t[0],r=0,s=0;s<n.params.length;s++){var i=n.params[s];if(i===e)break;a(i)&&r++}return r}function m(e){return e.type==f.FunctionDeclaration||e.type==f.FunctionExpression||e.type==f.MethodDefinition||e.type==f.ArrowFunctionExpression}function d(e,t,n,r){var a=n[0];return v.catchup(a.body.range[0]+1,r),h(a,r),a.rest&&v.append(y.renderRestParamSetup(a,r),r),!0}function h(e,t){for(var n=[],r=0;r<e.params.length;r++){var i=e.params[r];a(i)&&(n.push(s(i,t)),t.localScope.tempVarIndex++)}n.length&&v.append("var "+n.join(",")+";",t)}var f=e("esprima-fb").Syntax,v=e("../src/utils"),g=e("./reserved-words-helper"),y=e("./es6-rest-param-visitors"),b=e("./es7-rest-property-helpers");r.test=function(e,t,n){return e.type===f.VariableDeclarator&&a(e.id)},u.test=function(e,t,n){return e.type===f.ExpressionStatement&&e.expression.type===f.AssignmentExpression&&a(e.expression.left)},l.test=function(e,t,n){return a(e)&&m(t[0])},d.test=function(e,t,n){return e.type===f.BlockStatement&&m(t[0])},n.visitorList=[r,u,l,d],n.renderDestructuredComponents=h},{"../src/utils":23,"./es6-rest-param-visitors":30,"./es7-rest-property-helpers":32,"./reserved-words-helper":34,"esprima-fb":9}],28:[function(e,t,n){function r(e,t,n,r){var a=t.value.generator;return a&&s.catchupWhiteSpace(t.range[0]+1,r),t.computed?s.catchup(t.key.range[1]+1,r):i.isReservedWord(t.key.name)&&(s.catchup(t.key.range[0],r),s.append('"',r),s.catchup(t.key.range[1],r),s.append('"',r)),s.catchup(t.key.range[1],r),s.append(":function"+(a?"*":""),r),n.unshift(t),e(t.value,n,r),n.shift(),!1}var a=e("esprima-fb").Syntax,s=e("../src/utils"),i=e("./reserved-words-helper");r.test=function(e,t,n){return e.type===a.Property&&e.value.type===a.FunctionExpression&&e.method===!0},n.visitorList=[r]},{"../src/utils":23,"./reserved-words-helper":34,"esprima-fb":9}],29:[function(e,t,n){function r(e,t,n,r){return s.catchup(t.key.range[1],r),s.append(":"+t.key.name,r),!1}var a=e("esprima-fb").Syntax,s=e("../src/utils");r.test=function(e,t,n){return e.type===a.Property&&"init"===e.kind&&e.shorthand===!0&&t[0].type!==a.ObjectPattern},n.visitorList=[r]},{"../src/utils":23,"esprima-fb":9}],30:[function(e,t,n){function r(e){return(e.type===o.FunctionDeclaration||e.type===o.FunctionExpression||e.type===o.ArrowFunctionExpression)&&e.rest}function a(e,t,n,r){return t.parametricType&&(c.catchup(t.parametricType.range[0],r),n.unshift(t),e(t.parametricType,n,r),n.shift()),t.params.length?(n.unshift(t),e(t.params,n,r),n.shift()):c.catchup(t.rest.range[0]-3,r),c.catchupWhiteSpace(t.rest.range[1],r),n.unshift(t),e(t.body,n,r),n.shift(),!1}function s(e,t){var n=t.localScope.tempVarIndex++,r=t.localScope.tempVarIndex++;return"for (var "+e.rest.name+"=[],"+c.getTempVar(n)+"="+e.params.length+","+c.getTempVar(r)+"=arguments.length;"+c.getTempVar(n)+"<"+c.getTempVar(r)+";"+c.getTempVar(n)+"++) "+e.rest.name+".push(arguments["+c.getTempVar(n)+"]);"}function i(e,t,n,r){c.catchup(t.range[0]+1,r);var a=n[0];return c.append(s(a,r),r),!0}var o=e("esprima-fb").Syntax,c=e("../src/utils");a.test=function(e,t,n){return r(e)},i.test=function(e,t,n){return e.type===o.BlockStatement&&r(t[0])},n.renderRestParamSetup=s,n.visitorList=[a,i]},{"../src/utils":23,"esprima-fb":9}],31:[function(e,t,n){"use strict";function r(e,t,n,r){var a=t.quasis;c.append("(",r);for(var i=0;i<a.length;i++){var u=a[i];if(""!==u.value.raw?(c.append(s(u),r),u.tail||c.append(" + ",r),c.move(u.range[0],r),c.catchupNewlines(u.range[1],r)):i>0&&!u.tail&&c.append(" + ",r),c.move(u.range[1],r),!u.tail){var l=t.expressions[i];l.type===o.Identifier||l.type===o.MemberExpression||l.type===o.CallExpression?c.catchup(l.range[1],r):(c.append("(",r),e(l,n,r),c.catchup(l.range[1],r),c.append(")",r)),""!==a[i+1].value.cooked&&c.append(" + ",r)}}return c.move(t.range[1],r),c.append(")",r),!1}function a(e,t,n,r){var a=t.quasi,o=a.quasis.length;c.move(t.tag.range[0],r),e(t.tag,n,r),c.catchup(t.tag.range[1],r),c.append("(function() { var siteObj = [",r);for(var u=0;o>u;u++)c.append(s(a.quasis[u]),r),u!==o-1&&c.append(", ",r);for(c.append("]; siteObj.raw = [",r),u=0;o>u;u++)c.append(i(a.quasis[u]),r),u!==o-1&&c.append(", ",r);if(c.append("]; Object.freeze(siteObj.raw); Object.freeze(siteObj); return siteObj; }()",r),o>1)for(u=0;u<a.expressions.length;u++){var l=a.expressions[u];c.append(", ",r),c.move(a.quasis[u].range[0],r),c.catchupNewlines(a.quasis[u].range[1],r),c.move(l.range[0],r),e(l,n,r),c.catchup(l.range[1],r)}return c.catchupNewlines(t.range[1],r),c.append(")",r),!1}function s(e){return JSON.stringify(e.value.cooked)}function i(e){return JSON.stringify(e.value.raw)}var o=e("esprima-fb").Syntax,c=e("../src/utils");r.test=function(e,t,n){return e.type===o.TemplateLiteral},a.test=function(e,t,n){return e.type===o.TaggedTemplateExpression},n.visitorList=[r,a]},{"../src/utils":23,"esprima-fb":9}],32:[function(e,t,n){function r(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.type!==o.SpreadProperty&&(r.type===o.Identifier?t.push(r.name):t.push(r.key.name))}return t}function a(e,t){return c+"("+e+","+t+")"}function s(e){return a(e,"{}")}function i(e,t){var n=r(t);return n.length?a(e,"{"+n.join(":1,")+":1}"):s(e)}var o=e("esprima-fb").Syntax,c="(function(source, exclusion) {var rest = {};var hasOwn = Object.prototype.hasOwnProperty;if (source == null) {throw new TypeError();}for (var key in source) {if (hasOwn.call(source, key) && !hasOwn.call(exclusion, key)) {rest[key] = source[key];}}return rest;})";n.renderRestExpression=i},{"esprima-fb":9}],33:[function(e,t,n){function r(e,t,n,r){s.catchup(t.range[0],r),s.append("Object.assign({",r),s.move(t.range[0]+1,r);for(var i=!1,o=0;o<t.properties.length;o++){var c=t.properties[o];c.type===a.SpreadProperty?(i||s.append("}",r),0===o&&s.append(",",r),s.catchup(c.range[0],r),s.move(c.range[0]+3,r),e(c.argument,n,r),s.catchup(c.range[1],r),i=!0):(s.catchup(c.range[0],r),i&&s.append("{",r),e(c,n,r),s.catchup(c.range[1],r),i=!1)}return s.catchupWhiteSpace(t.range[1]-1,r),s.move(t.range[1],r),i||s.append("}",r),s.append(")",r),!1}var a=e("esprima-fb").Syntax,s=e("../src/utils");r.test=function(e,t,n){if(e.type!==a.ObjectExpression)return!1;for(var r=!1,s=0;s<e.properties.length;s++){var i=e.properties[s];if(i.type===a.SpreadProperty)r=!0;else if("init"!==i.kind)return!1}return r},n.visitorList=[r]},{"../src/utils":23,"esprima-fb":9}],34:[function(e,t,n){var r=["break","do","in","typeof","case","else","instanceof","var","catch","export","new","void","class","extends","return","while","const","finally","super","with","continue","for","switch","yield","debugger","function","this","default","if","throw","delete","import","try"],a=["enum","await","implements","package","protected","static","interface","private","public"],s=["null","true","false"],i=[].concat(r,a,s),o=Object.create(null);i.forEach(function(e){o[e]=!0});var c=["enum","implements","package","protected","static","interface","private","public"],u=[].concat(r,c,s),l=Object.create(null);u.forEach(function(e){l[e]=!0}),n.isReservedWord=function(e){return!!o[e]},n.isES3ReservedWord=function(e){return!!l[e]}},{}],35:[function(e,t,n){function r(e,t,n,r){return i.catchup(t.key.range[0],r),i.append('"',r),i.catchup(t.key.range[1],r),i.append('"',r),i.catchup(t.value.range[0],r),e(t.value,n,r),!1}function a(e,t,n,r){return e(t.object,n,r),i.catchup(t.property.range[0]-1,r),i.append("[",r),i.catchupWhiteSpace(t.property.range[0],r),i.append('"',r),i.catchup(t.property.range[1],r),i.append('"]',r),!1}var s=e("esprima-fb").Syntax,i=e("../src/utils"),o=e("./reserved-words-helper");r.test=function(e){return e.type===s.Property&&e.key.type===s.Identifier&&!e.method&&!e.shorthand&&!e.computed&&o.isES3ReservedWord(e.key.name)},a.test=function(e){return e.type===s.MemberExpression&&e.property.type===s.Identifier&&o.isES3ReservedWord(e.property.name)},n.visitorList=[r,a]},{"../src/utils":23,"./reserved-words-helper":34,"esprima-fb":9}],36:[function(e,t,n){function r(e){return e.type===y.FunctionDeclaration||e.type===y.FunctionExpression||e.type===y.ArrowFunctionExpression}function a(e,t,n,r){return g.catchup(t.range[0],r),g.catchupWhiteOut(t.range[1],r),!1}function s(e,t,n,r){return g.catchupWhiteOut(t.range[1],r),!1}function i(e,t,n,r){return n.unshift(t),e(t.expression,n,r),n.shift(),g.catchup(t.typeAnnotation.range[0],r),g.catchupWhiteOut(t.typeAnnotation.range[1],r),!1}function o(e,t,n,r){return g.catchupWhiteOut(t.range[1],r),!1}function c(e,t,n,r){return g.catchupWhiteOut(t.range[1],r),!1}function u(e,t,n,r){return g.catchup(t.range[0],r),g.catchupWhiteOut(t.range[1],r),!1}function l(e,t,n,r){return g.catchup(t.range[0],r),g.catchupWhiteOut(t.range[1],r),!1}function p(e,t,n,r){return g.catchup(t.range[0]+t.name.length,r),g.catchupWhiteOut(t.range[1],r),!1}function m(e,t,n,r){return g.catchup(t.typeAnnotation.range[0],r),g.catchupWhiteOut(t.typeAnnotation.range[1],r),!1}function d(e,t,n,r){return g.catchup(t.typeAnnotation.range[0],r),g.catchupWhiteOut(t.typeAnnotation.range[1],r),!1}function h(e,t,n,r){return n.unshift(t),e(t.key,n,r),n.unshift(t.value),e(t.value.params,n,r),t.value.rest&&e(t.value.rest,n,r),t.value.returnType&&e(t.value.returnType,n,r),e(t.value.body,n,r),n.shift(),n.shift(),!1}function f(e,t,n,r){return g.catchupWhiteOut(t.range[1],r),!1}var v=e("esprima-fb"),g=e("../src/utils"),y=v.Syntax;a.test=function(e,t,n){return e.type===y.ClassProperty},s.test=function(e,t,n){return e.type===y.TypeAlias},i.test=function(e,t,n){return e.type===y.TypeCastExpression},o.test=function(e,t,n){return e.type===y.InterfaceDeclaration},c.test=function(e,t,n){switch(e.type){case y.DeclareVariable:case y.DeclareFunction:case y.DeclareClass:case y.DeclareModule:return!0}return!1},u.test=function(e,t,n){return e.type===y.TypeParameterDeclaration&&t[0]&&r(t[0])&&e===t[0].typeParameters},l.test=function(e,t,n){return t[0]&&r(t[0])&&e===t[0].returnType},p.test=function(e,t,n){return e.type===y.Identifier&&e.optional&&t[0]&&r(t[0])},m.test=function(e,t,n){return e.type===y.Identifier&&e.typeAnnotation},d.test=function(e,t,n){var r=e.type===y.ObjectPattern||e.type===y.ArrayPattern;return r&&e.typeAnnotation},h.test=function(e,t,n){return"Property"===e.type&&(e.method||"set"===e.kind||"get"===e.kind)||"MethodDefinition"===e.type},f.test=function(e,t,n){return"ImportDeclaration"===e.type&&e.isType},n.visitorList=[a,c,f,o,u,l,h,p,s,i,m,d]},{"../src/utils":23,"esprima-fb":9}],37:[function(e,t,n){"use strict";function r(e,t,n,r,a){var s=e.value.split(/\r\n|\n|\r/);r&&c.append(r,n);var i=0;s.forEach(function(e,t){e.match(/[^ \t]/)&&(i=t)}),s.forEach(function(e,r){var o=0===r,u=r===s.length-1,l=r===i,p=e.replace(/\t/g," ");o||(p=p.replace(/^[ ]+/,"")),u||(p=p.replace(/[ ]+$/,"")),o||c.append(e.match(/^[ \t]*/)[0],n),(p||l)&&(c.append(JSON.stringify(p)+(l?"":" + ' ' +"),n),l&&(a&&c.append(a,n),t||c.append(", ",n)),p&&!u&&c.append(e.match(/[ \t]*$/)[0],n)),u||c.append("\n",n)}),c.move(e.range[1],n)}function a(e,t,n,r,a){return c.move(t.range[0]+1,a),c.catchup(t.expression.range[0],a),e(t.expression,r,a),n||t.expression.type===o.JSXEmptyExpression||(c.catchup(t.expression.range[1],a,i),c.append(", ",a)),c.catchup(t.range[1]-1,a,i),c.move(t.range[1],a),!1}function s(e){return/^[a-z_$][a-z\d_$]*$/i.test(e)?e:'"'+e+'"'}function i(e){return e.replace(/^[ ]+/,"")}var o=e("jstransform").Syntax,c=e("jstransform/src/utils");n.renderJSXExpressionContainer=a,n.renderJSXLiteral=r,n.quoteAttrName=s,n.trimLeft=i},{jstransform:22,"jstransform/src/utils":23}],38:[function(e,t,n){"use strict";function r(e){return e.replace(m,"")}function a(e){return d.test(e)}function s(e,t,n,s){var m=t.openingElement,d=m.name,h=m.attributes;if(o.catchup(m.range[0],s,p),d.type===i.JSXNamespacedName&&d.namespace)throw new Error("Namespace tags are not supported. ReactJSX is not XML.");o.append("React.createElement(",s),d.type===i.JSXIdentifier&&a(d.name)?(o.append('"'+d.name+'"',s),o.move(d.range[1],s)):(o.move(d.range[0],s),o.catchup(d.range[1],s)),o.append(", ",s);var f=h.length,v=h.some(function(e){return e.type===i.JSXSpreadAttribute});v?o.append("React.__spread({",s):f?o.append("{",s):o.append("null",s);var g=!1;h.forEach(function(t,a){var m=a===h.length-1;if(t.type===i.JSXSpreadAttribute)return g||o.append("}, ",s),o.catchup(t.range[0],s,r),o.move(t.range[0]+1,s),o.catchup(t.argument.range[0],s,r),e(t.argument,n,s),o.catchup(t.argument.range[1],s),o.catchup(t.range[1]-1,s,r),m||o.append(", ",s),o.move(t.range[1],s),void(g=!0);if(m||(m=h[a+1].type===i.JSXSpreadAttribute),t.name.namespace)throw new Error("Namespace attributes are not supported. ReactJSX is not XML.");var d=t.name.name;o.catchup(t.range[0],s,p),g&&o.append("{",s),o.append(l(d),s),o.append(": ",s),t.value?(o.move(t.name.range[1],s),o.catchupNewlines(t.value.range[0],s),t.value.type===i.Literal?u(t.value,m,s):c(e,t.value,m,n,s)):(s.g.buffer+="true",s.g.position=t.name.range[1],m||o.append(", ",s)),o.catchup(t.range[1],s,p),g=!1}),m.selfClosing||(o.catchup(m.range[1]-1,s,p),o.move(m.range[1],s)),f&&!g&&o.append("}",s),v&&o.append(")",s);var y=t.children.filter(function(e){return!(e.type===i.Literal&&"string"==typeof e.value&&e.value.match(/^[ \t]*[\r\n][ \t\r\n]*$/));
});if(y.length>0){var b;y.forEach(function(e,t){(e.type!==i.JSXExpressionContainer||e.expression.type!==i.JSXEmptyExpression)&&(b=t)}),void 0!==b&&o.append(", ",s),y.forEach(function(t,r){o.catchup(t.range[0],s,p);var a=r>=b;t.type===i.Literal?u(t,a,s):t.type===i.JSXExpressionContainer?c(e,t,a,n,s):(e(t,n,s),a||o.append(", ",s)),o.catchup(t.range[1],s,p)})}return m.selfClosing?(o.catchup(m.range[1]-2,s,p),o.move(m.range[1],s)):(o.catchup(t.closingElement.range[0],s,p),o.move(t.closingElement.range[1],s)),o.append(")",s),!1}var i=e("jstransform").Syntax,o=e("jstransform/src/utils"),c=e("./jsx").renderJSXExpressionContainer,u=e("./jsx").renderJSXLiteral,l=e("./jsx").quoteAttrName,p=e("./jsx").trimLeft,m=/([^\s\(\)])/g,d=/^[a-z]|\-/;s.test=function(e,t,n){return e.type===i.JSXElement},n.visitorList=[s]},{"./jsx":37,jstransform:22,"jstransform/src/utils":23}],39:[function(e,t,n){"use strict";function r(e,t,n){if(t&&t.type===s.CallExpression&&t.callee.type===s.MemberExpression&&t.callee.object.type===s.Identifier&&"React"===t.callee.object.name&&t.callee.property.type===s.Identifier&&"createClass"===t.callee.property.name&&1===t.arguments.length&&t.arguments[0].type===s.ObjectExpression){var r=t.arguments[0].properties,a=r.every(function(e){var t=e.key.type===s.Identifier?e.key.name:e.key.value;return"displayName"!==t});a&&(i.catchup(t.arguments[0].range[0]+1,n),i.append('displayName: "'+e+'",',n))}}function a(e,t,n,a){var i,o;t.type===s.AssignmentExpression?(i=t.left,o=t.right):t.type===s.Property?(i=t.key,o=t.value):t.type===s.VariableDeclarator&&(i=t.id,o=t.init),i&&i.type===s.MemberExpression&&(i=i.property),i&&i.type===s.Identifier&&r(i.name,o,a)}var s=e("jstransform").Syntax,i=e("jstransform/src/utils");a.test=function(e,t,n){return e.type===s.AssignmentExpression||e.type===s.Property||e.type===s.VariableDeclarator},n.visitorList=[a]},{jstransform:22,"jstransform/src/utils":23}],40:[function(e,t,n){"use strict";function r(e){for(var t=[],n=0,r=b.length;r>n;n++)e&&-1!==e.indexOf(b[n])||(t=t.concat(g[b[n]]));return t}function a(e){for(var t=e.reduce(function(e,t){if(!y.hasOwnProperty(t))throw new Error("Unknown visitor set: "+t);return y[t].forEach(function(t){e[t]=!0}),e},{}),n=[],r=0;r<b.length;r++)t.hasOwnProperty(b[r])&&(n=n.concat(g[b[r]]));return n}var s=e("jstransform/visitors/es6-arrow-function-visitors"),i=e("jstransform/visitors/es6-class-visitors"),o=e("jstransform/visitors/es6-destructuring-visitors"),c=e("jstransform/visitors/es6-object-concise-method-visitors"),u=e("jstransform/visitors/es6-object-short-notation-visitors"),l=e("jstransform/visitors/es6-rest-param-visitors"),p=e("jstransform/visitors/es6-template-visitors"),m=e("jstransform/visitors/es6-call-spread-visitors"),d=e("jstransform/visitors/es7-spread-property-visitors"),h=e("./transforms/react"),f=e("./transforms/reactDisplayName"),v=e("jstransform/visitors/reserved-words-visitors"),g={"es6-arrow-functions":s.visitorList,"es6-classes":i.visitorList,"es6-destructuring":o.visitorList,"es6-object-concise-method":c.visitorList,"es6-object-short-notation":u.visitorList,"es6-rest-params":l.visitorList,"es6-templates":p.visitorList,"es6-call-spread":m.visitorList,"es7-spread-property":d.visitorList,react:h.visitorList.concat(f.visitorList),"reserved-words":v.visitorList},y={harmony:["es6-arrow-functions","es6-object-concise-method","es6-object-short-notation","es6-classes","es6-rest-params","es6-templates","es6-destructuring","es6-call-spread","es7-spread-property"],es3:["reserved-words"],react:["react"]},b=["reserved-words","es6-arrow-functions","es6-object-concise-method","es6-object-short-notation","es6-classes","es6-rest-params","es6-templates","es6-destructuring","es6-call-spread","es7-spread-property","react"];n.getVisitorsBySet=a,n.getAllVisitors=r,n.transformVisitors=g},{"./transforms/react":38,"./transforms/reactDisplayName":39,"jstransform/visitors/es6-arrow-function-visitors":24,"jstransform/visitors/es6-call-spread-visitors":25,"jstransform/visitors/es6-class-visitors":26,"jstransform/visitors/es6-destructuring-visitors":27,"jstransform/visitors/es6-object-concise-method-visitors":28,"jstransform/visitors/es6-object-short-notation-visitors":29,"jstransform/visitors/es6-rest-param-visitors":30,"jstransform/visitors/es6-template-visitors":31,"jstransform/visitors/es7-spread-property-visitors":33,"jstransform/visitors/reserved-words-visitors":35}],41:[function(e,t,n){"use strict";function r(e,t,n){var r=e;"function"==typeof e.toJSON&&(r=e.toJSON()),r.sources=[n],r.sourcesContent=[t];var s=a(JSON.stringify(r)).toString("base64");return"//# sourceMappingURL=data:portal/json;base64,"+s}var a=e("buffer").Buffer;t.exports=r},{buffer:3}]},{},[1])(1)}),function(e){var t=function(t,n){this.options=n,this.$elementFilestyle=[],this.$element=e(t)};t.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val(""),this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle").val(""),this.$elementFilestyle.remove()},disabled:function(e){if(e===!0)this.options.disabled||(this.$element.attr("disabled","true"),this.$elementFilestyle.find("label").attr("disabled","true"),this.options.disabled=!0);else{if(e!==!1)return this.options.disabled;this.options.disabled&&(this.$element.removeAttr("disabled"),this.$elementFilestyle.find("label").removeAttr("disabled"),this.options.disabled=!1)}},buttonBefore:function(e){if(e===!0)this.options.buttonBefore||(this.options.buttonBefore=!0,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(e!==!1)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=!1,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},icon:function(e){if(e===!0)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(e!==!1)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find(".glyphicon").remove())}},input:function(e){if(e===!0)this.options.input||(this.options.input=!0,this.options.buttonBefore?this.$elementFilestyle.append(this.htmlInput()):this.$elementFilestyle.prepend(this.htmlInput()),this.$elementFilestyle.find(".badge").remove(),this.pushNameFiles(),this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn"));else{if(e!==!1)return this.options.input;if(this.options.input){this.options.input=!1,this.$elementFilestyle.find(":text").remove();var t=this.pushNameFiles();t.length>0&&this.options.badge&&this.$elementFilestyle.find("label").append(' <span class="badge">'+t.length+"</span>"),this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn")}}},size:function(e){if(void 0===e)return this.options.size;var t=this.$elementFilestyle.find("label"),n=this.$elementFilestyle.find("input");t.removeClass("btn-lg btn-sm"),n.removeClass("input-lg input-sm"),"nr"!=e&&(t.addClass("btn-"+e),n.addClass("input-"+e))},buttonText:function(e){return void 0===e?this.options.buttonText:(this.options.buttonText=e,void this.$elementFilestyle.find("label span").html(this.options.buttonText))},buttonName:function(e){return void 0===e?this.options.buttonName:(this.options.buttonName=e,void this.$elementFilestyle.find("label").attr({"class":"btn "+this.options.buttonName}))},iconName:function(e){return void 0===e?this.options.iconName:void this.$elementFilestyle.find(".glyphicon").attr({"class":".glyphicon "+this.options.iconName})},htmlIcon:function(){return this.options.icon?'<span class="glyphicon '+this.options.iconName+'"></span> ':""},htmlInput:function(){return this.options.input?'<input type="text" class="form-control '+("nr"==this.options.size?"":"input-"+this.options.size)+'" disabled> ':""},pushNameFiles:function(){var e="",t=[];void 0===this.$element[0].files?t[0]={name:this.$element[0]&&this.$element[0].value}:t=this.$element[0].files;for(var n=0;n<t.length;n++)e+=t[n].name.split("\\").pop()+", ";return""!==e?this.$elementFilestyle.find(":text").val(e.replace(/\, $/g,"")):this.$elementFilestyle.find(":text").val(""),t},constructor:function(){var t=this,n="",r=t.$element.attr("id"),a="";""!==r&&r||(r="filestyle-"+e(".bootstrap-filestyle").length,t.$element.attr({id:r})),a='<span class="group-span-filestyle '+(t.options.input?"input-group-btn":"")+'"><label for="'+r+'" class="btn '+t.options.buttonName+" "+("nr"==t.options.size?"":"btn-"+t.options.size)+'" '+(t.options.disabled?'disabled="true"':"")+">"+t.htmlIcon()+t.options.buttonText+"</label></span>",n=t.options.buttonBefore?a+t.htmlInput():t.htmlInput()+a,t.$elementFilestyle=e('<div class="bootstrap-filestyle input-group">'+n+"</div>"),t.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress(function(e){return 13===e.keyCode||32===e.charCode?(t.$elementFilestyle.find("label").click(),!1):void 0}),t.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(t.$elementFilestyle),t.options.disabled&&t.$element.attr("disabled","true"),t.$element.change(function(){var e=t.pushNameFiles();0==t.options.input&&t.options.badge?0==t.$elementFilestyle.find(".badge").length?t.$elementFilestyle.find("label").append(' <span class="badge">'+e.length+"</span>"):0==e.length?t.$elementFilestyle.find(".badge").remove():t.$elementFilestyle.find(".badge").html(e.length):t.$elementFilestyle.find(".badge").remove()}),window.navigator.userAgent.search(/firefox/i)>-1&&t.$elementFilestyle.find("label").click(function(){return t.$element.click(),!1})}};var n=e.fn.filestyle;e.fn.filestyle=function(n,r){var a="",s=this.each(function(){if("file"===e(this).attr("type")){var s=e(this),i=s.data("filestyle"),o=e.extend({},e.fn.filestyle.defaults,n,"object"==typeof n&&n);i||(s.data("filestyle",i=new t(this,o)),i.constructor()),"string"==typeof n&&(a=i[n](r))}});return void 0!==typeof a?a:s},e.fn.filestyle.defaults={buttonText:"Choose file",iconName:"glyphicon-folder-open",buttonName:"btn-default",size:"nr",input:!0,badge:!0,icon:!0,buttonBefore:!1,disabled:!1},e.fn.filestyle.noConflict=function(){return e.fn.filestyle=n,this},e(function(){e(".filestyle").each(function(){var t=e(this),n={input:"false"===t.attr("data-input")?!1:!0,icon:"false"===t.attr("data-icon")?!1:!0,buttonBefore:"true"===t.attr("data-buttonBefore")?!0:!1,disabled:"true"===t.attr("data-disabled")?!0:!1,size:t.attr("data-size"),buttonText:t.attr("data-buttonText"),buttonName:t.attr("data-buttonName"),iconName:t.attr("data-iconName"),badge:"false"===t.attr("data-badge")?!1:!0};t.filestyle(n)})})}(window.jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var a=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(a,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.alert");a||n.data("bs.alert",a=new r(this)),"string"==typeof t&&a[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.5",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){i.detach().trigger("closed.bs.alert").remove()}var a=e(this),s=a.attr("data-target");s||(s=a.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var i=e(s);t&&t.preventDefault(),i.length||(i=a.closest(".alert")),i.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var a=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=a,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),a=r.data("bs.button"),s="object"==typeof t&&t;a||r.data("bs.button",a=new n(this,s)),"toggle"==t?a.toggle():t&&a.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.5",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,a=r.is("input")?"val":"html",s=r.data();t+="Text",null==s.resetText&&r.data("resetText",r[a]()),setTimeout(e.proxy(function(){r[a](null==s[t]?this.options[t]:s[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),e(n.target).is('input[type="radio"]')||e(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),a=r.data("bs.carousel"),s=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),i="string"==typeof t?t:s.slide;a||r.data("bs.carousel",a=new n(this,s)),"number"==typeof t?a.to(t):i?a[i]():s.interval&&a.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var a="prev"==e?-1:1,s=(n+a)%this.$items.length;return this.$items.eq(s)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,r){var a=this.$element.find(".item.active"),s=r||this.getItemForDirection(t,a),i=this.interval,o="next"==t?"left":"right",c=this;if(s.hasClass("active"))return this.sliding=!1;var u=s[0],l=e.Event("slide.bs.carousel",{relatedTarget:u,direction:o});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,i&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=e(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var m=e.Event("slid.bs.carousel",{relatedTarget:u,direction:o});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,a.addClass(o),s.addClass(o),a.one("bsTransitionEnd",function(){s.removeClass([t,o].join(" ")).addClass("active"),a.removeClass(["active",o].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger(m)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(a.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(m)),i&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var a=function(n){var r,a=e(this),s=e(a.attr("data-target")||(r=a.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var i=e.extend({},s.data(),a.data()),o=a.attr("data-slide-to");o&&(i.interval=!1),t.call(s,i),o&&s.data("bs.carousel").to(o),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),a=n.data("bs.collapse"),s=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!a&&s.toggle&&/show|hide/.test(t)&&(s.toggle=!1),a||n.data("bs.collapse",a=new r(this,s)),"string"==typeof t&&a[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.5",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,a=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(a&&a.length&&(t=a.data("bs.collapse"),t&&t.transitioning))){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){a&&a.length&&(n.call(a,"hide"),t||a.data("bs.collapse",null));var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var c=e.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[i](this.$element[0][c])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(r.TRANSITION_DURATION):a.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var a=e(r);this.addAriaAndCollapsedClass(t(a),a)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var a=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=a,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var a=e(this);a.attr("data-target")||r.preventDefault();var s=t(a),i=s.data("bs.collapse"),o=i?"toggle":a.data();n.call(s,o)})}(jQuery),+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function n(n){n&&3===n.which||(e(a).remove(),e(s).each(function(){var r=e(this),a=t(r),s={relatedTarget:this};a.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(a[0],n.target)||(a.trigger(n=e.Event("hide.bs.dropdown",s)),n.isDefaultPrevented()||(r.attr("aria-expanded","false"),a.removeClass("open").trigger("hidden.bs.dropdown",s))))}))}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new i(this)),"string"==typeof t&&r[t].call(n)})}var a=".dropdown-backdrop",s='[data-toggle="dropdown"]',i=function(t){e(t).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.5",i.prototype.toggle=function(r){var a=e(this);if(!a.is(".disabled, :disabled")){var s=t(a),i=s.hasClass("open");if(n(),!i){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var o={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",o)),r.isDefaultPrevented())return;a.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",o)}return!1}},i.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var a=t(r),i=a.hasClass("open");if(!i&&27!=n.which||i&&27==n.which)return 27==n.which&&a.find(s).trigger("focus"),r.trigger("click");var o=" li:not(.disabled):visible a",c=a.find(".dropdown-menu"+o);if(c.length){var u=c.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<c.length-1&&u++,~u||(u=0),c.eq(u).trigger("focus")}}}};var o=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=i,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,i.prototype.toggle).on("keydown.bs.dropdown.data-api",s,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,r){return this.each(function(){var a=e(this),s=a.data("bs.modal"),i=e.extend({},n.DEFAULTS,a.data(),"object"==typeof t&&t);s||a.data("bs.modal",s=new n(this,i)),"string"==typeof t?s[t](r):i.show&&s.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,a=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var a=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),a&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});a?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&a;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+a).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var i=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):i()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),a=r.attr("href"),s=e(r.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),i=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(a)&&a},s.data(),r.data());r.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(s,i,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),a=r.data("bs.tooltip"),s="object"==typeof t&&t;(a||!/destroy|hide/.test(t))&&(a||r.data("bs.tooltip",a=new n(this,s)),"string"==typeof t&&a[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var a=this.options.trigger.split(" "),s=a.length;s--;){var i=a[s];if("click"==i)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=i){var o="hover"==i?"mouseenter":"focusin",c="hover"==i?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(c+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",
selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var a=this,s=this.tip(),i=this.getUID(this.type);this.setContent(),s.attr("id",i),this.$element.attr("aria-describedby",i),this.options.animation&&s.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,u=c.test(o);u&&(o=o.replace(c,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),p=s[0].offsetWidth,m=s[0].offsetHeight;if(u){var d=o,h=this.getPosition(this.$viewport);o="bottom"==o&&l.bottom+m>h.bottom?"top":"top"==o&&l.top-m<h.top?"bottom":"right"==o&&l.right+p>h.width?"left":"left"==o&&l.left-p<h.left?"right":o,s.removeClass(d).addClass(o)}var f=this.getCalculatedOffset(o,l,p,m);this.applyPlacement(f,o);var v=function(){var e=a.hoverState;a.$element.trigger("shown.bs."+a.type),a.hoverState=null,"out"==e&&a.leave(a)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),a=r[0].offsetWidth,s=r[0].offsetHeight,i=parseInt(r.css("margin-top"),10),o=parseInt(r.css("margin-left"),10);isNaN(i)&&(i=0),isNaN(o)&&(o=0),t.top+=i,t.left+=o,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var c=r[0].offsetWidth,u=r[0].offsetHeight;"top"==n&&u!=s&&(t.top=t.top+s-u);var l=this.getViewportAdjustedDelta(n,t,c,u);l.left?t.left+=l.left:t.top+=l.top;var p=/top|bottom/.test(n),m=p?2*l.left-a+c:2*l.top-s+u,d=p?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(m,r[0][d],p)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=a.hoverState&&s.detach(),a.$element.removeAttr("aria-describedby").trigger("hidden.bs."+a.type),t&&t()}var a=this,s=e(this.$tip),i=e.Event("hide.bs."+this.type);return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,a=n.getBoundingClientRect();null==a.width&&(a=e.extend({},a,{width:a.right-a.left,height:a.bottom-a.top}));var s=r?{top:0,left:0}:t.offset(),i={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},a,i,o,s)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var a={top:0,left:0};if(!this.$viewport)return a;var s=this.options.viewport&&this.options.viewport.padding||0,i=this.getPosition(this.$viewport);if(/right|left/.test(e)){var o=t.top-s-i.scroll,c=t.top+s-i.scroll+r;o<i.top?a.top=i.top-o:c>i.top+i.height&&(a.top=i.top+i.height-c)}else{var u=t.left-s,l=t.left+s+n;u<i.left?a.left=i.left-u:l>i.right&&(a.left=i.left+i.width-l)}return a},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),a=r.data("bs.popover"),s="object"==typeof t&&t;(a||!/destroy|hide/.test(t))&&(a||r.data("bs.popover",a=new n(this,s)),"string"==typeof t&&a[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.5",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),a=r.data("bs.scrollspy"),s="object"==typeof n&&n;a||r.data("bs.scrollspy",a=new t(this,s)),"string"==typeof n&&a[n]()})}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),a=t.data("target")||t.attr("href"),s=/^#./.test(a)&&e(a);return s&&s.length&&s.is(":visible")&&[[s[n]().top+r,a]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),a=this.offsets,s=this.targets,i=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return i!=(e=s[s.length-1])&&this.activate(e);if(i&&t<a[0])return this.activeTarget=null,this.clear();for(e=a.length;e--;)i!=s[e]&&t>=a[e]&&(void 0===a[e+1]||t<a[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),a=r.data("bs.tab");a||r.data("bs.tab",a=new n(this)),"string"==typeof t&&a[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var a=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),i=e.Event("show.bs.tab",{relatedTarget:a[0]});if(a.trigger(s),t.trigger(i),!i.isDefaultPrevented()&&!s.isDefaultPrevented()){var o=e(r);this.activate(t.closest("li"),n),this.activate(o,o.parent(),function(){a.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:a[0]})})}}},n.prototype.activate=function(t,r,a){function s(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),a&&a()}var i=r.find("> .active"),o=a&&e.support.transition&&(i.length&&i.hasClass("fade")||!!r.find("> .fade").length);i.length&&o?i.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),i.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var a=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),a=r.data("bs.affix"),s="object"==typeof t&&t;a||r.data("bs.affix",a=new n(this,s)),"string"==typeof t&&a[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.5",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var a=this.$target.scrollTop(),s=this.$element.offset(),i=this.$target.height();if(null!=n&&"top"==this.affixed)return n>a?"top":!1;if("bottom"==this.affixed)return null!=n?a+this.unpin<=s.top?!1:"bottom":e-r>=a+i?!1:"bottom";var o=null==this.affixed,c=o?a:s.top,u=o?i:t;return null!=n&&n>=a?"top":null!=r&&c+u>=e-r?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,a=r.top,s=r.bottom,i=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(s=a=r),"function"==typeof a&&(a=r.top(this.$element)),"function"==typeof s&&(s=r.bottom(this.$element));var o=this.getState(i,t,a,s);if(this.affixed!=o){null!=this.unpin&&this.$element.css("top","");var c="affix"+(o?"-"+o:""),u=e.Event(c+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=o,this.unpin="bottom"==o?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(c).trigger(c.replace("affix","affixed")+".bs.affix")}"bottom"==o&&this.$element.offset({top:i-t-s})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery);var dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,r=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(a,s,i){var o=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(a)||/\d/.test(a)||(s=a,a=void 0),a=a?new Date(a):new Date,isNaN(a))throw SyntaxError("invalid date");s=String(o.masks[s]||s||o.masks["default"]),"UTC:"==s.slice(0,4)&&(s=s.slice(4),i=!0);var c=i?"getUTC":"get",u=a[c+"Date"](),l=a[c+"Day"](),p=a[c+"Month"](),m=a[c+"FullYear"](),d=a[c+"Hours"](),h=a[c+"Minutes"](),f=a[c+"Seconds"](),v=a[c+"Milliseconds"](),g=i?0:a.getTimezoneOffset(),y={d:u,dd:r(u),ddd:o.i18n.dayNames[l],dddd:o.i18n.dayNames[l+7],m:p+1,mm:r(p+1),mmm:o.i18n.monthNames[p],mmmm:o.i18n.monthNames[p+12],yy:String(m).slice(2),yyyy:m,h:d%12||12,hh:r(d%12||12),H:d,HH:r(d),M:h,MM:r(h),s:f,ss:r(f),l:r(v,3),L:r(v>99?Math.round(v/10):v),t:12>d?"a":"p",tt:12>d?"am":"pm",T:12>d?"A":"P",TT:12>d?"AM":"PM",Z:i?"UTC":(String(a).match(t)||[""]).pop().replace(n,""),o:(g>0?"-":"+")+r(100*Math.floor(Math.abs(g)/60)+Math.abs(g)%60,4),S:["th","st","nd","rd"][u%10>3?0:(u%100-u%10!=10)*u%10]};return s.replace(e,function(e){return e in y?y[e]:e.slice(1,e.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return dateFormat(this,e,t)},!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=ae.type(e);return"function"===n||ae.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(ae.isFunction(t))return ae.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ae.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(me.test(t))return ae.filter(t,e,n);t=ae.filter(t,e)}return ae.grep(e,function(e){return ae.inArray(e,t)>=0!==n})}function a(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function s(e){var t=Ee[e]={};return ae.each(e.match(be)||[],function(e,n){t[n]=!0}),t}function i(){he.addEventListener?(he.removeEventListener("DOMContentLoaded",o,!1),e.removeEventListener("load",o,!1)):(he.detachEvent("onreadystatechange",o),e.detachEvent("onload",o))}function o(){(he.addEventListener||"load"===event.type||"complete"===he.readyState)&&(i(),ae.ready())}function c(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(we,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Ne.test(n)?ae.parseJSON(n):n}catch(a){}ae.data(e,t,n)}else n=void 0}return n}function u(e){var t;for(t in e)if(("data"!==t||!ae.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(e,t,n,r){if(ae.acceptData(e)){var a,s,i=ae.expando,o=e.nodeType,c=o?ae.cache:e,u=o?e[i]:e[i]&&i;if(u&&c[u]&&(r||c[u].data)||void 0!==n||"string"!=typeof t)return u||(u=o?e[i]=K.pop()||ae.guid++:i),c[u]||(c[u]=o?{}:{toJSON:ae.noop}),("object"==typeof t||"function"==typeof t)&&(r?c[u]=ae.extend(c[u],t):c[u].data=ae.extend(c[u].data,t)),s=c[u],r||(s.data||(s.data={}),s=s.data),void 0!==n&&(s[ae.camelCase(t)]=n),"string"==typeof t?(a=s[t],null==a&&(a=s[ae.camelCase(t)])):a=s,a}}function p(e,t,n){if(ae.acceptData(e)){var r,a,s=e.nodeType,i=s?ae.cache:e,o=s?e[ae.expando]:ae.expando;if(i[o]){if(t&&(r=n?i[o]:i[o].data)){ae.isArray(t)?t=t.concat(ae.map(t,ae.camelCase)):t in r?t=[t]:(t=ae.camelCase(t),t=t in r?[t]:t.split(" ")),a=t.length;for(;a--;)delete r[t[a]];if(n?!u(r):!ae.isEmptyObject(r))return}(n||(delete i[o].data,u(i[o])))&&(s?ae.cleanData([e],!0):ne.deleteExpando||i!=i.window?delete i[o]:i[o]=null)}}}function m(){return!0}function d(){return!1}function h(){try{return he.activeElement}catch(e){}}function f(e){var t=Le.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function v(e,t){var n,r,a=0,s=typeof e.getElementsByTagName!==Re?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Re?e.querySelectorAll(t||"*"):void 0;if(!s)for(s=[],n=e.childNodes||e;null!=(r=n[a]);a++)!t||ae.nodeName(r,t)?s.push(r):ae.merge(s,v(r,t));return void 0===t||t&&ae.nodeName(e,t)?ae.merge([e],s):s}function g(e){Ie.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return ae.nodeName(e,"table")&&ae.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==ae.find.attr(e,"type"))+"/"+e.type,e}function E(e){var t=Je.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function C(e,t){for(var n,r=0;null!=(n=e[r]);r++)ae._data(n,"globalEval",!t||ae._data(t[r],"globalEval"))}function S(e,t){if(1===t.nodeType&&ae.hasData(e)){var n,r,a,s=ae._data(e),i=ae._data(t,s),o=s.events;if(o){delete i.handle,i.events={};for(n in o)for(r=0,a=o[n].length;a>r;r++)ae.event.add(t,n,o[n][r])}i.data&&(i.data=ae.extend({},i.data))}}function R(e,t){var n,r,a;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ne.noCloneEvent&&t[ae.expando]){a=ae._data(t);for(r in a.events)ae.removeEvent(t,r,a.handle);t.removeAttribute(ae.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,E(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ne.html5Clone&&e.innerHTML&&!ae.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ie.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function N(t,n){var r,a=ae(n.createElement(t)).appendTo(n.body),s=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(a[0]))?r.display:ae.css(a[0],"display");return a.detach(),s}function w(e){var t=he,n=Ze[e];return n||(n=N(e,t),"none"!==n&&n||(Ge=(Ge||ae("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Ge[0].contentWindow||Ge[0].contentDocument).document,t.write(),t.close(),n=N(e,t),Ge.detach()),Ze[e]=n),n}function _(e,t){return{get:function(){var n=e();return null!=n?n?void delete this.get:(this.get=t).apply(this,arguments):void 0}}}function x(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,a=mt.length;a--;)if(t=mt[a]+n,t in e)return t;return r}function k(e,t){for(var n,r,a,s=[],i=0,o=e.length;o>i;i++)r=e[i],r.style&&(s[i]=ae._data(r,"olddisplay"),n=r.style.display,t?(s[i]||"none"!==n||(r.style.display=""),""===r.style.display&&ke(r)&&(s[i]=ae._data(r,"olddisplay",w(r.nodeName)))):(a=ke(r),(n&&"none"!==n||!a)&&ae._data(r,"olddisplay",a?n:ae.css(r,"display"))));for(i=0;o>i;i++)r=e[i],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[i]||"":"none"));return e}function D(e,t,n){var r=ct.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function I(e,t,n,r,a){for(var s=n===(r?"border":"content")?4:"width"===t?1:0,i=0;4>s;s+=2)"margin"===n&&(i+=ae.css(e,n+xe[s],!0,a)),r?("content"===n&&(i-=ae.css(e,"padding"+xe[s],!0,a)),"margin"!==n&&(i-=ae.css(e,"border"+xe[s]+"Width",!0,a))):(i+=ae.css(e,"padding"+xe[s],!0,a),"padding"!==n&&(i+=ae.css(e,"border"+xe[s]+"Width",!0,a)));return i}function M(e,t,n){var r=!0,a="width"===t?e.offsetWidth:e.offsetHeight,s=et(e),i=ne.boxSizing&&"border-box"===ae.css(e,"boxSizing",!1,s);if(0>=a||null==a){if(a=tt(e,t,s),(0>a||null==a)&&(a=e.style[t]),rt.test(a))return a;r=i&&(ne.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+I(e,t,n||(i?"border":"content"),r,s)+"px"}function T(e,t,n,r,a){return new T.prototype.init(e,t,n,r,a)}function A(){return setTimeout(function(){dt=void 0}),dt=ae.now()}function P(e,t){var n,r={height:e},a=0;for(t=t?1:0;4>a;a+=2-t)n=xe[a],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function O(e,t,n){for(var r,a=(bt[t]||[]).concat(bt["*"]),s=0,i=a.length;i>s;s++)if(r=a[s].call(n,t,e))return r}function L(e,t,n){var r,a,s,i,o,c,u,l,p=this,m={},d=e.style,h=e.nodeType&&ke(e),f=ae._data(e,"fxshow");n.queue||(o=ae._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,c=o.empty.fire,o.empty.fire=function(){o.unqueued||c()}),o.unqueued++,p.always(function(){p.always(function(){o.unqueued--,ae.queue(e,"fx").length||o.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],u=ae.css(e,"display"),l="none"===u?ae._data(e,"olddisplay")||w(e.nodeName):u,"inline"===l&&"none"===ae.css(e,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==w(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ne.shrinkWrapBlocks()||p.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(a=t[r],ft.exec(a)){if(delete t[r],s=s||"toggle"===a,a===(h?"hide":"show")){if("show"!==a||!f||void 0===f[r])continue;h=!0}m[r]=f&&f[r]||ae.style(e,r)}else u=void 0;if(ae.isEmptyObject(m))"inline"===("none"===u?w(e.nodeName):u)&&(d.display=u);else{f?"hidden"in f&&(h=f.hidden):f=ae._data(e,"fxshow",{}),s&&(f.hidden=!h),h?ae(e).show():p.done(function(){ae(e).hide()}),p.done(function(){var t;ae._removeData(e,"fxshow");for(t in m)ae.style(e,t,m[t])});for(r in m)i=O(h?f[r]:0,r,p),r in f||(f[r]=i.start,h&&(i.end=i.start,i.start="width"===r||"height"===r?1:0))}}function F(e,t){var n,r,a,s,i;for(n in e)if(r=ae.camelCase(n),a=t[r],s=e[n],ae.isArray(s)&&(a=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),i=ae.cssHooks[r],i&&"expand"in i){s=i.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=a)}else t[r]=a}function U(e,t,n){var r,a,s=0,i=yt.length,o=ae.Deferred().always(function(){delete c.elem}),c=function(){if(a)return!1;for(var t=dt||A(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,s=1-r,i=0,c=u.tweens.length;c>i;i++)u.tweens[i].run(s);return o.notifyWith(e,[u,s,n]),1>s&&c?n:(o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:ae.extend({},t),opts:ae.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:dt||A(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ae.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(a)return this;for(a=!0;r>n;n++)u.tweens[n].run(1);return t?o.resolveWith(e,[u,t]):o.rejectWith(e,[u,t]),this}}),l=u.props;for(F(l,u.opts.specialEasing);i>s;s++)if(r=yt[s].call(u,e,l,u.opts))return r;return ae.map(l,O,u),ae.isFunction(u.opts.start)&&u.opts.start.call(e,u),ae.fx.timer(ae.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function j(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,a=0,s=t.toLowerCase().match(be)||[];if(ae.isFunction(n))for(;r=s[a++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function $(e,t,n,r){function a(o){var c;return s[o]=!0,ae.each(e[o]||[],function(e,o){var u=o(t,n,r);return"string"!=typeof u||i||s[u]?i?!(c=u):void 0:(t.dataTypes.unshift(u),a(u),!1)}),c}var s={},i=e===Wt;return a(t.dataTypes[0])||!s["*"]&&a("*")}function q(e,t){var n,r,a=ae.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((a[r]?e:n||(n={}))[r]=t[r]);return n&&ae.extend(!0,e,n),e}function B(e,t,n){for(var r,a,s,i,o=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(i in o)if(o[i]&&o[i].test(a)){c.unshift(i);break}if(c[0]in n)s=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){s=i;break}r||(r=i)}s=s||r}return s?(s!==c[0]&&c.unshift(s),n[s]):void 0}function W(e,t,n,r){var a,s,i,o,c,u={},l=e.dataTypes.slice();if(l[1])for(i in e.converters)u[i.toLowerCase()]=e.converters[i];for(s=l.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=s,s=l.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(i=u[c+" "+s]||u["* "+s],!i)for(a in u)if(o=a.split(" "),o[1]===s&&(i=u[c+" "+o[0]]||u["* "+o[0]])){i===!0?i=u[a]:u[a]!==!0&&(s=o[0],l.unshift(o[1]));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(p){return{state:"parsererror",error:i?p:"No conversion from "+c+" to "+s}}}return{state:"success",data:t}}function H(e,t,n,r){var a;if(ae.isArray(t))ae.each(t,function(t,a){n||Jt.test(e)?r(e,a):H(e+"["+("object"==typeof a?t:"")+"]",a,n,r)});else if(n||"object"!==ae.type(t))r(e,t);else for(a in t)H(e+"["+a+"]",t[a],n,r)}function V(){try{return new e.XMLHttpRequest}catch(t){}}function z(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function J(e){return ae.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var K=[],X=K.slice,Q=K.concat,Y=K.push,G=K.indexOf,Z={},ee=Z.toString,te=Z.hasOwnProperty,ne={},re="1.11.3",ae=function(e,t){return new ae.fn.init(e,t)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ie=/^-ms-/,oe=/-([\da-z])/gi,ce=function(e,t){return t.toUpperCase()};ae.fn=ae.prototype={jquery:re,constructor:ae,selector:"",length:0,toArray:function(){return X.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:X.call(this)},pushStack:function(e){var t=ae.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ae.each(this,e,t)},map:function(e){return this.pushStack(ae.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:K.sort,splice:K.splice},ae.extend=ae.fn.extend=function(){var e,t,n,r,a,s,i=arguments[0]||{},o=1,c=arguments.length,u=!1;for("boolean"==typeof i&&(u=i,i=arguments[o]||{},o++),"object"==typeof i||ae.isFunction(i)||(i={}),o===c&&(i=this,o--);c>o;o++)if(null!=(a=arguments[o]))for(r in a)e=i[r],n=a[r],i!==n&&(u&&n&&(ae.isPlainObject(n)||(t=ae.isArray(n)))?(t?(t=!1,s=e&&ae.isArray(e)?e:[]):s=e&&ae.isPlainObject(e)?e:{},i[r]=ae.extend(u,s,n)):void 0!==n&&(i[r]=n));return i},ae.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ae.type(e)},isArray:Array.isArray||function(e){return"array"===ae.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!ae.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ae.type(e)||e.nodeType||ae.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&ae.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ie,"ms-").replace(oe,ce)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var a,s=0,i=e.length,o=n(e);if(r){if(o)for(;i>s&&(a=t.apply(e[s],r),a!==!1);s++);else for(s in e)if(a=t.apply(e[s],r),a===!1)break}else if(o)for(;i>s&&(a=t.call(e[s],s,e[s]),a!==!1);s++);else for(s in e)if(a=t.call(e[s],s,e[s]),a===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(se,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ae.merge(r,"string"==typeof e?[e]:e):Y.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(G)return G.call(t,e,n);
for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;n>r;)e[a++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[a++]=t[r++];return e.length=a,e},grep:function(e,t,n){for(var r,a=[],s=0,i=e.length,o=!n;i>s;s++)r=!t(e[s],s),r!==o&&a.push(e[s]);return a},map:function(e,t,r){var a,s=0,i=e.length,o=n(e),c=[];if(o)for(;i>s;s++)a=t(e[s],s,r),null!=a&&c.push(a);else for(s in e)a=t(e[s],s,r),null!=a&&c.push(a);return Q.apply([],c)},guid:1,proxy:function(e,t){var n,r,a;return"string"==typeof t&&(a=e[t],t=e,e=a),ae.isFunction(e)?(n=X.call(arguments,2),r=function(){return e.apply(t||this,n.concat(X.call(arguments)))},r.guid=e.guid=e.guid||ae.guid++,r):void 0},now:function(){return+new Date},support:ne}),ae.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ue=function(e){function t(e,t,n,r){var a,s,i,o,c,u,p,d,h,f;if((t?t.ownerDocument||t:$)!==T&&M(t),t=t||T,n=n||[],o=t.nodeType,"string"!=typeof e||!e||1!==o&&9!==o&&11!==o)return n;if(!r&&P){if(11!==o&&(a=ye.exec(e)))if(i=a[1]){if(9===o){if(s=t.getElementById(i),!s||!s.parentNode)return n;if(s.id===i)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(i))&&U(t,s)&&s.id===i)return n.push(s),n}else{if(a[2])return G.apply(n,t.getElementsByTagName(e)),n;if((i=a[3])&&C.getElementsByClassName)return G.apply(n,t.getElementsByClassName(i)),n}if(C.qsa&&(!O||!O.test(e))){if(d=p=j,h=t,f=1!==o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(u=w(e),(p=t.getAttribute("id"))?d=p.replace(Ee,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",c=u.length;c--;)u[c]=d+m(u[c]);h=be.test(e)&&l(t.parentNode)||t,f=u.join(",")}if(f)try{return G.apply(n,h.querySelectorAll(f)),n}catch(v){}finally{p||t.removeAttribute("id")}}}return x(e.replace(ce,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>S.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[j]=!0,e}function a(e){var t=T.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),r=e.length;r--;)S.attrHandle[n[r]]=t}function i(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function o(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var a,s=e([],n.length,t),i=s.length;i--;)n[a=s[i]]&&(n[a]=!(r[a]=n[a]))})})}function l(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function p(){}function m(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,a=n&&"parentNode"===r,s=B++;return t.first?function(t,n,s){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,s)}:function(t,n,i){var o,c,u=[q,s];if(i){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,i))return!0}else for(;t=t[r];)if(1===t.nodeType||a){if(c=t[j]||(t[j]={}),(o=c[r])&&o[0]===q&&o[1]===s)return u[2]=o[2];if(c[r]=u,u[2]=e(t,n,i))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function f(e,n,r){for(var a=0,s=n.length;s>a;a++)t(e,n[a],r);return r}function v(e,t,n,r,a){for(var s,i=[],o=0,c=e.length,u=null!=t;c>o;o++)(s=e[o])&&(!n||n(s,r,a))&&(i.push(s),u&&t.push(o));return i}function g(e,t,n,a,s,i){return a&&!a[j]&&(a=g(a)),s&&!s[j]&&(s=g(s,i)),r(function(r,i,o,c){var u,l,p,m=[],d=[],h=i.length,g=r||f(t||"*",o.nodeType?[o]:o,[]),y=!e||!r&&t?g:v(g,m,e,o,c),b=n?s||(r?e:h||a)?[]:i:y;if(n&&n(y,b,o,c),a)for(u=v(b,d),a(u,[],o,c),l=u.length;l--;)(p=u[l])&&(b[d[l]]=!(y[d[l]]=p));if(r){if(s||e){if(s){for(u=[],l=b.length;l--;)(p=b[l])&&u.push(y[l]=p);s(null,b=[],u,c)}for(l=b.length;l--;)(p=b[l])&&(u=s?ee(r,p):m[l])>-1&&(r[u]=!(i[u]=p))}}else b=v(b===i?b.splice(h,b.length):b),s?s(null,i,b,c):G.apply(i,b)})}function y(e){for(var t,n,r,a=e.length,s=S.relative[e[0].type],i=s||S.relative[" "],o=s?1:0,c=d(function(e){return e===t},i,!0),u=d(function(e){return ee(t,e)>-1},i,!0),l=[function(e,n,r){var a=!s&&(r||n!==k)||((t=n).nodeType?c(e,n,r):u(e,n,r));return t=null,a}];a>o;o++)if(n=S.relative[e[o].type])l=[d(h(l),n)];else{if(n=S.filter[e[o].type].apply(null,e[o].matches),n[j]){for(r=++o;a>r&&!S.relative[e[r].type];r++);return g(o>1&&h(l),o>1&&m(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(ce,"$1"),n,r>o&&y(e.slice(o,r)),a>r&&y(e=e.slice(r)),a>r&&m(e))}l.push(n)}return h(l)}function b(e,n){var a=n.length>0,s=e.length>0,i=function(r,i,o,c,u){var l,p,m,d=0,h="0",f=r&&[],g=[],y=k,b=r||s&&S.find.TAG("*",u),E=q+=null==y?1:Math.random()||.1,C=b.length;for(u&&(k=i!==T&&i);h!==C&&null!=(l=b[h]);h++){if(s&&l){for(p=0;m=e[p++];)if(m(l,i,o)){c.push(l);break}u&&(q=E)}a&&((l=!m&&l)&&d--,r&&f.push(l))}if(d+=h,a&&h!==d){for(p=0;m=n[p++];)m(f,g,i,o);if(r){if(d>0)for(;h--;)f[h]||g[h]||(g[h]=Q.call(c));g=v(g)}G.apply(c,g),u&&!r&&g.length>0&&d+n.length>1&&t.uniqueSort(c)}return u&&(q=E,k=y),f};return a?r(i):i}var E,C,S,R,N,w,_,x,k,D,I,M,T,A,P,O,L,F,U,j="sizzle"+1*new Date,$=e.document,q=0,B=0,W=n(),H=n(),V=n(),z=function(e,t){return e===t&&(I=!0),0},J=1<<31,K={}.hasOwnProperty,X=[],Q=X.pop,Y=X.push,G=X.push,Z=X.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=re.replace("w","w#"),se="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ae+"))|)"+ne+"*\\]",ie=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",oe=new RegExp(ne+"+","g"),ce=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),pe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),me=new RegExp(ie),de=new RegExp("^"+ae+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,Ee=/'|\\/g,Ce=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Se=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Re=function(){M()};try{G.apply(X=Z.call($.childNodes),$.childNodes),X[$.childNodes.length].nodeType}catch(Ne){G={apply:X.length?function(e,t){Y.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}C=t.support={},N=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},M=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:$;return r!==T&&9===r.nodeType&&r.documentElement?(T=r,A=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Re,!1):n.attachEvent&&n.attachEvent("onunload",Re)),P=!N(r),C.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=a(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=ge.test(r.getElementsByClassName),C.getById=a(function(e){return A.appendChild(e).id=j,!r.getElementsByName||!r.getElementsByName(j).length}),C.getById?(S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&P){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},S.filter.ID=function(e){var t=e.replace(Ce,Se);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(Ce,Se);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),S.find.TAG=C.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):C.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[a++];)1===n.nodeType&&r.push(n);return r}return s},S.find.CLASS=C.getElementsByClassName&&function(e,t){return P?t.getElementsByClassName(e):void 0},L=[],O=[],(C.qsa=ge.test(r.querySelectorAll))&&(a(function(e){A.appendChild(e).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+j+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+j+"+*").length||O.push(".#.+[+~]")}),a(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(C.matchesSelector=ge.test(F=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&a(function(e){C.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),L.push("!=",ie)}),O=O.length&&new RegExp(O.join("|")),L=L.length&&new RegExp(L.join("|")),t=ge.test(A.compareDocumentPosition),U=t||ge.test(A.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return I=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!C.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===$&&U($,e)?-1:t===r||t.ownerDocument===$&&U($,t)?1:D?ee(D,e)-ee(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return I=!0,0;var n,a=0,s=e.parentNode,o=t.parentNode,c=[e],u=[t];if(!s||!o)return e===r?-1:t===r?1:s?-1:o?1:D?ee(D,e)-ee(D,t):0;if(s===o)return i(e,t);for(n=e;n=n.parentNode;)c.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;c[a]===u[a];)a++;return a?i(c[a],u[a]):c[a]===$?-1:u[a]===$?1:0},r):T},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==T&&M(e),n=n.replace(pe,"='$1']"),!(!C.matchesSelector||!P||L&&L.test(n)||O&&O.test(n)))try{var r=F.call(e,n);if(r||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(a){}return t(n,T,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==T&&M(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==T&&M(e);var n=S.attrHandle[t.toLowerCase()],r=n&&K.call(S.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==r?r:C.attributes||!P?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,a=0;if(I=!C.detectDuplicates,D=!C.sortStable&&e.slice(0),e.sort(z),I){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)e.splice(n[r],1)}return D=null,e},R=t.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=R(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=R(t);return n},S=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ce,Se),e[3]=(e[3]||e[4]||e[5]||"").replace(Ce,Se),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&me.test(n)&&(t=w(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ce,Se).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(a){var s=t.attr(a,e);return null==s?"!="===n:n?(s+="","="===n?s===r:"!="===n?s!==r:"^="===n?r&&0===s.indexOf(r):"*="===n?r&&s.indexOf(r)>-1:"$="===n?r&&s.slice(-r.length)===r:"~="===n?(" "+s.replace(oe," ")+" ").indexOf(r)>-1:"|="===n?s===r||s.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,a){var s="nth"!==e.slice(0,3),i="last"!==e.slice(-4),o="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,c){var u,l,p,m,d,h,f=s!==i?"nextSibling":"previousSibling",v=t.parentNode,g=o&&t.nodeName.toLowerCase(),y=!c&&!o;if(v){if(s){for(;f;){for(p=t;p=p[f];)if(o?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;h=f="only"===e&&!h&&"nextSibling"}return!0}if(h=[i?v.firstChild:v.lastChild],i&&y){for(l=v[j]||(v[j]={}),u=l[e]||[],d=u[0]===q&&u[1],m=u[0]===q&&u[2],p=d&&v.childNodes[d];p=++d&&p&&p[f]||(m=d=0)||h.pop();)if(1===p.nodeType&&++m&&p===t){l[e]=[q,d,m];break}}else if(y&&(u=(t[j]||(t[j]={}))[e])&&u[0]===q)m=u[1];else for(;(p=++d&&p&&p[f]||(m=d=0)||h.pop())&&((o?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++m||(y&&((p[j]||(p[j]={}))[e]=[q,m]),p!==t)););return m-=a,m===r||m%r===0&&m/r>=0}}},PSEUDO:function(e,n){var a,s=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[j]?s(n):s.length>1?(a=[e,e,"",n],S.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,a=s(e,n),i=a.length;i--;)r=ee(e,a[i]),e[r]=!(t[r]=a[i])}):function(e){return s(e,0,a)}):s}},pseudos:{not:r(function(e){var t=[],n=[],a=_(e.replace(ce,"$1"));return a[j]?r(function(e,t,n,r){for(var s,i=a(e,null,r,[]),o=e.length;o--;)(s=i[o])&&(e[o]=!(t[o]=s))}):function(e,r,s){return t[0]=e,a(t,null,s,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(Ce,Se),function(t){return(t.textContent||t.innerText||R(t)).indexOf(e)>-1}}),lang:r(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Ce,Se).toLowerCase(),function(t){var n;do if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===A},focus:function(e){return e===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},S.pseudos.nth=S.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[E]=o(E);for(E in{submit:!0,reset:!0})S.pseudos[E]=c(E);return p.prototype=S.filters=S.pseudos,S.setFilters=new p,w=t.tokenize=function(e,n){var r,a,s,i,o,c,u,l=H[e+" "];if(l)return n?0:l.slice(0);for(o=e,c=[],u=S.preFilter;o;){(!r||(a=ue.exec(o)))&&(a&&(o=o.slice(a[0].length)||o),c.push(s=[])),r=!1,(a=le.exec(o))&&(r=a.shift(),s.push({value:r,type:a[0].replace(ce," ")}),o=o.slice(r.length));for(i in S.filter)!(a=he[i].exec(o))||u[i]&&!(a=u[i](a))||(r=a.shift(),s.push({value:r,type:i,matches:a}),o=o.slice(r.length));if(!r)break}return n?o.length:o?t.error(e):H(e,c).slice(0)},_=t.compile=function(e,t){var n,r=[],a=[],s=V[e+" "];if(!s){for(t||(t=w(e)),n=t.length;n--;)s=y(t[n]),s[j]?r.push(s):a.push(s);s=V(e,b(a,r)),s.selector=e}return s},x=t.select=function(e,t,n,r){var a,s,i,o,c,u="function"==typeof e&&e,p=!r&&w(e=u.selector||e);if(n=n||[],1===p.length){if(s=p[0]=p[0].slice(0),s.length>2&&"ID"===(i=s[0]).type&&C.getById&&9===t.nodeType&&P&&S.relative[s[1].type]){if(t=(S.find.ID(i.matches[0].replace(Ce,Se),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(a=he.needsContext.test(e)?0:s.length;a--&&(i=s[a],!S.relative[o=i.type]);)if((c=S.find[o])&&(r=c(i.matches[0].replace(Ce,Se),be.test(s[0].type)&&l(t.parentNode)||t))){if(s.splice(a,1),e=r.length&&m(s),!e)return G.apply(n,r),n;break}}return(u||_(e,p))(r,t,!P,n,be.test(e)&&l(t.parentNode)||t),n},C.sortStable=j.split("").sort(z).join("")===j,C.detectDuplicates=!!I,M(),C.sortDetached=a(function(e){return 1&e.compareDocumentPosition(T.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),C.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);ae.find=ue,ae.expr=ue.selectors,ae.expr[":"]=ae.expr.pseudos,ae.unique=ue.uniqueSort,ae.text=ue.getText,ae.isXMLDoc=ue.isXML,ae.contains=ue.contains;var le=ae.expr.match.needsContext,pe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,me=/^.[^:#\[\.,]*$/;ae.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ae.find.matchesSelector(r,e)?[r]:[]:ae.find.matches(e,ae.grep(t,function(e){return 1===e.nodeType}))},ae.fn.extend({find:function(e){var t,n=[],r=this,a=r.length;if("string"!=typeof e)return this.pushStack(ae(e).filter(function(){for(t=0;a>t;t++)if(ae.contains(r[t],this))return!0}));for(t=0;a>t;t++)ae.find(e,r[t],n);return n=this.pushStack(a>1?ae.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&le.test(e)?ae(e):e||[],!1).length}});var de,he=e.document,fe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ve=ae.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:fe.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||de).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ae?t[0]:t,ae.merge(this,ae.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:he,!0)),pe.test(n[1])&&ae.isPlainObject(t))for(n in t)ae.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=he.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return de.find(e);this.length=1,this[0]=r}return this.context=he,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ae.isFunction(e)?"undefined"!=typeof de.ready?de.ready(e):e(ae):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ae.makeArray(e,this))};ve.prototype=ae.fn,de=ae(he);var ge=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};ae.extend({dir:function(e,t,n){for(var r=[],a=e[t];a&&9!==a.nodeType&&(void 0===n||1!==a.nodeType||!ae(a).is(n));)1===a.nodeType&&r.push(a),a=a[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),ae.fn.extend({has:function(e){var t,n=ae(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(ae.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,a=this.length,s=[],i=le.test(e)||"string"!=typeof e?ae(e,t||this.context):0;a>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(i?i.index(n)>-1:1===n.nodeType&&ae.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?ae.unique(s):s)},index:function(e){return e?"string"==typeof e?ae.inArray(this[0],ae(e)):ae.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ae.unique(ae.merge(this.get(),ae(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ae.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ae.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ae.dir(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return ae.dir(e,"nextSibling")},prevAll:function(e){return ae.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ae.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ae.dir(e,"previousSibling",n)},siblings:function(e){return ae.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ae.sibling(e.firstChild)},contents:function(e){return ae.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ae.merge([],e.childNodes)}},function(e,t){ae.fn[e]=function(n,r){var a=ae.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(a=ae.filter(r,a)),this.length>1&&(ye[e]||(a=ae.unique(a)),ge.test(e)&&(a=a.reverse())),this.pushStack(a)}});var be=/\S+/g,Ee={};ae.Callbacks=function(e){e="string"==typeof e?Ee[e]||s(e):ae.extend({},e);var t,n,r,a,i,o,c=[],u=!e.once&&[],l=function(s){for(n=e.memory&&s,r=!0,i=o||0,o=0,a=c.length,t=!0;c&&a>i;i++)if(c[i].apply(s[0],s[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,c&&(u?u.length&&l(u.shift()):n?c=[]:p.disable())},p={add:function(){if(c){var r=c.length;!function s(t){ae.each(t,function(t,n){var r=ae.type(n);"function"===r?e.unique&&p.has(n)||c.push(n):n&&n.length&&"string"!==r&&s(n)})}(arguments),t?a=c.length:n&&(o=r,l(n))}return this},remove:function(){return c&&ae.each(arguments,function(e,n){for(var r;(r=ae.inArray(n,c,r))>-1;)c.splice(r,1),t&&(a>=r&&a--,i>=r&&i--)}),this},has:function(e){return e?ae.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=u=n=void 0,this},disabled:function(){return!c},lock:function(){return u=void 0,n||p.disable(),this},locked:function(){return!u},fireWith:function(e,n){return!c||r&&!u||(n=n||[],n=[e,n.slice?n.slice():n],t?u.push(n):l(n)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},ae.extend({Deferred:function(e){var t=[["resolve","done",ae.Callbacks("once memory"),"resolved"],["reject","fail",ae.Callbacks("once memory"),"rejected"],["notify","progress",ae.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ae.Deferred(function(n){ae.each(t,function(t,s){var i=ae.isFunction(e[t])&&e[t];a[s[1]](function(){var e=i&&i.apply(this,arguments);e&&ae.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,i?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ae.extend(e,r):r}},a={};return r.pipe=r.then,ae.each(t,function(e,s){var i=s[2],o=s[3];r[s[1]]=i.add,o&&i.add(function(){n=o},t[1^e][2].disable,t[2][2].lock),a[s[0]]=function(){return a[s[0]+"With"](this===a?r:this,arguments),this},a[s[0]+"With"]=i.fireWith}),r.promise(a),e&&e.call(a,a),a},when:function(e){var t,n,r,a=0,s=X.call(arguments),i=s.length,o=1!==i||e&&ae.isFunction(e.promise)?i:0,c=1===o?e:ae.Deferred(),u=function(e,n,r){return function(a){n[e]=this,r[e]=arguments.length>1?X.call(arguments):a,r===t?c.notifyWith(n,r):--o||c.resolveWith(n,r)}};if(i>1)for(t=new Array(i),n=new Array(i),r=new Array(i);i>a;a++)s[a]&&ae.isFunction(s[a].promise)?s[a].promise().done(u(a,r,s)).fail(c.reject).progress(u(a,n,t)):--o;return o||c.resolveWith(r,s),c.promise()}});var Ce;ae.fn.ready=function(e){return ae.ready.promise().done(e),this},ae.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ae.readyWait++:ae.ready(!0)},ready:function(e){if(e===!0?!--ae.readyWait:!ae.isReady){if(!he.body)return setTimeout(ae.ready);ae.isReady=!0,e!==!0&&--ae.readyWait>0||(Ce.resolveWith(he,[ae]),ae.fn.triggerHandler&&(ae(he).triggerHandler("ready"),ae(he).off("ready")))}}}),ae.ready.promise=function(t){if(!Ce)if(Ce=ae.Deferred(),"complete"===he.readyState)setTimeout(ae.ready);else if(he.addEventListener)he.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",o,!1);else{he.attachEvent("onreadystatechange",o),e.attachEvent("onload",o);var n=!1;try{n=null==e.frameElement&&he.documentElement}catch(r){}n&&n.doScroll&&!function a(){if(!ae.isReady){try{n.doScroll("left")}catch(e){return setTimeout(a,50)}i(),ae.ready()}}()}return Ce.promise(t)};var Se,Re="undefined";for(Se in ae(ne))break;ne.ownLast="0"!==Se,ne.inlineBlockNeedsLayout=!1,ae(function(){var e,t,n,r;n=he.getElementsByTagName("body")[0],n&&n.style&&(t=he.createElement("div"),r=he.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Re&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=he.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(t){ne.deleteExpando=!1}}e=null}(),ae.acceptData=function(e){var t=ae.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,we=/([A-Z])/g;ae.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ae.cache[e[ae.expando]]:e[ae.expando],!!e&&!u(e)},data:function(e,t,n){return l(e,t,n)},removeData:function(e,t){return p(e,t)},_data:function(e,t,n){return l(e,t,n,!0)},_removeData:function(e,t){return p(e,t,!0)}}),ae.fn.extend({data:function(e,t){var n,r,a,s=this[0],i=s&&s.attributes;if(void 0===e){if(this.length&&(a=ae.data(s),1===s.nodeType&&!ae._data(s,"parsedAttrs"))){for(n=i.length;n--;)i[n]&&(r=i[n].name,0===r.indexOf("data-")&&(r=ae.camelCase(r.slice(5)),c(s,r,a[r])));ae._data(s,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){ae.data(this,e)}):arguments.length>1?this.each(function(){ae.data(this,e,t)}):s?c(s,e,ae.data(s,e)):void 0},removeData:function(e){return this.each(function(){ae.removeData(this,e)})}}),ae.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ae._data(e,t),n&&(!r||ae.isArray(n)?r=ae._data(e,t,ae.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ae.queue(e,t),r=n.length,a=n.shift(),s=ae._queueHooks(e,t),i=function(){ae.dequeue(e,t)};"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete s.stop,a.call(e,i,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ae._data(e,n)||ae._data(e,n,{empty:ae.Callbacks("once memory").add(function(){ae._removeData(e,t+"queue"),ae._removeData(e,n)})})}}),ae.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ae.queue(this[0],e):void 0===t?this:this.each(function(){var n=ae.queue(this,e,t);ae._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ae.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ae.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=ae.Deferred(),s=this,i=this.length,o=function(){--r||a.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)n=ae._data(s[i],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(o));return o(),a.promise(t)}});var _e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xe=["Top","Right","Bottom","Left"],ke=function(e,t){return e=t||e,"none"===ae.css(e,"display")||!ae.contains(e.ownerDocument,e)},De=ae.access=function(e,t,n,r,a,s,i){var o=0,c=e.length,u=null==n;if("object"===ae.type(n)){a=!0;for(o in n)ae.access(e,t,o,n[o],!0,s,i)}else if(void 0!==r&&(a=!0,ae.isFunction(r)||(i=!0),u&&(i?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(ae(e),n)})),t))for(;c>o;o++)t(e[o],n,i?r:r.call(e[o],o,t(e[o],n)));return a?e:u?t.call(e):c?t(e[0],n):s},Ie=/^(?:checkbox|radio)$/i;!function(){var e=he.createElement("input"),t=he.createElement("div"),n=he.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===t.firstChild.nodeType,ne.tbody=!t.getElementsByTagName("tbody").length,ne.htmlSerialize=!!t.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==he.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),ne.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ne.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(r){ne.deleteExpando=!1}}}(),function(){var t,n,r=he.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(ne[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),ne[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var Me=/^(?:input|select|textarea)$/i,Te=/^key/,Ae=/^(?:mouse|pointer|contextmenu)|click/,Pe=/^(?:focusinfocus|focusoutblur)$/,Oe=/^([^.]*)(?:\.(.+)|)$/;ae.event={global:{},add:function(e,t,n,r,a){var s,i,o,c,u,l,p,m,d,h,f,v=ae._data(e);if(v){for(n.handler&&(c=n,n=c.handler,a=c.selector),n.guid||(n.guid=ae.guid++),(i=v.events)||(i=v.events={}),(l=v.handle)||(l=v.handle=function(e){return typeof ae===Re||e&&ae.event.triggered===e.type?void 0:ae.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(be)||[""],o=t.length;o--;)s=Oe.exec(t[o])||[],
d=f=s[1],h=(s[2]||"").split(".").sort(),d&&(u=ae.event.special[d]||{},d=(a?u.delegateType:u.bindType)||d,u=ae.event.special[d]||{},p=ae.extend({type:d,origType:f,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&ae.expr.match.needsContext.test(a),namespace:h.join(".")},c),(m=i[d])||(m=i[d]=[],m.delegateCount=0,u.setup&&u.setup.call(e,r,h,l)!==!1||(e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l))),u.add&&(u.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),a?m.splice(m.delegateCount++,0,p):m.push(p),ae.event.global[d]=!0);e=null}},remove:function(e,t,n,r,a){var s,i,o,c,u,l,p,m,d,h,f,v=ae.hasData(e)&&ae._data(e);if(v&&(l=v.events)){for(t=(t||"").match(be)||[""],u=t.length;u--;)if(o=Oe.exec(t[u])||[],d=f=o[1],h=(o[2]||"").split(".").sort(),d){for(p=ae.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,m=l[d]||[],o=o[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=s=m.length;s--;)i=m[s],!a&&f!==i.origType||n&&n.guid!==i.guid||o&&!o.test(i.namespace)||r&&r!==i.selector&&("**"!==r||!i.selector)||(m.splice(s,1),i.selector&&m.delegateCount--,p.remove&&p.remove.call(e,i));c&&!m.length&&(p.teardown&&p.teardown.call(e,h,v.handle)!==!1||ae.removeEvent(e,d,v.handle),delete l[d])}else for(d in l)ae.event.remove(e,d+t[u],n,r,!0);ae.isEmptyObject(l)&&(delete v.handle,ae._removeData(e,"events"))}},trigger:function(t,n,r,a){var s,i,o,c,u,l,p,m=[r||he],d=te.call(t,"type")?t.type:t,h=te.call(t,"namespace")?t.namespace.split("."):[];if(o=l=r=r||he,3!==r.nodeType&&8!==r.nodeType&&!Pe.test(d+ae.event.triggered)&&(d.indexOf(".")>=0&&(h=d.split("."),d=h.shift(),h.sort()),i=d.indexOf(":")<0&&"on"+d,t=t[ae.expando]?t:new ae.Event(d,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:ae.makeArray(n,[t]),u=ae.event.special[d]||{},a||!u.trigger||u.trigger.apply(r,n)!==!1)){if(!a&&!u.noBubble&&!ae.isWindow(r)){for(c=u.delegateType||d,Pe.test(c+d)||(o=o.parentNode);o;o=o.parentNode)m.push(o),l=o;l===(r.ownerDocument||he)&&m.push(l.defaultView||l.parentWindow||e)}for(p=0;(o=m[p++])&&!t.isPropagationStopped();)t.type=p>1?c:u.bindType||d,s=(ae._data(o,"events")||{})[t.type]&&ae._data(o,"handle"),s&&s.apply(o,n),s=i&&o[i],s&&s.apply&&ae.acceptData(o)&&(t.result=s.apply(o,n),t.result===!1&&t.preventDefault());if(t.type=d,!a&&!t.isDefaultPrevented()&&(!u._default||u._default.apply(m.pop(),n)===!1)&&ae.acceptData(r)&&i&&r[d]&&!ae.isWindow(r)){l=r[i],l&&(r[i]=null),ae.event.triggered=d;try{r[d]()}catch(f){}ae.event.triggered=void 0,l&&(r[i]=l)}return t.result}},dispatch:function(e){e=ae.event.fix(e);var t,n,r,a,s,i=[],o=X.call(arguments),c=(ae._data(this,"events")||{})[e.type]||[],u=ae.event.special[e.type]||{};if(o[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(i=ae.event.handlers.call(this,e,c),t=0;(a=i[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,s=0;(r=a.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,n=((ae.event.special[r.origType]||{}).handle||r.handler).apply(a.elem,o),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,a,s,i=[],o=t.delegateCount,c=e.target;if(o&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(a=[],s=0;o>s;s++)r=t[s],n=r.selector+" ",void 0===a[n]&&(a[n]=r.needsContext?ae(n,this).index(c)>=0:ae.find(n,this,null,[c]).length),a[n]&&a.push(r);a.length&&i.push({elem:c,handlers:a})}return o<t.length&&i.push({elem:this,handlers:t.slice(o)}),i},fix:function(e){if(e[ae.expando])return e;var t,n,r,a=e.type,s=e,i=this.fixHooks[a];for(i||(this.fixHooks[a]=i=Ae.test(a)?this.mouseHooks:Te.test(a)?this.keyHooks:{}),r=i.props?this.props.concat(i.props):this.props,e=new ae.Event(s),t=r.length;t--;)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||he),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,a,s=t.button,i=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||he,a=r.documentElement,n=r.body,e.pageX=t.clientX+(a&&a.scrollLeft||n&&n.scrollLeft||0)-(a&&a.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(a&&a.scrollTop||n&&n.scrollTop||0)-(a&&a.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&i&&(e.relatedTarget=i===e.target?t.toElement:i),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ae.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ae.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var a=ae.extend(new ae.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?ae.event.trigger(a,null,t):ae.event.dispatch.call(t,a),a.isDefaultPrevented()&&n.preventDefault()}},ae.removeEvent=he.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===Re&&(e[r]=null),e.detachEvent(r,n))},ae.Event=function(e,t){return this instanceof ae.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?m:d):this.type=e,t&&ae.extend(this,t),this.timeStamp=e&&e.timeStamp||ae.now(),void(this[ae.expando]=!0)):new ae.Event(e,t)},ae.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=m,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=m,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=m,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ae.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ae.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,a=e.relatedTarget,s=e.handleObj;return(!a||a!==r&&!ae.contains(r,a))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),ne.submitBubbles||(ae.event.special.submit={setup:function(){return ae.nodeName(this,"form")?!1:void ae.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ae.nodeName(t,"input")||ae.nodeName(t,"button")?t.form:void 0;n&&!ae._data(n,"submitBubbles")&&(ae.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ae._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ae.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ae.nodeName(this,"form")?!1:void ae.event.remove(this,"._submit")}}),ne.changeBubbles||(ae.event.special.change={setup:function(){return Me.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ae.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ae.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ae.event.simulate("change",this,e,!0)})),!1):void ae.event.add(this,"beforeactivate._change",function(e){var t=e.target;Me.test(t.nodeName)&&!ae._data(t,"changeBubbles")&&(ae.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ae.event.simulate("change",this.parentNode,e,!0)}),ae._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ae.event.remove(this,"._change"),!Me.test(this.nodeName)}}),ne.focusinBubbles||ae.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ae.event.simulate(t,e.target,ae.event.fix(e),!0)};ae.event.special[t]={setup:function(){var r=this.ownerDocument||this,a=ae._data(r,t);a||r.addEventListener(e,n,!0),ae._data(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this,a=ae._data(r,t)-1;a?ae._data(r,t,a):(r.removeEventListener(e,n,!0),ae._removeData(r,t))}}}),ae.fn.extend({on:function(e,t,n,r,a){var s,i;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],a);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=d;else if(!r)return this;return 1===a&&(i=r,r=function(e){return ae().off(e),i.apply(this,arguments)},r.guid=i.guid||(i.guid=ae.guid++)),this.each(function(){ae.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ae(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=d),this.each(function(){ae.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){ae.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ae.event.trigger(e,t,n,!0):void 0}});var Le="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Fe=/ jQuery\d+="(?:null|\d+)"/g,Ue=new RegExp("<(?:"+Le+")[\\s/>]","i"),je=/^\s+/,$e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qe=/<([\w:]+)/,Be=/<tbody/i,We=/<|&#?\w+;/,He=/<(?:script|style|link)/i,Ve=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^$|\/(?:java|ecma)script/i,Je=/^true\/(.*)/,Ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Qe=f(he),Ye=Qe.appendChild(he.createElement("div"));Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td,ae.extend({clone:function(e,t,n){var r,a,s,i,o,c=ae.contains(e.ownerDocument,e);if(ne.html5Clone||ae.isXMLDoc(e)||!Ue.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ye.innerHTML=e.outerHTML,Ye.removeChild(s=Ye.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ae.isXMLDoc(e)))for(r=v(s),o=v(e),i=0;null!=(a=o[i]);++i)r[i]&&R(a,r[i]);if(t)if(n)for(o=o||v(e),r=r||v(s),i=0;null!=(a=o[i]);i++)S(a,r[i]);else S(e,s);return r=v(s,"script"),r.length>0&&C(r,!c&&v(e,"script")),r=o=a=null,s},buildFragment:function(e,t,n,r){for(var a,s,i,o,c,u,l,p=e.length,m=f(t),d=[],h=0;p>h;h++)if(s=e[h],s||0===s)if("object"===ae.type(s))ae.merge(d,s.nodeType?[s]:s);else if(We.test(s)){for(o=o||m.appendChild(t.createElement("div")),c=(qe.exec(s)||["",""])[1].toLowerCase(),l=Xe[c]||Xe._default,o.innerHTML=l[1]+s.replace($e,"<$1></$2>")+l[2],a=l[0];a--;)o=o.lastChild;if(!ne.leadingWhitespace&&je.test(s)&&d.push(t.createTextNode(je.exec(s)[0])),!ne.tbody)for(s="table"!==c||Be.test(s)?"<table>"!==l[1]||Be.test(s)?0:o:o.firstChild,a=s&&s.childNodes.length;a--;)ae.nodeName(u=s.childNodes[a],"tbody")&&!u.childNodes.length&&s.removeChild(u);for(ae.merge(d,o.childNodes),o.textContent="";o.firstChild;)o.removeChild(o.firstChild);o=m.lastChild}else d.push(t.createTextNode(s));for(o&&m.removeChild(o),ne.appendChecked||ae.grep(v(d,"input"),g),h=0;s=d[h++];)if((!r||-1===ae.inArray(s,r))&&(i=ae.contains(s.ownerDocument,s),o=v(m.appendChild(s),"script"),i&&C(o),n))for(a=0;s=o[a++];)ze.test(s.type||"")&&n.push(s);return o=null,m},cleanData:function(e,t){for(var n,r,a,s,i=0,o=ae.expando,c=ae.cache,u=ne.deleteExpando,l=ae.event.special;null!=(n=e[i]);i++)if((t||ae.acceptData(n))&&(a=n[o],s=a&&c[a])){if(s.events)for(r in s.events)l[r]?ae.event.remove(n,r):ae.removeEvent(n,r,s.handle);c[a]&&(delete c[a],u?delete n[o]:typeof n.removeAttribute!==Re?n.removeAttribute(o):n[o]=null,K.push(a))}}}),ae.fn.extend({text:function(e){return De(this,function(e){return void 0===e?ae.text(this):this.empty().append((this[0]&&this[0].ownerDocument||he).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?ae.filter(e,this):this,a=0;null!=(n=r[a]);a++)t||1!==n.nodeType||ae.cleanData(v(n)),n.parentNode&&(t&&ae.contains(n.ownerDocument,n)&&C(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ae.cleanData(v(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ae.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ae.clone(this,e,t)})},html:function(e){return De(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Fe,""):void 0;if(!("string"!=typeof e||He.test(e)||!ne.htmlSerialize&&Ue.test(e)||!ne.leadingWhitespace&&je.test(e)||Xe[(qe.exec(e)||["",""])[1].toLowerCase()])){e=e.replace($e,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(ae.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ae.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Q.apply([],e);var n,r,a,s,i,o,c=0,u=this.length,l=this,p=u-1,m=e[0],d=ae.isFunction(m);if(d||u>1&&"string"==typeof m&&!ne.checkClone&&Ve.test(m))return this.each(function(n){var r=l.eq(n);d&&(e[0]=m.call(this,n,r.html())),r.domManip(e,t)});if(u&&(o=ae.buildFragment(e,this[0].ownerDocument,!1,this),n=o.firstChild,1===o.childNodes.length&&(o=n),n)){for(s=ae.map(v(o,"script"),b),a=s.length;u>c;c++)r=o,c!==p&&(r=ae.clone(r,!0,!0),a&&ae.merge(s,v(r,"script"))),t.call(this[c],r,c);if(a)for(i=s[s.length-1].ownerDocument,ae.map(s,E),c=0;a>c;c++)r=s[c],ze.test(r.type||"")&&!ae._data(r,"globalEval")&&ae.contains(i,r)&&(r.src?ae._evalUrl&&ae._evalUrl(r.src):ae.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Ke,"")));o=n=null}return this}}),ae.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ae.fn[e]=function(e){for(var n,r=0,a=[],s=ae(e),i=s.length-1;i>=r;r++)n=r===i?this:this.clone(!0),ae(s[r])[t](n),Y.apply(a,n.get());return this.pushStack(a)}});var Ge,Ze={};!function(){var e;ne.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=he.getElementsByTagName("body")[0],n&&n.style?(t=he.createElement("div"),r=he.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Re&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(he.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var et,tt,nt=/^margin/,rt=new RegExp("^("+_e+")(?!px)[a-z%]+$","i"),at=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},tt=function(e,t,n){var r,a,s,i,o=e.style;return n=n||et(e),i=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==i||ae.contains(e.ownerDocument,e)||(i=ae.style(e,t)),rt.test(i)&&nt.test(t)&&(r=o.width,a=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=i,i=n.width,o.width=r,o.minWidth=a,o.maxWidth=s)),void 0===i?i:i+""}):he.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,n){var r,a,s,i,o=e.style;return n=n||et(e),i=n?n[t]:void 0,null==i&&o&&o[t]&&(i=o[t]),rt.test(i)&&!at.test(t)&&(r=o.left,a=e.runtimeStyle,s=a&&a.left,s&&(a.left=e.currentStyle.left),o.left="fontSize"===t?"1em":i,i=o.pixelLeft+"px",o.left=r,s&&(a.left=s)),void 0===i?i:i+""||"auto"}),!function(){function t(){var t,n,r,a;n=he.getElementsByTagName("body")[0],n&&n.style&&(t=he.createElement("div"),r=he.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s=i=!1,c=!0,e.getComputedStyle&&(s="1%"!==(e.getComputedStyle(t,null)||{}).top,i="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,a=t.appendChild(he.createElement("div")),a.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",t.style.width="1px",c=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight),t.removeChild(a)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=t.getElementsByTagName("td"),a[0].style.cssText="margin:0;border:0;padding:0;display:none",o=0===a[0].offsetHeight,o&&(a[0].style.display="",a[1].style.display="none",o=0===a[0].offsetHeight),n.removeChild(r))}var n,r,a,s,i,o,c;n=he.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=n.getElementsByTagName("a")[0],(r=a&&a.style)&&(r.cssText="float:left;opacity:.5",ne.opacity="0.5"===r.opacity,ne.cssFloat=!!r.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===r.boxSizing||""===r.MozBoxSizing||""===r.WebkitBoxSizing,ae.extend(ne,{reliableHiddenOffsets:function(){return null==o&&t(),o},boxSizingReliable:function(){return null==i&&t(),i},pixelPosition:function(){return null==s&&t(),s},reliableMarginRight:function(){return null==c&&t(),c}}))}(),ae.swap=function(e,t,n,r){var a,s,i={};for(s in t)i[s]=e.style[s],e.style[s]=t[s];a=n.apply(e,r||[]);for(s in t)e.style[s]=i[s];return a};var st=/alpha\([^)]*\)/i,it=/opacity\s*=\s*([^)]*)/,ot=/^(none|table(?!-c[ea]).+)/,ct=new RegExp("^("+_e+")(.*)$","i"),ut=new RegExp("^([+-])=("+_e+")","i"),lt={position:"absolute",visibility:"hidden",display:"block"},pt={letterSpacing:"0",fontWeight:"400"},mt=["Webkit","O","Moz","ms"];ae.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,s,i,o=ae.camelCase(t),c=e.style;if(t=ae.cssProps[o]||(ae.cssProps[o]=x(c,o)),i=ae.cssHooks[t]||ae.cssHooks[o],void 0===n)return i&&"get"in i&&void 0!==(a=i.get(e,!1,r))?a:c[t];if(s=typeof n,"string"===s&&(a=ut.exec(n))&&(n=(a[1]+1)*a[2]+parseFloat(ae.css(e,t)),s="number"),null!=n&&n===n&&("number"!==s||ae.cssNumber[o]||(n+="px"),ne.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),!(i&&"set"in i&&void 0===(n=i.set(e,n,r)))))try{c[t]=n}catch(u){}}},css:function(e,t,n,r){var a,s,i,o=ae.camelCase(t);return t=ae.cssProps[o]||(ae.cssProps[o]=x(e.style,o)),i=ae.cssHooks[t]||ae.cssHooks[o],i&&"get"in i&&(s=i.get(e,!0,n)),void 0===s&&(s=tt(e,t,r)),"normal"===s&&t in pt&&(s=pt[t]),""===n||n?(a=parseFloat(s),n===!0||ae.isNumeric(a)?a||0:s):s}}),ae.each(["height","width"],function(e,t){ae.cssHooks[t]={get:function(e,n,r){return n?ot.test(ae.css(e,"display"))&&0===e.offsetWidth?ae.swap(e,lt,function(){return M(e,t,r)}):M(e,t,r):void 0},set:function(e,n,r){var a=r&&et(e);return D(e,n,r?I(e,t,r,ne.boxSizing&&"border-box"===ae.css(e,"boxSizing",!1,a),a):0)}}}),ne.opacity||(ae.cssHooks.opacity={get:function(e,t){return it.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,a=ae.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ae.trim(s.replace(st,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=st.test(s)?s.replace(st,a):s+" "+a)}}),ae.cssHooks.marginRight=_(ne.reliableMarginRight,function(e,t){return t?ae.swap(e,{display:"inline-block"},tt,[e,"marginRight"]):void 0}),ae.each({margin:"",padding:"",border:"Width"},function(e,t){ae.cssHooks[e+t]={expand:function(n){for(var r=0,a={},s="string"==typeof n?n.split(" "):[n];4>r;r++)a[e+xe[r]+t]=s[r]||s[r-2]||s[0];return a}},nt.test(e)||(ae.cssHooks[e+t].set=D)}),ae.fn.extend({css:function(e,t){return De(this,function(e,t,n){var r,a,s={},i=0;if(ae.isArray(t)){for(r=et(e),a=t.length;a>i;i++)s[t[i]]=ae.css(e,t[i],!1,r);return s}return void 0!==n?ae.style(e,t,n):ae.css(e,t)},e,t,arguments.length>1)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ke(this)?ae(this).show():ae(this).hide()})}}),ae.Tween=T,T.prototype={constructor:T,init:function(e,t,n,r,a,s){this.elem=e,this.prop=n,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(ae.cssNumber[n]?"":"px")},cur:function(){var e=T.propHooks[this.prop];return e&&e.get?e.get(this):T.propHooks._default.get(this)},run:function(e){var t,n=T.propHooks[this.prop];return this.options.duration?this.pos=t=ae.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):T.propHooks._default.set(this),this}},T.prototype.init.prototype=T.prototype,T.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ae.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ae.fx.step[e.prop]?ae.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ae.cssProps[e.prop]]||ae.cssHooks[e.prop])?ae.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ae.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ae.fx=T.prototype.init,ae.fx.step={};var dt,ht,ft=/^(?:toggle|show|hide)$/,vt=new RegExp("^(?:([+-])=|)("+_e+")([a-z%]*)$","i"),gt=/queueHooks$/,yt=[L],bt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),a=vt.exec(t),s=a&&a[3]||(ae.cssNumber[e]?"":"px"),i=(ae.cssNumber[e]||"px"!==s&&+r)&&vt.exec(ae.css(n.elem,e)),o=1,c=20;if(i&&i[3]!==s){s=s||i[3],a=a||[],i=+r||1;do o=o||".5",i/=o,ae.style(n.elem,e,i+s);while(o!==(o=n.cur()/r)&&1!==o&&--c)}return a&&(i=n.start=+i||+r||0,n.unit=s,n.end=a[1]?i+(a[1]+1)*a[2]:+a[2]),n}]};ae.Animation=ae.extend(U,{tweener:function(e,t){ae.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,a=e.length;a>r;r++)n=e[r],bt[n]=bt[n]||[],bt[n].unshift(t)},prefilter:function(e,t){t?yt.unshift(e):yt.push(e)}}),ae.speed=function(e,t,n){var r=e&&"object"==typeof e?ae.extend({},e):{complete:n||!n&&t||ae.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ae.isFunction(t)&&t};return r.duration=ae.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ae.fx.speeds?ae.fx.speeds[r.duration]:ae.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){ae.isFunction(r.old)&&r.old.call(this),r.queue&&ae.dequeue(this,r.queue)},r},ae.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ke).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=ae.isEmptyObject(e),s=ae.speed(t,n,r),i=function(){var t=U(this,ae.extend({},e),s);(a||ae._data(this,"finish"))&&t.stop(!0)};return i.finish=i,a||s.queue===!1?this.each(i):this.queue(s.queue,i)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",s=ae.timers,i=ae._data(this);if(a)i[a]&&i[a].stop&&r(i[a]);else for(a in i)i[a]&&i[a].stop&&gt.test(a)&&r(i[a]);for(a=s.length;a--;)s[a].elem!==this||null!=e&&s[a].queue!==e||(s[a].anim.stop(n),t=!1,s.splice(a,1));(t||!n)&&ae.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ae._data(this),r=n[e+"queue"],a=n[e+"queueHooks"],s=ae.timers,i=r?r.length:0;for(n.finish=!0,ae.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;i>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ae.each(["toggle","show","hide"],function(e,t){var n=ae.fn[t];ae.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(P(t,!0),e,r,a)}}),ae.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ae.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ae.timers=[],ae.fx.tick=function(){var e,t=ae.timers,n=0;for(dt=ae.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||ae.fx.stop(),dt=void 0},ae.fx.timer=function(e){ae.timers.push(e),e()?ae.fx.start():ae.timers.pop()},ae.fx.interval=13,ae.fx.start=function(){ht||(ht=setInterval(ae.fx.tick,ae.fx.interval))},ae.fx.stop=function(){clearInterval(ht),ht=null},ae.fx.speeds={slow:600,fast:200,_default:400},ae.fn.delay=function(e,t){return e=ae.fx?ae.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,a;t=he.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=he.createElement("select"),a=n.appendChild(he.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",ne.getSetAttribute="t"!==t.className,ne.style=/top/.test(r.getAttribute("style")),ne.hrefNormalized="/a"===r.getAttribute("href"),ne.checkOn=!!e.value,ne.optSelected=a.selected,ne.enctype=!!he.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!a.disabled,e=he.createElement("input"),e.setAttribute("value",""),ne.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ne.radioValue="t"===e.value}();var Et=/\r/g;ae.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=ae.isFunction(e),this.each(function(n){var a;1===this.nodeType&&(a=r?e.call(this,n,ae(this).val()):e,null==a?a="":"number"==typeof a?a+="":ae.isArray(a)&&(a=ae.map(a,function(e){return null==e?"":e+""})),t=ae.valHooks[this.type]||ae.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))})):a?(t=ae.valHooks[a.type]||ae.valHooks[a.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:(n=a.value,"string"==typeof n?n.replace(Et,""):null==n?"":n)):void 0}}),ae.extend({valHooks:{option:{get:function(e){var t=ae.find.attr(e,"value");return null!=t?t:ae.trim(ae.text(e))}},select:{get:function(e){for(var t,n,r=e.options,a=e.selectedIndex,s="select-one"===e.type||0>a,i=s?null:[],o=s?a+1:r.length,c=0>a?o:s?a:0;o>c;c++)if(n=r[c],!(!n.selected&&c!==a||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ae.nodeName(n.parentNode,"optgroup"))){if(t=ae(n).val(),s)return t;i.push(t)}return i},set:function(e,t){for(var n,r,a=e.options,s=ae.makeArray(t),i=a.length;i--;)if(r=a[i],ae.inArray(ae.valHooks.option.get(r),s)>=0)try{r.selected=n=!0}catch(o){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),a}}}}),ae.each(["radio","checkbox"],function(){ae.valHooks[this]={set:function(e,t){return ae.isArray(t)?e.checked=ae.inArray(ae(e).val(),t)>=0:void 0}},ne.checkOn||(ae.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Ct,St,Rt=ae.expr.attrHandle,Nt=/^(?:checked|selected)$/i,wt=ne.getSetAttribute,_t=ne.input;ae.fn.extend({attr:function(e,t){return De(this,ae.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ae.removeAttr(this,e)})}}),ae.extend({attr:function(e,t,n){var r,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?typeof e.getAttribute===Re?ae.prop(e,t,n):(1===s&&ae.isXMLDoc(e)||(t=t.toLowerCase(),r=ae.attrHooks[t]||(ae.expr.match.bool.test(t)?St:Ct)),void 0===n?r&&"get"in r&&null!==(a=r.get(e,t))?a:(a=ae.find.attr(e,t),null==a?void 0:a):null!==n?r&&"set"in r&&void 0!==(a=r.set(e,n,t))?a:(e.setAttribute(t,n+""),n):void ae.removeAttr(e,t)):void 0},removeAttr:function(e,t){var n,r,a=0,s=t&&t.match(be);if(s&&1===e.nodeType)for(;n=s[a++];)r=ae.propFix[n]||n,ae.expr.match.bool.test(n)?_t&&wt||!Nt.test(n)?e[r]=!1:e[ae.camelCase("default-"+n)]=e[r]=!1:ae.attr(e,n,""),e.removeAttribute(wt?n:r)},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&ae.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),St={set:function(e,t,n){return t===!1?ae.removeAttr(e,n):_t&&wt||!Nt.test(n)?e.setAttribute(!wt&&ae.propFix[n]||n,n):e[ae.camelCase("default-"+n)]=e[n]=!0,n}},ae.each(ae.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Rt[t]||ae.find.attr;Rt[t]=_t&&wt||!Nt.test(t)?function(e,t,r){var a,s;return r||(s=Rt[t],Rt[t]=a,a=null!=n(e,t,r)?t.toLowerCase():null,Rt[t]=s),a}:function(e,t,n){return n?void 0:e[ae.camelCase("default-"+t)]?t.toLowerCase():null}}),_t&&wt||(ae.attrHooks.value={set:function(e,t,n){return ae.nodeName(e,"input")?void(e.defaultValue=t):Ct&&Ct.set(e,t,n)}}),wt||(Ct={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Rt.id=Rt.name=Rt.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null;
},ae.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:Ct.set},ae.attrHooks.contenteditable={set:function(e,t,n){Ct.set(e,""===t?!1:t,n)}},ae.each(["width","height"],function(e,t){ae.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ne.style||(ae.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var xt=/^(?:input|select|textarea|button|object)$/i,kt=/^(?:a|area)$/i;ae.fn.extend({prop:function(e,t){return De(this,ae.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ae.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),ae.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,a,s,i=e.nodeType;return e&&3!==i&&8!==i&&2!==i?(s=1!==i||!ae.isXMLDoc(e),s&&(t=ae.propFix[t]||t,a=ae.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]):void 0},propHooks:{tabIndex:{get:function(e){var t=ae.find.attr(e,"tabindex");return t?parseInt(t,10):xt.test(e.nodeName)||kt.test(e.nodeName)&&e.href?0:-1}}}}),ne.hrefNormalized||ae.each(["href","src"],function(e,t){ae.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ne.optSelected||(ae.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ae.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ae.propFix[this.toLowerCase()]=this}),ne.enctype||(ae.propFix.enctype="encoding");var Dt=/[\t\r\n\f]/g;ae.fn.extend({addClass:function(e){var t,n,r,a,s,i,o=0,c=this.length,u="string"==typeof e&&e;if(ae.isFunction(e))return this.each(function(t){ae(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(be)||[];c>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dt," "):" ")){for(s=0;a=t[s++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i=ae.trim(r),n.className!==i&&(n.className=i)}return this},removeClass:function(e){var t,n,r,a,s,i,o=0,c=this.length,u=0===arguments.length||"string"==typeof e&&e;if(ae.isFunction(e))return this.each(function(t){ae(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(be)||[];c>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dt," "):"")){for(s=0;a=t[s++];)for(;r.indexOf(" "+a+" ")>=0;)r=r.replace(" "+a+" "," ");i=e?ae.trim(r):"",n.className!==i&&(n.className=i)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(ae.isFunction(e)?function(n){ae(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,a=ae(this),s=e.match(be)||[];t=s[r++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else(n===Re||"boolean"===n)&&(this.className&&ae._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ae._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Dt," ").indexOf(t)>=0)return!0;return!1}}),ae.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ae.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ae.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var It=ae.now(),Mt=/\?/,Tt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ae.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,a=ae.trim(t+"");return a&&!ae.trim(a.replace(Tt,function(e,t,a,s){return n&&t&&(r=0),0===r?e:(n=a||t,r+=!s-!a,"")}))?Function("return "+a)():ae.error("Invalid JSON: "+t)},ae.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(a){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ae.error("Invalid XML: "+t),n};var At,Pt,Ot=/#.*$/,Lt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ut=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jt=/^(?:GET|HEAD)$/,$t=/^\/\//,qt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Bt={},Wt={},Ht="*/".concat("*");try{Pt=location.href}catch(Vt){Pt=he.createElement("a"),Pt.href="",Pt=Pt.href}At=qt.exec(Pt.toLowerCase())||[],ae.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pt,type:"GET",isLocal:Ut.test(At[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ae.parseJSON,"text xml":ae.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?q(q(e,ae.ajaxSettings),t):q(ae.ajaxSettings,e)},ajaxPrefilter:j(Bt),ajaxTransport:j(Wt),ajax:function(e,t){function n(e,t,n,r){var a,l,g,y,E,S=t;2!==b&&(b=2,o&&clearTimeout(o),u=void 0,i=r||"",C.readyState=e>0?4:0,a=e>=200&&300>e||304===e,n&&(y=B(p,C,n)),y=W(p,y,C,a),a?(p.ifModified&&(E=C.getResponseHeader("Last-Modified"),E&&(ae.lastModified[s]=E),E=C.getResponseHeader("etag"),E&&(ae.etag[s]=E)),204===e||"HEAD"===p.type?S="nocontent":304===e?S="notmodified":(S=y.state,l=y.data,g=y.error,a=!g)):(g=S,(e||!S)&&(S="error",0>e&&(e=0))),C.status=e,C.statusText=(t||S)+"",a?h.resolveWith(m,[l,S,C]):h.rejectWith(m,[C,S,g]),C.statusCode(v),v=void 0,c&&d.trigger(a?"ajaxSuccess":"ajaxError",[C,p,a?l:g]),f.fireWith(m,[C,S]),c&&(d.trigger("ajaxComplete",[C,p]),--ae.active||ae.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,a,s,i,o,c,u,l,p=ae.ajaxSetup({},t),m=p.context||p,d=p.context&&(m.nodeType||m.jquery)?ae(m):ae.event,h=ae.Deferred(),f=ae.Callbacks("once memory"),v=p.statusCode||{},g={},y={},b=0,E="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!l)for(l={};t=Ft.exec(i);)l[t[1].toLowerCase()]=t[2];t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||E;return u&&u.abort(t),n(0,t),this}};if(h.promise(C).complete=f.add,C.success=C.done,C.error=C.fail,p.url=((e||p.url||Pt)+"").replace(Ot,"").replace($t,At[1]+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=ae.trim(p.dataType||"*").toLowerCase().match(be)||[""],null==p.crossDomain&&(r=qt.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===At[1]&&r[2]===At[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(At[3]||("http:"===At[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ae.param(p.data,p.traditional)),$(Bt,p,t,C),2===b)return C;c=ae.event&&p.global,c&&0===ae.active++&&ae.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!jt.test(p.type),s=p.url,p.hasContent||(p.data&&(s=p.url+=(Mt.test(s)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=Lt.test(s)?s.replace(Lt,"$1_="+It++):s+(Mt.test(s)?"&":"?")+"_="+It++)),p.ifModified&&(ae.lastModified[s]&&C.setRequestHeader("If-Modified-Since",ae.lastModified[s]),ae.etag[s]&&C.setRequestHeader("If-None-Match",ae.etag[s])),(p.data&&p.hasContent&&p.contentType!==!1||t.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ht+"; q=0.01":""):p.accepts["*"]);for(a in p.headers)C.setRequestHeader(a,p.headers[a]);if(p.beforeSend&&(p.beforeSend.call(m,C,p)===!1||2===b))return C.abort();E="abort";for(a in{success:1,error:1,complete:1})C[a](p[a]);if(u=$(Wt,p,t,C)){C.readyState=1,c&&d.trigger("ajaxSend",[C,p]),p.async&&p.timeout>0&&(o=setTimeout(function(){C.abort("timeout")},p.timeout));try{b=1,u.send(g,n)}catch(S){if(!(2>b))throw S;n(-1,S)}}else n(-1,"No Transport");return C},getJSON:function(e,t,n){return ae.get(e,t,n,"json")},getScript:function(e,t){return ae.get(e,void 0,t,"script")}}),ae.each(["get","post"],function(e,t){ae[t]=function(e,n,r,a){return ae.isFunction(n)&&(a=a||r,r=n,n=void 0),ae.ajax({url:e,type:t,dataType:a,data:n,success:r})}}),ae._evalUrl=function(e){return ae.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ae.fn.extend({wrapAll:function(e){if(ae.isFunction(e))return this.each(function(t){ae(this).wrapAll(e.call(this,t))});if(this[0]){var t=ae(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(ae.isFunction(e)?function(t){ae(this).wrapInner(e.call(this,t))}:function(){var t=ae(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ae.isFunction(e);return this.each(function(n){ae(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ae.nodeName(this,"body")||ae(this).replaceWith(this.childNodes)}).end()}}),ae.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ae.css(e,"display"))},ae.expr.filters.visible=function(e){return!ae.expr.filters.hidden(e)};var zt=/%20/g,Jt=/\[\]$/,Kt=/\r?\n/g,Xt=/^(?:submit|button|image|reset|file)$/i,Qt=/^(?:input|select|textarea|keygen)/i;ae.param=function(e,t){var n,r=[],a=function(e,t){t=ae.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ae.ajaxSettings&&ae.ajaxSettings.traditional),ae.isArray(e)||e.jquery&&!ae.isPlainObject(e))ae.each(e,function(){a(this.name,this.value)});else for(n in e)H(n,e[n],t,a);return r.join("&").replace(zt,"+")},ae.fn.extend({serialize:function(){return ae.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ae.prop(this,"elements");return e?ae.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ae(this).is(":disabled")&&Qt.test(this.nodeName)&&!Xt.test(e)&&(this.checked||!Ie.test(e))}).map(function(e,t){var n=ae(this).val();return null==n?null:ae.isArray(n)?ae.map(n,function(e){return{name:t.name,value:e.replace(Kt,"\r\n")}}):{name:t.name,value:n.replace(Kt,"\r\n")}}).get()}}),ae.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&V()||z()}:V;var Yt=0,Gt={},Zt=ae.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Gt)Gt[e](void 0,!0)}),ne.cors=!!Zt&&"withCredentials"in Zt,Zt=ne.ajax=!!Zt,Zt&&ae.ajaxTransport(function(e){if(!e.crossDomain||ne.cors){var t;return{send:function(n,r){var a,s=e.xhr(),i=++Yt;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(a in n)void 0!==n[a]&&s.setRequestHeader(a,n[a]+"");s.send(e.hasContent&&e.data||null),t=function(n,a){var o,c,u;if(t&&(a||4===s.readyState))if(delete Gt[i],t=void 0,s.onreadystatechange=ae.noop,a)4!==s.readyState&&s.abort();else{u={},o=s.status,"string"==typeof s.responseText&&(u.text=s.responseText);try{c=s.statusText}catch(l){c=""}o||!e.isLocal||e.crossDomain?1223===o&&(o=204):o=u.text?200:404}u&&r(o,c,u,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=Gt[i]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ae.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ae.globalEval(e),e}}}),ae.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ae.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=he.head||ae("head")[0]||he.documentElement;return{send:function(r,a){t=he.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||a(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;ae.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||ae.expando+"_"+It++;return this[e]=!0,e}}),ae.ajaxPrefilter("json jsonp",function(t,n,r){var a,s,i,o=t.jsonp!==!1&&(tn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(a=t.jsonpCallback=ae.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(tn,"$1"+a):t.jsonp!==!1&&(t.url+=(Mt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return i||ae.error(a+" was not called"),i[0]},t.dataTypes[0]="json",s=e[a],e[a]=function(){i=arguments},r.always(function(){e[a]=s,t[a]&&(t.jsonpCallback=n.jsonpCallback,en.push(a)),i&&ae.isFunction(s)&&s(i[0]),i=s=void 0}),"script"):void 0}),ae.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||he;var r=pe.exec(e),a=!n&&[];return r?[t.createElement(r[1])]:(r=ae.buildFragment([e],t,a),a&&a.length&&ae(a).remove(),ae.merge([],r.childNodes))};var nn=ae.fn.load;ae.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var r,a,s,i=this,o=e.indexOf(" ");return o>=0&&(r=ae.trim(e.slice(o,e.length)),e=e.slice(0,o)),ae.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(s="POST"),i.length>0&&ae.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){a=arguments,i.html(r?ae("<div>").append(ae.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){i.each(n,a||[e.responseText,t,e])}),this},ae.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ae.fn[t]=function(e){return this.on(t,e)}}),ae.expr.filters.animated=function(e){return ae.grep(ae.timers,function(t){return e===t.elem}).length};var rn=e.document.documentElement;ae.offset={setOffset:function(e,t,n){var r,a,s,i,o,c,u,l=ae.css(e,"position"),p=ae(e),m={};"static"===l&&(e.style.position="relative"),o=p.offset(),s=ae.css(e,"top"),c=ae.css(e,"left"),u=("absolute"===l||"fixed"===l)&&ae.inArray("auto",[s,c])>-1,u?(r=p.position(),i=r.top,a=r.left):(i=parseFloat(s)||0,a=parseFloat(c)||0),ae.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(m.top=t.top-o.top+i),null!=t.left&&(m.left=t.left-o.left+a),"using"in t?t.using.call(e,m):p.css(m)}},ae.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ae.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},a=this[0],s=a&&a.ownerDocument;return s?(t=s.documentElement,ae.contains(t,a)?(typeof a.getBoundingClientRect!==Re&&(r=a.getBoundingClientRect()),n=J(s),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===ae.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ae.nodeName(e[0],"html")||(n=e.offset()),n.top+=ae.css(e[0],"borderTopWidth",!0),n.left+=ae.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ae.css(r,"marginTop",!0),left:t.left-n.left-ae.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||rn;e&&!ae.nodeName(e,"html")&&"static"===ae.css(e,"position");)e=e.offsetParent;return e||rn})}}),ae.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ae.fn[e]=function(r){return De(this,function(e,r,a){var s=J(e);return void 0===a?s?t in s?s[t]:s.document.documentElement[r]:e[r]:void(s?s.scrollTo(n?ae(s).scrollLeft():a,n?a:ae(s).scrollTop()):e[r]=a)},e,r,arguments.length,null)}}),ae.each(["top","left"],function(e,t){ae.cssHooks[t]=_(ne.pixelPosition,function(e,n){return n?(n=tt(e,t),rt.test(n)?ae(e).position()[t]+"px":n):void 0})}),ae.each({Height:"height",Width:"width"},function(e,t){ae.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ae.fn[r]=function(r,a){var s=arguments.length&&(n||"boolean"!=typeof r),i=n||(r===!0||a===!0?"margin":"border");return De(this,function(t,n,r){var a;return ae.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===r?ae.css(t,n,i):ae.style(t,n,r,i)},t,s?r:void 0,s,null)}})}),ae.fn.size=function(){return this.length},ae.fn.andSelf=ae.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ae});var an=e.jQuery,sn=e.$;return ae.noConflict=function(t){return e.$===ae&&(e.$=sn),t&&e.jQuery===ae&&(e.jQuery=an),ae},typeof t===Re&&(e.jQuery=e.$=ae),ae}),function(e,t,n,r){function a(t,n){this.element=t,this.settings=e.extend({},i,n),this._defaults=i,this._name=s,this.init()}var s="metisMenu",i={toggle:!0};a.prototype={init:function(){var t=e(this.element),n=this.settings.toggle;t.find("li.active").has("ul").children("ul").addClass("collapse in"),t.find("li").not(".active").has("ul").children("ul").addClass("collapse"),t.find("li").has("ul").children("a").on("click",function(t){t.preventDefault(),e(this).children("span").hasClass("fa-plus-square-o")?e(this).children("span").removeClass("fa-plus-square-o").addClass("fa-minus-square-o"):e(this).children("span").removeClass("fa-minus-square-o").addClass("fa-plus-square-o"),e(this).parent("li").toggleClass("active").children("ul").collapse("toggle"),n&&e(this).parent("li").siblings().removeClass("active").children("ul.in").collapse("hide")})}},e.fn[s]=function(t){return this.each(function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new a(this,t))})}}(jQuery,window,document);